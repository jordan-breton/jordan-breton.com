(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}})();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const yr="179",Yr={ROTATE:0,DOLLY:1,PAN:2},Xr={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},bp=0,Au=1,Tp=2,f0=1,Sp=2,Zs=3,ds=0,ai=1,si=2,di=0,Qr=1,Jl=2,Mu=3,Iu=4,Ep=5,or=100,Ap=101,Mp=102,Ip=103,Cp=104,Dp=200,Rp=201,Op=202,Np=203,Gc=204,qc=205,Lp=206,Fp=207,kp=208,Vp=209,Up=210,Bp=211,Wp=212,Gp=213,qp=214,Hc=0,Xc=1,jc=2,hn=3,Zc=4,Jc=5,Kc=6,Yc=7,t_=0,Hp=1,Xp=2,ia=0,jp=1,Zp=2,Jp=3,Kp=4,Yp=5,Qp=6,$p=7,Cu="attached",em="detached",v0=300,cn=301,dn=302,Kl=303,Qc=304,gh=306,rt=1e3,rs=1001,Yl=1002,it=1003,g0=1004,so=1005,yt=1006,Nl=1007,ms=1008,tm=1008,$t=1009,x0=1010,p0=1011,vo=1012,i_=1013,Na=1014,Et=1015,ns=1016,s_=1017,a_=1018,_n=1020,m0=35902,y0=1021,w0=1022,At=1023,go=1026,un=1027,r_=1028,n_=1029,z0=1030,o_=1031,l_=1033,Ll=33776,Fl=33777,kl=33778,Vl=33779,$c=35840,ed=35841,td=35842,id=35843,sd=36196,ad=37492,rd=37496,nd=37808,od=37809,ld=37810,hd=37811,cd=37812,dd=37813,_d=37814,ud=37815,fd=37816,vd=37817,gd=37818,xd=37819,pd=37820,md=37821,Ul=36492,yd=36494,wd=36495,P0=36283,zd=36284,Pd=36285,bd=36286,xo=2300,po=2301,Ch=2302,Du=2400,Ru=2401,Ou=2402,im=2500,sm=0,b0=1,Td=2,da=3200,am=3201,xh=0,rm=1,Ms="",Ge="srgb",Ot="srgb-linear",Ql="linear",pt="srgb",Sr=7680,Nu=519,nm=512,om=513,lm=514,T0=515,hm=516,cm=517,dm=518,_m=519,Sd=35044,Lu="300 es",Cs=2e3,$l=2001;class ks{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const a=i[e];if(a!==void 0){const r=a.indexOf(t);r!==-1&&a.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const a=i.slice(0);for(let r=0,n=a.length;r<n;r++)a[r].call(this,e);e.target=null}}}const vi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Fu=1234567;const oo=Math.PI/180,fn=180/Math.PI;function zs(){const s=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(vi[s&255]+vi[s>>8&255]+vi[s>>16&255]+vi[s>>24&255]+"-"+vi[e&255]+vi[e>>8&255]+"-"+vi[e>>16&15|64]+vi[e>>24&255]+"-"+vi[t&63|128]+vi[t>>8&255]+"-"+vi[t>>16&255]+vi[t>>24&255]+vi[i&255]+vi[i>>8&255]+vi[i>>16&255]+vi[i>>24&255]).toLowerCase()}function Ue(s,e,t){return Math.max(e,Math.min(t,s))}function h_(s,e){return(s%e+e)%e}function um(s,e,t,i,a){return i+(s-e)*(a-i)/(t-e)}function fm(s,e,t){return s!==e?(t-s)/(e-s):0}function lo(s,e,t){return(1-t)*s+t*e}function vm(s,e,t,i){return lo(s,e,1-Math.exp(-t*i))}function gm(s,e=1){return e-Math.abs(h_(s,e*2)-e)}function xm(s,e,t){return s<=e?0:s>=t?1:(s=(s-e)/(t-e),s*s*(3-2*s))}function pm(s,e,t){return s<=e?0:s>=t?1:(s=(s-e)/(t-e),s*s*s*(s*(s*6-15)+10))}function mm(s,e){return s+Math.floor(Math.random()*(e-s+1))}function ym(s,e){return s+Math.random()*(e-s)}function wm(s){return s*(.5-Math.random())}function zm(s){s!==void 0&&(Fu=s);let e=Fu+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Pm(s){return s*oo}function bm(s){return s*fn}function Tm(s){return(s&s-1)===0&&s!==0}function Sm(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function Em(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}function Am(s,e,t,i,a){const r=Math.cos,n=Math.sin,o=r(t/2),l=n(t/2),h=r((e+i)/2),c=n((e+i)/2),d=r((e-i)/2),_=n((e-i)/2),u=r((i-e)/2),x=n((i-e)/2);switch(a){case"XYX":s.set(o*c,l*d,l*_,o*h);break;case"YZY":s.set(l*_,o*c,l*d,o*h);break;case"ZXZ":s.set(l*d,l*_,o*c,o*h);break;case"XZX":s.set(o*c,l*x,l*u,o*h);break;case"YXY":s.set(l*u,o*c,l*x,o*h);break;case"ZYZ":s.set(l*x,l*u,o*c,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function ps(s,e){switch(e.constructor){case Float32Array:return s;case Uint32Array:return s/4294967295;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int32Array:return Math.max(s/2147483647,-1);case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("Invalid component type.")}}function ft(s,e){switch(e.constructor){case Float32Array:return s;case Uint32Array:return Math.round(s*4294967295);case Uint16Array:return Math.round(s*65535);case Uint8Array:return Math.round(s*255);case Int32Array:return Math.round(s*2147483647);case Int16Array:return Math.round(s*32767);case Int8Array:return Math.round(s*127);default:throw new Error("Invalid component type.")}}const sa={DEG2RAD:oo,RAD2DEG:fn,generateUUID:zs,clamp:Ue,euclideanModulo:h_,mapLinear:um,inverseLerp:fm,lerp:lo,damp:vm,pingpong:gm,smoothstep:xm,smootherstep:pm,randInt:mm,randFloat:ym,randFloatSpread:wm,seededRandom:zm,degToRad:Pm,radToDeg:bm,isPowerOfTwo:Tm,ceilPowerOfTwo:Sm,floorPowerOfTwo:Em,setQuaternionFromProperEuler:Am,normalize:ft,denormalize:ps};class ${constructor(e=0,t=0){$.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6],this.y=a[1]*t+a[4]*i+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Ue(this.x,e.x,t.x),this.y=Ue(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Ue(this.x,e,t),this.y=Ue(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ue(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ue(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),a=Math.sin(t),r=this.x-e.x,n=this.y-e.y;return this.x=r*i-n*a+e.x,this.y=r*a+n*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ji{constructor(e=0,t=0,i=0,a=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=a}static slerpFlat(e,t,i,a,r,n,o){let l=i[a+0],h=i[a+1],c=i[a+2],d=i[a+3];const _=r[n+0],u=r[n+1],x=r[n+2],g=r[n+3];if(o===0){e[t+0]=l,e[t+1]=h,e[t+2]=c,e[t+3]=d;return}if(o===1){e[t+0]=_,e[t+1]=u,e[t+2]=x,e[t+3]=g;return}if(d!==g||l!==_||h!==u||c!==x){let v=1-o;const f=l*_+h*u+c*x+d*g,y=f>=0?1:-1,w=1-f*f;if(w>Number.EPSILON){const b=Math.sqrt(w),M=Math.atan2(b,f*y);v=Math.sin(v*M)/b,o=Math.sin(o*M)/b}const p=o*y;if(l=l*v+_*p,h=h*v+u*p,c=c*v+x*p,d=d*v+g*p,v===1-o){const b=1/Math.sqrt(l*l+h*h+c*c+d*d);l*=b,h*=b,c*=b,d*=b}}e[t]=l,e[t+1]=h,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,a,r,n){const o=i[a],l=i[a+1],h=i[a+2],c=i[a+3],d=r[n],_=r[n+1],u=r[n+2],x=r[n+3];return e[t]=o*x+c*d+l*u-h*_,e[t+1]=l*x+c*_+h*d-o*u,e[t+2]=h*x+c*u+o*_-l*d,e[t+3]=c*x-o*d-l*_-h*u,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,a){return this._x=e,this._y=t,this._z=i,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,a=e._y,r=e._z,n=e._order,o=Math.cos,l=Math.sin,h=o(i/2),c=o(a/2),d=o(r/2),_=l(i/2),u=l(a/2),x=l(r/2);switch(n){case"XYZ":this._x=_*c*d+h*u*x,this._y=h*u*d-_*c*x,this._z=h*c*x+_*u*d,this._w=h*c*d-_*u*x;break;case"YXZ":this._x=_*c*d+h*u*x,this._y=h*u*d-_*c*x,this._z=h*c*x-_*u*d,this._w=h*c*d+_*u*x;break;case"ZXY":this._x=_*c*d-h*u*x,this._y=h*u*d+_*c*x,this._z=h*c*x+_*u*d,this._w=h*c*d-_*u*x;break;case"ZYX":this._x=_*c*d-h*u*x,this._y=h*u*d+_*c*x,this._z=h*c*x-_*u*d,this._w=h*c*d+_*u*x;break;case"YZX":this._x=_*c*d+h*u*x,this._y=h*u*d+_*c*x,this._z=h*c*x-_*u*d,this._w=h*c*d-_*u*x;break;case"XZY":this._x=_*c*d-h*u*x,this._y=h*u*d-_*c*x,this._z=h*c*x+_*u*d,this._w=h*c*d+_*u*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+n)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,a=Math.sin(i);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],a=t[4],r=t[8],n=t[1],o=t[5],l=t[9],h=t[2],c=t[6],d=t[10],_=i+o+d;if(_>0){const u=.5/Math.sqrt(_+1);this._w=.25/u,this._x=(c-l)*u,this._y=(r-h)*u,this._z=(n-a)*u}else if(i>o&&i>d){const u=2*Math.sqrt(1+i-o-d);this._w=(c-l)/u,this._x=.25*u,this._y=(a+n)/u,this._z=(r+h)/u}else if(o>d){const u=2*Math.sqrt(1+o-i-d);this._w=(r-h)/u,this._x=(a+n)/u,this._y=.25*u,this._z=(l+c)/u}else{const u=2*Math.sqrt(1+d-i-o);this._w=(n-a)/u,this._x=(r+h)/u,this._y=(l+c)/u,this._z=.25*u}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ue(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const a=Math.min(1,t/i);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,a=e._y,r=e._z,n=e._w,o=t._x,l=t._y,h=t._z,c=t._w;return this._x=i*c+n*o+a*h-r*l,this._y=a*c+n*l+r*o-i*h,this._z=r*c+n*h+i*l-a*o,this._w=n*c-i*o-a*l-r*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,a=this._y,r=this._z,n=this._w;let o=n*e._w+i*e._x+a*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=n,this._x=i,this._y=a,this._z=r,this;const l=1-o*o;if(l<=Number.EPSILON){const u=1-t;return this._w=u*n+t*this._w,this._x=u*i+t*this._x,this._y=u*a+t*this._y,this._z=u*r+t*this._z,this.normalize(),this}const h=Math.sqrt(l),c=Math.atan2(h,o),d=Math.sin((1-t)*c)/h,_=Math.sin(t*c)/h;return this._w=n*d+this._w*_,this._x=i*d+this._x*_,this._y=a*d+this._y*_,this._z=r*d+this._z*_,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),a=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(a*Math.sin(e),a*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class S{constructor(e=0,t=0,i=0){S.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ku.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ku.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,a=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*a,this.y=r[1]*t+r[4]*i+r[7]*a,this.z=r[2]*t+r[5]*i+r[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,r=e.elements,n=1/(r[3]*t+r[7]*i+r[11]*a+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*a+r[12])*n,this.y=(r[1]*t+r[5]*i+r[9]*a+r[13])*n,this.z=(r[2]*t+r[6]*i+r[10]*a+r[14])*n,this}applyQuaternion(e){const t=this.x,i=this.y,a=this.z,r=e.x,n=e.y,o=e.z,l=e.w,h=2*(n*a-o*i),c=2*(o*t-r*a),d=2*(r*i-n*t);return this.x=t+l*h+n*d-o*c,this.y=i+l*c+o*h-r*d,this.z=a+l*d+r*c-n*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,a=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*a,this.y=r[1]*t+r[5]*i+r[9]*a,this.z=r[2]*t+r[6]*i+r[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Ue(this.x,e.x,t.x),this.y=Ue(this.y,e.y,t.y),this.z=Ue(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Ue(this.x,e,t),this.y=Ue(this.y,e,t),this.z=Ue(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ue(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,a=e.y,r=e.z,n=t.x,o=t.y,l=t.z;return this.x=a*l-r*o,this.y=r*n-i*l,this.z=i*o-a*n,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Dh.copy(this).projectOnVector(e),this.sub(Dh)}reflect(e){return this.sub(Dh.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ue(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,a=this.z-e.z;return t*t+i*i+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const a=Math.sin(t)*e;return this.x=a*Math.sin(i),this.y=Math.cos(t)*e,this.z=a*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=a,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Dh=new S,ku=new ji;class Ve{constructor(e,t,i,a,r,n,o,l,h){Ve.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,a,r,n,o,l,h)}set(e,t,i,a,r,n,o,l,h){const c=this.elements;return c[0]=e,c[1]=a,c[2]=o,c[3]=t,c[4]=r,c[5]=l,c[6]=i,c[7]=n,c[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,r=this.elements,n=i[0],o=i[3],l=i[6],h=i[1],c=i[4],d=i[7],_=i[2],u=i[5],x=i[8],g=a[0],v=a[3],f=a[6],y=a[1],w=a[4],p=a[7],b=a[2],M=a[5],E=a[8];return r[0]=n*g+o*y+l*b,r[3]=n*v+o*w+l*M,r[6]=n*f+o*p+l*E,r[1]=h*g+c*y+d*b,r[4]=h*v+c*w+d*M,r[7]=h*f+c*p+d*E,r[2]=_*g+u*y+x*b,r[5]=_*v+u*w+x*M,r[8]=_*f+u*p+x*E,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],a=e[2],r=e[3],n=e[4],o=e[5],l=e[6],h=e[7],c=e[8];return t*n*c-t*o*h-i*r*c+i*o*l+a*r*h-a*n*l}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],r=e[3],n=e[4],o=e[5],l=e[6],h=e[7],c=e[8],d=c*n-o*h,_=o*l-c*r,u=h*r-n*l,x=t*d+i*_+a*u;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/x;return e[0]=d*g,e[1]=(a*h-c*i)*g,e[2]=(o*i-a*n)*g,e[3]=_*g,e[4]=(c*t-a*l)*g,e[5]=(a*r-o*t)*g,e[6]=u*g,e[7]=(i*l-h*t)*g,e[8]=(n*t-i*r)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,a,r,n,o){const l=Math.cos(r),h=Math.sin(r);return this.set(i*l,i*h,-i*(l*n+h*o)+n+e,-a*h,a*l,-a*(-h*n+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Rh.makeScale(e,t)),this}rotate(e){return this.premultiply(Rh.makeRotation(-e)),this}translate(e,t){return this.premultiply(Rh.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<9;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Rh=new Ve;function S0(s){for(let e=s.length-1;e>=0;--e)if(s[e]>=65535)return!0;return!1}function mo(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}function Mm(){const s=mo("canvas");return s.style.display="block",s}const Vu={};function $r(s){s in Vu||(Vu[s]=!0,console.warn(s))}function Im(s,e,t){return new Promise(function(i,a){function r(){switch(s.clientWaitSync(e,s.SYNC_FLUSH_COMMANDS_BIT,0)){case s.WAIT_FAILED:a();break;case s.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:i()}}setTimeout(r,t)})}const Uu=new Ve().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Bu=new Ve().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Cm(){const s={enabled:!0,workingColorSpace:Ot,spaces:{},convert:function(a,r,n){return this.enabled===!1||r===n||!r||!n||(this.spaces[r].transfer===pt&&(a.r=aa(a.r),a.g=aa(a.g),a.b=aa(a.b)),this.spaces[r].primaries!==this.spaces[n].primaries&&(a.applyMatrix3(this.spaces[r].toXYZ),a.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===pt&&(a.r=en(a.r),a.g=en(a.g),a.b=en(a.b))),a},workingToColorSpace:function(a,r){return this.convert(a,this.workingColorSpace,r)},colorSpaceToWorking:function(a,r){return this.convert(a,r,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===Ms?Ql:this.spaces[a].transfer},getLuminanceCoefficients:function(a,r=this.workingColorSpace){return a.fromArray(this.spaces[r].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,r,n){return a.copy(this.spaces[r].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,r){return $r("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),s.workingToColorSpace(a,r)},toWorkingColorSpace:function(a,r){return $r("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),s.colorSpaceToWorking(a,r)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return s.define({[Ot]:{primaries:e,whitePoint:i,transfer:Ql,toXYZ:Uu,fromXYZ:Bu,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Ge},outputColorSpaceConfig:{drawingBufferColorSpace:Ge}},[Ge]:{primaries:e,whitePoint:i,transfer:pt,toXYZ:Uu,fromXYZ:Bu,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Ge}}}),s}const Qe=Cm();function aa(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function en(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}let Er;class Dm{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Er===void 0&&(Er=mo("canvas")),Er.width=e.width,Er.height=e.height;const a=Er.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),i=Er}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=mo("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const a=i.getImageData(0,0,e.width,e.height),r=a.data;for(let n=0;n<r.length;n++)r[n]=aa(r[n]/255)*255;return i.putImageData(a,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(aa(t[i]/255)*255):t[i]=aa(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Rm=0;class c_{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Rm++}),this.uuid=zs(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},a=this.data;if(a!==null){let r;if(Array.isArray(a)){r=[];for(let n=0,o=a.length;n<o;n++)a[n].isDataTexture?r.push(Oh(a[n].image)):r.push(Oh(a[n]))}else r=Oh(a);i.url=r}return t||(e.images[this.uuid]=i),i}}function Oh(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?Dm.getDataURL(s):s.data?{data:Array.from(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Om=0;const Nh=new S;class Ct extends ks{constructor(e=Ct.DEFAULT_IMAGE,t=Ct.DEFAULT_MAPPING,i=rs,a=rs,r=yt,n=ms,o=At,l=$t,h=Ct.DEFAULT_ANISOTROPY,c=Ms){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Om++}),this.uuid=zs(),this.name="",this.source=new c_(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=a,this.magFilter=r,this.minFilter=n,this.anisotropy=h,this.format=o,this.internalFormat=null,this.type=l,this.offset=new $(0,0),this.repeat=new $(1,1),this.center=new $(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ve,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Nh).x}get height(){return this.source.getSize(Nh).y}get depth(){return this.source.getSize(Nh).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}a&&i&&a.isVector2&&i.isVector2||a&&i&&a.isVector3&&i.isVector3||a&&i&&a.isMatrix3&&i.isMatrix3?a.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==v0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rt:e.x=e.x-Math.floor(e.x);break;case rs:e.x=e.x<0?0:1;break;case Yl:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rt:e.y=e.y-Math.floor(e.y);break;case rs:e.y=e.y<0?0:1;break;case Yl:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ct.DEFAULT_IMAGE=null;Ct.DEFAULT_MAPPING=v0;Ct.DEFAULT_ANISOTROPY=1;class et{constructor(e=0,t=0,i=0,a=1){et.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,a){return this.x=e,this.y=t,this.z=i,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,r=this.w,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*a+n[12]*r,this.y=n[1]*t+n[5]*i+n[9]*a+n[13]*r,this.z=n[2]*t+n[6]*i+n[10]*a+n[14]*r,this.w=n[3]*t+n[7]*i+n[11]*a+n[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,a,r;const l=e.elements,h=l[0],c=l[4],d=l[8],_=l[1],u=l[5],x=l[9],g=l[2],v=l[6],f=l[10];if(Math.abs(c-_)<.01&&Math.abs(d-g)<.01&&Math.abs(x-v)<.01){if(Math.abs(c+_)<.1&&Math.abs(d+g)<.1&&Math.abs(x+v)<.1&&Math.abs(h+u+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(h+1)/2,p=(u+1)/2,b=(f+1)/2,M=(c+_)/4,E=(d+g)/4,A=(x+v)/4;return w>p&&w>b?w<.01?(i=0,a=.707106781,r=.707106781):(i=Math.sqrt(w),a=M/i,r=E/i):p>b?p<.01?(i=.707106781,a=0,r=.707106781):(a=Math.sqrt(p),i=M/a,r=A/a):b<.01?(i=.707106781,a=.707106781,r=0):(r=Math.sqrt(b),i=E/r,a=A/r),this.set(i,a,r,t),this}let y=Math.sqrt((v-x)*(v-x)+(d-g)*(d-g)+(_-c)*(_-c));return Math.abs(y)<.001&&(y=1),this.x=(v-x)/y,this.y=(d-g)/y,this.z=(_-c)/y,this.w=Math.acos((h+u+f-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Ue(this.x,e.x,t.x),this.y=Ue(this.y,e.y,t.y),this.z=Ue(this.z,e.z,t.z),this.w=Ue(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Ue(this.x,e,t),this.y=Ue(this.y,e,t),this.z=Ue(this.z,e,t),this.w=Ue(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ue(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Nm extends ks{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:yt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new et(0,0,e,t),this.scissorTest=!1,this.viewport=new et(0,0,e,t);const a={width:e,height:t,depth:i.depth},r=new Ct(a);this.textures=[];const n=i.count;for(let o=0;o<n;o++)this.textures[o]=r.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:yt,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let a=0,r=this.textures.length;a<r;a++)this.textures[a].image.width=e,this.textures[a].image.height=t,this.textures[a].image.depth=i,this.textures[a].isArrayTexture=this.textures[a].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const a=Object.assign({},e.textures[t].image);this.textures[t].source=new c_(a)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class gt extends Nm{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class E0 extends Ct{constructor(e=null,t=1,i=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=it,this.minFilter=it,this.wrapR=rs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Lm extends Ct{constructor(e=null,t=1,i=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=it,this.minFilter=it,this.wrapR=rs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ki{constructor(e=new S(1/0,1/0,1/0),t=new S(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(us.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(us.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=us.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let n=0,o=r.count;n<o;n++)e.isMesh===!0?e.getVertexPosition(n,us):us.fromBufferAttribute(r,n),us.applyMatrix4(e.matrixWorld),this.expandByPoint(us);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),tl.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),tl.copy(i.boundingBox)),tl.applyMatrix4(e.matrixWorld),this.union(tl)}const a=e.children;for(let r=0,n=a.length;r<n;r++)this.expandByObject(a[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,us),us.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Bn),il.subVectors(this.max,Bn),Ar.subVectors(e.a,Bn),Mr.subVectors(e.b,Bn),Ir.subVectors(e.c,Bn),va.subVectors(Mr,Ar),ga.subVectors(Ir,Mr),qa.subVectors(Ar,Ir);let t=[0,-va.z,va.y,0,-ga.z,ga.y,0,-qa.z,qa.y,va.z,0,-va.x,ga.z,0,-ga.x,qa.z,0,-qa.x,-va.y,va.x,0,-ga.y,ga.x,0,-qa.y,qa.x,0];return!Lh(t,Ar,Mr,Ir,il)||(t=[1,0,0,0,1,0,0,0,1],!Lh(t,Ar,Mr,Ir,il))?!1:(sl.crossVectors(va,ga),t=[sl.x,sl.y,sl.z],Lh(t,Ar,Mr,Ir,il))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,us).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(us).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Bs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Bs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Bs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Bs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Bs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Bs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Bs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Bs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Bs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Bs=[new S,new S,new S,new S,new S,new S,new S,new S],us=new S,tl=new ki,Ar=new S,Mr=new S,Ir=new S,va=new S,ga=new S,qa=new S,Bn=new S,il=new S,sl=new S,Ha=new S;function Lh(s,e,t,i,a){for(let r=0,n=s.length-3;r<=n;r+=3){Ha.fromArray(s,r);const o=a.x*Math.abs(Ha.x)+a.y*Math.abs(Ha.y)+a.z*Math.abs(Ha.z),l=e.dot(Ha),h=t.dot(Ha),c=i.dot(Ha);if(Math.max(-Math.max(l,h,c),Math.min(l,h,c))>o)return!1}return!0}const Fm=new ki,Wn=new S,Fh=new S;class _s{constructor(e=new S,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Fm.setFromPoints(e).getCenter(i);let a=0;for(let r=0,n=e.length;r<n;r++)a=Math.max(a,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Wn.subVectors(e,this.center);const t=Wn.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),a=(i-this.radius)*.5;this.center.addScaledVector(Wn,a/i),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Fh.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Wn.copy(e.center).add(Fh)),this.expandByPoint(Wn.copy(e.center).sub(Fh))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Ws=new S,kh=new S,al=new S,xa=new S,Vh=new S,rl=new S,Uh=new S;class In{constructor(e=new S,t=new S(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ws)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ws.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ws.copy(this.origin).addScaledVector(this.direction,t),Ws.distanceToSquared(e))}distanceSqToSegment(e,t,i,a){kh.copy(e).add(t).multiplyScalar(.5),al.copy(t).sub(e).normalize(),xa.copy(this.origin).sub(kh);const r=e.distanceTo(t)*.5,n=-this.direction.dot(al),o=xa.dot(this.direction),l=-xa.dot(al),h=xa.lengthSq(),c=Math.abs(1-n*n);let d,_,u,x;if(c>0)if(d=n*l-o,_=n*o-l,x=r*c,d>=0)if(_>=-x)if(_<=x){const g=1/c;d*=g,_*=g,u=d*(d+n*_+2*o)+_*(n*d+_+2*l)+h}else _=r,d=Math.max(0,-(n*_+o)),u=-d*d+_*(_+2*l)+h;else _=-r,d=Math.max(0,-(n*_+o)),u=-d*d+_*(_+2*l)+h;else _<=-x?(d=Math.max(0,-(-n*r+o)),_=d>0?-r:Math.min(Math.max(-r,-l),r),u=-d*d+_*(_+2*l)+h):_<=x?(d=0,_=Math.min(Math.max(-r,-l),r),u=_*(_+2*l)+h):(d=Math.max(0,-(n*r+o)),_=d>0?r:Math.min(Math.max(-r,-l),r),u=-d*d+_*(_+2*l)+h);else _=n>0?-r:r,d=Math.max(0,-(n*_+o)),u=-d*d+_*(_+2*l)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,d),a&&a.copy(kh).addScaledVector(al,_),u}intersectSphere(e,t){Ws.subVectors(e.center,this.origin);const i=Ws.dot(this.direction),a=Ws.dot(Ws)-i*i,r=e.radius*e.radius;if(a>r)return null;const n=Math.sqrt(r-a),o=i-n,l=i+n;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,a,r,n,o,l;const h=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,_=this.origin;return h>=0?(i=(e.min.x-_.x)*h,a=(e.max.x-_.x)*h):(i=(e.max.x-_.x)*h,a=(e.min.x-_.x)*h),c>=0?(r=(e.min.y-_.y)*c,n=(e.max.y-_.y)*c):(r=(e.max.y-_.y)*c,n=(e.min.y-_.y)*c),i>n||r>a||((r>i||isNaN(i))&&(i=r),(n<a||isNaN(a))&&(a=n),d>=0?(o=(e.min.z-_.z)*d,l=(e.max.z-_.z)*d):(o=(e.max.z-_.z)*d,l=(e.min.z-_.z)*d),i>l||o>a)||((o>i||i!==i)&&(i=o),(l<a||a!==a)&&(a=l),a<0)?null:this.at(i>=0?i:a,t)}intersectsBox(e){return this.intersectBox(e,Ws)!==null}intersectTriangle(e,t,i,a,r){Vh.subVectors(t,e),rl.subVectors(i,e),Uh.crossVectors(Vh,rl);let n=this.direction.dot(Uh),o;if(n>0){if(a)return null;o=1}else if(n<0)o=-1,n=-n;else return null;xa.subVectors(this.origin,e);const l=o*this.direction.dot(rl.crossVectors(xa,rl));if(l<0)return null;const h=o*this.direction.dot(Vh.cross(xa));if(h<0||l+h>n)return null;const c=-o*xa.dot(Uh);return c<0?null:this.at(c/n,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class De{constructor(e,t,i,a,r,n,o,l,h,c,d,_,u,x,g,v){De.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,a,r,n,o,l,h,c,d,_,u,x,g,v)}set(e,t,i,a,r,n,o,l,h,c,d,_,u,x,g,v){const f=this.elements;return f[0]=e,f[4]=t,f[8]=i,f[12]=a,f[1]=r,f[5]=n,f[9]=o,f[13]=l,f[2]=h,f[6]=c,f[10]=d,f[14]=_,f[3]=u,f[7]=x,f[11]=g,f[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new De().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,a=1/Cr.setFromMatrixColumn(e,0).length(),r=1/Cr.setFromMatrixColumn(e,1).length(),n=1/Cr.setFromMatrixColumn(e,2).length();return t[0]=i[0]*a,t[1]=i[1]*a,t[2]=i[2]*a,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*n,t[9]=i[9]*n,t[10]=i[10]*n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,a=e.y,r=e.z,n=Math.cos(i),o=Math.sin(i),l=Math.cos(a),h=Math.sin(a),c=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const _=n*c,u=n*d,x=o*c,g=o*d;t[0]=l*c,t[4]=-l*d,t[8]=h,t[1]=u+x*h,t[5]=_-g*h,t[9]=-o*l,t[2]=g-_*h,t[6]=x+u*h,t[10]=n*l}else if(e.order==="YXZ"){const _=l*c,u=l*d,x=h*c,g=h*d;t[0]=_+g*o,t[4]=x*o-u,t[8]=n*h,t[1]=n*d,t[5]=n*c,t[9]=-o,t[2]=u*o-x,t[6]=g+_*o,t[10]=n*l}else if(e.order==="ZXY"){const _=l*c,u=l*d,x=h*c,g=h*d;t[0]=_-g*o,t[4]=-n*d,t[8]=x+u*o,t[1]=u+x*o,t[5]=n*c,t[9]=g-_*o,t[2]=-n*h,t[6]=o,t[10]=n*l}else if(e.order==="ZYX"){const _=n*c,u=n*d,x=o*c,g=o*d;t[0]=l*c,t[4]=x*h-u,t[8]=_*h+g,t[1]=l*d,t[5]=g*h+_,t[9]=u*h-x,t[2]=-h,t[6]=o*l,t[10]=n*l}else if(e.order==="YZX"){const _=n*l,u=n*h,x=o*l,g=o*h;t[0]=l*c,t[4]=g-_*d,t[8]=x*d+u,t[1]=d,t[5]=n*c,t[9]=-o*c,t[2]=-h*c,t[6]=u*d+x,t[10]=_-g*d}else if(e.order==="XZY"){const _=n*l,u=n*h,x=o*l,g=o*h;t[0]=l*c,t[4]=-d,t[8]=h*c,t[1]=_*d+g,t[5]=n*c,t[9]=u*d-x,t[2]=x*d-u,t[6]=o*c,t[10]=g*d+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(km,e,Vm)}lookAt(e,t,i){const a=this.elements;return Bi.subVectors(e,t),Bi.lengthSq()===0&&(Bi.z=1),Bi.normalize(),pa.crossVectors(i,Bi),pa.lengthSq()===0&&(Math.abs(i.z)===1?Bi.x+=1e-4:Bi.z+=1e-4,Bi.normalize(),pa.crossVectors(i,Bi)),pa.normalize(),nl.crossVectors(Bi,pa),a[0]=pa.x,a[4]=nl.x,a[8]=Bi.x,a[1]=pa.y,a[5]=nl.y,a[9]=Bi.y,a[2]=pa.z,a[6]=nl.z,a[10]=Bi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,r=this.elements,n=i[0],o=i[4],l=i[8],h=i[12],c=i[1],d=i[5],_=i[9],u=i[13],x=i[2],g=i[6],v=i[10],f=i[14],y=i[3],w=i[7],p=i[11],b=i[15],M=a[0],E=a[4],A=a[8],m=a[12],P=a[1],I=a[5],U=a[9],N=a[13],F=a[2],W=a[6],V=a[10],j=a[14],G=a[3],re=a[7],ne=a[11],xe=a[15];return r[0]=n*M+o*P+l*F+h*G,r[4]=n*E+o*I+l*W+h*re,r[8]=n*A+o*U+l*V+h*ne,r[12]=n*m+o*N+l*j+h*xe,r[1]=c*M+d*P+_*F+u*G,r[5]=c*E+d*I+_*W+u*re,r[9]=c*A+d*U+_*V+u*ne,r[13]=c*m+d*N+_*j+u*xe,r[2]=x*M+g*P+v*F+f*G,r[6]=x*E+g*I+v*W+f*re,r[10]=x*A+g*U+v*V+f*ne,r[14]=x*m+g*N+v*j+f*xe,r[3]=y*M+w*P+p*F+b*G,r[7]=y*E+w*I+p*W+b*re,r[11]=y*A+w*U+p*V+b*ne,r[15]=y*m+w*N+p*j+b*xe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],a=e[8],r=e[12],n=e[1],o=e[5],l=e[9],h=e[13],c=e[2],d=e[6],_=e[10],u=e[14],x=e[3],g=e[7],v=e[11],f=e[15];return x*(+r*l*d-a*h*d-r*o*_+i*h*_+a*o*u-i*l*u)+g*(+t*l*u-t*h*_+r*n*_-a*n*u+a*h*c-r*l*c)+v*(+t*h*d-t*o*u-r*n*d+i*n*u+r*o*c-i*h*c)+f*(-a*o*c-t*l*d+t*o*_+a*n*d-i*n*_+i*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=t,a[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],r=e[3],n=e[4],o=e[5],l=e[6],h=e[7],c=e[8],d=e[9],_=e[10],u=e[11],x=e[12],g=e[13],v=e[14],f=e[15],y=d*v*h-g*_*h+g*l*u-o*v*u-d*l*f+o*_*f,w=x*_*h-c*v*h-x*l*u+n*v*u+c*l*f-n*_*f,p=c*g*h-x*d*h+x*o*u-n*g*u-c*o*f+n*d*f,b=x*d*l-c*g*l-x*o*_+n*g*_+c*o*v-n*d*v,M=t*y+i*w+a*p+r*b;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/M;return e[0]=y*E,e[1]=(g*_*r-d*v*r-g*a*u+i*v*u+d*a*f-i*_*f)*E,e[2]=(o*v*r-g*l*r+g*a*h-i*v*h-o*a*f+i*l*f)*E,e[3]=(d*l*r-o*_*r-d*a*h+i*_*h+o*a*u-i*l*u)*E,e[4]=w*E,e[5]=(c*v*r-x*_*r+x*a*u-t*v*u-c*a*f+t*_*f)*E,e[6]=(x*l*r-n*v*r-x*a*h+t*v*h+n*a*f-t*l*f)*E,e[7]=(n*_*r-c*l*r+c*a*h-t*_*h-n*a*u+t*l*u)*E,e[8]=p*E,e[9]=(x*d*r-c*g*r-x*i*u+t*g*u+c*i*f-t*d*f)*E,e[10]=(n*g*r-x*o*r+x*i*h-t*g*h-n*i*f+t*o*f)*E,e[11]=(c*o*r-n*d*r-c*i*h+t*d*h+n*i*u-t*o*u)*E,e[12]=b*E,e[13]=(c*g*a-x*d*a+x*i*_-t*g*_-c*i*v+t*d*v)*E,e[14]=(x*o*a-n*g*a-x*i*l+t*g*l+n*i*v-t*o*v)*E,e[15]=(n*d*a-c*o*a+c*i*l-t*d*l-n*i*_+t*o*_)*E,this}scale(e){const t=this.elements,i=e.x,a=e.y,r=e.z;return t[0]*=i,t[4]*=a,t[8]*=r,t[1]*=i,t[5]*=a,t[9]*=r,t[2]*=i,t[6]*=a,t[10]*=r,t[3]*=i,t[7]*=a,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,a))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),a=Math.sin(t),r=1-i,n=e.x,o=e.y,l=e.z,h=r*n,c=r*o;return this.set(h*n+i,h*o-a*l,h*l+a*o,0,h*o+a*l,c*o+i,c*l-a*n,0,h*l-a*o,c*l+a*n,r*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,a,r,n){return this.set(1,i,r,0,e,1,n,0,t,a,1,0,0,0,0,1),this}compose(e,t,i){const a=this.elements,r=t._x,n=t._y,o=t._z,l=t._w,h=r+r,c=n+n,d=o+o,_=r*h,u=r*c,x=r*d,g=n*c,v=n*d,f=o*d,y=l*h,w=l*c,p=l*d,b=i.x,M=i.y,E=i.z;return a[0]=(1-(g+f))*b,a[1]=(u+p)*b,a[2]=(x-w)*b,a[3]=0,a[4]=(u-p)*M,a[5]=(1-(_+f))*M,a[6]=(v+y)*M,a[7]=0,a[8]=(x+w)*E,a[9]=(v-y)*E,a[10]=(1-(_+g))*E,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,t,i){const a=this.elements;let r=Cr.set(a[0],a[1],a[2]).length();const n=Cr.set(a[4],a[5],a[6]).length(),o=Cr.set(a[8],a[9],a[10]).length();this.determinant()<0&&(r=-r),e.x=a[12],e.y=a[13],e.z=a[14],fs.copy(this);const h=1/r,c=1/n,d=1/o;return fs.elements[0]*=h,fs.elements[1]*=h,fs.elements[2]*=h,fs.elements[4]*=c,fs.elements[5]*=c,fs.elements[6]*=c,fs.elements[8]*=d,fs.elements[9]*=d,fs.elements[10]*=d,t.setFromRotationMatrix(fs),i.x=r,i.y=n,i.z=o,this}makePerspective(e,t,i,a,r,n,o=Cs,l=!1){const h=this.elements,c=2*r/(t-e),d=2*r/(i-a),_=(t+e)/(t-e),u=(i+a)/(i-a);let x,g;if(l)x=r/(n-r),g=n*r/(n-r);else if(o===Cs)x=-(n+r)/(n-r),g=-2*n*r/(n-r);else if(o===$l)x=-n/(n-r),g=-n*r/(n-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return h[0]=c,h[4]=0,h[8]=_,h[12]=0,h[1]=0,h[5]=d,h[9]=u,h[13]=0,h[2]=0,h[6]=0,h[10]=x,h[14]=g,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,i,a,r,n,o=Cs,l=!1){const h=this.elements,c=2/(t-e),d=2/(i-a),_=-(t+e)/(t-e),u=-(i+a)/(i-a);let x,g;if(l)x=1/(n-r),g=n/(n-r);else if(o===Cs)x=-2/(n-r),g=-(n+r)/(n-r);else if(o===$l)x=-1/(n-r),g=-r/(n-r);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return h[0]=c,h[4]=0,h[8]=0,h[12]=_,h[1]=0,h[5]=d,h[9]=0,h[13]=u,h[2]=0,h[6]=0,h[10]=x,h[14]=g,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<16;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Cr=new S,fs=new De,km=new S(0,0,0),Vm=new S(1,1,1),pa=new S,nl=new S,Bi=new S,Wu=new De,Gu=new ji;class Ps{constructor(e=0,t=0,i=0,a=Ps.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,a=this._order){return this._x=e,this._y=t,this._z=i,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const a=e.elements,r=a[0],n=a[4],o=a[8],l=a[1],h=a[5],c=a[9],d=a[2],_=a[6],u=a[10];switch(t){case"XYZ":this._y=Math.asin(Ue(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,u),this._z=Math.atan2(-n,r)):(this._x=Math.atan2(_,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Ue(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,u),this._z=Math.atan2(l,h)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(Ue(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-d,u),this._z=Math.atan2(-n,h)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-Ue(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(_,u),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-n,h));break;case"YZX":this._z=Math.asin(Ue(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,h),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(o,u));break;case"XZY":this._z=Math.asin(-Ue(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(_,h),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,u),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return Wu.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Wu,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Gu.setFromEuler(this),this.setFromQuaternion(Gu,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ps.DEFAULT_ORDER="XYZ";class d_{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Um=0;const qu=new S,Dr=new ji,Gs=new De,ol=new S,Gn=new S,Bm=new S,Wm=new ji,Hu=new S(1,0,0),Xu=new S(0,1,0),ju=new S(0,0,1),Zu={type:"added"},Gm={type:"removed"},Rr={type:"childadded",child:null},Bh={type:"childremoved",child:null};class ut extends ks{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Um++}),this.uuid=zs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ut.DEFAULT_UP.clone();const e=new S,t=new Ps,i=new ji,a=new S(1,1,1);function r(){i.setFromEuler(t,!1)}function n(){t.setFromQuaternion(i,void 0,!1)}t._onChange(r),i._onChange(n),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new De},normalMatrix:{value:new Ve}}),this.matrix=new De,this.matrixWorld=new De,this.matrixAutoUpdate=ut.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ut.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new d_,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Dr.setFromAxisAngle(e,t),this.quaternion.multiply(Dr),this}rotateOnWorldAxis(e,t){return Dr.setFromAxisAngle(e,t),this.quaternion.premultiply(Dr),this}rotateX(e){return this.rotateOnAxis(Hu,e)}rotateY(e){return this.rotateOnAxis(Xu,e)}rotateZ(e){return this.rotateOnAxis(ju,e)}translateOnAxis(e,t){return qu.copy(e).applyQuaternion(this.quaternion),this.position.add(qu.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Hu,e)}translateY(e){return this.translateOnAxis(Xu,e)}translateZ(e){return this.translateOnAxis(ju,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Gs.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?ol.copy(e):ol.set(e,t,i);const a=this.parent;this.updateWorldMatrix(!0,!1),Gn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gs.lookAt(Gn,ol,this.up):Gs.lookAt(ol,Gn,this.up),this.quaternion.setFromRotationMatrix(Gs),a&&(Gs.extractRotation(a.matrixWorld),Dr.setFromRotationMatrix(Gs),this.quaternion.premultiply(Dr.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Zu),Rr.child=e,this.dispatchEvent(Rr),Rr.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Gm),Bh.child=e,this.dispatchEvent(Bh),Bh.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Gs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Gs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Gs),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Zu),Rr.child=e,this.dispatchEvent(Rr),Rr.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,a=this.children.length;i<a;i++){const n=this.children[i].getObjectByProperty(e,t);if(n!==void 0)return n}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const a=this.children;for(let r=0,n=a.length;r<n;r++)a[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gn,e,Bm),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gn,Wm,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const a=this.children;for(let r=0,n=a.length;r<n;r++)a[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(o=>({...o})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(e),a.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function r(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=r(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let h=0,c=l.length;h<c;h++){const d=l[h];r(e.shapes,d)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,h=this.material.length;l<h;l++)o.push(r(e.materials,this.material[l]));a.material=o}else a.material=r(e.materials,this.material);if(this.children.length>0){a.children=[];for(let o=0;o<this.children.length;o++)a.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];a.animations.push(r(e.animations,l))}}if(t){const o=n(e.geometries),l=n(e.materials),h=n(e.textures),c=n(e.images),d=n(e.shapes),_=n(e.skeletons),u=n(e.animations),x=n(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),h.length>0&&(i.textures=h),c.length>0&&(i.images=c),d.length>0&&(i.shapes=d),_.length>0&&(i.skeletons=_),u.length>0&&(i.animations=u),x.length>0&&(i.nodes=x)}return i.object=a,i;function n(o){const l=[];for(const h in o){const c=o[h];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const a=e.children[i];this.add(a.clone())}return this}}ut.DEFAULT_UP=new S(0,1,0);ut.DEFAULT_MATRIX_AUTO_UPDATE=!0;ut.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const vs=new S,qs=new S,Wh=new S,Hs=new S,Or=new S,Nr=new S,Ju=new S,Gh=new S,qh=new S,Hh=new S,Xh=new et,jh=new et,Zh=new et;class as{constructor(e=new S,t=new S,i=new S){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,a){a.subVectors(i,t),vs.subVectors(e,t),a.cross(vs);const r=a.lengthSq();return r>0?a.multiplyScalar(1/Math.sqrt(r)):a.set(0,0,0)}static getBarycoord(e,t,i,a,r){vs.subVectors(a,t),qs.subVectors(i,t),Wh.subVectors(e,t);const n=vs.dot(vs),o=vs.dot(qs),l=vs.dot(Wh),h=qs.dot(qs),c=qs.dot(Wh),d=n*h-o*o;if(d===0)return r.set(0,0,0),null;const _=1/d,u=(h*l-o*c)*_,x=(n*c-o*l)*_;return r.set(1-u-x,x,u)}static containsPoint(e,t,i,a){return this.getBarycoord(e,t,i,a,Hs)===null?!1:Hs.x>=0&&Hs.y>=0&&Hs.x+Hs.y<=1}static getInterpolation(e,t,i,a,r,n,o,l){return this.getBarycoord(e,t,i,a,Hs)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,Hs.x),l.addScaledVector(n,Hs.y),l.addScaledVector(o,Hs.z),l)}static getInterpolatedAttribute(e,t,i,a,r,n){return Xh.setScalar(0),jh.setScalar(0),Zh.setScalar(0),Xh.fromBufferAttribute(e,t),jh.fromBufferAttribute(e,i),Zh.fromBufferAttribute(e,a),n.setScalar(0),n.addScaledVector(Xh,r.x),n.addScaledVector(jh,r.y),n.addScaledVector(Zh,r.z),n}static isFrontFacing(e,t,i,a){return vs.subVectors(i,t),qs.subVectors(e,t),vs.cross(qs).dot(a)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,a){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,t,i,a){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return vs.subVectors(this.c,this.b),qs.subVectors(this.a,this.b),vs.cross(qs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return as.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return as.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,a,r){return as.getInterpolation(e,this.a,this.b,this.c,t,i,a,r)}containsPoint(e){return as.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return as.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,a=this.b,r=this.c;let n,o;Or.subVectors(a,i),Nr.subVectors(r,i),Gh.subVectors(e,i);const l=Or.dot(Gh),h=Nr.dot(Gh);if(l<=0&&h<=0)return t.copy(i);qh.subVectors(e,a);const c=Or.dot(qh),d=Nr.dot(qh);if(c>=0&&d<=c)return t.copy(a);const _=l*d-c*h;if(_<=0&&l>=0&&c<=0)return n=l/(l-c),t.copy(i).addScaledVector(Or,n);Hh.subVectors(e,r);const u=Or.dot(Hh),x=Nr.dot(Hh);if(x>=0&&u<=x)return t.copy(r);const g=u*h-l*x;if(g<=0&&h>=0&&x<=0)return o=h/(h-x),t.copy(i).addScaledVector(Nr,o);const v=c*x-u*d;if(v<=0&&d-c>=0&&u-x>=0)return Ju.subVectors(r,a),o=(d-c)/(d-c+(u-x)),t.copy(a).addScaledVector(Ju,o);const f=1/(v+g+_);return n=g*f,o=_*f,t.copy(i).addScaledVector(Or,n).addScaledVector(Nr,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const A0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ma={h:0,s:0,l:0},ll={h:0,s:0,l:0};function Jh(s,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+(e-s)*6*t:t<1/2?e:t<2/3?s+(e-s)*6*(2/3-t):s}class X{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ge){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Qe.colorSpaceToWorking(this,t),this}setRGB(e,t,i,a=Qe.workingColorSpace){return this.r=e,this.g=t,this.b=i,Qe.colorSpaceToWorking(this,a),this}setHSL(e,t,i,a=Qe.workingColorSpace){if(e=h_(e,1),t=Ue(t,0,1),i=Ue(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,n=2*i-r;this.r=Jh(n,r,e+1/3),this.g=Jh(n,r,e),this.b=Jh(n,r,e-1/3)}return Qe.colorSpaceToWorking(this,a),this}setStyle(e,t=Ge){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const n=a[1],o=a[2];switch(n){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=a[1],n=r.length;if(n===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(n===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ge){const i=A0[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=aa(e.r),this.g=aa(e.g),this.b=aa(e.b),this}copyLinearToSRGB(e){return this.r=en(e.r),this.g=en(e.g),this.b=en(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ge){return Qe.workingToColorSpace(gi.copy(this),e),Math.round(Ue(gi.r*255,0,255))*65536+Math.round(Ue(gi.g*255,0,255))*256+Math.round(Ue(gi.b*255,0,255))}getHexString(e=Ge){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Qe.workingColorSpace){Qe.workingToColorSpace(gi.copy(this),t);const i=gi.r,a=gi.g,r=gi.b,n=Math.max(i,a,r),o=Math.min(i,a,r);let l,h;const c=(o+n)/2;if(o===n)l=0,h=0;else{const d=n-o;switch(h=c<=.5?d/(n+o):d/(2-n-o),n){case i:l=(a-r)/d+(a<r?6:0);break;case a:l=(r-i)/d+2;break;case r:l=(i-a)/d+4;break}l/=6}return e.h=l,e.s=h,e.l=c,e}getRGB(e,t=Qe.workingColorSpace){return Qe.workingToColorSpace(gi.copy(this),t),e.r=gi.r,e.g=gi.g,e.b=gi.b,e}getStyle(e=Ge){Qe.workingToColorSpace(gi.copy(this),e);const t=gi.r,i=gi.g,a=gi.b;return e!==Ge?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(a*255)})`}offsetHSL(e,t,i){return this.getHSL(ma),this.setHSL(ma.h+e,ma.s+t,ma.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ma),e.getHSL(ll);const i=lo(ma.h,ll.h,t),a=lo(ma.s,ll.s,t),r=lo(ma.l,ll.l,t);return this.setHSL(i,a,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,a=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*a,this.g=r[1]*t+r[4]*i+r[7]*a,this.b=r[2]*t+r[5]*i+r[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const gi=new X;X.NAMES=A0;let qm=0;class Ci extends ks{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:qm++}),this.uuid=zs(),this.name="",this.type="Material",this.blending=Qr,this.side=ds,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Gc,this.blendDst=qc,this.blendEquation=or,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new X(0,0,0),this.blendAlpha=0,this.depthFunc=hn,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Nu,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Sr,this.stencilZFail=Sr,this.stencilZPass=Sr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(i):a&&a.isVector3&&i&&i.isVector3?a.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Qr&&(i.blending=this.blending),this.side!==ds&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Gc&&(i.blendSrc=this.blendSrc),this.blendDst!==qc&&(i.blendDst=this.blendDst),this.blendEquation!==or&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==hn&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Nu&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Sr&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Sr&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Sr&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function a(r){const n=[];for(const o in r){const l=r[o];delete l.metadata,n.push(l)}return n}if(t){const r=a(e.textures),n=a(e.images);r.length>0&&(i.textures=r),n.length>0&&(i.images=n)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const a=t.length;i=new Array(a);for(let r=0;r!==a;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Mi extends Ci{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new X(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ps,this.combine=t_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const $s=Hm();function Hm(){const s=new ArrayBuffer(4),e=new Float32Array(s),t=new Uint32Array(s),i=new Uint32Array(512),a=new Uint32Array(512);for(let l=0;l<256;++l){const h=l-127;h<-27?(i[l]=0,i[l|256]=32768,a[l]=24,a[l|256]=24):h<-14?(i[l]=1024>>-h-14,i[l|256]=1024>>-h-14|32768,a[l]=-h-1,a[l|256]=-h-1):h<=15?(i[l]=h+15<<10,i[l|256]=h+15<<10|32768,a[l]=13,a[l|256]=13):h<128?(i[l]=31744,i[l|256]=64512,a[l]=24,a[l|256]=24):(i[l]=31744,i[l|256]=64512,a[l]=13,a[l|256]=13)}const r=new Uint32Array(2048),n=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let h=l<<13,c=0;for(;(h&8388608)===0;)h<<=1,c-=8388608;h&=-8388609,c+=947912704,r[l]=h|c}for(let l=1024;l<2048;++l)r[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)n[l]=l<<23;n[31]=1199570944,n[32]=2147483648;for(let l=33;l<63;++l)n[l]=2147483648+(l-32<<23);n[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:a,mantissaTable:r,exponentTable:n,offsetTable:o}}function Xm(s){Math.abs(s)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),s=Ue(s,-65504,65504),$s.floatView[0]=s;const e=$s.uint32View[0],t=e>>23&511;return $s.baseTable[t]+((e&8388607)>>$s.shiftTable[t])}function jm(s){const e=s>>10;return $s.uint32View[0]=$s.mantissaTable[$s.offsetTable[e]+(s&1023)]+$s.exponentTable[e],$s.floatView[0]}class hl{static toHalfFloat(e){return Xm(e)}static fromHalfFloat(e){return jm(e)}}const Kt=new S,cl=new $;let Zm=0;class Be{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Zm++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Sd,this.updateRanges=[],this.gpuType=Et,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let a=0,r=this.itemSize;a<r;a++)this.array[e+a]=t.array[i+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)cl.fromBufferAttribute(this,t),cl.applyMatrix3(e),this.setXY(t,cl.x,cl.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Kt.fromBufferAttribute(this,t),Kt.applyMatrix3(e),this.setXYZ(t,Kt.x,Kt.y,Kt.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Kt.fromBufferAttribute(this,t),Kt.applyMatrix4(e),this.setXYZ(t,Kt.x,Kt.y,Kt.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Kt.fromBufferAttribute(this,t),Kt.applyNormalMatrix(e),this.setXYZ(t,Kt.x,Kt.y,Kt.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Kt.fromBufferAttribute(this,t),Kt.transformDirection(e),this.setXYZ(t,Kt.x,Kt.y,Kt.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ps(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ft(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ps(t,this.array)),t}setX(e,t){return this.normalized&&(t=ft(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ps(t,this.array)),t}setY(e,t){return this.normalized&&(t=ft(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ps(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ft(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ps(t,this.array)),t}setW(e,t){return this.normalized&&(t=ft(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ft(t,this.array),i=ft(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,a){return e*=this.itemSize,this.normalized&&(t=ft(t,this.array),i=ft(i,this.array),a=ft(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this}setXYZW(e,t,i,a,r){return e*=this.itemSize,this.normalized&&(t=ft(t,this.array),i=ft(i,this.array),a=ft(a,this.array),r=ft(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Sd&&(e.usage=this.usage),e}}class M0 extends Be{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class I0 extends Be{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Bt extends Be{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Jm=0;const es=new De,Kh=new ut,Lr=new S,Wi=new ki,qn=new ki,hi=new S;class Wt extends ks{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Jm++}),this.uuid=zs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(S0(e)?I0:M0)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new Ve().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return es.makeRotationFromQuaternion(e),this.applyMatrix4(es),this}rotateX(e){return es.makeRotationX(e),this.applyMatrix4(es),this}rotateY(e){return es.makeRotationY(e),this.applyMatrix4(es),this}rotateZ(e){return es.makeRotationZ(e),this.applyMatrix4(es),this}translate(e,t,i){return es.makeTranslation(e,t,i),this.applyMatrix4(es),this}scale(e,t,i){return es.makeScale(e,t,i),this.applyMatrix4(es),this}lookAt(e){return Kh.lookAt(e),Kh.updateMatrix(),this.applyMatrix4(Kh.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lr).negate(),this.translate(Lr.x,Lr.y,Lr.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let a=0,r=e.length;a<r;a++){const n=e[a];i.push(n.x,n.y,n.z||0)}this.setAttribute("position",new Bt(i,3))}else{const i=Math.min(e.length,t.count);for(let a=0;a<i;a++){const r=e[a];t.setXYZ(a,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ki);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new S(-1/0,-1/0,-1/0),new S(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,a=t.length;i<a;i++){const r=t[i];Wi.setFromBufferAttribute(r),this.morphTargetsRelative?(hi.addVectors(this.boundingBox.min,Wi.min),this.boundingBox.expandByPoint(hi),hi.addVectors(this.boundingBox.max,Wi.max),this.boundingBox.expandByPoint(hi)):(this.boundingBox.expandByPoint(Wi.min),this.boundingBox.expandByPoint(Wi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _s);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new S,1/0);return}if(e){const i=this.boundingSphere.center;if(Wi.setFromBufferAttribute(e),t)for(let r=0,n=t.length;r<n;r++){const o=t[r];qn.setFromBufferAttribute(o),this.morphTargetsRelative?(hi.addVectors(Wi.min,qn.min),Wi.expandByPoint(hi),hi.addVectors(Wi.max,qn.max),Wi.expandByPoint(hi)):(Wi.expandByPoint(qn.min),Wi.expandByPoint(qn.max))}Wi.getCenter(i);let a=0;for(let r=0,n=e.count;r<n;r++)hi.fromBufferAttribute(e,r),a=Math.max(a,i.distanceToSquared(hi));if(t)for(let r=0,n=t.length;r<n;r++){const o=t[r],l=this.morphTargetsRelative;for(let h=0,c=o.count;h<c;h++)hi.fromBufferAttribute(o,h),l&&(Lr.fromBufferAttribute(e,h),hi.add(Lr)),a=Math.max(a,i.distanceToSquared(hi))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,a=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Be(new Float32Array(4*i.count),4));const n=this.getAttribute("tangent"),o=[],l=[];for(let A=0;A<i.count;A++)o[A]=new S,l[A]=new S;const h=new S,c=new S,d=new S,_=new $,u=new $,x=new $,g=new S,v=new S;function f(A,m,P){h.fromBufferAttribute(i,A),c.fromBufferAttribute(i,m),d.fromBufferAttribute(i,P),_.fromBufferAttribute(r,A),u.fromBufferAttribute(r,m),x.fromBufferAttribute(r,P),c.sub(h),d.sub(h),u.sub(_),x.sub(_);const I=1/(u.x*x.y-x.x*u.y);isFinite(I)&&(g.copy(c).multiplyScalar(x.y).addScaledVector(d,-u.y).multiplyScalar(I),v.copy(d).multiplyScalar(u.x).addScaledVector(c,-x.x).multiplyScalar(I),o[A].add(g),o[m].add(g),o[P].add(g),l[A].add(v),l[m].add(v),l[P].add(v))}let y=this.groups;y.length===0&&(y=[{start:0,count:e.count}]);for(let A=0,m=y.length;A<m;++A){const P=y[A],I=P.start,U=P.count;for(let N=I,F=I+U;N<F;N+=3)f(e.getX(N+0),e.getX(N+1),e.getX(N+2))}const w=new S,p=new S,b=new S,M=new S;function E(A){b.fromBufferAttribute(a,A),M.copy(b);const m=o[A];w.copy(m),w.sub(b.multiplyScalar(b.dot(m))).normalize(),p.crossVectors(M,m);const I=p.dot(l[A])<0?-1:1;n.setXYZW(A,w.x,w.y,w.z,I)}for(let A=0,m=y.length;A<m;++A){const P=y[A],I=P.start,U=P.count;for(let N=I,F=I+U;N<F;N+=3)E(e.getX(N+0)),E(e.getX(N+1)),E(e.getX(N+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Be(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let _=0,u=i.count;_<u;_++)i.setXYZ(_,0,0,0);const a=new S,r=new S,n=new S,o=new S,l=new S,h=new S,c=new S,d=new S;if(e)for(let _=0,u=e.count;_<u;_+=3){const x=e.getX(_+0),g=e.getX(_+1),v=e.getX(_+2);a.fromBufferAttribute(t,x),r.fromBufferAttribute(t,g),n.fromBufferAttribute(t,v),c.subVectors(n,r),d.subVectors(a,r),c.cross(d),o.fromBufferAttribute(i,x),l.fromBufferAttribute(i,g),h.fromBufferAttribute(i,v),o.add(c),l.add(c),h.add(c),i.setXYZ(x,o.x,o.y,o.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(v,h.x,h.y,h.z)}else for(let _=0,u=t.count;_<u;_+=3)a.fromBufferAttribute(t,_+0),r.fromBufferAttribute(t,_+1),n.fromBufferAttribute(t,_+2),c.subVectors(n,r),d.subVectors(a,r),c.cross(d),i.setXYZ(_+0,c.x,c.y,c.z),i.setXYZ(_+1,c.x,c.y,c.z),i.setXYZ(_+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)hi.fromBufferAttribute(e,t),hi.normalize(),e.setXYZ(t,hi.x,hi.y,hi.z)}toNonIndexed(){function e(o,l){const h=o.array,c=o.itemSize,d=o.normalized,_=new h.constructor(l.length*c);let u=0,x=0;for(let g=0,v=l.length;g<v;g++){o.isInterleavedBufferAttribute?u=l[g]*o.data.stride+o.offset:u=l[g]*c;for(let f=0;f<c;f++)_[x++]=h[u++]}return new Be(_,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Wt,i=this.index.array,a=this.attributes;for(const o in a){const l=a[o],h=e(l,i);t.setAttribute(o,h)}const r=this.morphAttributes;for(const o in r){const l=[],h=r[o];for(let c=0,d=h.length;c<d;c++){const _=h[c],u=e(_,i);l.push(u)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const n=this.groups;for(let o=0,l=n.length;o<l;o++){const h=n[o];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const h in l)l[h]!==void 0&&(e[h]=l[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const h=i[l];e.data.attributes[l]=h.toJSON(e.data)}const a={};let r=!1;for(const l in this.morphAttributes){const h=this.morphAttributes[l],c=[];for(let d=0,_=h.length;d<_;d++){const u=h[d];c.push(u.toJSON(e.data))}c.length>0&&(a[l]=c,r=!0)}r&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const n=this.groups;n.length>0&&(e.data.groups=JSON.parse(JSON.stringify(n)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const a=e.attributes;for(const h in a){const c=a[h];this.setAttribute(h,c.clone(t))}const r=e.morphAttributes;for(const h in r){const c=[],d=r[h];for(let _=0,u=d.length;_<u;_++)c.push(d[_].clone(t));this.morphAttributes[h]=c}this.morphTargetsRelative=e.morphTargetsRelative;const n=e.groups;for(let h=0,c=n.length;h<c;h++){const d=n[h];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ku=new De,Xa=new In,dl=new _s,Yu=new S,_l=new S,ul=new S,fl=new S,Yh=new S,vl=new S,Qu=new S,gl=new S;class Ne extends ut{constructor(e=new Wt,t=new Mi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=a.length;r<n;r++){const o=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}getVertexPosition(e,t){const i=this.geometry,a=i.attributes.position,r=i.morphAttributes.position,n=i.morphTargetsRelative;t.fromBufferAttribute(a,e);const o=this.morphTargetInfluences;if(r&&o){vl.set(0,0,0);for(let l=0,h=r.length;l<h;l++){const c=o[l],d=r[l];c!==0&&(Yh.fromBufferAttribute(d,e),n?vl.addScaledVector(Yh,c):vl.addScaledVector(Yh.sub(t),c))}t.add(vl)}return t}raycast(e,t){const i=this.geometry,a=this.material,r=this.matrixWorld;a!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),dl.copy(i.boundingSphere),dl.applyMatrix4(r),Xa.copy(e.ray).recast(e.near),!(dl.containsPoint(Xa.origin)===!1&&(Xa.intersectSphere(dl,Yu)===null||Xa.origin.distanceToSquared(Yu)>(e.far-e.near)**2))&&(Ku.copy(r).invert(),Xa.copy(e.ray).applyMatrix4(Ku),!(i.boundingBox!==null&&Xa.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Xa)))}_computeIntersections(e,t,i){let a;const r=this.geometry,n=this.material,o=r.index,l=r.attributes.position,h=r.attributes.uv,c=r.attributes.uv1,d=r.attributes.normal,_=r.groups,u=r.drawRange;if(o!==null)if(Array.isArray(n))for(let x=0,g=_.length;x<g;x++){const v=_[x],f=n[v.materialIndex],y=Math.max(v.start,u.start),w=Math.min(o.count,Math.min(v.start+v.count,u.start+u.count));for(let p=y,b=w;p<b;p+=3){const M=o.getX(p),E=o.getX(p+1),A=o.getX(p+2);a=xl(this,f,e,i,h,c,d,M,E,A),a&&(a.faceIndex=Math.floor(p/3),a.face.materialIndex=v.materialIndex,t.push(a))}}else{const x=Math.max(0,u.start),g=Math.min(o.count,u.start+u.count);for(let v=x,f=g;v<f;v+=3){const y=o.getX(v),w=o.getX(v+1),p=o.getX(v+2);a=xl(this,n,e,i,h,c,d,y,w,p),a&&(a.faceIndex=Math.floor(v/3),t.push(a))}}else if(l!==void 0)if(Array.isArray(n))for(let x=0,g=_.length;x<g;x++){const v=_[x],f=n[v.materialIndex],y=Math.max(v.start,u.start),w=Math.min(l.count,Math.min(v.start+v.count,u.start+u.count));for(let p=y,b=w;p<b;p+=3){const M=p,E=p+1,A=p+2;a=xl(this,f,e,i,h,c,d,M,E,A),a&&(a.faceIndex=Math.floor(p/3),a.face.materialIndex=v.materialIndex,t.push(a))}}else{const x=Math.max(0,u.start),g=Math.min(l.count,u.start+u.count);for(let v=x,f=g;v<f;v+=3){const y=v,w=v+1,p=v+2;a=xl(this,n,e,i,h,c,d,y,w,p),a&&(a.faceIndex=Math.floor(v/3),t.push(a))}}}}function Km(s,e,t,i,a,r,n,o){let l;if(e.side===ai?l=i.intersectTriangle(n,r,a,!0,o):l=i.intersectTriangle(a,r,n,e.side===ds,o),l===null)return null;gl.copy(o),gl.applyMatrix4(s.matrixWorld);const h=t.ray.origin.distanceTo(gl);return h<t.near||h>t.far?null:{distance:h,point:gl.clone(),object:s}}function xl(s,e,t,i,a,r,n,o,l,h){s.getVertexPosition(o,_l),s.getVertexPosition(l,ul),s.getVertexPosition(h,fl);const c=Km(s,e,t,i,_l,ul,fl,Qu);if(c){const d=new S;as.getBarycoord(Qu,_l,ul,fl,d),a&&(c.uv=as.getInterpolatedAttribute(a,o,l,h,d,new $)),r&&(c.uv1=as.getInterpolatedAttribute(r,o,l,h,d,new $)),n&&(c.normal=as.getInterpolatedAttribute(n,o,l,h,d,new S),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const _={a:o,b:l,c:h,normal:new S,materialIndex:0};as.getNormal(_l,ul,fl,_.normal),c.face=_,c.barycoord=d}return c}class Vo extends Wt{constructor(e=1,t=1,i=1,a=1,r=1,n=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:a,heightSegments:r,depthSegments:n};const o=this;a=Math.floor(a),r=Math.floor(r),n=Math.floor(n);const l=[],h=[],c=[],d=[];let _=0,u=0;x("z","y","x",-1,-1,i,t,e,n,r,0),x("z","y","x",1,-1,i,t,-e,n,r,1),x("x","z","y",1,1,e,i,t,a,n,2),x("x","z","y",1,-1,e,i,-t,a,n,3),x("x","y","z",1,-1,e,t,i,a,r,4),x("x","y","z",-1,-1,e,t,-i,a,r,5),this.setIndex(l),this.setAttribute("position",new Bt(h,3)),this.setAttribute("normal",new Bt(c,3)),this.setAttribute("uv",new Bt(d,2));function x(g,v,f,y,w,p,b,M,E,A,m){const P=p/E,I=b/A,U=p/2,N=b/2,F=M/2,W=E+1,V=A+1;let j=0,G=0;const re=new S;for(let ne=0;ne<V;ne++){const xe=ne*I-N;for(let we=0;we<W;we++){const Je=we*P-U;re[g]=Je*y,re[v]=xe*w,re[f]=F,h.push(re.x,re.y,re.z),re[g]=0,re[v]=0,re[f]=M>0?1:-1,c.push(re.x,re.y,re.z),d.push(we/E),d.push(1-ne/A),j+=1}}for(let ne=0;ne<A;ne++)for(let xe=0;xe<E;xe++){const we=_+xe+W*ne,Je=_+xe+W*(ne+1),qe=_+(xe+1)+W*(ne+1),Z=_+(xe+1)+W*ne;l.push(we,Je,Z),l.push(Je,qe,Z),G+=6}o.addGroup(u,G,m),u+=G,_+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function vn(s){const e={};for(const t in s){e[t]={};for(const i in s[t]){const a=s[t][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=a.clone():Array.isArray(a)?e[t][i]=a.slice():e[t][i]=a}}return e}function zi(s){const e={};for(let t=0;t<s.length;t++){const i=vn(s[t]);for(const a in i)e[a]=i[a]}return e}function Ym(s){const e=[];for(let t=0;t<s.length;t++)e.push(s[t].clone());return e}function C0(s){const e=s.getRenderTarget();return e===null?s.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Qe.workingColorSpace}const Qm={clone:vn,merge:zi};var $m=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,e1=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Le extends Ci{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=$m,this.fragmentShader=e1,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vn(e.uniforms),this.uniformsGroups=Ym(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const a in this.uniforms){const n=this.uniforms[a].value;n&&n.isTexture?t.uniforms[a]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[a]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[a]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[a]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[a]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[a]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[a]={type:"m4",value:n.toArray()}:t.uniforms[a]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const a in this.extensions)this.extensions[a]===!0&&(i[a]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}let __=class extends ut{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new De,this.projectionMatrix=new De,this.projectionMatrixInverse=new De,this.coordinateSystem=Cs,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const ya=new S,$u=new $,ef=new $;class xi extends __{constructor(e=50,t=1,i=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=a,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=fn*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(oo*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return fn*2*Math.atan(Math.tan(oo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){ya.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ya.x,ya.y).multiplyScalar(-e/ya.z),ya.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ya.x,ya.y).multiplyScalar(-e/ya.z)}getViewSize(e,t){return this.getViewBounds(e,$u,ef),t.subVectors(ef,$u)}setViewOffset(e,t,i,a,r,n){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=r,this.view.height=n,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(oo*.5*this.fov)/this.zoom,i=2*t,a=this.aspect*i,r=-.5*a;const n=this.view;if(this.view!==null&&this.view.enabled){const l=n.fullWidth,h=n.fullHeight;r+=n.offsetX*a/l,t-=n.offsetY*i/h,a*=n.width/l,i*=n.height/h}const o=this.filmOffset;o!==0&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+a,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Fr=-90,kr=1;class t1 extends ut{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new xi(Fr,kr,e,t);a.layers=this.layers,this.add(a);const r=new xi(Fr,kr,e,t);r.layers=this.layers,this.add(r);const n=new xi(Fr,kr,e,t);n.layers=this.layers,this.add(n);const o=new xi(Fr,kr,e,t);o.layers=this.layers,this.add(o);const l=new xi(Fr,kr,e,t);l.layers=this.layers,this.add(l);const h=new xi(Fr,kr,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,a,r,n,o,l]=t;for(const h of t)this.remove(h);if(e===Cs)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),n.up.set(0,0,1),n.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===$l)i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),n.up.set(0,0,-1),n.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,n,o,l,h,c]=this.children,d=e.getRenderTarget(),_=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,a),e.render(t,r),e.setRenderTarget(i,1,a),e.render(t,n),e.setRenderTarget(i,2,a),e.render(t,o),e.setRenderTarget(i,3,a),e.render(t,l),e.setRenderTarget(i,4,a),e.render(t,h),i.texture.generateMipmaps=g,e.setRenderTarget(i,5,a),e.render(t,c),e.setRenderTarget(d,_,u),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class D0 extends Ct{constructor(e=[],t=cn,i,a,r,n,o,l,h,c){super(e,t,i,a,r,n,o,l,h,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class i1 extends gt{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},a=[i,i,i,i,i,i];this.texture=new D0(a),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Vo(5,5,5),r=new Le({name:"CubemapFromEquirect",uniforms:vn(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ai,blending:di});r.uniforms.tEquirect.value=t;const n=new Ne(a,r),o=t.minFilter;return t.minFilter===ms&&(t.minFilter=yt),new t1(1,10,this).update(e,n),t.minFilter=o,n.geometry.dispose(),n.material.dispose(),this}clear(e,t=!0,i=!0,a=!0){const r=e.getRenderTarget();for(let n=0;n<6;n++)e.setRenderTarget(this,n),e.clear(t,i,a);e.setRenderTarget(r)}}class ys extends ut{constructor(){super(),this.isGroup=!0,this.type="Group"}}const s1={type:"move"};class Qh{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ys,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ys,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new S,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new S),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ys,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new S,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new S),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let a=null,r=null,n=null;const o=this._targetRay,l=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){n=!0;for(const g of e.hand.values()){const v=t.getJointPose(g,i),f=this._getHandJoint(h,g);v!==null&&(f.matrix.fromArray(v.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,f.jointRadius=v.radius),f.visible=v!==null}const c=h.joints["index-finger-tip"],d=h.joints["thumb-tip"],_=c.position.distanceTo(d.position),u=.02,x=.005;h.inputState.pinching&&_>u+x?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&_<=u-x&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(a=t.getPose(e.targetRaySpace,i),a===null&&r!==null&&(a=r),a!==null&&(o.matrix.fromArray(a.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,a.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(a.linearVelocity)):o.hasLinearVelocity=!1,a.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(a.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(s1)))}return o!==null&&(o.visible=a!==null),l!==null&&(l.visible=r!==null),h!==null&&(h.visible=n!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new ys;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class gn extends ut{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ps,this.environmentIntensity=1,this.environmentRotation=new Ps,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class R0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Sd,this.updateRanges=[],this.version=0,this.uuid=zs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let a=0,r=this.stride;a<r;a++)this.array[e+a]=t.array[i+a];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=zs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=zs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const wi=new S;class yo{constructor(e,t,i,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)wi.fromBufferAttribute(this,t),wi.applyMatrix4(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)wi.fromBufferAttribute(this,t),wi.applyNormalMatrix(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)wi.fromBufferAttribute(this,t),wi.transformDirection(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ps(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ft(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=ft(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ft(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ft(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ft(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ps(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ps(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ps(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ps(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ft(t,this.array),i=ft(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=ft(t,this.array),i=ft(i,this.array),a=ft(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=a,this}setXYZW(e,t,i,a,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ft(t,this.array),i=ft(i,this.array),a=ft(a,this.array),r=ft(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=a,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[a+r])}return new Be(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new yo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[a+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const tf=new S,sf=new et,af=new et,a1=new S,rf=new De,pl=new S,$h=new _s,nf=new De,ec=new In;class r1 extends Ne{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Cu,this.bindMatrix=new De,this.bindMatrixInverse=new De,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ki),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,pl),this.boundingBox.expandByPoint(pl)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new _s),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,pl),this.boundingSphere.expandByPoint(pl)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,a=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),$h.copy(this.boundingSphere),$h.applyMatrix4(a),e.ray.intersectsSphere($h)!==!1&&(nf.copy(a).invert(),ec.copy(e.ray).applyMatrix4(nf),!(this.boundingBox!==null&&ec.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,ec)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new et,t=this.geometry.attributes.skinWeight;for(let i=0,a=t.count;i<a;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Cu?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===em?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,a=this.geometry;sf.fromBufferAttribute(a.attributes.skinIndex,e),af.fromBufferAttribute(a.attributes.skinWeight,e),tf.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const n=af.getComponent(r);if(n!==0){const o=sf.getComponent(r);rf.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(a1.copy(tf).applyMatrix4(rf),n)}}return t.applyMatrix4(this.bindMatrixInverse)}}class O0 extends ut{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ws extends Ct{constructor(e=null,t=1,i=1,a,r,n,o,l,h=it,c=it,d,_){super(null,n,o,l,h,c,a,r,d,_),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const of=new De,n1=new De;class u_{constructor(e=[],t=[]){this.uuid=zs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new De)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new De;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,a=this.boneTexture;for(let r=0,n=e.length;r<n;r++){const o=e[r]?e[r].matrixWorld:n1;of.multiplyMatrices(o,t[r]),of.toArray(i,r*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new u_(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ws(t,e,e,At,Et);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const a=this.bones[t];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,a=e.bones.length;i<a;i++){const r=e.bones[i];let n=t[r];n===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),n=new O0),this.bones.push(n),this.boneInverses.push(new De().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let a=0,r=t.length;a<r;a++){const n=t[a];e.bones.push(n.uuid);const o=i[a];e.boneInverses.push(o.toArray())}return e}}class xs extends Be{constructor(e,t,i,a=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Vr=new De,lf=new De,ml=[],hf=new ki,o1=new De,Hn=new Ne,Xn=new _s;class f_ extends Ne{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new xs(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<i;a++)this.setMatrixAt(a,o1)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ki),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Vr),hf.copy(e.boundingBox).applyMatrix4(Vr),this.boundingBox.union(hf)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new _s),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Vr),Xn.copy(e.boundingSphere).applyMatrix4(Vr),this.boundingSphere.union(Xn)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,a=this.morphTexture.source.data.data,r=i.length+1,n=e*r+1;for(let o=0;o<i.length;o++)i[o]=a[n+o]}raycast(e,t){const i=this.matrixWorld,a=this.count;if(Hn.geometry=this.geometry,Hn.material=this.material,Hn.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Xn.copy(this.boundingSphere),Xn.applyMatrix4(i),e.ray.intersectsSphere(Xn)!==!1))for(let r=0;r<a;r++){this.getMatrixAt(r,Vr),lf.multiplyMatrices(i,Vr),Hn.matrixWorld=lf,Hn.raycast(e,ml);for(let n=0,o=ml.length;n<o;n++){const l=ml[n];l.instanceId=r,l.object=this,t.push(l)}ml.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new xs(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,a=i.length+1;this.morphTexture===null&&(this.morphTexture=new ws(new Float32Array(a*this.count),a,this.count,r_,Et));const r=this.morphTexture.source.data.data;let n=0;for(let h=0;h<i.length;h++)n+=i[h];const o=this.geometry.morphTargetsRelative?1:1-n,l=a*e;r[l]=o,r.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const tc=new S,l1=new S,h1=new Ve;class Ys{constructor(e=new S(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,a){return this.normal.set(e,t,i),this.constant=a,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const a=tc.subVectors(i,t).cross(l1.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(tc),a=this.normal.dot(i);if(a===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/a;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||h1.getNormalMatrix(e),a=this.coplanarPoint(tc).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ja=new _s,c1=new $(.5,.5),yl=new S;class Cn{constructor(e=new Ys,t=new Ys,i=new Ys,a=new Ys,r=new Ys,n=new Ys){this.planes=[e,t,i,a,r,n]}set(e,t,i,a,r,n){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(a),o[4].copy(r),o[5].copy(n),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Cs,i=!1){const a=this.planes,r=e.elements,n=r[0],o=r[1],l=r[2],h=r[3],c=r[4],d=r[5],_=r[6],u=r[7],x=r[8],g=r[9],v=r[10],f=r[11],y=r[12],w=r[13],p=r[14],b=r[15];if(a[0].setComponents(h-n,u-c,f-x,b-y).normalize(),a[1].setComponents(h+n,u+c,f+x,b+y).normalize(),a[2].setComponents(h+o,u+d,f+g,b+w).normalize(),a[3].setComponents(h-o,u-d,f-g,b-w).normalize(),i)a[4].setComponents(l,_,v,p).normalize(),a[5].setComponents(h-l,u-_,f-v,b-p).normalize();else if(a[4].setComponents(h-l,u-_,f-v,b-p).normalize(),t===Cs)a[5].setComponents(h+l,u+_,f+v,b+p).normalize();else if(t===$l)a[5].setComponents(l,_,v,p).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ja.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ja.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ja)}intersectsSprite(e){ja.center.set(0,0,0);const t=c1.distanceTo(e.center);return ja.radius=.7071067811865476+t,ja.applyMatrix4(e.matrixWorld),this.intersectsSphere(ja)}intersectsSphere(e){const t=this.planes,i=e.center,a=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<a)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const a=t[i];if(yl.x=a.normal.x>0?e.max.x:e.min.x,yl.y=a.normal.y>0?e.max.y:e.min.y,yl.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(yl)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class v_ extends Ci{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new X(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const eh=new S,th=new S,cf=new De,jn=new In,wl=new _s,ic=new S,df=new S;class g_ extends ut{constructor(e=new Wt,t=new v_){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let a=1,r=t.count;a<r;a++)eh.fromBufferAttribute(t,a-1),th.fromBufferAttribute(t,a),i[a]=i[a-1],i[a]+=eh.distanceTo(th);e.setAttribute("lineDistance",new Bt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,a=this.matrixWorld,r=e.params.Line.threshold,n=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),wl.copy(i.boundingSphere),wl.applyMatrix4(a),wl.radius+=r,e.ray.intersectsSphere(wl)===!1)return;cf.copy(a).invert(),jn.copy(e.ray).applyMatrix4(cf);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,h=this.isLineSegments?2:1,c=i.index,_=i.attributes.position;if(c!==null){const u=Math.max(0,n.start),x=Math.min(c.count,n.start+n.count);for(let g=u,v=x-1;g<v;g+=h){const f=c.getX(g),y=c.getX(g+1),w=zl(this,e,jn,l,f,y,g);w&&t.push(w)}if(this.isLineLoop){const g=c.getX(x-1),v=c.getX(u),f=zl(this,e,jn,l,g,v,x-1);f&&t.push(f)}}else{const u=Math.max(0,n.start),x=Math.min(_.count,n.start+n.count);for(let g=u,v=x-1;g<v;g+=h){const f=zl(this,e,jn,l,g,g+1,g);f&&t.push(f)}if(this.isLineLoop){const g=zl(this,e,jn,l,x-1,u,x-1);g&&t.push(g)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=a.length;r<n;r++){const o=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}function zl(s,e,t,i,a,r,n){const o=s.geometry.attributes.position;if(eh.fromBufferAttribute(o,a),th.fromBufferAttribute(o,r),t.distanceSqToSegment(eh,th,ic,df)>i)return;ic.applyMatrix4(s.matrixWorld);const h=e.ray.origin.distanceTo(ic);if(!(h<e.near||h>e.far))return{distance:h,point:df.clone().applyMatrix4(s.matrixWorld),index:n,face:null,faceIndex:null,barycoord:null,object:s}}const _f=new S,uf=new S;class N0 extends g_{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let a=0,r=t.count;a<r;a+=2)_f.fromBufferAttribute(t,a),uf.fromBufferAttribute(t,a+1),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+_f.distanceTo(uf);e.setAttribute("lineDistance",new Bt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class d1 extends g_{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class L0 extends Ci{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new X(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ff=new De,Ed=new In,Pl=new _s,bl=new S;class Dn extends ut{constructor(e=new Wt,t=new L0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,a=this.matrixWorld,r=e.params.Points.threshold,n=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Pl.copy(i.boundingSphere),Pl.applyMatrix4(a),Pl.radius+=r,e.ray.intersectsSphere(Pl)===!1)return;ff.copy(a).invert(),Ed.copy(e.ray).applyMatrix4(ff);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,h=i.index,d=i.attributes.position;if(h!==null){const _=Math.max(0,n.start),u=Math.min(h.count,n.start+n.count);for(let x=_,g=u;x<g;x++){const v=h.getX(x);bl.fromBufferAttribute(d,v),vf(bl,v,l,a,e,t,this)}}else{const _=Math.max(0,n.start),u=Math.min(d.count,n.start+n.count);for(let x=_,g=u;x<g;x++)bl.fromBufferAttribute(d,x),vf(bl,x,l,a,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,n=a.length;r<n;r++){const o=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}}function vf(s,e,t,i,a,r,n){const o=Ed.distanceSqToPoint(s);if(o<t){const l=new S;Ed.closestPointToPoint(s,l),l.applyMatrix4(i);const h=a.ray.origin.distanceTo(l);if(h<a.near||h>a.far)return;r.push({distance:h,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:n})}}class gf extends Ct{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=it,this.minFilter=it,this.generateMipmaps=!1,this.needsUpdate=!0}}class F0 extends Ct{constructor(e,t,i,a,r,n,o,l,h){super(e,t,i,a,r,n,o,l,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class x_ extends Ct{constructor(e,t,i=Na,a,r,n,o=it,l=it,h,c=go,d=1){if(c!==go&&c!==un)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const _={width:e,height:t,depth:d};super(_,a,r,n,o,l,c,i,h),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new c_(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class _1{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,a=this.getPoint(0),r=0;t.push(0);for(let n=1;n<=e;n++)i=this.getPoint(n/e),r+=i.distanceTo(a),t.push(r),a=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let a=0;const r=i.length;let n;t?n=t:n=e*i[r-1];let o=0,l=r-1,h;for(;o<=l;)if(a=Math.floor(o+(l-o)/2),h=i[a]-n,h<0)o=a+1;else if(h>0)l=a-1;else{l=a;break}if(a=l,i[a]===n)return a/(r-1);const c=i[a],_=i[a+1]-c,u=(n-c)/_;return(a+u)/(r-1)}getTangent(e,t){let a=e-1e-4,r=e+1e-4;a<0&&(a=0),r>1&&(r=1);const n=this.getPoint(a),o=this.getPoint(r),l=t||(n.isVector2?new $:new S);return l.copy(o).sub(n).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new S,a=[],r=[],n=[],o=new S,l=new De;for(let u=0;u<=e;u++){const x=u/e;a[u]=this.getTangentAt(x,new S)}r[0]=new S,n[0]=new S;let h=Number.MAX_VALUE;const c=Math.abs(a[0].x),d=Math.abs(a[0].y),_=Math.abs(a[0].z);c<=h&&(h=c,i.set(1,0,0)),d<=h&&(h=d,i.set(0,1,0)),_<=h&&i.set(0,0,1),o.crossVectors(a[0],i).normalize(),r[0].crossVectors(a[0],o),n[0].crossVectors(a[0],r[0]);for(let u=1;u<=e;u++){if(r[u]=r[u-1].clone(),n[u]=n[u-1].clone(),o.crossVectors(a[u-1],a[u]),o.length()>Number.EPSILON){o.normalize();const x=Math.acos(Ue(a[u-1].dot(a[u]),-1,1));r[u].applyMatrix4(l.makeRotationAxis(o,x))}n[u].crossVectors(a[u],r[u])}if(t===!0){let u=Math.acos(Ue(r[0].dot(r[e]),-1,1));u/=e,a[0].dot(o.crossVectors(r[0],r[e]))>0&&(u=-u);for(let x=1;x<=e;x++)r[x].applyMatrix4(l.makeRotationAxis(a[x],u*x)),n[x].crossVectors(a[x],r[x])}return{tangents:a,normals:r,binormals:n}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}function p_(){let s=0,e=0,t=0,i=0;function a(r,n,o,l){s=r,e=o,t=-3*r+3*n-2*o-l,i=2*r-2*n+o+l}return{initCatmullRom:function(r,n,o,l,h){a(n,o,h*(o-r),h*(l-n))},initNonuniformCatmullRom:function(r,n,o,l,h,c,d){let _=(n-r)/h-(o-r)/(h+c)+(o-n)/c,u=(o-n)/c-(l-n)/(c+d)+(l-o)/d;_*=c,u*=c,a(n,o,_,u)},calc:function(r){const n=r*r,o=n*r;return s+e*r+t*n+i*o}}}const Tl=new S,sc=new p_,ac=new p_,rc=new p_;class k0 extends _1{constructor(e=[],t=!1,i="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=a}getPoint(e,t=new S){const i=t,a=this.points,r=a.length,n=(r-(this.closed?0:1))*e;let o=Math.floor(n),l=n-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/r)+1)*r:l===0&&o===r-1&&(o=r-2,l=1);let h,c;this.closed||o>0?h=a[(o-1)%r]:(Tl.subVectors(a[0],a[1]).add(a[0]),h=Tl);const d=a[o%r],_=a[(o+1)%r];if(this.closed||o+2<r?c=a[(o+2)%r]:(Tl.subVectors(a[r-1],a[r-2]).add(a[r-1]),c=Tl),this.curveType==="centripetal"||this.curveType==="chordal"){const u=this.curveType==="chordal"?.5:.25;let x=Math.pow(h.distanceToSquared(d),u),g=Math.pow(d.distanceToSquared(_),u),v=Math.pow(_.distanceToSquared(c),u);g<1e-4&&(g=1),x<1e-4&&(x=g),v<1e-4&&(v=g),sc.initNonuniformCatmullRom(h.x,d.x,_.x,c.x,x,g,v),ac.initNonuniformCatmullRom(h.y,d.y,_.y,c.y,x,g,v),rc.initNonuniformCatmullRom(h.z,d.z,_.z,c.z,x,g,v)}else this.curveType==="catmullrom"&&(sc.initCatmullRom(h.x,d.x,_.x,c.x,this.tension),ac.initCatmullRom(h.y,d.y,_.y,c.y,this.tension),rc.initCatmullRom(h.z,d.z,_.z,c.z,this.tension));return i.set(sc.calc(l),ac.calc(l),rc.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(new S().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}class Vs extends Wt{constructor(e=1,t=1,i=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:a};const r=e/2,n=t/2,o=Math.floor(i),l=Math.floor(a),h=o+1,c=l+1,d=e/o,_=t/l,u=[],x=[],g=[],v=[];for(let f=0;f<c;f++){const y=f*_-n;for(let w=0;w<h;w++){const p=w*d-r;x.push(p,-y,0),g.push(0,0,1),v.push(w/o),v.push(1-f/l)}}for(let f=0;f<l;f++)for(let y=0;y<o;y++){const w=y+h*f,p=y+h*(f+1),b=y+1+h*(f+1),M=y+1+h*f;u.push(w,p,M),u.push(p,b,M)}this.setIndex(u),this.setAttribute("position",new Bt(x,3)),this.setAttribute("normal",new Bt(g,3)),this.setAttribute("uv",new Bt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vs(e.width,e.height,e.widthSegments,e.heightSegments)}}class xn extends Wt{constructor(e=1,t=32,i=16,a=0,r=Math.PI*2,n=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:a,phiLength:r,thetaStart:n,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(n+o,Math.PI);let h=0;const c=[],d=new S,_=new S,u=[],x=[],g=[],v=[];for(let f=0;f<=i;f++){const y=[],w=f/i;let p=0;f===0&&n===0?p=.5/t:f===i&&l===Math.PI&&(p=-.5/t);for(let b=0;b<=t;b++){const M=b/t;d.x=-e*Math.cos(a+M*r)*Math.sin(n+w*o),d.y=e*Math.cos(n+w*o),d.z=e*Math.sin(a+M*r)*Math.sin(n+w*o),x.push(d.x,d.y,d.z),_.copy(d).normalize(),g.push(_.x,_.y,_.z),v.push(M+p,1-w),y.push(h++)}c.push(y)}for(let f=0;f<i;f++)for(let y=0;y<t;y++){const w=c[f][y+1],p=c[f][y],b=c[f+1][y],M=c[f+1][y+1];(f!==0||n>0)&&u.push(w,p,M),(f!==i-1||l<Math.PI)&&u.push(p,b,M)}this.setIndex(u),this.setAttribute("position",new Bt(x,3)),this.setAttribute("normal",new Bt(g,3)),this.setAttribute("uv",new Bt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xn(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class nc extends Le{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class _a extends Ci{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new X(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xh,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ps,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bs extends _a{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new $(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ue(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new X(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new X(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new X(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class V0 extends Ci{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new X(16777215),this.specular=new X(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xh,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ps,this.combine=t_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Zn extends Ci{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new X(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xh,this.normalScale=new $(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class u1 extends Ci{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=da,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class f1 extends Ci{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Sl(s,e){return!s||s.constructor===e?s:typeof e.BYTES_PER_ELEMENT=="number"?new e(s):Array.prototype.slice.call(s)}function v1(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}function g1(s){function e(a,r){return s[a]-s[r]}const t=s.length,i=new Array(t);for(let a=0;a!==t;++a)i[a]=a;return i.sort(e),i}function xf(s,e,t){const i=s.length,a=new s.constructor(i);for(let r=0,n=0;n!==i;++r){const o=t[r]*e;for(let l=0;l!==e;++l)a[n++]=s[o+l]}return a}function U0(s,e,t,i){let a=1,r=s[0];for(;r!==void 0&&r[i]===void 0;)r=s[a++];if(r===void 0)return;let n=r[i];if(n!==void 0)if(Array.isArray(n))do n=r[i],n!==void 0&&(e.push(r.time),t.push(...n)),r=s[a++];while(r!==void 0);else if(n.toArray!==void 0)do n=r[i],n!==void 0&&(e.push(r.time),n.toArray(t,t.length)),r=s[a++];while(r!==void 0);else do n=r[i],n!==void 0&&(e.push(r.time),t.push(n)),r=s[a++];while(r!==void 0)}class Uo{constructor(e,t,i,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,a=t[i],r=t[i-1];i:{e:{let n;t:{s:if(!(e<a)){for(let o=i+2;;){if(a===void 0){if(e<r)break s;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(r=a,a=t[++i],e<a)break e}n=t.length;break t}if(!(e>=r)){const o=t[1];e<o&&(i=2,r=o);for(let l=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(a=r,r=t[--i-1],e>=r)break e}n=i,i=0;break t}break i}for(;i<n;){const o=i+n>>>1;e<t[o]?n=o:i=o+1}if(a=t[i],r=t[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,a)}return this.interpolate_(i,r,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,a=this.valueSize,r=e*a;for(let n=0;n!==a;++n)t[n]=i[r+n];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class x1 extends Uo{constructor(e,t,i,a){super(e,t,i,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Du,endingEnd:Du}}intervalChanged_(e,t,i){const a=this.parameterPositions;let r=e-2,n=e+1,o=a[r],l=a[n];if(o===void 0)switch(this.getSettings_().endingStart){case Ru:r=e,o=2*t-i;break;case Ou:r=a.length-2,o=t+a[r]-a[r+1];break;default:r=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Ru:n=e,l=2*i-t;break;case Ou:n=1,l=i+a[1]-a[0];break;default:n=e-1,l=t}const h=(i-t)*.5,c=this.valueSize;this._weightPrev=h/(t-o),this._weightNext=h/(l-i),this._offsetPrev=r*c,this._offsetNext=n*c}interpolate_(e,t,i,a){const r=this.resultBuffer,n=this.sampleValues,o=this.valueSize,l=e*o,h=l-o,c=this._offsetPrev,d=this._offsetNext,_=this._weightPrev,u=this._weightNext,x=(i-t)/(a-t),g=x*x,v=g*x,f=-_*v+2*_*g-_*x,y=(1+_)*v+(-1.5-2*_)*g+(-.5+_)*x+1,w=(-1-u)*v+(1.5+u)*g+.5*x,p=u*v-u*g;for(let b=0;b!==o;++b)r[b]=f*n[c+b]+y*n[h+b]+w*n[l+b]+p*n[d+b];return r}}class p1 extends Uo{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e,t,i,a){const r=this.resultBuffer,n=this.sampleValues,o=this.valueSize,l=e*o,h=l-o,c=(i-t)/(a-t),d=1-c;for(let _=0;_!==o;++_)r[_]=n[h+_]*d+n[l+_]*c;return r}}class m1 extends Uo{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ts{constructor(e,t,i,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Sl(t,this.TimeBufferType),this.values=Sl(i,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Sl(e.times,Array),values:Sl(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(i.interpolation=a)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new m1(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new p1(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new x1(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case xo:t=this.InterpolantFactoryMethodDiscrete;break;case po:t=this.InterpolantFactoryMethodLinear;break;case Ch:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xo;case this.InterpolantFactoryMethodLinear:return po;case this.InterpolantFactoryMethodSmooth:return Ch}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,a=t.length;i!==a;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,a=t.length;i!==a;++i)t[i]*=e}return this}trim(e,t){const i=this.times,a=i.length;let r=0,n=a-1;for(;r!==a&&i[r]<e;)++r;for(;n!==-1&&i[n]>t;)--n;if(++n,r!==0||n!==a){r>=n&&(n=Math.max(n,1),r=n-1);const o=this.getValueSize();this.times=i.slice(r,n),this.values=this.values.slice(r*o,n*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,a=this.values,r=i.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let n=null;for(let o=0;o!==r;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(n!==null&&n>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,n),e=!1;break}n=l}if(a!==void 0&&v1(a))for(let o=0,l=a.length;o!==l;++o){const h=a[o];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),a=this.getInterpolation()===Ch,r=e.length-1;let n=1;for(let o=1;o<r;++o){let l=!1;const h=e[o],c=e[o+1];if(h!==c&&(o!==1||h!==e[0]))if(a)l=!0;else{const d=o*i,_=d-i,u=d+i;for(let x=0;x!==i;++x){const g=t[d+x];if(g!==t[_+x]||g!==t[u+x]){l=!0;break}}}if(l){if(o!==n){e[n]=e[o];const d=o*i,_=n*i;for(let u=0;u!==i;++u)t[_+u]=t[d+u]}++n}}if(r>0){e[n]=e[r];for(let o=r*i,l=n*i,h=0;h!==i;++h)t[l+h]=t[o+h];++n}return n!==e.length?(this.times=e.slice(0,n),this.values=t.slice(0,n*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,a=new i(this.name,e,t);return a.createInterpolant=this.createInterpolant,a}}Ts.prototype.ValueTypeName="";Ts.prototype.TimeBufferType=Float32Array;Ts.prototype.ValueBufferType=Float32Array;Ts.prototype.DefaultInterpolation=po;class Rn extends Ts{constructor(e,t,i){super(e,t,i)}}Rn.prototype.ValueTypeName="bool";Rn.prototype.ValueBufferType=Array;Rn.prototype.DefaultInterpolation=xo;Rn.prototype.InterpolantFactoryMethodLinear=void 0;Rn.prototype.InterpolantFactoryMethodSmooth=void 0;class B0 extends Ts{constructor(e,t,i,a){super(e,t,i,a)}}B0.prototype.ValueTypeName="color";class pn extends Ts{constructor(e,t,i,a){super(e,t,i,a)}}pn.prototype.ValueTypeName="number";class y1 extends Uo{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e,t,i,a){const r=this.resultBuffer,n=this.sampleValues,o=this.valueSize,l=(i-t)/(a-t);let h=e*o;for(let c=h+o;h!==c;h+=4)ji.slerpFlat(r,0,n,h-o,n,h,l);return r}}class mn extends Ts{constructor(e,t,i,a){super(e,t,i,a)}InterpolantFactoryMethodLinear(e){return new y1(this.times,this.values,this.getValueSize(),e)}}mn.prototype.ValueTypeName="quaternion";mn.prototype.InterpolantFactoryMethodSmooth=void 0;class On extends Ts{constructor(e,t,i){super(e,t,i)}}On.prototype.ValueTypeName="string";On.prototype.ValueBufferType=Array;On.prototype.DefaultInterpolation=xo;On.prototype.InterpolantFactoryMethodLinear=void 0;On.prototype.InterpolantFactoryMethodSmooth=void 0;class yn extends Ts{constructor(e,t,i,a){super(e,t,i,a)}}yn.prototype.ValueTypeName="vector";class w1{constructor(e="",t=-1,i=[],a=im){this.name=e,this.tracks=i,this.duration=t,this.blendMode=a,this.uuid=zs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,a=1/(e.fps||1);for(let n=0,o=i.length;n!==o;++n)t.push(P1(i[n]).scale(a));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,a={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,n=i.length;r!==n;++r)t.push(Ts.toJSON(i[r]));return a}static CreateFromMorphTargetSequence(e,t,i,a){const r=t.length,n=[];for(let o=0;o<r;o++){let l=[],h=[];l.push((o+r-1)%r,o,(o+1)%r),h.push(0,1,0);const c=g1(l);l=xf(l,1,c),h=xf(h,1,c),!a&&l[0]===0&&(l.push(r),h.push(h[0])),n.push(new pn(".morphTargetInfluences["+t[o].name+"]",l,h).scale(1/i))}return new this(e,-1,n)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const a=e;i=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<i.length;a++)if(i[a].name===t)return i[a];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const a={},r=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const h=e[o],c=h.name.match(r);if(c&&c.length>1){const d=c[1];let _=a[d];_||(a[d]=_=[]),_.push(h)}}const n=[];for(const o in a)n.push(this.CreateFromMorphTargetSequence(o,a[o],t,i));return n}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,_,u,x,g){if(u.length!==0){const v=[],f=[];U0(u,v,f,x),v.length!==0&&g.push(new d(_,v,f))}},a=[],r=e.name||"default",n=e.fps||30,o=e.blendMode;let l=e.length||-1;const h=e.hierarchy||[];for(let d=0;d<h.length;d++){const _=h[d].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const u={};let x;for(x=0;x<_.length;x++)if(_[x].morphTargets)for(let g=0;g<_[x].morphTargets.length;g++)u[_[x].morphTargets[g]]=-1;for(const g in u){const v=[],f=[];for(let y=0;y!==_[x].morphTargets.length;++y){const w=_[x];v.push(w.time),f.push(w.morphTarget===g?1:0)}a.push(new pn(".morphTargetInfluence["+g+"]",v,f))}l=u.length*n}else{const u=".bones["+t[d].name+"]";i(yn,u+".position",_,"pos",a),i(mn,u+".quaternion",_,"rot",a),i(yn,u+".scale",_,"scl",a)}}return a.length===0?null:new this(r,l,a,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,a=e.length;i!==a;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function z1(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return pn;case"vector":case"vector2":case"vector3":case"vector4":return yn;case"color":return B0;case"quaternion":return mn;case"bool":case"boolean":return Rn;case"string":return On}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}function P1(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=z1(s.type);if(s.times===void 0){const t=[],i=[];U0(s.keys,t,i,"value"),s.times=t,s.values=i}return e.parse!==void 0?e.parse(s):new e(s.name,s.times,s.values,s.interpolation)}const ea={enabled:!1,files:{},add:function(s,e){this.enabled!==!1&&(this.files[s]=e)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class W0{constructor(e,t,i){const a=this;let r=!1,n=0,o=0,l;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.abortController=new AbortController,this.itemStart=function(c){o++,r===!1&&a.onStart!==void 0&&a.onStart(c,n,o),r=!0},this.itemEnd=function(c){n++,a.onProgress!==void 0&&a.onProgress(c,n,o),n===o&&(r=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(c){a.onError!==void 0&&a.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,d){return h.push(c,d),this},this.removeHandler=function(c){const d=h.indexOf(c);return d!==-1&&h.splice(d,2),this},this.getHandler=function(c){for(let d=0,_=h.length;d<_;d+=2){const u=h[d],x=h[d+1];if(u.global&&(u.lastIndex=0),u.test(c))return x}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const b1=new W0;class ua{constructor(e){this.manager=e!==void 0?e:b1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(a,r){i.load(e,a,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}ua.DEFAULT_MATERIAL_NAME="__DEFAULT";const Xs={};class T1 extends Error{constructor(e,t){super(e),this.response=t}}class wn extends ua{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=ea.get(`file:${e}`);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(Xs[e]!==void 0){Xs[e].push({onLoad:t,onProgress:i,onError:a});return}Xs[e]=[],Xs[e].push({onLoad:t,onProgress:i,onError:a});const n=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,l=this.responseType;fetch(n).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const c=Xs[e],d=h.body.getReader(),_=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),u=_?parseInt(_):0,x=u!==0;let g=0;const v=new ReadableStream({start(f){y();function y(){d.read().then(({done:w,value:p})=>{if(w)f.close();else{g+=p.byteLength;const b=new ProgressEvent("progress",{lengthComputable:x,loaded:g,total:u});for(let M=0,E=c.length;M<E;M++){const A=c[M];A.onProgress&&A.onProgress(b)}f.enqueue(p),y()}},w=>{f.error(w)})}}});return new Response(v)}else throw new T1(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(l){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return h.json();default:if(o==="")return h.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),_=d&&d[1]?d[1].toLowerCase():void 0,u=new TextDecoder(_);return h.arrayBuffer().then(x=>u.decode(x))}}}).then(h=>{ea.add(`file:${e}`,h);const c=Xs[e];delete Xs[e];for(let d=0,_=c.length;d<_;d++){const u=c[d];u.onLoad&&u.onLoad(h)}}).catch(h=>{const c=Xs[e];if(c===void 0)throw this.manager.itemError(e),h;delete Xs[e];for(let d=0,_=c.length;d<_;d++){const u=c[d];u.onError&&u.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}const Ur=new WeakMap;class S1 extends ua{constructor(e){super(e)}load(e,t,i,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,n=ea.get(`image:${e}`);if(n!==void 0){if(n.complete===!0)r.manager.itemStart(e),setTimeout(function(){t&&t(n),r.manager.itemEnd(e)},0);else{let d=Ur.get(n);d===void 0&&(d=[],Ur.set(n,d)),d.push({onLoad:t,onError:a})}return n}const o=mo("img");function l(){c(),t&&t(this);const d=Ur.get(this)||[];for(let _=0;_<d.length;_++){const u=d[_];u.onLoad&&u.onLoad(this)}Ur.delete(this),r.manager.itemEnd(e)}function h(d){c(),a&&a(d),ea.remove(`image:${e}`);const _=Ur.get(this)||[];for(let u=0;u<_.length;u++){const x=_[u];x.onError&&x.onError(d)}Ur.delete(this),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){o.removeEventListener("load",l,!1),o.removeEventListener("error",h,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),ea.add(`image:${e}`,o),r.manager.itemStart(e),o.src=e,o}}class E1 extends ua{constructor(e){super(e)}load(e,t,i,a){const r=this,n=new ws,o=new wn(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,function(l){let h;try{h=r.parse(l)}catch(c){if(a!==void 0)a(c);else{console.error(c);return}}h.image!==void 0?n.image=h.image:h.data!==void 0&&(n.image.width=h.width,n.image.height=h.height,n.image.data=h.data),n.wrapS=h.wrapS!==void 0?h.wrapS:rs,n.wrapT=h.wrapT!==void 0?h.wrapT:rs,n.magFilter=h.magFilter!==void 0?h.magFilter:yt,n.minFilter=h.minFilter!==void 0?h.minFilter:yt,n.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&&(n.colorSpace=h.colorSpace),h.flipY!==void 0&&(n.flipY=h.flipY),h.format!==void 0&&(n.format=h.format),h.type!==void 0&&(n.type=h.type),h.mipmaps!==void 0&&(n.mipmaps=h.mipmaps,n.minFilter=ms),h.mipmapCount===1&&(n.minFilter=yt),h.generateMipmaps!==void 0&&(n.generateMipmaps=h.generateMipmaps),n.needsUpdate=!0,t&&t(n,h)},i,a),n}}class A1 extends ua{constructor(e){super(e)}load(e,t,i,a){const r=new Ct,n=new S1(this.manager);return n.setCrossOrigin(this.crossOrigin),n.setPath(this.path),n.load(e,function(o){r.image=o,r.needsUpdate=!0,t!==void 0&&t(r)},i,a),r}}let m_=class extends ut{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new X(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};const oc=new De,pf=new S,mf=new S;class y_{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new $(512,512),this.mapType=$t,this.map=null,this.mapPass=null,this.matrix=new De,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cn,this._frameExtents=new $(1,1),this._viewportCount=1,this._viewports=[new et(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;pf.setFromMatrixPosition(e.matrixWorld),t.position.copy(pf),mf.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(mf),t.updateMatrixWorld(),oc.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oc,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(oc)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class M1 extends y_{constructor(){super(new xi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=fn*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,r=e.distance||t.far;(i!==t.fov||a!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=a,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class I1 extends m_{constructor(e,t,i=0,a=Math.PI/3,r=0,n=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ut.DEFAULT_UP),this.updateMatrix(),this.target=new ut,this.distance=i,this.angle=a,this.penumbra=r,this.decay=n,this.map=null,this.shadow=new M1}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const yf=new De,Jn=new S,lc=new S;class C1 extends y_{constructor(){super(new xi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new $(4,2),this._viewportCount=6,this._viewports=[new et(2,1,1,1),new et(0,1,1,1),new et(3,1,1,1),new et(1,1,1,1),new et(3,0,1,1),new et(1,0,1,1)],this._cubeDirections=[new S(1,0,0),new S(-1,0,0),new S(0,0,1),new S(0,0,-1),new S(0,1,0),new S(0,-1,0)],this._cubeUps=[new S(0,1,0),new S(0,1,0),new S(0,1,0),new S(0,1,0),new S(0,0,1),new S(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,a=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),Jn.setFromMatrixPosition(e.matrixWorld),i.position.copy(Jn),lc.copy(i.position),lc.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(lc),i.updateMatrixWorld(),a.makeTranslation(-Jn.x,-Jn.y,-Jn.z),yf.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yf,i.coordinateSystem,i.reversedDepth)}}class zn extends m_{constructor(e,t,i=0,a=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=a,this.shadow=new C1}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class wr extends __{constructor(e=-1,t=1,i=1,a=-1,r=.1,n=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=a,this.near=r,this.far=n,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,a,r,n){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=r,this.view.height=n,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let r=i-e,n=i+e,o=a+t,l=a-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=h*this.view.offsetX,n=r+h*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(r,n,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class D1 extends y_{constructor(){super(new wr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class wo extends m_{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ut.DEFAULT_UP),this.updateMatrix(),this.target=new ut,this.shadow=new D1}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ho{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}const hc=new WeakMap;class w_ extends ua{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,n=ea.get(`image-bitmap:${e}`);if(n!==void 0){if(r.manager.itemStart(e),n.then){n.then(h=>{if(hc.has(n)===!0)a&&a(hc.get(n)),r.manager.itemError(e),r.manager.itemEnd(e);else return t&&t(h),r.manager.itemEnd(e),h});return}return setTimeout(function(){t&&t(n),r.manager.itemEnd(e)},0),n}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,o).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(h){return ea.add(`image-bitmap:${e}`,h),t&&t(h),r.manager.itemEnd(e),h}).catch(function(h){a&&a(h),hc.set(l,h),ea.remove(`image-bitmap:${e}`),r.manager.itemError(e),r.manager.itemEnd(e)});ea.add(`image-bitmap:${e}`,l),r.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let El;class G0{static getContext(){return El===void 0&&(El=new(window.AudioContext||window.webkitAudioContext)),El}static setContext(e){El=e}}class R1 extends ua{constructor(e){super(e)}load(e,t,i,a){const r=this,n=new wn(this.manager);n.setResponseType("arraybuffer"),n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,function(l){try{const h=l.slice(0);G0.getContext().decodeAudioData(h,function(d){t(d)}).catch(o)}catch(h){o(h)}},i,a);function o(l){a?a(l):console.error(l),r.manager.itemError(e)}}}class O1 extends xi{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class N1{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Za=new S,cc=new ji,L1=new S,Ja=new S,Ka=new S;class F1 extends ut{constructor(){super(),this.type="AudioListener",this.context=G0.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new N1}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Za,cc,L1),Ja.set(0,0,-1).applyQuaternion(cc),Ka.set(0,1,0).applyQuaternion(cc),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Za.x,i),t.positionY.linearRampToValueAtTime(Za.y,i),t.positionZ.linearRampToValueAtTime(Za.z,i),t.forwardX.linearRampToValueAtTime(Ja.x,i),t.forwardY.linearRampToValueAtTime(Ja.y,i),t.forwardZ.linearRampToValueAtTime(Ja.z,i),t.upX.linearRampToValueAtTime(Ka.x,i),t.upY.linearRampToValueAtTime(Ka.y,i),t.upZ.linearRampToValueAtTime(Ka.z,i)}else t.setPosition(Za.x,Za.y,Za.z),t.setOrientation(Ja.x,Ja.y,Ja.z,Ka.x,Ka.y,Ka.z)}}let q0=class extends ut{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}};const Ya=new S,wf=new ji,k1=new S,Qa=new S;class V1 extends q0{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ya,wf,k1),Qa.set(0,0,1).applyQuaternion(wf);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ya.x,i),t.positionY.linearRampToValueAtTime(Ya.y,i),t.positionZ.linearRampToValueAtTime(Ya.z,i),t.orientationX.linearRampToValueAtTime(Qa.x,i),t.orientationY.linearRampToValueAtTime(Qa.y,i),t.orientationZ.linearRampToValueAtTime(Qa.z,i)}else t.setPosition(Ya.x,Ya.y,Ya.z),t.setOrientation(Qa.x,Qa.y,Qa.z)}}const z_="\\[\\]\\.:\\/",U1=new RegExp("["+z_+"]","g"),P_="[^"+z_+"]",B1="[^"+z_.replace("\\.","")+"]",W1=/((?:WC+[\/:])*)/.source.replace("WC",P_),G1=/(WCOD+)?/.source.replace("WCOD",B1),q1=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",P_),H1=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",P_),X1=new RegExp("^"+W1+G1+q1+H1+"$"),j1=["material","materials","bones","map"];class Z1{constructor(e,t,i){const a=i||vt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,a)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,a=this._bindings[i];a!==void 0&&a.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let a=this._targetGroup.nCachedObjects_,r=i.length;a!==r;++a)i[a].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class vt{constructor(e,t,i){this.path=t,this.parsedPath=i||vt.parseTrackName(t),this.node=vt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new vt.Composite(e,t,i):new vt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(U1,"")}static parseTrackName(e){const t=X1.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},a=i.nodeName&&i.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const r=i.nodeName.substring(a+1);j1.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,a),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(r){for(let n=0;n<r.length;n++){const o=r[n];if(o.name===t||o.uuid===t)return o;const l=i(o.children);if(l)return l}return null},a=i(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let a=0,r=i.length;a!==r;++a)e[t++]=i[a]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let a=0,r=i.length;a!==r;++a)i[a]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let a=0,r=i.length;a!==r;++a)i[a]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let a=0,r=i.length;a!==r;++a)i[a]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,a=t.propertyName;let r=t.propertyIndex;if(e||(e=vt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let h=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===h){h=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const n=e[a];if(n===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+a+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(r!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}l=this.BindingType.ArrayElement,this.resolvedProperty=n,this.propertyIndex=r}else n.fromArray!==void 0&&n.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=n):Array.isArray(n)?(l=this.BindingType.EntireArray,this.resolvedProperty=n):this.propertyName=a;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}vt.Composite=Z1;vt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};vt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};vt.prototype.GetterByBindingType=[vt.prototype._getValue_direct,vt.prototype._getValue_array,vt.prototype._getValue_arrayElement,vt.prototype._getValue_toArray];vt.prototype.SetterByBindingTypeAndVersioning=[[vt.prototype._setValue_direct,vt.prototype._setValue_direct_setNeedsUpdate,vt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vt.prototype._setValue_array,vt.prototype._setValue_array_setNeedsUpdate,vt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vt.prototype._setValue_arrayElement,vt.prototype._setValue_arrayElement_setNeedsUpdate,vt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vt.prototype._setValue_fromArray,vt.prototype._setValue_fromArray_setNeedsUpdate,vt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class O{constructor(e){this.value=e}clone(){return new O(this.value.clone===void 0?this.value:this.value.clone())}}const zf=new De;let H0=class{constructor(e,t,i=0,a=1/0){this.ray=new In(e,t),this.near=i,this.far=a,this.camera=null,this.layers=new d_,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return zf.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(zf),this}intersectObject(e,t=!0,i=[]){return Ad(e,this,i,t),i.sort(Pf),i}intersectObjects(e,t=!0,i=[]){for(let a=0,r=e.length;a<r;a++)Ad(e[a],this,i,t);return i.sort(Pf),i}};function Pf(s,e){return s.distance-e.distance}function Ad(s,e,t,i){let a=!0;if(s.layers.test(e.layers)&&s.raycast(e,t)===!1&&(a=!1),a===!0&&i===!0){const r=s.children;for(let n=0,o=r.length;n<o;n++)Ad(r[n],e,t,!0)}}class bf{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Ue(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ue(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const Tf=new $;class J1{constructor(e=new $(1/0,1/0),t=new $(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Tf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Tf).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}class K1 extends N0{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new Wt;a.setAttribute("position",new Bt(t,3)),a.setAttribute("color",new Bt(i,3));const r=new v_({vertexColors:!0,toneMapped:!1});super(a,r),this.type="AxesHelper"}setColors(e,t,i){const a=new X,r=this.geometry.attributes.color.array;return a.set(e),a.toArray(r,0),a.toArray(r,3),a.set(t),a.toArray(r,6),a.toArray(r,9),a.set(i),a.toArray(r,12),a.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Y1 extends ks{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function Sf(s,e,t,i){const a=Q1(i);switch(t){case y0:return s*e;case r_:return s*e/a.components*a.byteLength;case n_:return s*e/a.components*a.byteLength;case z0:return s*e*2/a.components*a.byteLength;case o_:return s*e*2/a.components*a.byteLength;case w0:return s*e*3/a.components*a.byteLength;case At:return s*e*4/a.components*a.byteLength;case l_:return s*e*4/a.components*a.byteLength;case Ll:case Fl:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*8;case kl:case Vl:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;case ed:case id:return Math.max(s,16)*Math.max(e,8)/4;case $c:case td:return Math.max(s,8)*Math.max(e,8)/2;case sd:case ad:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*8;case rd:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;case nd:return Math.floor((s+3)/4)*Math.floor((e+3)/4)*16;case od:return Math.floor((s+4)/5)*Math.floor((e+3)/4)*16;case ld:return Math.floor((s+4)/5)*Math.floor((e+4)/5)*16;case hd:return Math.floor((s+5)/6)*Math.floor((e+4)/5)*16;case cd:return Math.floor((s+5)/6)*Math.floor((e+5)/6)*16;case dd:return Math.floor((s+7)/8)*Math.floor((e+4)/5)*16;case _d:return Math.floor((s+7)/8)*Math.floor((e+5)/6)*16;case ud:return Math.floor((s+7)/8)*Math.floor((e+7)/8)*16;case fd:return Math.floor((s+9)/10)*Math.floor((e+4)/5)*16;case vd:return Math.floor((s+9)/10)*Math.floor((e+5)/6)*16;case gd:return Math.floor((s+9)/10)*Math.floor((e+7)/8)*16;case xd:return Math.floor((s+9)/10)*Math.floor((e+9)/10)*16;case pd:return Math.floor((s+11)/12)*Math.floor((e+9)/10)*16;case md:return Math.floor((s+11)/12)*Math.floor((e+11)/12)*16;case Ul:case yd:case wd:return Math.ceil(s/4)*Math.ceil(e/4)*16;case P0:case zd:return Math.ceil(s/4)*Math.ceil(e/4)*8;case Pd:case bd:return Math.ceil(s/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Q1(s){switch(s){case $t:case x0:return{byteLength:1,components:1};case vo:case p0:case ns:return{byteLength:2,components:1};case s_:case a_:return{byteLength:2,components:4};case Na:case i_:case Et:return{byteLength:4,components:1};case m0:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${s}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:yr}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=yr);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function X0(){let s=null,e=!1,t=null,i=null;function a(r,n){t(r,n),i=s.requestAnimationFrame(a)}return{start:function(){e!==!0&&t!==null&&(i=s.requestAnimationFrame(a),e=!0)},stop:function(){s.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){s=r}}}function $1(s){const e=new WeakMap;function t(o,l){const h=o.array,c=o.usage,d=h.byteLength,_=s.createBuffer();s.bindBuffer(l,_),s.bufferData(l,h,c),o.onUploadCallback();let u;if(h instanceof Float32Array)u=s.FLOAT;else if(typeof Float16Array<"u"&&h instanceof Float16Array)u=s.HALF_FLOAT;else if(h instanceof Uint16Array)o.isFloat16BufferAttribute?u=s.HALF_FLOAT:u=s.UNSIGNED_SHORT;else if(h instanceof Int16Array)u=s.SHORT;else if(h instanceof Uint32Array)u=s.UNSIGNED_INT;else if(h instanceof Int32Array)u=s.INT;else if(h instanceof Int8Array)u=s.BYTE;else if(h instanceof Uint8Array)u=s.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)u=s.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:_,type:u,bytesPerElement:h.BYTES_PER_ELEMENT,version:o.version,size:d}}function i(o,l,h){const c=l.array,d=l.updateRanges;if(s.bindBuffer(h,o),d.length===0)s.bufferSubData(h,0,c);else{d.sort((u,x)=>u.start-x.start);let _=0;for(let u=1;u<d.length;u++){const x=d[_],g=d[u];g.start<=x.start+x.count+1?x.count=Math.max(x.count,g.start+g.count-x.start):(++_,d[_]=g)}d.length=_+1;for(let u=0,x=d.length;u<x;u++){const g=d[u];s.bufferSubData(h,g.start*c.BYTES_PER_ELEMENT,c,g.start,g.count)}l.clearUpdateRanges()}l.onUploadCallback()}function a(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function r(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(s.deleteBuffer(l.buffer),e.delete(o))}function n(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const c=e.get(o);(!c||c.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const h=e.get(o);if(h===void 0)e.set(o,t(o,l));else if(h.version<o.version){if(h.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(h.buffer,o,l),h.version=o.version}}return{get:a,remove:r,update:n}}var ey=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,ty=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,iy=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,sy=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ay=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,ry=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ny=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,oy=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ly=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,hy=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,cy=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,dy=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,_y=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,uy=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,fy=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,vy=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,gy=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,xy=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,py=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,my=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,yy=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,wy=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,zy=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Py=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,by=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Ty=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Sy=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Ey=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Ay=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,My=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Iy="gl_FragColor = linearToOutputTexel( gl_FragColor );",Cy=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Dy=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ry=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Oy=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Ny=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Ly=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Fy=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ky=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Vy=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Uy=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,By=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Wy=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Gy=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,qy=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Hy=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Xy=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,jy=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Zy=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Jy=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ky=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Yy=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Qy=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,$y=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,e2=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,t2=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,i2=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,s2=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,a2=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,r2=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,n2=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,o2=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,l2=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,h2=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,c2=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,d2=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,_2=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,u2=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,f2=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,v2=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,g2=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,x2=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,p2=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,m2=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,y2=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,w2=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,z2=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,P2=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,b2=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,T2=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,S2=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,E2=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,A2=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,M2=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,I2=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,C2=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,D2=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,R2=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,O2=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,N2=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,L2=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,F2=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,k2=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,V2=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,U2=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,B2=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,W2=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,G2=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,q2=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,H2=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,X2=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,j2=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Z2=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,J2=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,K2=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Y2=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Q2=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const $2=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ew=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tw=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,iw=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sw=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,aw=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rw=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,nw=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,ow=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,lw=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,hw=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,cw=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dw=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_w=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uw=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fw=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vw=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gw=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xw=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,pw=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mw=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,yw=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,ww=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zw=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Pw=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,bw=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tw=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Sw=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ew=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Aw=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Mw=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Iw=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Cw=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Dw=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,He={alphahash_fragment:ey,alphahash_pars_fragment:ty,alphamap_fragment:iy,alphamap_pars_fragment:sy,alphatest_fragment:ay,alphatest_pars_fragment:ry,aomap_fragment:ny,aomap_pars_fragment:oy,batching_pars_vertex:ly,batching_vertex:hy,begin_vertex:cy,beginnormal_vertex:dy,bsdfs:_y,iridescence_fragment:uy,bumpmap_pars_fragment:fy,clipping_planes_fragment:vy,clipping_planes_pars_fragment:gy,clipping_planes_pars_vertex:xy,clipping_planes_vertex:py,color_fragment:my,color_pars_fragment:yy,color_pars_vertex:wy,color_vertex:zy,common:Py,cube_uv_reflection_fragment:by,defaultnormal_vertex:Ty,displacementmap_pars_vertex:Sy,displacementmap_vertex:Ey,emissivemap_fragment:Ay,emissivemap_pars_fragment:My,colorspace_fragment:Iy,colorspace_pars_fragment:Cy,envmap_fragment:Dy,envmap_common_pars_fragment:Ry,envmap_pars_fragment:Oy,envmap_pars_vertex:Ny,envmap_physical_pars_fragment:Xy,envmap_vertex:Ly,fog_vertex:Fy,fog_pars_vertex:ky,fog_fragment:Vy,fog_pars_fragment:Uy,gradientmap_pars_fragment:By,lightmap_pars_fragment:Wy,lights_lambert_fragment:Gy,lights_lambert_pars_fragment:qy,lights_pars_begin:Hy,lights_toon_fragment:jy,lights_toon_pars_fragment:Zy,lights_phong_fragment:Jy,lights_phong_pars_fragment:Ky,lights_physical_fragment:Yy,lights_physical_pars_fragment:Qy,lights_fragment_begin:$y,lights_fragment_maps:e2,lights_fragment_end:t2,logdepthbuf_fragment:i2,logdepthbuf_pars_fragment:s2,logdepthbuf_pars_vertex:a2,logdepthbuf_vertex:r2,map_fragment:n2,map_pars_fragment:o2,map_particle_fragment:l2,map_particle_pars_fragment:h2,metalnessmap_fragment:c2,metalnessmap_pars_fragment:d2,morphinstance_vertex:_2,morphcolor_vertex:u2,morphnormal_vertex:f2,morphtarget_pars_vertex:v2,morphtarget_vertex:g2,normal_fragment_begin:x2,normal_fragment_maps:p2,normal_pars_fragment:m2,normal_pars_vertex:y2,normal_vertex:w2,normalmap_pars_fragment:z2,clearcoat_normal_fragment_begin:P2,clearcoat_normal_fragment_maps:b2,clearcoat_pars_fragment:T2,iridescence_pars_fragment:S2,opaque_fragment:E2,packing:A2,premultiplied_alpha_fragment:M2,project_vertex:I2,dithering_fragment:C2,dithering_pars_fragment:D2,roughnessmap_fragment:R2,roughnessmap_pars_fragment:O2,shadowmap_pars_fragment:N2,shadowmap_pars_vertex:L2,shadowmap_vertex:F2,shadowmask_pars_fragment:k2,skinbase_vertex:V2,skinning_pars_vertex:U2,skinning_vertex:B2,skinnormal_vertex:W2,specularmap_fragment:G2,specularmap_pars_fragment:q2,tonemapping_fragment:H2,tonemapping_pars_fragment:X2,transmission_fragment:j2,transmission_pars_fragment:Z2,uv_pars_fragment:J2,uv_pars_vertex:K2,uv_vertex:Y2,worldpos_vertex:Q2,background_vert:$2,background_frag:ew,backgroundCube_vert:tw,backgroundCube_frag:iw,cube_vert:sw,cube_frag:aw,depth_vert:rw,depth_frag:nw,distanceRGBA_vert:ow,distanceRGBA_frag:lw,equirect_vert:hw,equirect_frag:cw,linedashed_vert:dw,linedashed_frag:_w,meshbasic_vert:uw,meshbasic_frag:fw,meshlambert_vert:vw,meshlambert_frag:gw,meshmatcap_vert:xw,meshmatcap_frag:pw,meshnormal_vert:mw,meshnormal_frag:yw,meshphong_vert:ww,meshphong_frag:zw,meshphysical_vert:Pw,meshphysical_frag:bw,meshtoon_vert:Tw,meshtoon_frag:Sw,points_vert:Ew,points_frag:Aw,shadow_vert:Mw,shadow_frag:Iw,sprite_vert:Cw,sprite_frag:Dw},ie={common:{diffuse:{value:new X(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ve},alphaMap:{value:null},alphaMapTransform:{value:new Ve},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ve}},envmap:{envMap:{value:null},envMapRotation:{value:new Ve},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ve}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ve}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ve},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ve},normalScale:{value:new $(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ve},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ve}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ve}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ve}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new X(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new X(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ve},alphaTest:{value:0},uvTransform:{value:new Ve}},sprite:{diffuse:{value:new X(16777215)},opacity:{value:1},center:{value:new $(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ve},alphaMap:{value:null},alphaMapTransform:{value:new Ve},alphaTest:{value:0}}},As={basic:{uniforms:zi([ie.common,ie.specularmap,ie.envmap,ie.aomap,ie.lightmap,ie.fog]),vertexShader:He.meshbasic_vert,fragmentShader:He.meshbasic_frag},lambert:{uniforms:zi([ie.common,ie.specularmap,ie.envmap,ie.aomap,ie.lightmap,ie.emissivemap,ie.bumpmap,ie.normalmap,ie.displacementmap,ie.fog,ie.lights,{emissive:{value:new X(0)}}]),vertexShader:He.meshlambert_vert,fragmentShader:He.meshlambert_frag},phong:{uniforms:zi([ie.common,ie.specularmap,ie.envmap,ie.aomap,ie.lightmap,ie.emissivemap,ie.bumpmap,ie.normalmap,ie.displacementmap,ie.fog,ie.lights,{emissive:{value:new X(0)},specular:{value:new X(1118481)},shininess:{value:30}}]),vertexShader:He.meshphong_vert,fragmentShader:He.meshphong_frag},standard:{uniforms:zi([ie.common,ie.envmap,ie.aomap,ie.lightmap,ie.emissivemap,ie.bumpmap,ie.normalmap,ie.displacementmap,ie.roughnessmap,ie.metalnessmap,ie.fog,ie.lights,{emissive:{value:new X(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:He.meshphysical_vert,fragmentShader:He.meshphysical_frag},toon:{uniforms:zi([ie.common,ie.aomap,ie.lightmap,ie.emissivemap,ie.bumpmap,ie.normalmap,ie.displacementmap,ie.gradientmap,ie.fog,ie.lights,{emissive:{value:new X(0)}}]),vertexShader:He.meshtoon_vert,fragmentShader:He.meshtoon_frag},matcap:{uniforms:zi([ie.common,ie.bumpmap,ie.normalmap,ie.displacementmap,ie.fog,{matcap:{value:null}}]),vertexShader:He.meshmatcap_vert,fragmentShader:He.meshmatcap_frag},points:{uniforms:zi([ie.points,ie.fog]),vertexShader:He.points_vert,fragmentShader:He.points_frag},dashed:{uniforms:zi([ie.common,ie.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:He.linedashed_vert,fragmentShader:He.linedashed_frag},depth:{uniforms:zi([ie.common,ie.displacementmap]),vertexShader:He.depth_vert,fragmentShader:He.depth_frag},normal:{uniforms:zi([ie.common,ie.bumpmap,ie.normalmap,ie.displacementmap,{opacity:{value:1}}]),vertexShader:He.meshnormal_vert,fragmentShader:He.meshnormal_frag},sprite:{uniforms:zi([ie.sprite,ie.fog]),vertexShader:He.sprite_vert,fragmentShader:He.sprite_frag},background:{uniforms:{uvTransform:{value:new Ve},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:He.background_vert,fragmentShader:He.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ve}},vertexShader:He.backgroundCube_vert,fragmentShader:He.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:He.cube_vert,fragmentShader:He.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:He.equirect_vert,fragmentShader:He.equirect_frag},distanceRGBA:{uniforms:zi([ie.common,ie.displacementmap,{referencePosition:{value:new S},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:He.distanceRGBA_vert,fragmentShader:He.distanceRGBA_frag},shadow:{uniforms:zi([ie.lights,ie.fog,{color:{value:new X(0)},opacity:{value:1}}]),vertexShader:He.shadow_vert,fragmentShader:He.shadow_frag}};As.physical={uniforms:zi([As.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ve},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ve},clearcoatNormalScale:{value:new $(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ve},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ve},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ve},sheen:{value:0},sheenColor:{value:new X(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ve},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ve},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ve},transmissionSamplerSize:{value:new $},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ve},attenuationDistance:{value:0},attenuationColor:{value:new X(0)},specularColor:{value:new X(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ve},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ve},anisotropyVector:{value:new $},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ve}}]),vertexShader:He.meshphysical_vert,fragmentShader:He.meshphysical_frag};const Al={r:0,b:0,g:0},$a=new Ps,Rw=new De;function Ow(s,e,t,i,a,r,n){const o=new X(0);let l=r===!0?0:1,h,c,d=null,_=0,u=null;function x(w){let p=w.isScene===!0?w.background:null;return p&&p.isTexture&&(p=(w.backgroundBlurriness>0?t:e).get(p)),p}function g(w){let p=!1;const b=x(w);b===null?f(o,l):b&&b.isColor&&(f(b,1),p=!0);const M=s.xr.getEnvironmentBlendMode();M==="additive"?i.buffers.color.setClear(0,0,0,1,n):M==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,n),(s.autoClear||p)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}function v(w,p){const b=x(p);b&&(b.isCubeTexture||b.mapping===gh)?(c===void 0&&(c=new Ne(new Vo(1,1,1),new Le({name:"BackgroundCubeMaterial",uniforms:vn(As.backgroundCube.uniforms),vertexShader:As.backgroundCube.vertexShader,fragmentShader:As.backgroundCube.fragmentShader,side:ai,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(M,E,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(c)),$a.copy(p.backgroundRotation),$a.x*=-1,$a.y*=-1,$a.z*=-1,b.isCubeTexture&&b.isRenderTargetTexture===!1&&($a.y*=-1,$a.z*=-1),c.material.uniforms.envMap.value=b,c.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=p.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(Rw.makeRotationFromEuler($a)),c.material.toneMapped=Qe.getTransfer(b.colorSpace)!==pt,(d!==b||_!==b.version||u!==s.toneMapping)&&(c.material.needsUpdate=!0,d=b,_=b.version,u=s.toneMapping),c.layers.enableAll(),w.unshift(c,c.geometry,c.material,0,0,null)):b&&b.isTexture&&(h===void 0&&(h=new Ne(new Vs(2,2),new Le({name:"BackgroundMaterial",uniforms:vn(As.background.uniforms),vertexShader:As.background.vertexShader,fragmentShader:As.background.fragmentShader,side:ds,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(h)),h.material.uniforms.t2D.value=b,h.material.uniforms.backgroundIntensity.value=p.backgroundIntensity,h.material.toneMapped=Qe.getTransfer(b.colorSpace)!==pt,b.matrixAutoUpdate===!0&&b.updateMatrix(),h.material.uniforms.uvTransform.value.copy(b.matrix),(d!==b||_!==b.version||u!==s.toneMapping)&&(h.material.needsUpdate=!0,d=b,_=b.version,u=s.toneMapping),h.layers.enableAll(),w.unshift(h,h.geometry,h.material,0,0,null))}function f(w,p){w.getRGB(Al,C0(s)),i.buffers.color.setClear(Al.r,Al.g,Al.b,p,n)}function y(){c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0),h!==void 0&&(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return o},setClearColor:function(w,p=1){o.set(w),l=p,f(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,f(o,l)},render:g,addToRenderList:v,dispose:y}}function Nw(s,e){const t=s.getParameter(s.MAX_VERTEX_ATTRIBS),i={},a=_(null);let r=a,n=!1;function o(P,I,U,N,F){let W=!1;const V=d(N,U,I);r!==V&&(r=V,h(r.object)),W=u(P,N,U,F),W&&x(P,N,U,F),F!==null&&e.update(F,s.ELEMENT_ARRAY_BUFFER),(W||n)&&(n=!1,p(P,I,U,N),F!==null&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,e.get(F).buffer))}function l(){return s.createVertexArray()}function h(P){return s.bindVertexArray(P)}function c(P){return s.deleteVertexArray(P)}function d(P,I,U){const N=U.wireframe===!0;let F=i[P.id];F===void 0&&(F={},i[P.id]=F);let W=F[I.id];W===void 0&&(W={},F[I.id]=W);let V=W[N];return V===void 0&&(V=_(l()),W[N]=V),V}function _(P){const I=[],U=[],N=[];for(let F=0;F<t;F++)I[F]=0,U[F]=0,N[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:U,attributeDivisors:N,object:P,attributes:{},index:null}}function u(P,I,U,N){const F=r.attributes,W=I.attributes;let V=0;const j=U.getAttributes();for(const G in j)if(j[G].location>=0){const ne=F[G];let xe=W[G];if(xe===void 0&&(G==="instanceMatrix"&&P.instanceMatrix&&(xe=P.instanceMatrix),G==="instanceColor"&&P.instanceColor&&(xe=P.instanceColor)),ne===void 0||ne.attribute!==xe||xe&&ne.data!==xe.data)return!0;V++}return r.attributesNum!==V||r.index!==N}function x(P,I,U,N){const F={},W=I.attributes;let V=0;const j=U.getAttributes();for(const G in j)if(j[G].location>=0){let ne=W[G];ne===void 0&&(G==="instanceMatrix"&&P.instanceMatrix&&(ne=P.instanceMatrix),G==="instanceColor"&&P.instanceColor&&(ne=P.instanceColor));const xe={};xe.attribute=ne,ne&&ne.data&&(xe.data=ne.data),F[G]=xe,V++}r.attributes=F,r.attributesNum=V,r.index=N}function g(){const P=r.newAttributes;for(let I=0,U=P.length;I<U;I++)P[I]=0}function v(P){f(P,0)}function f(P,I){const U=r.newAttributes,N=r.enabledAttributes,F=r.attributeDivisors;U[P]=1,N[P]===0&&(s.enableVertexAttribArray(P),N[P]=1),F[P]!==I&&(s.vertexAttribDivisor(P,I),F[P]=I)}function y(){const P=r.newAttributes,I=r.enabledAttributes;for(let U=0,N=I.length;U<N;U++)I[U]!==P[U]&&(s.disableVertexAttribArray(U),I[U]=0)}function w(P,I,U,N,F,W,V){V===!0?s.vertexAttribIPointer(P,I,U,F,W):s.vertexAttribPointer(P,I,U,N,F,W)}function p(P,I,U,N){g();const F=N.attributes,W=U.getAttributes(),V=I.defaultAttributeValues;for(const j in W){const G=W[j];if(G.location>=0){let re=F[j];if(re===void 0&&(j==="instanceMatrix"&&P.instanceMatrix&&(re=P.instanceMatrix),j==="instanceColor"&&P.instanceColor&&(re=P.instanceColor)),re!==void 0){const ne=re.normalized,xe=re.itemSize,we=e.get(re);if(we===void 0)continue;const Je=we.buffer,qe=we.type,Z=we.bytesPerElement,ce=qe===s.INT||qe===s.UNSIGNED_INT||re.gpuType===i_;if(re.isInterleavedBufferAttribute){const le=re.data,Me=le.stride,Ie=re.offset;if(le.isInstancedInterleavedBuffer){for(let Fe=0;Fe<G.locationSize;Fe++)f(G.location+Fe,le.meshPerAttribute);P.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let Fe=0;Fe<G.locationSize;Fe++)v(G.location+Fe);s.bindBuffer(s.ARRAY_BUFFER,Je);for(let Fe=0;Fe<G.locationSize;Fe++)w(G.location+Fe,xe/G.locationSize,qe,ne,Me*Z,(Ie+xe/G.locationSize*Fe)*Z,ce)}else{if(re.isInstancedBufferAttribute){for(let le=0;le<G.locationSize;le++)f(G.location+le,re.meshPerAttribute);P.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let le=0;le<G.locationSize;le++)v(G.location+le);s.bindBuffer(s.ARRAY_BUFFER,Je);for(let le=0;le<G.locationSize;le++)w(G.location+le,xe/G.locationSize,qe,ne,xe*Z,xe/G.locationSize*le*Z,ce)}}else if(V!==void 0){const ne=V[j];if(ne!==void 0)switch(ne.length){case 2:s.vertexAttrib2fv(G.location,ne);break;case 3:s.vertexAttrib3fv(G.location,ne);break;case 4:s.vertexAttrib4fv(G.location,ne);break;default:s.vertexAttrib1fv(G.location,ne)}}}}y()}function b(){A();for(const P in i){const I=i[P];for(const U in I){const N=I[U];for(const F in N)c(N[F].object),delete N[F];delete I[U]}delete i[P]}}function M(P){if(i[P.id]===void 0)return;const I=i[P.id];for(const U in I){const N=I[U];for(const F in N)c(N[F].object),delete N[F];delete I[U]}delete i[P.id]}function E(P){for(const I in i){const U=i[I];if(U[P.id]===void 0)continue;const N=U[P.id];for(const F in N)c(N[F].object),delete N[F];delete U[P.id]}}function A(){m(),n=!0,r!==a&&(r=a,h(r.object))}function m(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:o,reset:A,resetDefaultState:m,dispose:b,releaseStatesOfGeometry:M,releaseStatesOfProgram:E,initAttributes:g,enableAttribute:v,disableUnusedAttributes:y}}function Lw(s,e,t){let i;function a(h){i=h}function r(h,c){s.drawArrays(i,h,c),t.update(c,i,1)}function n(h,c,d){d!==0&&(s.drawArraysInstanced(i,h,c,d),t.update(c,i,d))}function o(h,c,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,h,0,c,0,d);let u=0;for(let x=0;x<d;x++)u+=c[x];t.update(u,i,1)}function l(h,c,d,_){if(d===0)return;const u=e.get("WEBGL_multi_draw");if(u===null)for(let x=0;x<h.length;x++)n(h[x],c[x],_[x]);else{u.multiDrawArraysInstancedWEBGL(i,h,0,c,0,_,0,d);let x=0;for(let g=0;g<d;g++)x+=c[g]*_[g];t.update(x,i,1)}}this.setMode=a,this.render=r,this.renderInstances=n,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function Fw(s,e,t,i){let a;function r(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");a=s.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function n(E){return!(E!==At&&i.convert(E)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(E){const A=E===ns&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(E!==$t&&i.convert(E)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_TYPE)&&E!==Et&&!A)}function l(E){if(E==="highp"){if(s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.HIGH_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return E==="mediump"&&s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.MEDIUM_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=t.precision!==void 0?t.precision:"highp";const c=l(h);c!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",c,"instead."),h=c);const d=t.logarithmicDepthBuffer===!0,_=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),u=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),x=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=s.getParameter(s.MAX_TEXTURE_SIZE),v=s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE),f=s.getParameter(s.MAX_VERTEX_ATTRIBS),y=s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS),w=s.getParameter(s.MAX_VARYING_VECTORS),p=s.getParameter(s.MAX_FRAGMENT_UNIFORM_VECTORS),b=x>0,M=s.getParameter(s.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:l,textureFormatReadable:n,textureTypeReadable:o,precision:h,logarithmicDepthBuffer:d,reversedDepthBuffer:_,maxTextures:u,maxVertexTextures:x,maxTextureSize:g,maxCubemapSize:v,maxAttributes:f,maxVertexUniforms:y,maxVaryings:w,maxFragmentUniforms:p,vertexTextures:b,maxSamples:M}}function kw(s){const e=this;let t=null,i=0,a=!1,r=!1;const n=new Ys,o=new Ve,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,_){const u=d.length!==0||_||i!==0||a;return a=_,i=d.length,u},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(d,_){t=c(d,_,0)},this.setState=function(d,_,u){const x=d.clippingPlanes,g=d.clipIntersection,v=d.clipShadows,f=s.get(d);if(!a||x===null||x.length===0||r&&!v)r?c(null):h();else{const y=r?0:i,w=y*4;let p=f.clippingState||null;l.value=p,p=c(x,_,w,u);for(let b=0;b!==w;++b)p[b]=t[b];f.clippingState=p,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=y}};function h(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(d,_,u,x){const g=d!==null?d.length:0;let v=null;if(g!==0){if(v=l.value,x!==!0||v===null){const f=u+g*4,y=_.matrixWorldInverse;o.getNormalMatrix(y),(v===null||v.length<f)&&(v=new Float32Array(f));for(let w=0,p=u;w!==g;++w,p+=4)n.copy(d[w]).applyMatrix4(y,o),n.normal.toArray(v,p),v[p+3]=n.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,v}}function Vw(s){let e=new WeakMap;function t(n,o){return o===Kl?n.mapping=cn:o===Qc&&(n.mapping=dn),n}function i(n){if(n&&n.isTexture){const o=n.mapping;if(o===Kl||o===Qc)if(e.has(n)){const l=e.get(n).texture;return t(l,n.mapping)}else{const l=n.image;if(l&&l.height>0){const h=new i1(l.height);return h.fromEquirectangularTexture(s,n),e.set(n,h),n.addEventListener("dispose",a),t(h.texture,n.mapping)}else return null}}return n}function a(n){const o=n.target;o.removeEventListener("dispose",a);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}const jr=4,Ef=[.125,.215,.35,.446,.526,.582],lr=20,dc=new wr,Af=new X;let _c=null,uc=0,fc=0,vc=!1;const rr=(1+Math.sqrt(5))/2,Br=1/rr,Mf=[new S(-rr,Br,0),new S(rr,Br,0),new S(-Br,0,rr),new S(Br,0,rr),new S(0,rr,-Br),new S(0,rr,Br),new S(-1,1,-1),new S(1,1,-1),new S(-1,1,1),new S(1,1,1)],Uw=new S;class If{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,a=100,r={}){const{size:n=256,position:o=Uw}=r;_c=this._renderer.getRenderTarget(),uc=this._renderer.getActiveCubeFace(),fc=this._renderer.getActiveMipmapLevel(),vc=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(n);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,a,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Rf(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Df(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_c,uc,fc),this._renderer.xr.enabled=vc,e.scissorTest=!1,Ml(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===cn||e.mapping===dn?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_c=this._renderer.getRenderTarget(),uc=this._renderer.getActiveCubeFace(),fc=this._renderer.getActiveMipmapLevel(),vc=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:yt,minFilter:yt,generateMipmaps:!1,type:ns,format:At,colorSpace:Ot,depthBuffer:!1},a=Cf(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Cf(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Bw(r)),this._blurMaterial=Ww(r,e,t)}return a}_compileMaterial(e){const t=new Ne(this._lodPlanes[0],e);this._renderer.compile(t,dc)}_sceneToCubeUV(e,t,i,a,r){const l=new xi(90,1,t,i),h=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,_=d.autoClear,u=d.toneMapping;d.getClearColor(Af),d.toneMapping=ia,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(a),d.clearDepth(),d.setRenderTarget(null));const g=new Mi({name:"PMREM.Background",side:ai,depthWrite:!1,depthTest:!1}),v=new Ne(new Vo,g);let f=!1;const y=e.background;y?y.isColor&&(g.color.copy(y),e.background=null,f=!0):(g.color.copy(Af),f=!0);for(let w=0;w<6;w++){const p=w%3;p===0?(l.up.set(0,h[w],0),l.position.set(r.x,r.y,r.z),l.lookAt(r.x+c[w],r.y,r.z)):p===1?(l.up.set(0,0,h[w]),l.position.set(r.x,r.y,r.z),l.lookAt(r.x,r.y+c[w],r.z)):(l.up.set(0,h[w],0),l.position.set(r.x,r.y,r.z),l.lookAt(r.x,r.y,r.z+c[w]));const b=this._cubeSize;Ml(a,p*b,w>2?b:0,b,b),d.setRenderTarget(a),f&&d.render(v,l),d.render(e,l)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=u,d.autoClear=_,e.background=y}_textureToCubeUV(e,t){const i=this._renderer,a=e.mapping===cn||e.mapping===dn;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=Rf()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Df());const r=a?this._cubemapMaterial:this._equirectMaterial,n=new Ne(this._lodPlanes[0],r),o=r.uniforms;o.envMap.value=e;const l=this._cubeSize;Ml(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(n,dc)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const a=this._lodPlanes.length;for(let r=1;r<a;r++){const n=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=Mf[(a-r-1)%Mf.length];this._blur(e,r-1,r,n,o)}t.autoClear=i}_blur(e,t,i,a,r){const n=this._pingPongRenderTarget;this._halfBlur(e,n,t,i,a,"latitudinal",r),this._halfBlur(n,e,i,i,a,"longitudinal",r)}_halfBlur(e,t,i,a,r,n,o){const l=this._renderer,h=this._blurMaterial;n!=="latitudinal"&&n!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,d=new Ne(this._lodPlanes[a],h),_=h.uniforms,u=this._sizeLods[i]-1,x=isFinite(r)?Math.PI/(2*u):2*Math.PI/(2*lr-1),g=r/x,v=isFinite(r)?1+Math.floor(c*g):lr;v>lr&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${lr}`);const f=[];let y=0;for(let E=0;E<lr;++E){const A=E/g,m=Math.exp(-A*A/2);f.push(m),E===0?y+=m:E<v&&(y+=2*m)}for(let E=0;E<f.length;E++)f[E]=f[E]/y;_.envMap.value=e.texture,_.samples.value=v,_.weights.value=f,_.latitudinal.value=n==="latitudinal",o&&(_.poleAxis.value=o);const{_lodMax:w}=this;_.dTheta.value=x,_.mipInt.value=w-i;const p=this._sizeLods[a],b=3*p*(a>w-jr?a-w+jr:0),M=4*(this._cubeSize-p);Ml(t,b,M,3*p,2*p),l.setRenderTarget(t),l.render(d,dc)}}function Bw(s){const e=[],t=[],i=[];let a=s;const r=s-jr+1+Ef.length;for(let n=0;n<r;n++){const o=Math.pow(2,a);t.push(o);let l=1/o;n>s-jr?l=Ef[n-s+jr-1]:n===0&&(l=0),i.push(l);const h=1/(o-2),c=-h,d=1+h,_=[c,c,d,c,d,d,c,c,d,d,c,d],u=6,x=6,g=3,v=2,f=1,y=new Float32Array(g*x*u),w=new Float32Array(v*x*u),p=new Float32Array(f*x*u);for(let M=0;M<u;M++){const E=M%3*2/3-1,A=M>2?0:-1,m=[E,A,0,E+2/3,A,0,E+2/3,A+1,0,E,A,0,E+2/3,A+1,0,E,A+1,0];y.set(m,g*x*M),w.set(_,v*x*M);const P=[M,M,M,M,M,M];p.set(P,f*x*M)}const b=new Wt;b.setAttribute("position",new Be(y,g)),b.setAttribute("uv",new Be(w,v)),b.setAttribute("faceIndex",new Be(p,f)),e.push(b),a>jr&&a--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Cf(s,e,t){const i=new gt(s,e,t);return i.texture.mapping=gh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Ml(s,e,t,i,a){s.viewport.set(e,t,i,a),s.scissor.set(e,t,i,a)}function Ww(s,e,t){const i=new Float32Array(lr),a=new S(0,1,0);return new Le({name:"SphericalGaussianBlur",defines:{n:lr,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:b_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:di,depthTest:!1,depthWrite:!1})}function Df(){return new Le({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:b_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:di,depthTest:!1,depthWrite:!1})}function Rf(){return new Le({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:b_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:di,depthTest:!1,depthWrite:!1})}function b_(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Gw(s){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,h=l===Kl||l===Qc,c=l===cn||l===dn;if(h||c){let d=e.get(o);const _=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==_)return t===null&&(t=new If(s)),d=h?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const u=o.image;return h&&u&&u.height>0||c&&u&&a(u)?(t===null&&(t=new If(s)),d=h?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",r),d.texture):null}}}return o}function a(o){let l=0;const h=6;for(let c=0;c<h;c++)o[c]!==void 0&&l++;return l===h}function r(o){const l=o.target;l.removeEventListener("dispose",r);const h=e.get(l);h!==void 0&&(e.delete(l),h.dispose())}function n(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:n}}function qw(s){const e={};function t(i){if(e[i]!==void 0)return e[i];let a;switch(i){case"WEBGL_depth_texture":a=s.getExtension("WEBGL_depth_texture")||s.getExtension("MOZ_WEBGL_depth_texture")||s.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=s.getExtension("WEBGL_compressed_texture_s3tc")||s.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=s.getExtension("WEBGL_compressed_texture_pvrtc")||s.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=s.getExtension(i)}return e[i]=a,a}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const a=t(i);return a===null&&$r("THREE.WebGLRenderer: "+i+" extension not supported."),a}}}function Hw(s,e,t,i){const a={},r=new WeakMap;function n(d){const _=d.target;_.index!==null&&e.remove(_.index);for(const x in _.attributes)e.remove(_.attributes[x]);_.removeEventListener("dispose",n),delete a[_.id];const u=r.get(_);u&&(e.remove(u),r.delete(_)),i.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function o(d,_){return a[_.id]===!0||(_.addEventListener("dispose",n),a[_.id]=!0,t.memory.geometries++),_}function l(d){const _=d.attributes;for(const u in _)e.update(_[u],s.ARRAY_BUFFER)}function h(d){const _=[],u=d.index,x=d.attributes.position;let g=0;if(u!==null){const y=u.array;g=u.version;for(let w=0,p=y.length;w<p;w+=3){const b=y[w+0],M=y[w+1],E=y[w+2];_.push(b,M,M,E,E,b)}}else if(x!==void 0){const y=x.array;g=x.version;for(let w=0,p=y.length/3-1;w<p;w+=3){const b=w+0,M=w+1,E=w+2;_.push(b,M,M,E,E,b)}}else return;const v=new(S0(_)?I0:M0)(_,1);v.version=g;const f=r.get(d);f&&e.remove(f),r.set(d,v)}function c(d){const _=r.get(d);if(_){const u=d.index;u!==null&&_.version<u.version&&h(d)}else h(d);return r.get(d)}return{get:o,update:l,getWireframeAttribute:c}}function Xw(s,e,t){let i;function a(_){i=_}let r,n;function o(_){r=_.type,n=_.bytesPerElement}function l(_,u){s.drawElements(i,u,r,_*n),t.update(u,i,1)}function h(_,u,x){x!==0&&(s.drawElementsInstanced(i,u,r,_*n,x),t.update(u,i,x))}function c(_,u,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,u,0,r,_,0,x);let v=0;for(let f=0;f<x;f++)v+=u[f];t.update(v,i,1)}function d(_,u,x,g){if(x===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let f=0;f<_.length;f++)h(_[f]/n,u[f],g[f]);else{v.multiDrawElementsInstancedWEBGL(i,u,0,r,_,0,g,0,x);let f=0;for(let y=0;y<x;y++)f+=u[y]*g[y];t.update(f,i,1)}}this.setMode=a,this.setIndex=o,this.render=l,this.renderInstances=h,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function jw(s){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,n,o){switch(t.calls++,n){case s.TRIANGLES:t.triangles+=o*(r/3);break;case s.LINES:t.lines+=o*(r/2);break;case s.LINE_STRIP:t.lines+=o*(r-1);break;case s.LINE_LOOP:t.lines+=o*r;break;case s.POINTS:t.points+=o*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n);break}}function a(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:a,update:i}}function Zw(s,e,t){const i=new WeakMap,a=new et;function r(n,o,l){const h=n.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=c!==void 0?c.length:0;let _=i.get(o);if(_===void 0||_.count!==d){let P=function(){A.dispose(),i.delete(o),o.removeEventListener("dispose",P)};var u=P;_!==void 0&&_.texture.dispose();const x=o.morphAttributes.position!==void 0,g=o.morphAttributes.normal!==void 0,v=o.morphAttributes.color!==void 0,f=o.morphAttributes.position||[],y=o.morphAttributes.normal||[],w=o.morphAttributes.color||[];let p=0;x===!0&&(p=1),g===!0&&(p=2),v===!0&&(p=3);let b=o.attributes.position.count*p,M=1;b>e.maxTextureSize&&(M=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const E=new Float32Array(b*M*4*d),A=new E0(E,b,M,d);A.type=Et,A.needsUpdate=!0;const m=p*4;for(let I=0;I<d;I++){const U=f[I],N=y[I],F=w[I],W=b*M*4*I;for(let V=0;V<U.count;V++){const j=V*m;x===!0&&(a.fromBufferAttribute(U,V),E[W+j+0]=a.x,E[W+j+1]=a.y,E[W+j+2]=a.z,E[W+j+3]=0),g===!0&&(a.fromBufferAttribute(N,V),E[W+j+4]=a.x,E[W+j+5]=a.y,E[W+j+6]=a.z,E[W+j+7]=0),v===!0&&(a.fromBufferAttribute(F,V),E[W+j+8]=a.x,E[W+j+9]=a.y,E[W+j+10]=a.z,E[W+j+11]=F.itemSize===4?a.w:1)}}_={count:d,texture:A,size:new $(b,M)},i.set(o,_),o.addEventListener("dispose",P)}if(n.isInstancedMesh===!0&&n.morphTexture!==null)l.getUniforms().setValue(s,"morphTexture",n.morphTexture,t);else{let x=0;for(let v=0;v<h.length;v++)x+=h[v];const g=o.morphTargetsRelative?1:1-x;l.getUniforms().setValue(s,"morphTargetBaseInfluence",g),l.getUniforms().setValue(s,"morphTargetInfluences",h)}l.getUniforms().setValue(s,"morphTargetsTexture",_.texture,t),l.getUniforms().setValue(s,"morphTargetsTextureSize",_.size)}return{update:r}}function Jw(s,e,t,i){let a=new WeakMap;function r(l){const h=i.render.frame,c=l.geometry,d=e.get(l,c);if(a.get(d)!==h&&(e.update(d),a.set(d,h)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),a.get(l)!==h&&(t.update(l.instanceMatrix,s.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,s.ARRAY_BUFFER),a.set(l,h))),l.isSkinnedMesh){const _=l.skeleton;a.get(_)!==h&&(_.update(),a.set(_,h))}return d}function n(){a=new WeakMap}function o(l){const h=l.target;h.removeEventListener("dispose",o),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:r,dispose:n}}const j0=new Ct,Of=new x_(1,1),Z0=new E0,J0=new Lm,K0=new D0,Nf=[],Lf=[],Ff=new Float32Array(16),kf=new Float32Array(9),Vf=new Float32Array(4);function Nn(s,e,t){const i=s[0];if(i<=0||i>0)return s;const a=e*t;let r=Nf[a];if(r===void 0&&(r=new Float32Array(a),Nf[a]=r),e!==0){i.toArray(r,0);for(let n=1,o=0;n!==e;++n)o+=t,s[n].toArray(r,o)}return r}function ni(s,e){if(s.length!==e.length)return!1;for(let t=0,i=s.length;t<i;t++)if(s[t]!==e[t])return!1;return!0}function oi(s,e){for(let t=0,i=e.length;t<i;t++)s[t]=e[t]}function ph(s,e){let t=Lf[e];t===void 0&&(t=new Int32Array(e),Lf[e]=t);for(let i=0;i!==e;++i)t[i]=s.allocateTextureUnit();return t}function Kw(s,e){const t=this.cache;t[0]!==e&&(s.uniform1f(this.addr,e),t[0]=e)}function Yw(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ni(t,e))return;s.uniform2fv(this.addr,e),oi(t,e)}}function Qw(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(s.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ni(t,e))return;s.uniform3fv(this.addr,e),oi(t,e)}}function $w(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ni(t,e))return;s.uniform4fv(this.addr,e),oi(t,e)}}function ez(s,e){const t=this.cache,i=e.elements;if(i===void 0){if(ni(t,e))return;s.uniformMatrix2fv(this.addr,!1,e),oi(t,e)}else{if(ni(t,i))return;Vf.set(i),s.uniformMatrix2fv(this.addr,!1,Vf),oi(t,i)}}function tz(s,e){const t=this.cache,i=e.elements;if(i===void 0){if(ni(t,e))return;s.uniformMatrix3fv(this.addr,!1,e),oi(t,e)}else{if(ni(t,i))return;kf.set(i),s.uniformMatrix3fv(this.addr,!1,kf),oi(t,i)}}function iz(s,e){const t=this.cache,i=e.elements;if(i===void 0){if(ni(t,e))return;s.uniformMatrix4fv(this.addr,!1,e),oi(t,e)}else{if(ni(t,i))return;Ff.set(i),s.uniformMatrix4fv(this.addr,!1,Ff),oi(t,i)}}function sz(s,e){const t=this.cache;t[0]!==e&&(s.uniform1i(this.addr,e),t[0]=e)}function az(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ni(t,e))return;s.uniform2iv(this.addr,e),oi(t,e)}}function rz(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ni(t,e))return;s.uniform3iv(this.addr,e),oi(t,e)}}function nz(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ni(t,e))return;s.uniform4iv(this.addr,e),oi(t,e)}}function oz(s,e){const t=this.cache;t[0]!==e&&(s.uniform1ui(this.addr,e),t[0]=e)}function lz(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(s.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ni(t,e))return;s.uniform2uiv(this.addr,e),oi(t,e)}}function hz(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(s.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ni(t,e))return;s.uniform3uiv(this.addr,e),oi(t,e)}}function cz(s,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(s.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ni(t,e))return;s.uniform4uiv(this.addr,e),oi(t,e)}}function dz(s,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(s.uniform1i(this.addr,a),i[0]=a);let r;this.type===s.SAMPLER_2D_SHADOW?(Of.compareFunction=T0,r=Of):r=j0,t.setTexture2D(e||r,a)}function _z(s,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(s.uniform1i(this.addr,a),i[0]=a),t.setTexture3D(e||J0,a)}function uz(s,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(s.uniform1i(this.addr,a),i[0]=a),t.setTextureCube(e||K0,a)}function fz(s,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(s.uniform1i(this.addr,a),i[0]=a),t.setTexture2DArray(e||Z0,a)}function vz(s){switch(s){case 5126:return Kw;case 35664:return Yw;case 35665:return Qw;case 35666:return $w;case 35674:return ez;case 35675:return tz;case 35676:return iz;case 5124:case 35670:return sz;case 35667:case 35671:return az;case 35668:case 35672:return rz;case 35669:case 35673:return nz;case 5125:return oz;case 36294:return lz;case 36295:return hz;case 36296:return cz;case 35678:case 36198:case 36298:case 36306:case 35682:return dz;case 35679:case 36299:case 36307:return _z;case 35680:case 36300:case 36308:case 36293:return uz;case 36289:case 36303:case 36311:case 36292:return fz}}function gz(s,e){s.uniform1fv(this.addr,e)}function xz(s,e){const t=Nn(e,this.size,2);s.uniform2fv(this.addr,t)}function pz(s,e){const t=Nn(e,this.size,3);s.uniform3fv(this.addr,t)}function mz(s,e){const t=Nn(e,this.size,4);s.uniform4fv(this.addr,t)}function yz(s,e){const t=Nn(e,this.size,4);s.uniformMatrix2fv(this.addr,!1,t)}function wz(s,e){const t=Nn(e,this.size,9);s.uniformMatrix3fv(this.addr,!1,t)}function zz(s,e){const t=Nn(e,this.size,16);s.uniformMatrix4fv(this.addr,!1,t)}function Pz(s,e){s.uniform1iv(this.addr,e)}function bz(s,e){s.uniform2iv(this.addr,e)}function Tz(s,e){s.uniform3iv(this.addr,e)}function Sz(s,e){s.uniform4iv(this.addr,e)}function Ez(s,e){s.uniform1uiv(this.addr,e)}function Az(s,e){s.uniform2uiv(this.addr,e)}function Mz(s,e){s.uniform3uiv(this.addr,e)}function Iz(s,e){s.uniform4uiv(this.addr,e)}function Cz(s,e,t){const i=this.cache,a=e.length,r=ph(t,a);ni(i,r)||(s.uniform1iv(this.addr,r),oi(i,r));for(let n=0;n!==a;++n)t.setTexture2D(e[n]||j0,r[n])}function Dz(s,e,t){const i=this.cache,a=e.length,r=ph(t,a);ni(i,r)||(s.uniform1iv(this.addr,r),oi(i,r));for(let n=0;n!==a;++n)t.setTexture3D(e[n]||J0,r[n])}function Rz(s,e,t){const i=this.cache,a=e.length,r=ph(t,a);ni(i,r)||(s.uniform1iv(this.addr,r),oi(i,r));for(let n=0;n!==a;++n)t.setTextureCube(e[n]||K0,r[n])}function Oz(s,e,t){const i=this.cache,a=e.length,r=ph(t,a);ni(i,r)||(s.uniform1iv(this.addr,r),oi(i,r));for(let n=0;n!==a;++n)t.setTexture2DArray(e[n]||Z0,r[n])}function Nz(s){switch(s){case 5126:return gz;case 35664:return xz;case 35665:return pz;case 35666:return mz;case 35674:return yz;case 35675:return wz;case 35676:return zz;case 5124:case 35670:return Pz;case 35667:case 35671:return bz;case 35668:case 35672:return Tz;case 35669:case 35673:return Sz;case 5125:return Ez;case 36294:return Az;case 36295:return Mz;case 36296:return Iz;case 35678:case 36198:case 36298:case 36306:case 35682:return Cz;case 35679:case 36299:case 36307:return Dz;case 35680:case 36300:case 36308:case 36293:return Rz;case 36289:case 36303:case 36311:case 36292:return Oz}}class Lz{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=vz(t.type)}}class Fz{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Nz(t.type)}}class kz{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const a=this.seq;for(let r=0,n=a.length;r!==n;++r){const o=a[r];o.setValue(e,t[o.id],i)}}}const gc=/(\w+)(\])?(\[|\.)?/g;function Uf(s,e){s.seq.push(e),s.map[e.id]=e}function Vz(s,e,t){const i=s.name,a=i.length;for(gc.lastIndex=0;;){const r=gc.exec(i),n=gc.lastIndex;let o=r[1];const l=r[2]==="]",h=r[3];if(l&&(o=o|0),h===void 0||h==="["&&n+2===a){Uf(t,h===void 0?new Lz(o,s,e):new Fz(o,s,e));break}else{let d=t.map[o];d===void 0&&(d=new kz(o),Uf(t,d)),t=d}}}class Bl{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let a=0;a<i;++a){const r=e.getActiveUniform(t,a),n=e.getUniformLocation(t,r.name);Vz(r,n,this)}}setValue(e,t,i,a){const r=this.map[t];r!==void 0&&r.setValue(e,i,a)}setOptional(e,t,i){const a=t[i];a!==void 0&&this.setValue(e,i,a)}static upload(e,t,i,a){for(let r=0,n=t.length;r!==n;++r){const o=t[r],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,a)}}static seqWithValue(e,t){const i=[];for(let a=0,r=e.length;a!==r;++a){const n=e[a];n.id in t&&i.push(n)}return i}}function Bf(s,e,t){const i=s.createShader(e);return s.shaderSource(i,t),s.compileShader(i),i}const Uz=37297;let Bz=0;function Wz(s,e){const t=s.split(`
`),i=[],a=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let n=a;n<r;n++){const o=n+1;i.push(`${o===e?">":" "} ${o}: ${t[n]}`)}return i.join(`
`)}const Wf=new Ve;function Gz(s){Qe._getMatrix(Wf,Qe.workingColorSpace,s);const e=`mat3( ${Wf.elements.map(t=>t.toFixed(4))} )`;switch(Qe.getTransfer(s)){case Ql:return[e,"LinearTransferOETF"];case pt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",s),[e,"LinearTransferOETF"]}}function Gf(s,e,t){const i=s.getShaderParameter(e,s.COMPILE_STATUS),r=(s.getShaderInfoLog(e)||"").trim();if(i&&r==="")return"";const n=/ERROR: 0:(\d+)/.exec(r);if(n){const o=parseInt(n[1]);return t.toUpperCase()+`

`+r+`

`+Wz(s.getShaderSource(e),o)}else return r}function qz(s,e){const t=Gz(e);return[`vec4 ${s}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Hz(s,e){let t;switch(e){case jp:t="Linear";break;case Zp:t="Reinhard";break;case Jp:t="Cineon";break;case Kp:t="ACESFilmic";break;case Qp:t="AgX";break;case $p:t="Neutral";break;case Yp:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+s+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Il=new S;function Xz(){Qe.getLuminanceCoefficients(Il);const s=Il.x.toFixed(4),e=Il.y.toFixed(4),t=Il.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${s}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function jz(s){return[s.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",s.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ao).join(`
`)}function Zz(s){const e=[];for(const t in s){const i=s[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Jz(s,e){const t={},i=s.getProgramParameter(e,s.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const r=s.getActiveAttrib(e,a),n=r.name;let o=1;r.type===s.FLOAT_MAT2&&(o=2),r.type===s.FLOAT_MAT3&&(o=3),r.type===s.FLOAT_MAT4&&(o=4),t[n]={type:r.type,location:s.getAttribLocation(e,n),locationSize:o}}return t}function ao(s){return s!==""}function qf(s,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return s.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Hf(s,e){return s.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Kz=/^[ \t]*#include +<([\w\d./]+)>/gm;function Md(s){return s.replace(Kz,Qz)}const Yz=new Map;function Qz(s,e){let t=He[e];if(t===void 0){const i=Yz.get(e);if(i!==void 0)t=He[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Md(t)}const $z=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Xf(s){return s.replace($z,eP)}function eP(s,e,t,i){let a="";for(let r=parseInt(e);r<parseInt(t);r++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return a}function jf(s){let e=`precision ${s.precision} float;
	precision ${s.precision} int;
	precision ${s.precision} sampler2D;
	precision ${s.precision} samplerCube;
	precision ${s.precision} sampler3D;
	precision ${s.precision} sampler2DArray;
	precision ${s.precision} sampler2DShadow;
	precision ${s.precision} samplerCubeShadow;
	precision ${s.precision} sampler2DArrayShadow;
	precision ${s.precision} isampler2D;
	precision ${s.precision} isampler3D;
	precision ${s.precision} isamplerCube;
	precision ${s.precision} isampler2DArray;
	precision ${s.precision} usampler2D;
	precision ${s.precision} usampler3D;
	precision ${s.precision} usamplerCube;
	precision ${s.precision} usampler2DArray;
	`;return s.precision==="highp"?e+=`
#define HIGH_PRECISION`:s.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function tP(s){let e="SHADOWMAP_TYPE_BASIC";return s.shadowMapType===f0?e="SHADOWMAP_TYPE_PCF":s.shadowMapType===Sp?e="SHADOWMAP_TYPE_PCF_SOFT":s.shadowMapType===Zs&&(e="SHADOWMAP_TYPE_VSM"),e}function iP(s){let e="ENVMAP_TYPE_CUBE";if(s.envMap)switch(s.envMapMode){case cn:case dn:e="ENVMAP_TYPE_CUBE";break;case gh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function sP(s){let e="ENVMAP_MODE_REFLECTION";if(s.envMap)switch(s.envMapMode){case dn:e="ENVMAP_MODE_REFRACTION";break}return e}function aP(s){let e="ENVMAP_BLENDING_NONE";if(s.envMap)switch(s.combine){case t_:e="ENVMAP_BLENDING_MULTIPLY";break;case Hp:e="ENVMAP_BLENDING_MIX";break;case Xp:e="ENVMAP_BLENDING_ADD";break}return e}function rP(s){const e=s.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function nP(s,e,t,i){const a=s.getContext(),r=t.defines;let n=t.vertexShader,o=t.fragmentShader;const l=tP(t),h=iP(t),c=sP(t),d=aP(t),_=rP(t),u=jz(t),x=Zz(r),g=a.createProgram();let v,f,y=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(ao).join(`
`),v.length>0&&(v+=`
`),f=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(ao).join(`
`),f.length>0&&(f+=`
`)):(v=[jf(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ao).join(`
`),f=[jf(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ia?"#define TONE_MAPPING":"",t.toneMapping!==ia?He.tonemapping_pars_fragment:"",t.toneMapping!==ia?Hz("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",He.colorspace_pars_fragment,qz("linearToOutputTexel",t.outputColorSpace),Xz(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ao).join(`
`)),n=Md(n),n=qf(n,t),n=Hf(n,t),o=Md(o),o=qf(o,t),o=Hf(o,t),n=Xf(n),o=Xf(o),t.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,v=[u,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,f=["#define varying in",t.glslVersion===Lu?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Lu?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+f);const w=y+v+n,p=y+f+o,b=Bf(a,a.VERTEX_SHADER,w),M=Bf(a,a.FRAGMENT_SHADER,p);a.attachShader(g,b),a.attachShader(g,M),t.index0AttributeName!==void 0?a.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&a.bindAttribLocation(g,0,"position"),a.linkProgram(g);function E(I){if(s.debug.checkShaderErrors){const U=a.getProgramInfoLog(g)||"",N=a.getShaderInfoLog(b)||"",F=a.getShaderInfoLog(M)||"",W=U.trim(),V=N.trim(),j=F.trim();let G=!0,re=!0;if(a.getProgramParameter(g,a.LINK_STATUS)===!1)if(G=!1,typeof s.debug.onShaderError=="function")s.debug.onShaderError(a,g,b,M);else{const ne=Gf(a,b,"vertex"),xe=Gf(a,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(g,a.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+W+`
`+ne+`
`+xe)}else W!==""?console.warn("THREE.WebGLProgram: Program Info Log:",W):(V===""||j==="")&&(re=!1);re&&(I.diagnostics={runnable:G,programLog:W,vertexShader:{log:V,prefix:v},fragmentShader:{log:j,prefix:f}})}a.deleteShader(b),a.deleteShader(M),A=new Bl(a,g),m=Jz(a,g)}let A;this.getUniforms=function(){return A===void 0&&E(this),A};let m;this.getAttributes=function(){return m===void 0&&E(this),m};let P=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return P===!1&&(P=a.getProgramParameter(g,Uz)),P},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Bz++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=b,this.fragmentShader=M,this}let oP=0;class lP{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,a=this._getShaderStage(t),r=this._getShaderStage(i),n=this._getShaderCacheForMaterial(e);return n.has(a)===!1&&(n.add(a),a.usedTimes++),n.has(r)===!1&&(n.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new hP(e),t.set(e,i)),i}}class hP{constructor(e){this.id=oP++,this.code=e,this.usedTimes=0}}function cP(s,e,t,i,a,r,n){const o=new d_,l=new lP,h=new Set,c=[],d=a.logarithmicDepthBuffer,_=a.vertexTextures;let u=a.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(m){return h.add(m),m===0?"uv":`uv${m}`}function v(m,P,I,U,N){const F=U.fog,W=N.geometry,V=m.isMeshStandardMaterial?U.environment:null,j=(m.isMeshStandardMaterial?t:e).get(m.envMap||V),G=j&&j.mapping===gh?j.image.height:null,re=x[m.type];m.precision!==null&&(u=a.getMaxPrecision(m.precision),u!==m.precision&&console.warn("THREE.WebGLProgram.getParameters:",m.precision,"not supported, using",u,"instead."));const ne=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,xe=ne!==void 0?ne.length:0;let we=0;W.morphAttributes.position!==void 0&&(we=1),W.morphAttributes.normal!==void 0&&(we=2),W.morphAttributes.color!==void 0&&(we=3);let Je,qe,Z,ce;if(re){const ct=As[re];Je=ct.vertexShader,qe=ct.fragmentShader}else Je=m.vertexShader,qe=m.fragmentShader,l.update(m),Z=l.getVertexShaderID(m),ce=l.getFragmentShaderID(m);const le=s.getRenderTarget(),Me=s.state.buffers.depth.getReversed(),Ie=N.isInstancedMesh===!0,Fe=N.isBatchedMesh===!0,jt=!!m.map,tt=!!m.matcap,D=!!j,bt=!!m.aoMap,Ee=!!m.lightMap,ht=!!m.bumpMap,Te=!!m.normalMap,Dt=!!m.displacementMap,ge=!!m.emissiveMap,Xe=!!m.metalnessMap,li=!!m.roughnessMap,Zt=m.anisotropy>0,C=m.clearcoat>0,z=m.dispersion>0,B=m.iridescence>0,K=m.sheen>0,Q=m.transmission>0,J=Zt&&!!m.anisotropyMap,be=C&&!!m.clearcoatMap,oe=C&&!!m.clearcoatNormalMap,ye=C&&!!m.clearcoatRoughnessMap,ze=B&&!!m.iridescenceMap,se=B&&!!m.iridescenceThicknessMap,ue=K&&!!m.sheenColorMap,Re=K&&!!m.sheenRoughnessMap,Pe=!!m.specularMap,de=!!m.specularColorMap,We=!!m.specularIntensityMap,R=Q&&!!m.transmissionMap,ae=Q&&!!m.thicknessMap,he=!!m.gradientMap,ve=!!m.alphaMap,ee=m.alphaTest>0,Y=!!m.alphaHash,me=!!m.extensions;let ke=ia;m.toneMapped&&(le===null||le.isXRRenderTarget===!0)&&(ke=s.toneMapping);const Tt={shaderID:re,shaderType:m.type,shaderName:m.name,vertexShader:Je,fragmentShader:qe,defines:m.defines,customVertexShaderID:Z,customFragmentShaderID:ce,isRawShaderMaterial:m.isRawShaderMaterial===!0,glslVersion:m.glslVersion,precision:u,batching:Fe,batchingColor:Fe&&N._colorsTexture!==null,instancing:Ie,instancingColor:Ie&&N.instanceColor!==null,instancingMorph:Ie&&N.morphTexture!==null,supportsVertexTextures:_,outputColorSpace:le===null?s.outputColorSpace:le.isXRRenderTarget===!0?le.texture.colorSpace:Ot,alphaToCoverage:!!m.alphaToCoverage,map:jt,matcap:tt,envMap:D,envMapMode:D&&j.mapping,envMapCubeUVHeight:G,aoMap:bt,lightMap:Ee,bumpMap:ht,normalMap:Te,displacementMap:_&&Dt,emissiveMap:ge,normalMapObjectSpace:Te&&m.normalMapType===rm,normalMapTangentSpace:Te&&m.normalMapType===xh,metalnessMap:Xe,roughnessMap:li,anisotropy:Zt,anisotropyMap:J,clearcoat:C,clearcoatMap:be,clearcoatNormalMap:oe,clearcoatRoughnessMap:ye,dispersion:z,iridescence:B,iridescenceMap:ze,iridescenceThicknessMap:se,sheen:K,sheenColorMap:ue,sheenRoughnessMap:Re,specularMap:Pe,specularColorMap:de,specularIntensityMap:We,transmission:Q,transmissionMap:R,thicknessMap:ae,gradientMap:he,opaque:m.transparent===!1&&m.blending===Qr&&m.alphaToCoverage===!1,alphaMap:ve,alphaTest:ee,alphaHash:Y,combine:m.combine,mapUv:jt&&g(m.map.channel),aoMapUv:bt&&g(m.aoMap.channel),lightMapUv:Ee&&g(m.lightMap.channel),bumpMapUv:ht&&g(m.bumpMap.channel),normalMapUv:Te&&g(m.normalMap.channel),displacementMapUv:Dt&&g(m.displacementMap.channel),emissiveMapUv:ge&&g(m.emissiveMap.channel),metalnessMapUv:Xe&&g(m.metalnessMap.channel),roughnessMapUv:li&&g(m.roughnessMap.channel),anisotropyMapUv:J&&g(m.anisotropyMap.channel),clearcoatMapUv:be&&g(m.clearcoatMap.channel),clearcoatNormalMapUv:oe&&g(m.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ye&&g(m.clearcoatRoughnessMap.channel),iridescenceMapUv:ze&&g(m.iridescenceMap.channel),iridescenceThicknessMapUv:se&&g(m.iridescenceThicknessMap.channel),sheenColorMapUv:ue&&g(m.sheenColorMap.channel),sheenRoughnessMapUv:Re&&g(m.sheenRoughnessMap.channel),specularMapUv:Pe&&g(m.specularMap.channel),specularColorMapUv:de&&g(m.specularColorMap.channel),specularIntensityMapUv:We&&g(m.specularIntensityMap.channel),transmissionMapUv:R&&g(m.transmissionMap.channel),thicknessMapUv:ae&&g(m.thicknessMap.channel),alphaMapUv:ve&&g(m.alphaMap.channel),vertexTangents:!!W.attributes.tangent&&(Te||Zt),vertexColors:m.vertexColors,vertexAlphas:m.vertexColors===!0&&!!W.attributes.color&&W.attributes.color.itemSize===4,pointsUvs:N.isPoints===!0&&!!W.attributes.uv&&(jt||ve),fog:!!F,useFog:m.fog===!0,fogExp2:!!F&&F.isFogExp2,flatShading:m.flatShading===!0&&m.wireframe===!1,sizeAttenuation:m.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:Me,skinning:N.isSkinnedMesh===!0,morphTargets:W.morphAttributes.position!==void 0,morphNormals:W.morphAttributes.normal!==void 0,morphColors:W.morphAttributes.color!==void 0,morphTargetsCount:xe,morphTextureStride:we,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numLightProbes:P.numLightProbes,numClippingPlanes:n.numPlanes,numClipIntersection:n.numIntersection,dithering:m.dithering,shadowMapEnabled:s.shadowMap.enabled&&I.length>0,shadowMapType:s.shadowMap.type,toneMapping:ke,decodeVideoTexture:jt&&m.map.isVideoTexture===!0&&Qe.getTransfer(m.map.colorSpace)===pt,decodeVideoTextureEmissive:ge&&m.emissiveMap.isVideoTexture===!0&&Qe.getTransfer(m.emissiveMap.colorSpace)===pt,premultipliedAlpha:m.premultipliedAlpha,doubleSided:m.side===si,flipSided:m.side===ai,useDepthPacking:m.depthPacking>=0,depthPacking:m.depthPacking||0,index0AttributeName:m.index0AttributeName,extensionClipCullDistance:me&&m.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(me&&m.extensions.multiDraw===!0||Fe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:m.customProgramCacheKey()};return Tt.vertexUv1s=h.has(1),Tt.vertexUv2s=h.has(2),Tt.vertexUv3s=h.has(3),h.clear(),Tt}function f(m){const P=[];if(m.shaderID?P.push(m.shaderID):(P.push(m.customVertexShaderID),P.push(m.customFragmentShaderID)),m.defines!==void 0)for(const I in m.defines)P.push(I),P.push(m.defines[I]);return m.isRawShaderMaterial===!1&&(y(P,m),w(P,m),P.push(s.outputColorSpace)),P.push(m.customProgramCacheKey),P.join()}function y(m,P){m.push(P.precision),m.push(P.outputColorSpace),m.push(P.envMapMode),m.push(P.envMapCubeUVHeight),m.push(P.mapUv),m.push(P.alphaMapUv),m.push(P.lightMapUv),m.push(P.aoMapUv),m.push(P.bumpMapUv),m.push(P.normalMapUv),m.push(P.displacementMapUv),m.push(P.emissiveMapUv),m.push(P.metalnessMapUv),m.push(P.roughnessMapUv),m.push(P.anisotropyMapUv),m.push(P.clearcoatMapUv),m.push(P.clearcoatNormalMapUv),m.push(P.clearcoatRoughnessMapUv),m.push(P.iridescenceMapUv),m.push(P.iridescenceThicknessMapUv),m.push(P.sheenColorMapUv),m.push(P.sheenRoughnessMapUv),m.push(P.specularMapUv),m.push(P.specularColorMapUv),m.push(P.specularIntensityMapUv),m.push(P.transmissionMapUv),m.push(P.thicknessMapUv),m.push(P.combine),m.push(P.fogExp2),m.push(P.sizeAttenuation),m.push(P.morphTargetsCount),m.push(P.morphAttributeCount),m.push(P.numDirLights),m.push(P.numPointLights),m.push(P.numSpotLights),m.push(P.numSpotLightMaps),m.push(P.numHemiLights),m.push(P.numRectAreaLights),m.push(P.numDirLightShadows),m.push(P.numPointLightShadows),m.push(P.numSpotLightShadows),m.push(P.numSpotLightShadowsWithMaps),m.push(P.numLightProbes),m.push(P.shadowMapType),m.push(P.toneMapping),m.push(P.numClippingPlanes),m.push(P.numClipIntersection),m.push(P.depthPacking)}function w(m,P){o.disableAll(),P.supportsVertexTextures&&o.enable(0),P.instancing&&o.enable(1),P.instancingColor&&o.enable(2),P.instancingMorph&&o.enable(3),P.matcap&&o.enable(4),P.envMap&&o.enable(5),P.normalMapObjectSpace&&o.enable(6),P.normalMapTangentSpace&&o.enable(7),P.clearcoat&&o.enable(8),P.iridescence&&o.enable(9),P.alphaTest&&o.enable(10),P.vertexColors&&o.enable(11),P.vertexAlphas&&o.enable(12),P.vertexUv1s&&o.enable(13),P.vertexUv2s&&o.enable(14),P.vertexUv3s&&o.enable(15),P.vertexTangents&&o.enable(16),P.anisotropy&&o.enable(17),P.alphaHash&&o.enable(18),P.batching&&o.enable(19),P.dispersion&&o.enable(20),P.batchingColor&&o.enable(21),P.gradientMap&&o.enable(22),m.push(o.mask),o.disableAll(),P.fog&&o.enable(0),P.useFog&&o.enable(1),P.flatShading&&o.enable(2),P.logarithmicDepthBuffer&&o.enable(3),P.reversedDepthBuffer&&o.enable(4),P.skinning&&o.enable(5),P.morphTargets&&o.enable(6),P.morphNormals&&o.enable(7),P.morphColors&&o.enable(8),P.premultipliedAlpha&&o.enable(9),P.shadowMapEnabled&&o.enable(10),P.doubleSided&&o.enable(11),P.flipSided&&o.enable(12),P.useDepthPacking&&o.enable(13),P.dithering&&o.enable(14),P.transmission&&o.enable(15),P.sheen&&o.enable(16),P.opaque&&o.enable(17),P.pointsUvs&&o.enable(18),P.decodeVideoTexture&&o.enable(19),P.decodeVideoTextureEmissive&&o.enable(20),P.alphaToCoverage&&o.enable(21),m.push(o.mask)}function p(m){const P=x[m.type];let I;if(P){const U=As[P];I=Qm.clone(U.uniforms)}else I=m.uniforms;return I}function b(m,P){let I;for(let U=0,N=c.length;U<N;U++){const F=c[U];if(F.cacheKey===P){I=F,++I.usedTimes;break}}return I===void 0&&(I=new nP(s,P,m,r),c.push(I)),I}function M(m){if(--m.usedTimes===0){const P=c.indexOf(m);c[P]=c[c.length-1],c.pop(),m.destroy()}}function E(m){l.remove(m)}function A(){l.dispose()}return{getParameters:v,getProgramCacheKey:f,getUniforms:p,acquireProgram:b,releaseProgram:M,releaseShaderCache:E,programs:c,dispose:A}}function dP(){let s=new WeakMap;function e(n){return s.has(n)}function t(n){let o=s.get(n);return o===void 0&&(o={},s.set(n,o)),o}function i(n){s.delete(n)}function a(n,o,l){s.get(n)[o]=l}function r(){s=new WeakMap}return{has:e,get:t,remove:i,update:a,dispose:r}}function _P(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.material.id!==e.material.id?s.material.id-e.material.id:s.z!==e.z?s.z-e.z:s.id-e.id}function Zf(s,e){return s.groupOrder!==e.groupOrder?s.groupOrder-e.groupOrder:s.renderOrder!==e.renderOrder?s.renderOrder-e.renderOrder:s.z!==e.z?e.z-s.z:s.id-e.id}function Jf(){const s=[];let e=0;const t=[],i=[],a=[];function r(){e=0,t.length=0,i.length=0,a.length=0}function n(d,_,u,x,g,v){let f=s[e];return f===void 0?(f={id:d.id,object:d,geometry:_,material:u,groupOrder:x,renderOrder:d.renderOrder,z:g,group:v},s[e]=f):(f.id=d.id,f.object=d,f.geometry=_,f.material=u,f.groupOrder=x,f.renderOrder=d.renderOrder,f.z=g,f.group=v),e++,f}function o(d,_,u,x,g,v){const f=n(d,_,u,x,g,v);u.transmission>0?i.push(f):u.transparent===!0?a.push(f):t.push(f)}function l(d,_,u,x,g,v){const f=n(d,_,u,x,g,v);u.transmission>0?i.unshift(f):u.transparent===!0?a.unshift(f):t.unshift(f)}function h(d,_){t.length>1&&t.sort(d||_P),i.length>1&&i.sort(_||Zf),a.length>1&&a.sort(_||Zf)}function c(){for(let d=e,_=s.length;d<_;d++){const u=s[d];if(u.id===null)break;u.id=null,u.object=null,u.geometry=null,u.material=null,u.group=null}}return{opaque:t,transmissive:i,transparent:a,init:r,push:o,unshift:l,finish:c,sort:h}}function uP(){let s=new WeakMap;function e(i,a){const r=s.get(i);let n;return r===void 0?(n=new Jf,s.set(i,[n])):a>=r.length?(n=new Jf,r.push(n)):n=r[a],n}function t(){s=new WeakMap}return{get:e,dispose:t}}function fP(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new S,color:new X};break;case"SpotLight":t={position:new S,direction:new S,color:new X,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new S,color:new X,distance:0,decay:0};break;case"HemisphereLight":t={direction:new S,skyColor:new X,groundColor:new X};break;case"RectAreaLight":t={color:new X,position:new S,halfWidth:new S,halfHeight:new S};break}return s[e.id]=t,t}}}function vP(){const s={};return{get:function(e){if(s[e.id]!==void 0)return s[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[e.id]=t,t}}}let gP=0;function xP(s,e){return(e.castShadow?2:0)-(s.castShadow?2:0)+(e.map?1:0)-(s.map?1:0)}function pP(s){const e=new fP,t=vP(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)i.probe.push(new S);const a=new S,r=new De,n=new De;function o(h){let c=0,d=0,_=0;for(let m=0;m<9;m++)i.probe[m].set(0,0,0);let u=0,x=0,g=0,v=0,f=0,y=0,w=0,p=0,b=0,M=0,E=0;h.sort(xP);for(let m=0,P=h.length;m<P;m++){const I=h[m],U=I.color,N=I.intensity,F=I.distance,W=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)c+=U.r*N,d+=U.g*N,_+=U.b*N;else if(I.isLightProbe){for(let V=0;V<9;V++)i.probe[V].addScaledVector(I.sh.coefficients[V],N);E++}else if(I.isDirectionalLight){const V=e.get(I);if(V.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){const j=I.shadow,G=t.get(I);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,i.directionalShadow[u]=G,i.directionalShadowMap[u]=W,i.directionalShadowMatrix[u]=I.shadow.matrix,y++}i.directional[u]=V,u++}else if(I.isSpotLight){const V=e.get(I);V.position.setFromMatrixPosition(I.matrixWorld),V.color.copy(U).multiplyScalar(N),V.distance=F,V.coneCos=Math.cos(I.angle),V.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),V.decay=I.decay,i.spot[g]=V;const j=I.shadow;if(I.map&&(i.spotLightMap[b]=I.map,b++,j.updateMatrices(I),I.castShadow&&M++),i.spotLightMatrix[g]=j.matrix,I.castShadow){const G=t.get(I);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,i.spotShadow[g]=G,i.spotShadowMap[g]=W,p++}g++}else if(I.isRectAreaLight){const V=e.get(I);V.color.copy(U).multiplyScalar(N),V.halfWidth.set(I.width*.5,0,0),V.halfHeight.set(0,I.height*.5,0),i.rectArea[v]=V,v++}else if(I.isPointLight){const V=e.get(I);if(V.color.copy(I.color).multiplyScalar(I.intensity),V.distance=I.distance,V.decay=I.decay,I.castShadow){const j=I.shadow,G=t.get(I);G.shadowIntensity=j.intensity,G.shadowBias=j.bias,G.shadowNormalBias=j.normalBias,G.shadowRadius=j.radius,G.shadowMapSize=j.mapSize,G.shadowCameraNear=j.camera.near,G.shadowCameraFar=j.camera.far,i.pointShadow[x]=G,i.pointShadowMap[x]=W,i.pointShadowMatrix[x]=I.shadow.matrix,w++}i.point[x]=V,x++}else if(I.isHemisphereLight){const V=e.get(I);V.skyColor.copy(I.color).multiplyScalar(N),V.groundColor.copy(I.groundColor).multiplyScalar(N),i.hemi[f]=V,f++}}v>0&&(s.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ie.LTC_FLOAT_1,i.rectAreaLTC2=ie.LTC_FLOAT_2):(i.rectAreaLTC1=ie.LTC_HALF_1,i.rectAreaLTC2=ie.LTC_HALF_2)),i.ambient[0]=c,i.ambient[1]=d,i.ambient[2]=_;const A=i.hash;(A.directionalLength!==u||A.pointLength!==x||A.spotLength!==g||A.rectAreaLength!==v||A.hemiLength!==f||A.numDirectionalShadows!==y||A.numPointShadows!==w||A.numSpotShadows!==p||A.numSpotMaps!==b||A.numLightProbes!==E)&&(i.directional.length=u,i.spot.length=g,i.rectArea.length=v,i.point.length=x,i.hemi.length=f,i.directionalShadow.length=y,i.directionalShadowMap.length=y,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=p,i.spotShadowMap.length=p,i.directionalShadowMatrix.length=y,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=p+b-M,i.spotLightMap.length=b,i.numSpotLightShadowsWithMaps=M,i.numLightProbes=E,A.directionalLength=u,A.pointLength=x,A.spotLength=g,A.rectAreaLength=v,A.hemiLength=f,A.numDirectionalShadows=y,A.numPointShadows=w,A.numSpotShadows=p,A.numSpotMaps=b,A.numLightProbes=E,i.version=gP++)}function l(h,c){let d=0,_=0,u=0,x=0,g=0;const v=c.matrixWorldInverse;for(let f=0,y=h.length;f<y;f++){const w=h[f];if(w.isDirectionalLight){const p=i.directional[d];p.direction.setFromMatrixPosition(w.matrixWorld),a.setFromMatrixPosition(w.target.matrixWorld),p.direction.sub(a),p.direction.transformDirection(v),d++}else if(w.isSpotLight){const p=i.spot[u];p.position.setFromMatrixPosition(w.matrixWorld),p.position.applyMatrix4(v),p.direction.setFromMatrixPosition(w.matrixWorld),a.setFromMatrixPosition(w.target.matrixWorld),p.direction.sub(a),p.direction.transformDirection(v),u++}else if(w.isRectAreaLight){const p=i.rectArea[x];p.position.setFromMatrixPosition(w.matrixWorld),p.position.applyMatrix4(v),n.identity(),r.copy(w.matrixWorld),r.premultiply(v),n.extractRotation(r),p.halfWidth.set(w.width*.5,0,0),p.halfHeight.set(0,w.height*.5,0),p.halfWidth.applyMatrix4(n),p.halfHeight.applyMatrix4(n),x++}else if(w.isPointLight){const p=i.point[_];p.position.setFromMatrixPosition(w.matrixWorld),p.position.applyMatrix4(v),_++}else if(w.isHemisphereLight){const p=i.hemi[g];p.direction.setFromMatrixPosition(w.matrixWorld),p.direction.transformDirection(v),g++}}}return{setup:o,setupView:l,state:i}}function Kf(s){const e=new pP(s),t=[],i=[];function a(c){h.camera=c,t.length=0,i.length=0}function r(c){t.push(c)}function n(c){i.push(c)}function o(){e.setup(t)}function l(c){e.setupView(t,c)}const h={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:a,state:h,setupLights:o,setupLightsView:l,pushLight:r,pushShadow:n}}function mP(s){let e=new WeakMap;function t(a,r=0){const n=e.get(a);let o;return n===void 0?(o=new Kf(s),e.set(a,[o])):r>=n.length?(o=new Kf(s),n.push(o)):o=n[r],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const yP=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,wP=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function zP(s,e,t){let i=new Cn;const a=new $,r=new $,n=new et,o=new u1({depthPacking:am}),l=new f1,h={},c=t.maxTextureSize,d={[ds]:ai,[ai]:ds,[si]:si},_=new Le({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $},radius:{value:4}},vertexShader:yP,fragmentShader:wP}),u=_.clone();u.defines.HORIZONTAL_PASS=1;const x=new Wt;x.setAttribute("position",new Be(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Ne(x,_),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=f0;let f=this.type;this.render=function(M,E,A){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||M.length===0)return;const m=s.getRenderTarget(),P=s.getActiveCubeFace(),I=s.getActiveMipmapLevel(),U=s.state;U.setBlending(di),U.buffers.depth.getReversed()?U.buffers.color.setClear(0,0,0,0):U.buffers.color.setClear(1,1,1,1),U.buffers.depth.setTest(!0),U.setScissorTest(!1);const N=f!==Zs&&this.type===Zs,F=f===Zs&&this.type!==Zs;for(let W=0,V=M.length;W<V;W++){const j=M[W],G=j.shadow;if(G===void 0){console.warn("THREE.WebGLShadowMap:",j,"has no shadow.");continue}if(G.autoUpdate===!1&&G.needsUpdate===!1)continue;a.copy(G.mapSize);const re=G.getFrameExtents();if(a.multiply(re),r.copy(G.mapSize),(a.x>c||a.y>c)&&(a.x>c&&(r.x=Math.floor(c/re.x),a.x=r.x*re.x,G.mapSize.x=r.x),a.y>c&&(r.y=Math.floor(c/re.y),a.y=r.y*re.y,G.mapSize.y=r.y)),G.map===null||N===!0||F===!0){const xe=this.type!==Zs?{minFilter:it,magFilter:it}:{};G.map!==null&&G.map.dispose(),G.map=new gt(a.x,a.y,xe),G.map.texture.name=j.name+".shadowMap",G.camera.updateProjectionMatrix()}s.setRenderTarget(G.map),s.clear();const ne=G.getViewportCount();for(let xe=0;xe<ne;xe++){const we=G.getViewport(xe);n.set(r.x*we.x,r.y*we.y,r.x*we.z,r.y*we.w),U.viewport(n),G.updateMatrices(j,xe),i=G.getFrustum(),p(E,A,G.camera,j,this.type)}G.isPointLightShadow!==!0&&this.type===Zs&&y(G,A),G.needsUpdate=!1}f=this.type,v.needsUpdate=!1,s.setRenderTarget(m,P,I)};function y(M,E){const A=e.update(g);_.defines.VSM_SAMPLES!==M.blurSamples&&(_.defines.VSM_SAMPLES=M.blurSamples,u.defines.VSM_SAMPLES=M.blurSamples,_.needsUpdate=!0,u.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new gt(a.x,a.y)),_.uniforms.shadow_pass.value=M.map.texture,_.uniforms.resolution.value=M.mapSize,_.uniforms.radius.value=M.radius,s.setRenderTarget(M.mapPass),s.clear(),s.renderBufferDirect(E,null,A,_,g,null),u.uniforms.shadow_pass.value=M.mapPass.texture,u.uniforms.resolution.value=M.mapSize,u.uniforms.radius.value=M.radius,s.setRenderTarget(M.map),s.clear(),s.renderBufferDirect(E,null,A,u,g,null)}function w(M,E,A,m){let P=null;const I=A.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(I!==void 0)P=I;else if(P=A.isPointLight===!0?l:o,s.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0||E.map&&E.alphaTest>0||E.alphaToCoverage===!0){const U=P.uuid,N=E.uuid;let F=h[U];F===void 0&&(F={},h[U]=F);let W=F[N];W===void 0&&(W=P.clone(),F[N]=W,E.addEventListener("dispose",b)),P=W}if(P.visible=E.visible,P.wireframe=E.wireframe,m===Zs?P.side=E.shadowSide!==null?E.shadowSide:E.side:P.side=E.shadowSide!==null?E.shadowSide:d[E.side],P.alphaMap=E.alphaMap,P.alphaTest=E.alphaToCoverage===!0?.5:E.alphaTest,P.map=E.map,P.clipShadows=E.clipShadows,P.clippingPlanes=E.clippingPlanes,P.clipIntersection=E.clipIntersection,P.displacementMap=E.displacementMap,P.displacementScale=E.displacementScale,P.displacementBias=E.displacementBias,P.wireframeLinewidth=E.wireframeLinewidth,P.linewidth=E.linewidth,A.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const U=s.properties.get(P);U.light=A}return P}function p(M,E,A,m,P){if(M.visible===!1)return;if(M.layers.test(E.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&P===Zs)&&(!M.frustumCulled||i.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,M.matrixWorld);const N=e.update(M),F=M.material;if(Array.isArray(F)){const W=N.groups;for(let V=0,j=W.length;V<j;V++){const G=W[V],re=F[G.materialIndex];if(re&&re.visible){const ne=w(M,re,m,P);M.onBeforeShadow(s,M,E,A,N,ne,G),s.renderBufferDirect(A,null,N,ne,M,G),M.onAfterShadow(s,M,E,A,N,ne,G)}}}else if(F.visible){const W=w(M,F,m,P);M.onBeforeShadow(s,M,E,A,N,W,null),s.renderBufferDirect(A,null,N,W,M,null),M.onAfterShadow(s,M,E,A,N,W,null)}}const U=M.children;for(let N=0,F=U.length;N<F;N++)p(U[N],E,A,m,P)}function b(M){M.target.removeEventListener("dispose",b);for(const A in h){const m=h[A],P=M.target.uuid;P in m&&(m[P].dispose(),delete m[P])}}}const PP={[Hc]:Xc,[jc]:Kc,[Zc]:Yc,[hn]:Jc,[Xc]:Hc,[Kc]:jc,[Yc]:Zc,[Jc]:hn};function bP(s,e){function t(){let R=!1;const ae=new et;let he=null;const ve=new et(0,0,0,0);return{setMask:function(ee){he!==ee&&!R&&(s.colorMask(ee,ee,ee,ee),he=ee)},setLocked:function(ee){R=ee},setClear:function(ee,Y,me,ke,Tt){Tt===!0&&(ee*=ke,Y*=ke,me*=ke),ae.set(ee,Y,me,ke),ve.equals(ae)===!1&&(s.clearColor(ee,Y,me,ke),ve.copy(ae))},reset:function(){R=!1,he=null,ve.set(-1,0,0,0)}}}function i(){let R=!1,ae=!1,he=null,ve=null,ee=null;return{setReversed:function(Y){if(ae!==Y){const me=e.get("EXT_clip_control");Y?me.clipControlEXT(me.LOWER_LEFT_EXT,me.ZERO_TO_ONE_EXT):me.clipControlEXT(me.LOWER_LEFT_EXT,me.NEGATIVE_ONE_TO_ONE_EXT),ae=Y;const ke=ee;ee=null,this.setClear(ke)}},getReversed:function(){return ae},setTest:function(Y){Y?le(s.DEPTH_TEST):Me(s.DEPTH_TEST)},setMask:function(Y){he!==Y&&!R&&(s.depthMask(Y),he=Y)},setFunc:function(Y){if(ae&&(Y=PP[Y]),ve!==Y){switch(Y){case Hc:s.depthFunc(s.NEVER);break;case Xc:s.depthFunc(s.ALWAYS);break;case jc:s.depthFunc(s.LESS);break;case hn:s.depthFunc(s.LEQUAL);break;case Zc:s.depthFunc(s.EQUAL);break;case Jc:s.depthFunc(s.GEQUAL);break;case Kc:s.depthFunc(s.GREATER);break;case Yc:s.depthFunc(s.NOTEQUAL);break;default:s.depthFunc(s.LEQUAL)}ve=Y}},setLocked:function(Y){R=Y},setClear:function(Y){ee!==Y&&(ae&&(Y=1-Y),s.clearDepth(Y),ee=Y)},reset:function(){R=!1,he=null,ve=null,ee=null,ae=!1}}}function a(){let R=!1,ae=null,he=null,ve=null,ee=null,Y=null,me=null,ke=null,Tt=null;return{setTest:function(ct){R||(ct?le(s.STENCIL_TEST):Me(s.STENCIL_TEST))},setMask:function(ct){ae!==ct&&!R&&(s.stencilMask(ct),ae=ct)},setFunc:function(ct,Us,Ss){(he!==ct||ve!==Us||ee!==Ss)&&(s.stencilFunc(ct,Us,Ss),he=ct,ve=Us,ee=Ss)},setOp:function(ct,Us,Ss){(Y!==ct||me!==Us||ke!==Ss)&&(s.stencilOp(ct,Us,Ss),Y=ct,me=Us,ke=Ss)},setLocked:function(ct){R=ct},setClear:function(ct){Tt!==ct&&(s.clearStencil(ct),Tt=ct)},reset:function(){R=!1,ae=null,he=null,ve=null,ee=null,Y=null,me=null,ke=null,Tt=null}}}const r=new t,n=new i,o=new a,l=new WeakMap,h=new WeakMap;let c={},d={},_=new WeakMap,u=[],x=null,g=!1,v=null,f=null,y=null,w=null,p=null,b=null,M=null,E=new X(0,0,0),A=0,m=!1,P=null,I=null,U=null,N=null,F=null;const W=s.getParameter(s.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let V=!1,j=0;const G=s.getParameter(s.VERSION);G.indexOf("WebGL")!==-1?(j=parseFloat(/^WebGL (\d)/.exec(G)[1]),V=j>=1):G.indexOf("OpenGL ES")!==-1&&(j=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),V=j>=2);let re=null,ne={};const xe=s.getParameter(s.SCISSOR_BOX),we=s.getParameter(s.VIEWPORT),Je=new et().fromArray(xe),qe=new et().fromArray(we);function Z(R,ae,he,ve){const ee=new Uint8Array(4),Y=s.createTexture();s.bindTexture(R,Y),s.texParameteri(R,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(R,s.TEXTURE_MAG_FILTER,s.NEAREST);for(let me=0;me<he;me++)R===s.TEXTURE_3D||R===s.TEXTURE_2D_ARRAY?s.texImage3D(ae,0,s.RGBA,1,1,ve,0,s.RGBA,s.UNSIGNED_BYTE,ee):s.texImage2D(ae+me,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,ee);return Y}const ce={};ce[s.TEXTURE_2D]=Z(s.TEXTURE_2D,s.TEXTURE_2D,1),ce[s.TEXTURE_CUBE_MAP]=Z(s.TEXTURE_CUBE_MAP,s.TEXTURE_CUBE_MAP_POSITIVE_X,6),ce[s.TEXTURE_2D_ARRAY]=Z(s.TEXTURE_2D_ARRAY,s.TEXTURE_2D_ARRAY,1,1),ce[s.TEXTURE_3D]=Z(s.TEXTURE_3D,s.TEXTURE_3D,1,1),r.setClear(0,0,0,1),n.setClear(1),o.setClear(0),le(s.DEPTH_TEST),n.setFunc(hn),ht(!1),Te(Au),le(s.CULL_FACE),bt(di);function le(R){c[R]!==!0&&(s.enable(R),c[R]=!0)}function Me(R){c[R]!==!1&&(s.disable(R),c[R]=!1)}function Ie(R,ae){return d[R]!==ae?(s.bindFramebuffer(R,ae),d[R]=ae,R===s.DRAW_FRAMEBUFFER&&(d[s.FRAMEBUFFER]=ae),R===s.FRAMEBUFFER&&(d[s.DRAW_FRAMEBUFFER]=ae),!0):!1}function Fe(R,ae){let he=u,ve=!1;if(R){he=_.get(ae),he===void 0&&(he=[],_.set(ae,he));const ee=R.textures;if(he.length!==ee.length||he[0]!==s.COLOR_ATTACHMENT0){for(let Y=0,me=ee.length;Y<me;Y++)he[Y]=s.COLOR_ATTACHMENT0+Y;he.length=ee.length,ve=!0}}else he[0]!==s.BACK&&(he[0]=s.BACK,ve=!0);ve&&s.drawBuffers(he)}function jt(R){return x!==R?(s.useProgram(R),x=R,!0):!1}const tt={[or]:s.FUNC_ADD,[Ap]:s.FUNC_SUBTRACT,[Mp]:s.FUNC_REVERSE_SUBTRACT};tt[Ip]=s.MIN,tt[Cp]=s.MAX;const D={[Dp]:s.ZERO,[Rp]:s.ONE,[Op]:s.SRC_COLOR,[Gc]:s.SRC_ALPHA,[Up]:s.SRC_ALPHA_SATURATE,[kp]:s.DST_COLOR,[Lp]:s.DST_ALPHA,[Np]:s.ONE_MINUS_SRC_COLOR,[qc]:s.ONE_MINUS_SRC_ALPHA,[Vp]:s.ONE_MINUS_DST_COLOR,[Fp]:s.ONE_MINUS_DST_ALPHA,[Bp]:s.CONSTANT_COLOR,[Wp]:s.ONE_MINUS_CONSTANT_COLOR,[Gp]:s.CONSTANT_ALPHA,[qp]:s.ONE_MINUS_CONSTANT_ALPHA};function bt(R,ae,he,ve,ee,Y,me,ke,Tt,ct){if(R===di){g===!0&&(Me(s.BLEND),g=!1);return}if(g===!1&&(le(s.BLEND),g=!0),R!==Ep){if(R!==v||ct!==m){if((f!==or||p!==or)&&(s.blendEquation(s.FUNC_ADD),f=or,p=or),ct)switch(R){case Qr:s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case Jl:s.blendFunc(s.ONE,s.ONE);break;case Mu:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case Iu:s.blendFuncSeparate(s.DST_COLOR,s.ONE_MINUS_SRC_ALPHA,s.ZERO,s.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",R);break}else switch(R){case Qr:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case Jl:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE,s.ONE,s.ONE);break;case Mu:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Iu:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",R);break}y=null,w=null,b=null,M=null,E.set(0,0,0),A=0,v=R,m=ct}return}ee=ee||ae,Y=Y||he,me=me||ve,(ae!==f||ee!==p)&&(s.blendEquationSeparate(tt[ae],tt[ee]),f=ae,p=ee),(he!==y||ve!==w||Y!==b||me!==M)&&(s.blendFuncSeparate(D[he],D[ve],D[Y],D[me]),y=he,w=ve,b=Y,M=me),(ke.equals(E)===!1||Tt!==A)&&(s.blendColor(ke.r,ke.g,ke.b,Tt),E.copy(ke),A=Tt),v=R,m=!1}function Ee(R,ae){R.side===si?Me(s.CULL_FACE):le(s.CULL_FACE);let he=R.side===ai;ae&&(he=!he),ht(he),R.blending===Qr&&R.transparent===!1?bt(di):bt(R.blending,R.blendEquation,R.blendSrc,R.blendDst,R.blendEquationAlpha,R.blendSrcAlpha,R.blendDstAlpha,R.blendColor,R.blendAlpha,R.premultipliedAlpha),n.setFunc(R.depthFunc),n.setTest(R.depthTest),n.setMask(R.depthWrite),r.setMask(R.colorWrite);const ve=R.stencilWrite;o.setTest(ve),ve&&(o.setMask(R.stencilWriteMask),o.setFunc(R.stencilFunc,R.stencilRef,R.stencilFuncMask),o.setOp(R.stencilFail,R.stencilZFail,R.stencilZPass)),ge(R.polygonOffset,R.polygonOffsetFactor,R.polygonOffsetUnits),R.alphaToCoverage===!0?le(s.SAMPLE_ALPHA_TO_COVERAGE):Me(s.SAMPLE_ALPHA_TO_COVERAGE)}function ht(R){P!==R&&(R?s.frontFace(s.CW):s.frontFace(s.CCW),P=R)}function Te(R){R!==bp?(le(s.CULL_FACE),R!==I&&(R===Au?s.cullFace(s.BACK):R===Tp?s.cullFace(s.FRONT):s.cullFace(s.FRONT_AND_BACK))):Me(s.CULL_FACE),I=R}function Dt(R){R!==U&&(V&&s.lineWidth(R),U=R)}function ge(R,ae,he){R?(le(s.POLYGON_OFFSET_FILL),(N!==ae||F!==he)&&(s.polygonOffset(ae,he),N=ae,F=he)):Me(s.POLYGON_OFFSET_FILL)}function Xe(R){R?le(s.SCISSOR_TEST):Me(s.SCISSOR_TEST)}function li(R){R===void 0&&(R=s.TEXTURE0+W-1),re!==R&&(s.activeTexture(R),re=R)}function Zt(R,ae,he){he===void 0&&(re===null?he=s.TEXTURE0+W-1:he=re);let ve=ne[he];ve===void 0&&(ve={type:void 0,texture:void 0},ne[he]=ve),(ve.type!==R||ve.texture!==ae)&&(re!==he&&(s.activeTexture(he),re=he),s.bindTexture(R,ae||ce[R]),ve.type=R,ve.texture=ae)}function C(){const R=ne[re];R!==void 0&&R.type!==void 0&&(s.bindTexture(R.type,null),R.type=void 0,R.texture=void 0)}function z(){try{s.compressedTexImage2D(...arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function B(){try{s.compressedTexImage3D(...arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function K(){try{s.texSubImage2D(...arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function Q(){try{s.texSubImage3D(...arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function J(){try{s.compressedTexSubImage2D(...arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function be(){try{s.compressedTexSubImage3D(...arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function oe(){try{s.texStorage2D(...arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function ye(){try{s.texStorage3D(...arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function ze(){try{s.texImage2D(...arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function se(){try{s.texImage3D(...arguments)}catch(R){console.error("THREE.WebGLState:",R)}}function ue(R){Je.equals(R)===!1&&(s.scissor(R.x,R.y,R.z,R.w),Je.copy(R))}function Re(R){qe.equals(R)===!1&&(s.viewport(R.x,R.y,R.z,R.w),qe.copy(R))}function Pe(R,ae){let he=h.get(ae);he===void 0&&(he=new WeakMap,h.set(ae,he));let ve=he.get(R);ve===void 0&&(ve=s.getUniformBlockIndex(ae,R.name),he.set(R,ve))}function de(R,ae){const ve=h.get(ae).get(R);l.get(ae)!==ve&&(s.uniformBlockBinding(ae,ve,R.__bindingPointIndex),l.set(ae,ve))}function We(){s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SCISSOR_TEST),s.disable(s.STENCIL_TEST),s.disable(s.SAMPLE_ALPHA_TO_COVERAGE),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO),s.blendFuncSeparate(s.ONE,s.ZERO,s.ONE,s.ZERO),s.blendColor(0,0,0,0),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(s.LESS),n.setReversed(!1),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(s.ALWAYS,0,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.clearStencil(0),s.cullFace(s.BACK),s.frontFace(s.CCW),s.polygonOffset(0,0),s.activeTexture(s.TEXTURE0),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),s.bindFramebuffer(s.READ_FRAMEBUFFER,null),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),c={},re=null,ne={},d={},_=new WeakMap,u=[],x=null,g=!1,v=null,f=null,y=null,w=null,p=null,b=null,M=null,E=new X(0,0,0),A=0,m=!1,P=null,I=null,U=null,N=null,F=null,Je.set(0,0,s.canvas.width,s.canvas.height),qe.set(0,0,s.canvas.width,s.canvas.height),r.reset(),n.reset(),o.reset()}return{buffers:{color:r,depth:n,stencil:o},enable:le,disable:Me,bindFramebuffer:Ie,drawBuffers:Fe,useProgram:jt,setBlending:bt,setMaterial:Ee,setFlipSided:ht,setCullFace:Te,setLineWidth:Dt,setPolygonOffset:ge,setScissorTest:Xe,activeTexture:li,bindTexture:Zt,unbindTexture:C,compressedTexImage2D:z,compressedTexImage3D:B,texImage2D:ze,texImage3D:se,updateUBOMapping:Pe,uniformBlockBinding:de,texStorage2D:oe,texStorage3D:ye,texSubImage2D:K,texSubImage3D:Q,compressedTexSubImage2D:J,compressedTexSubImage3D:be,scissor:ue,viewport:Re,reset:We}}function TP(s,e,t,i,a,r,n){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new $,c=new WeakMap;let d;const _=new WeakMap;let u=!1;try{u=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(C,z){return u?new OffscreenCanvas(C,z):mo("canvas")}function g(C,z,B){let K=1;const Q=Zt(C);if((Q.width>B||Q.height>B)&&(K=B/Math.max(Q.width,Q.height)),K<1)if(typeof HTMLImageElement<"u"&&C instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&C instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&C instanceof ImageBitmap||typeof VideoFrame<"u"&&C instanceof VideoFrame){const J=Math.floor(K*Q.width),be=Math.floor(K*Q.height);d===void 0&&(d=x(J,be));const oe=z?x(J,be):d;return oe.width=J,oe.height=be,oe.getContext("2d").drawImage(C,0,0,J,be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Q.width+"x"+Q.height+") to ("+J+"x"+be+")."),oe}else return"data"in C&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Q.width+"x"+Q.height+")."),C;return C}function v(C){return C.generateMipmaps}function f(C){s.generateMipmap(C)}function y(C){return C.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:C.isWebGL3DRenderTarget?s.TEXTURE_3D:C.isWebGLArrayRenderTarget||C.isCompressedArrayTexture?s.TEXTURE_2D_ARRAY:s.TEXTURE_2D}function w(C,z,B,K,Q=!1){if(C!==null){if(s[C]!==void 0)return s[C];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+C+"'")}let J=z;if(z===s.RED&&(B===s.FLOAT&&(J=s.R32F),B===s.HALF_FLOAT&&(J=s.R16F),B===s.UNSIGNED_BYTE&&(J=s.R8)),z===s.RED_INTEGER&&(B===s.UNSIGNED_BYTE&&(J=s.R8UI),B===s.UNSIGNED_SHORT&&(J=s.R16UI),B===s.UNSIGNED_INT&&(J=s.R32UI),B===s.BYTE&&(J=s.R8I),B===s.SHORT&&(J=s.R16I),B===s.INT&&(J=s.R32I)),z===s.RG&&(B===s.FLOAT&&(J=s.RG32F),B===s.HALF_FLOAT&&(J=s.RG16F),B===s.UNSIGNED_BYTE&&(J=s.RG8)),z===s.RG_INTEGER&&(B===s.UNSIGNED_BYTE&&(J=s.RG8UI),B===s.UNSIGNED_SHORT&&(J=s.RG16UI),B===s.UNSIGNED_INT&&(J=s.RG32UI),B===s.BYTE&&(J=s.RG8I),B===s.SHORT&&(J=s.RG16I),B===s.INT&&(J=s.RG32I)),z===s.RGB_INTEGER&&(B===s.UNSIGNED_BYTE&&(J=s.RGB8UI),B===s.UNSIGNED_SHORT&&(J=s.RGB16UI),B===s.UNSIGNED_INT&&(J=s.RGB32UI),B===s.BYTE&&(J=s.RGB8I),B===s.SHORT&&(J=s.RGB16I),B===s.INT&&(J=s.RGB32I)),z===s.RGBA_INTEGER&&(B===s.UNSIGNED_BYTE&&(J=s.RGBA8UI),B===s.UNSIGNED_SHORT&&(J=s.RGBA16UI),B===s.UNSIGNED_INT&&(J=s.RGBA32UI),B===s.BYTE&&(J=s.RGBA8I),B===s.SHORT&&(J=s.RGBA16I),B===s.INT&&(J=s.RGBA32I)),z===s.RGB&&B===s.UNSIGNED_INT_5_9_9_9_REV&&(J=s.RGB9_E5),z===s.RGBA){const be=Q?Ql:Qe.getTransfer(K);B===s.FLOAT&&(J=s.RGBA32F),B===s.HALF_FLOAT&&(J=s.RGBA16F),B===s.UNSIGNED_BYTE&&(J=be===pt?s.SRGB8_ALPHA8:s.RGBA8),B===s.UNSIGNED_SHORT_4_4_4_4&&(J=s.RGBA4),B===s.UNSIGNED_SHORT_5_5_5_1&&(J=s.RGB5_A1)}return(J===s.R16F||J===s.R32F||J===s.RG16F||J===s.RG32F||J===s.RGBA16F||J===s.RGBA32F)&&e.get("EXT_color_buffer_float"),J}function p(C,z){let B;return C?z===null||z===Na||z===_n?B=s.DEPTH24_STENCIL8:z===Et?B=s.DEPTH32F_STENCIL8:z===vo&&(B=s.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):z===null||z===Na||z===_n?B=s.DEPTH_COMPONENT24:z===Et?B=s.DEPTH_COMPONENT32F:z===vo&&(B=s.DEPTH_COMPONENT16),B}function b(C,z){return v(C)===!0||C.isFramebufferTexture&&C.minFilter!==it&&C.minFilter!==yt?Math.log2(Math.max(z.width,z.height))+1:C.mipmaps!==void 0&&C.mipmaps.length>0?C.mipmaps.length:C.isCompressedTexture&&Array.isArray(C.image)?z.mipmaps.length:1}function M(C){const z=C.target;z.removeEventListener("dispose",M),A(z),z.isVideoTexture&&c.delete(z)}function E(C){const z=C.target;z.removeEventListener("dispose",E),P(z)}function A(C){const z=i.get(C);if(z.__webglInit===void 0)return;const B=C.source,K=_.get(B);if(K){const Q=K[z.__cacheKey];Q.usedTimes--,Q.usedTimes===0&&m(C),Object.keys(K).length===0&&_.delete(B)}i.remove(C)}function m(C){const z=i.get(C);s.deleteTexture(z.__webglTexture);const B=C.source,K=_.get(B);delete K[z.__cacheKey],n.memory.textures--}function P(C){const z=i.get(C);if(C.depthTexture&&(C.depthTexture.dispose(),i.remove(C.depthTexture)),C.isWebGLCubeRenderTarget)for(let K=0;K<6;K++){if(Array.isArray(z.__webglFramebuffer[K]))for(let Q=0;Q<z.__webglFramebuffer[K].length;Q++)s.deleteFramebuffer(z.__webglFramebuffer[K][Q]);else s.deleteFramebuffer(z.__webglFramebuffer[K]);z.__webglDepthbuffer&&s.deleteRenderbuffer(z.__webglDepthbuffer[K])}else{if(Array.isArray(z.__webglFramebuffer))for(let K=0;K<z.__webglFramebuffer.length;K++)s.deleteFramebuffer(z.__webglFramebuffer[K]);else s.deleteFramebuffer(z.__webglFramebuffer);if(z.__webglDepthbuffer&&s.deleteRenderbuffer(z.__webglDepthbuffer),z.__webglMultisampledFramebuffer&&s.deleteFramebuffer(z.__webglMultisampledFramebuffer),z.__webglColorRenderbuffer)for(let K=0;K<z.__webglColorRenderbuffer.length;K++)z.__webglColorRenderbuffer[K]&&s.deleteRenderbuffer(z.__webglColorRenderbuffer[K]);z.__webglDepthRenderbuffer&&s.deleteRenderbuffer(z.__webglDepthRenderbuffer)}const B=C.textures;for(let K=0,Q=B.length;K<Q;K++){const J=i.get(B[K]);J.__webglTexture&&(s.deleteTexture(J.__webglTexture),n.memory.textures--),i.remove(B[K])}i.remove(C)}let I=0;function U(){I=0}function N(){const C=I;return C>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+C+" texture units while this GPU supports only "+a.maxTextures),I+=1,C}function F(C){const z=[];return z.push(C.wrapS),z.push(C.wrapT),z.push(C.wrapR||0),z.push(C.magFilter),z.push(C.minFilter),z.push(C.anisotropy),z.push(C.internalFormat),z.push(C.format),z.push(C.type),z.push(C.generateMipmaps),z.push(C.premultiplyAlpha),z.push(C.flipY),z.push(C.unpackAlignment),z.push(C.colorSpace),z.join()}function W(C,z){const B=i.get(C);if(C.isVideoTexture&&Xe(C),C.isRenderTargetTexture===!1&&C.isExternalTexture!==!0&&C.version>0&&B.__version!==C.version){const K=C.image;if(K===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(K.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ce(B,C,z);return}}else C.isExternalTexture&&(B.__webglTexture=C.sourceTexture?C.sourceTexture:null);t.bindTexture(s.TEXTURE_2D,B.__webglTexture,s.TEXTURE0+z)}function V(C,z){const B=i.get(C);if(C.isRenderTargetTexture===!1&&C.version>0&&B.__version!==C.version){ce(B,C,z);return}t.bindTexture(s.TEXTURE_2D_ARRAY,B.__webglTexture,s.TEXTURE0+z)}function j(C,z){const B=i.get(C);if(C.isRenderTargetTexture===!1&&C.version>0&&B.__version!==C.version){ce(B,C,z);return}t.bindTexture(s.TEXTURE_3D,B.__webglTexture,s.TEXTURE0+z)}function G(C,z){const B=i.get(C);if(C.version>0&&B.__version!==C.version){le(B,C,z);return}t.bindTexture(s.TEXTURE_CUBE_MAP,B.__webglTexture,s.TEXTURE0+z)}const re={[rt]:s.REPEAT,[rs]:s.CLAMP_TO_EDGE,[Yl]:s.MIRRORED_REPEAT},ne={[it]:s.NEAREST,[g0]:s.NEAREST_MIPMAP_NEAREST,[so]:s.NEAREST_MIPMAP_LINEAR,[yt]:s.LINEAR,[Nl]:s.LINEAR_MIPMAP_NEAREST,[ms]:s.LINEAR_MIPMAP_LINEAR},xe={[nm]:s.NEVER,[_m]:s.ALWAYS,[om]:s.LESS,[T0]:s.LEQUAL,[lm]:s.EQUAL,[dm]:s.GEQUAL,[hm]:s.GREATER,[cm]:s.NOTEQUAL};function we(C,z){if(z.type===Et&&e.has("OES_texture_float_linear")===!1&&(z.magFilter===yt||z.magFilter===Nl||z.magFilter===so||z.magFilter===ms||z.minFilter===yt||z.minFilter===Nl||z.minFilter===so||z.minFilter===ms)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),s.texParameteri(C,s.TEXTURE_WRAP_S,re[z.wrapS]),s.texParameteri(C,s.TEXTURE_WRAP_T,re[z.wrapT]),(C===s.TEXTURE_3D||C===s.TEXTURE_2D_ARRAY)&&s.texParameteri(C,s.TEXTURE_WRAP_R,re[z.wrapR]),s.texParameteri(C,s.TEXTURE_MAG_FILTER,ne[z.magFilter]),s.texParameteri(C,s.TEXTURE_MIN_FILTER,ne[z.minFilter]),z.compareFunction&&(s.texParameteri(C,s.TEXTURE_COMPARE_MODE,s.COMPARE_REF_TO_TEXTURE),s.texParameteri(C,s.TEXTURE_COMPARE_FUNC,xe[z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(z.magFilter===it||z.minFilter!==so&&z.minFilter!==ms||z.type===Et&&e.has("OES_texture_float_linear")===!1)return;if(z.anisotropy>1||i.get(z).__currentAnisotropy){const B=e.get("EXT_texture_filter_anisotropic");s.texParameterf(C,B.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(z.anisotropy,a.getMaxAnisotropy())),i.get(z).__currentAnisotropy=z.anisotropy}}}function Je(C,z){let B=!1;C.__webglInit===void 0&&(C.__webglInit=!0,z.addEventListener("dispose",M));const K=z.source;let Q=_.get(K);Q===void 0&&(Q={},_.set(K,Q));const J=F(z);if(J!==C.__cacheKey){Q[J]===void 0&&(Q[J]={texture:s.createTexture(),usedTimes:0},n.memory.textures++,B=!0),Q[J].usedTimes++;const be=Q[C.__cacheKey];be!==void 0&&(Q[C.__cacheKey].usedTimes--,be.usedTimes===0&&m(z)),C.__cacheKey=J,C.__webglTexture=Q[J].texture}return B}function qe(C,z,B){return Math.floor(Math.floor(C/B)/z)}function Z(C,z,B,K){const J=C.updateRanges;if(J.length===0)t.texSubImage2D(s.TEXTURE_2D,0,0,0,z.width,z.height,B,K,z.data);else{J.sort((se,ue)=>se.start-ue.start);let be=0;for(let se=1;se<J.length;se++){const ue=J[be],Re=J[se],Pe=ue.start+ue.count,de=qe(Re.start,z.width,4),We=qe(ue.start,z.width,4);Re.start<=Pe+1&&de===We&&qe(Re.start+Re.count-1,z.width,4)===de?ue.count=Math.max(ue.count,Re.start+Re.count-ue.start):(++be,J[be]=Re)}J.length=be+1;const oe=s.getParameter(s.UNPACK_ROW_LENGTH),ye=s.getParameter(s.UNPACK_SKIP_PIXELS),ze=s.getParameter(s.UNPACK_SKIP_ROWS);s.pixelStorei(s.UNPACK_ROW_LENGTH,z.width);for(let se=0,ue=J.length;se<ue;se++){const Re=J[se],Pe=Math.floor(Re.start/4),de=Math.ceil(Re.count/4),We=Pe%z.width,R=Math.floor(Pe/z.width),ae=de,he=1;s.pixelStorei(s.UNPACK_SKIP_PIXELS,We),s.pixelStorei(s.UNPACK_SKIP_ROWS,R),t.texSubImage2D(s.TEXTURE_2D,0,We,R,ae,he,B,K,z.data)}C.clearUpdateRanges(),s.pixelStorei(s.UNPACK_ROW_LENGTH,oe),s.pixelStorei(s.UNPACK_SKIP_PIXELS,ye),s.pixelStorei(s.UNPACK_SKIP_ROWS,ze)}}function ce(C,z,B){let K=s.TEXTURE_2D;(z.isDataArrayTexture||z.isCompressedArrayTexture)&&(K=s.TEXTURE_2D_ARRAY),z.isData3DTexture&&(K=s.TEXTURE_3D);const Q=Je(C,z),J=z.source;t.bindTexture(K,C.__webglTexture,s.TEXTURE0+B);const be=i.get(J);if(J.version!==be.__version||Q===!0){t.activeTexture(s.TEXTURE0+B);const oe=Qe.getPrimaries(Qe.workingColorSpace),ye=z.colorSpace===Ms?null:Qe.getPrimaries(z.colorSpace),ze=z.colorSpace===Ms||oe===ye?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,z.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,z.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);let se=g(z.image,!1,a.maxTextureSize);se=li(z,se);const ue=r.convert(z.format,z.colorSpace),Re=r.convert(z.type);let Pe=w(z.internalFormat,ue,Re,z.colorSpace,z.isVideoTexture);we(K,z);let de;const We=z.mipmaps,R=z.isVideoTexture!==!0,ae=be.__version===void 0||Q===!0,he=J.dataReady,ve=b(z,se);if(z.isDepthTexture)Pe=p(z.format===un,z.type),ae&&(R?t.texStorage2D(s.TEXTURE_2D,1,Pe,se.width,se.height):t.texImage2D(s.TEXTURE_2D,0,Pe,se.width,se.height,0,ue,Re,null));else if(z.isDataTexture)if(We.length>0){R&&ae&&t.texStorage2D(s.TEXTURE_2D,ve,Pe,We[0].width,We[0].height);for(let ee=0,Y=We.length;ee<Y;ee++)de=We[ee],R?he&&t.texSubImage2D(s.TEXTURE_2D,ee,0,0,de.width,de.height,ue,Re,de.data):t.texImage2D(s.TEXTURE_2D,ee,Pe,de.width,de.height,0,ue,Re,de.data);z.generateMipmaps=!1}else R?(ae&&t.texStorage2D(s.TEXTURE_2D,ve,Pe,se.width,se.height),he&&Z(z,se,ue,Re)):t.texImage2D(s.TEXTURE_2D,0,Pe,se.width,se.height,0,ue,Re,se.data);else if(z.isCompressedTexture)if(z.isCompressedArrayTexture){R&&ae&&t.texStorage3D(s.TEXTURE_2D_ARRAY,ve,Pe,We[0].width,We[0].height,se.depth);for(let ee=0,Y=We.length;ee<Y;ee++)if(de=We[ee],z.format!==At)if(ue!==null)if(R){if(he)if(z.layerUpdates.size>0){const me=Sf(de.width,de.height,z.format,z.type);for(const ke of z.layerUpdates){const Tt=de.data.subarray(ke*me/de.data.BYTES_PER_ELEMENT,(ke+1)*me/de.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,ee,0,0,ke,de.width,de.height,1,ue,Tt)}z.clearLayerUpdates()}else t.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,ee,0,0,0,de.width,de.height,se.depth,ue,de.data)}else t.compressedTexImage3D(s.TEXTURE_2D_ARRAY,ee,Pe,de.width,de.height,se.depth,0,de.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else R?he&&t.texSubImage3D(s.TEXTURE_2D_ARRAY,ee,0,0,0,de.width,de.height,se.depth,ue,Re,de.data):t.texImage3D(s.TEXTURE_2D_ARRAY,ee,Pe,de.width,de.height,se.depth,0,ue,Re,de.data)}else{R&&ae&&t.texStorage2D(s.TEXTURE_2D,ve,Pe,We[0].width,We[0].height);for(let ee=0,Y=We.length;ee<Y;ee++)de=We[ee],z.format!==At?ue!==null?R?he&&t.compressedTexSubImage2D(s.TEXTURE_2D,ee,0,0,de.width,de.height,ue,de.data):t.compressedTexImage2D(s.TEXTURE_2D,ee,Pe,de.width,de.height,0,de.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):R?he&&t.texSubImage2D(s.TEXTURE_2D,ee,0,0,de.width,de.height,ue,Re,de.data):t.texImage2D(s.TEXTURE_2D,ee,Pe,de.width,de.height,0,ue,Re,de.data)}else if(z.isDataArrayTexture)if(R){if(ae&&t.texStorage3D(s.TEXTURE_2D_ARRAY,ve,Pe,se.width,se.height,se.depth),he)if(z.layerUpdates.size>0){const ee=Sf(se.width,se.height,z.format,z.type);for(const Y of z.layerUpdates){const me=se.data.subarray(Y*ee/se.data.BYTES_PER_ELEMENT,(Y+1)*ee/se.data.BYTES_PER_ELEMENT);t.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,Y,se.width,se.height,1,ue,Re,me)}z.clearLayerUpdates()}else t.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,0,se.width,se.height,se.depth,ue,Re,se.data)}else t.texImage3D(s.TEXTURE_2D_ARRAY,0,Pe,se.width,se.height,se.depth,0,ue,Re,se.data);else if(z.isData3DTexture)R?(ae&&t.texStorage3D(s.TEXTURE_3D,ve,Pe,se.width,se.height,se.depth),he&&t.texSubImage3D(s.TEXTURE_3D,0,0,0,0,se.width,se.height,se.depth,ue,Re,se.data)):t.texImage3D(s.TEXTURE_3D,0,Pe,se.width,se.height,se.depth,0,ue,Re,se.data);else if(z.isFramebufferTexture){if(ae)if(R)t.texStorage2D(s.TEXTURE_2D,ve,Pe,se.width,se.height);else{let ee=se.width,Y=se.height;for(let me=0;me<ve;me++)t.texImage2D(s.TEXTURE_2D,me,Pe,ee,Y,0,ue,Re,null),ee>>=1,Y>>=1}}else if(We.length>0){if(R&&ae){const ee=Zt(We[0]);t.texStorage2D(s.TEXTURE_2D,ve,Pe,ee.width,ee.height)}for(let ee=0,Y=We.length;ee<Y;ee++)de=We[ee],R?he&&t.texSubImage2D(s.TEXTURE_2D,ee,0,0,ue,Re,de):t.texImage2D(s.TEXTURE_2D,ee,Pe,ue,Re,de);z.generateMipmaps=!1}else if(R){if(ae){const ee=Zt(se);t.texStorage2D(s.TEXTURE_2D,ve,Pe,ee.width,ee.height)}he&&t.texSubImage2D(s.TEXTURE_2D,0,0,0,ue,Re,se)}else t.texImage2D(s.TEXTURE_2D,0,Pe,ue,Re,se);v(z)&&f(K),be.__version=J.version,z.onUpdate&&z.onUpdate(z)}C.__version=z.version}function le(C,z,B){if(z.image.length!==6)return;const K=Je(C,z),Q=z.source;t.bindTexture(s.TEXTURE_CUBE_MAP,C.__webglTexture,s.TEXTURE0+B);const J=i.get(Q);if(Q.version!==J.__version||K===!0){t.activeTexture(s.TEXTURE0+B);const be=Qe.getPrimaries(Qe.workingColorSpace),oe=z.colorSpace===Ms?null:Qe.getPrimaries(z.colorSpace),ye=z.colorSpace===Ms||be===oe?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,z.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,z.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,ye);const ze=z.isCompressedTexture||z.image[0].isCompressedTexture,se=z.image[0]&&z.image[0].isDataTexture,ue=[];for(let Y=0;Y<6;Y++)!ze&&!se?ue[Y]=g(z.image[Y],!0,a.maxCubemapSize):ue[Y]=se?z.image[Y].image:z.image[Y],ue[Y]=li(z,ue[Y]);const Re=ue[0],Pe=r.convert(z.format,z.colorSpace),de=r.convert(z.type),We=w(z.internalFormat,Pe,de,z.colorSpace),R=z.isVideoTexture!==!0,ae=J.__version===void 0||K===!0,he=Q.dataReady;let ve=b(z,Re);we(s.TEXTURE_CUBE_MAP,z);let ee;if(ze){R&&ae&&t.texStorage2D(s.TEXTURE_CUBE_MAP,ve,We,Re.width,Re.height);for(let Y=0;Y<6;Y++){ee=ue[Y].mipmaps;for(let me=0;me<ee.length;me++){const ke=ee[me];z.format!==At?Pe!==null?R?he&&t.compressedTexSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Y,me,0,0,ke.width,ke.height,Pe,ke.data):t.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Y,me,We,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):R?he&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Y,me,0,0,ke.width,ke.height,Pe,de,ke.data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Y,me,We,ke.width,ke.height,0,Pe,de,ke.data)}}}else{if(ee=z.mipmaps,R&&ae){ee.length>0&&ve++;const Y=Zt(ue[0]);t.texStorage2D(s.TEXTURE_CUBE_MAP,ve,We,Y.width,Y.height)}for(let Y=0;Y<6;Y++)if(se){R?he&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Y,0,0,0,ue[Y].width,ue[Y].height,Pe,de,ue[Y].data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Y,0,We,ue[Y].width,ue[Y].height,0,Pe,de,ue[Y].data);for(let me=0;me<ee.length;me++){const Tt=ee[me].image[Y].image;R?he&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Y,me+1,0,0,Tt.width,Tt.height,Pe,de,Tt.data):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Y,me+1,We,Tt.width,Tt.height,0,Pe,de,Tt.data)}}else{R?he&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Y,0,0,0,Pe,de,ue[Y]):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Y,0,We,Pe,de,ue[Y]);for(let me=0;me<ee.length;me++){const ke=ee[me];R?he&&t.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Y,me+1,0,0,Pe,de,ke.image[Y]):t.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Y,me+1,We,Pe,de,ke.image[Y])}}}v(z)&&f(s.TEXTURE_CUBE_MAP),J.__version=Q.version,z.onUpdate&&z.onUpdate(z)}C.__version=z.version}function Me(C,z,B,K,Q,J){const be=r.convert(B.format,B.colorSpace),oe=r.convert(B.type),ye=w(B.internalFormat,be,oe,B.colorSpace),ze=i.get(z),se=i.get(B);if(se.__renderTarget=z,!ze.__hasExternalTextures){const ue=Math.max(1,z.width>>J),Re=Math.max(1,z.height>>J);Q===s.TEXTURE_3D||Q===s.TEXTURE_2D_ARRAY?t.texImage3D(Q,J,ye,ue,Re,z.depth,0,be,oe,null):t.texImage2D(Q,J,ye,ue,Re,0,be,oe,null)}t.bindFramebuffer(s.FRAMEBUFFER,C),ge(z)?o.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,K,Q,se.__webglTexture,0,Dt(z)):(Q===s.TEXTURE_2D||Q>=s.TEXTURE_CUBE_MAP_POSITIVE_X&&Q<=s.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&s.framebufferTexture2D(s.FRAMEBUFFER,K,Q,se.__webglTexture,J),t.bindFramebuffer(s.FRAMEBUFFER,null)}function Ie(C,z,B){if(s.bindRenderbuffer(s.RENDERBUFFER,C),z.depthBuffer){const K=z.depthTexture,Q=K&&K.isDepthTexture?K.type:null,J=p(z.stencilBuffer,Q),be=z.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,oe=Dt(z);ge(z)?o.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,oe,J,z.width,z.height):B?s.renderbufferStorageMultisample(s.RENDERBUFFER,oe,J,z.width,z.height):s.renderbufferStorage(s.RENDERBUFFER,J,z.width,z.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,be,s.RENDERBUFFER,C)}else{const K=z.textures;for(let Q=0;Q<K.length;Q++){const J=K[Q],be=r.convert(J.format,J.colorSpace),oe=r.convert(J.type),ye=w(J.internalFormat,be,oe,J.colorSpace),ze=Dt(z);B&&ge(z)===!1?s.renderbufferStorageMultisample(s.RENDERBUFFER,ze,ye,z.width,z.height):ge(z)?o.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,ze,ye,z.width,z.height):s.renderbufferStorage(s.RENDERBUFFER,ye,z.width,z.height)}}s.bindRenderbuffer(s.RENDERBUFFER,null)}function Fe(C,z){if(z&&z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(s.FRAMEBUFFER,C),!(z.depthTexture&&z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const K=i.get(z.depthTexture);K.__renderTarget=z,(!K.__webglTexture||z.depthTexture.image.width!==z.width||z.depthTexture.image.height!==z.height)&&(z.depthTexture.image.width=z.width,z.depthTexture.image.height=z.height,z.depthTexture.needsUpdate=!0),W(z.depthTexture,0);const Q=K.__webglTexture,J=Dt(z);if(z.depthTexture.format===go)ge(z)?o.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Q,0,J):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,Q,0);else if(z.depthTexture.format===un)ge(z)?o.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Q,0,J):s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.TEXTURE_2D,Q,0);else throw new Error("Unknown depthTexture format")}function jt(C){const z=i.get(C),B=C.isWebGLCubeRenderTarget===!0;if(z.__boundDepthTexture!==C.depthTexture){const K=C.depthTexture;if(z.__depthDisposeCallback&&z.__depthDisposeCallback(),K){const Q=()=>{delete z.__boundDepthTexture,delete z.__depthDisposeCallback,K.removeEventListener("dispose",Q)};K.addEventListener("dispose",Q),z.__depthDisposeCallback=Q}z.__boundDepthTexture=K}if(C.depthTexture&&!z.__autoAllocateDepthBuffer){if(B)throw new Error("target.depthTexture not supported in Cube render targets");const K=C.texture.mipmaps;K&&K.length>0?Fe(z.__webglFramebuffer[0],C):Fe(z.__webglFramebuffer,C)}else if(B){z.__webglDepthbuffer=[];for(let K=0;K<6;K++)if(t.bindFramebuffer(s.FRAMEBUFFER,z.__webglFramebuffer[K]),z.__webglDepthbuffer[K]===void 0)z.__webglDepthbuffer[K]=s.createRenderbuffer(),Ie(z.__webglDepthbuffer[K],C,!1);else{const Q=C.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,J=z.__webglDepthbuffer[K];s.bindRenderbuffer(s.RENDERBUFFER,J),s.framebufferRenderbuffer(s.FRAMEBUFFER,Q,s.RENDERBUFFER,J)}}else{const K=C.texture.mipmaps;if(K&&K.length>0?t.bindFramebuffer(s.FRAMEBUFFER,z.__webglFramebuffer[0]):t.bindFramebuffer(s.FRAMEBUFFER,z.__webglFramebuffer),z.__webglDepthbuffer===void 0)z.__webglDepthbuffer=s.createRenderbuffer(),Ie(z.__webglDepthbuffer,C,!1);else{const Q=C.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,J=z.__webglDepthbuffer;s.bindRenderbuffer(s.RENDERBUFFER,J),s.framebufferRenderbuffer(s.FRAMEBUFFER,Q,s.RENDERBUFFER,J)}}t.bindFramebuffer(s.FRAMEBUFFER,null)}function tt(C,z,B){const K=i.get(C);z!==void 0&&Me(K.__webglFramebuffer,C,C.texture,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,0),B!==void 0&&jt(C)}function D(C){const z=C.texture,B=i.get(C),K=i.get(z);C.addEventListener("dispose",E);const Q=C.textures,J=C.isWebGLCubeRenderTarget===!0,be=Q.length>1;if(be||(K.__webglTexture===void 0&&(K.__webglTexture=s.createTexture()),K.__version=z.version,n.memory.textures++),J){B.__webglFramebuffer=[];for(let oe=0;oe<6;oe++)if(z.mipmaps&&z.mipmaps.length>0){B.__webglFramebuffer[oe]=[];for(let ye=0;ye<z.mipmaps.length;ye++)B.__webglFramebuffer[oe][ye]=s.createFramebuffer()}else B.__webglFramebuffer[oe]=s.createFramebuffer()}else{if(z.mipmaps&&z.mipmaps.length>0){B.__webglFramebuffer=[];for(let oe=0;oe<z.mipmaps.length;oe++)B.__webglFramebuffer[oe]=s.createFramebuffer()}else B.__webglFramebuffer=s.createFramebuffer();if(be)for(let oe=0,ye=Q.length;oe<ye;oe++){const ze=i.get(Q[oe]);ze.__webglTexture===void 0&&(ze.__webglTexture=s.createTexture(),n.memory.textures++)}if(C.samples>0&&ge(C)===!1){B.__webglMultisampledFramebuffer=s.createFramebuffer(),B.__webglColorRenderbuffer=[],t.bindFramebuffer(s.FRAMEBUFFER,B.__webglMultisampledFramebuffer);for(let oe=0;oe<Q.length;oe++){const ye=Q[oe];B.__webglColorRenderbuffer[oe]=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,B.__webglColorRenderbuffer[oe]);const ze=r.convert(ye.format,ye.colorSpace),se=r.convert(ye.type),ue=w(ye.internalFormat,ze,se,ye.colorSpace,C.isXRRenderTarget===!0),Re=Dt(C);s.renderbufferStorageMultisample(s.RENDERBUFFER,Re,ue,C.width,C.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+oe,s.RENDERBUFFER,B.__webglColorRenderbuffer[oe])}s.bindRenderbuffer(s.RENDERBUFFER,null),C.depthBuffer&&(B.__webglDepthRenderbuffer=s.createRenderbuffer(),Ie(B.__webglDepthRenderbuffer,C,!0)),t.bindFramebuffer(s.FRAMEBUFFER,null)}}if(J){t.bindTexture(s.TEXTURE_CUBE_MAP,K.__webglTexture),we(s.TEXTURE_CUBE_MAP,z);for(let oe=0;oe<6;oe++)if(z.mipmaps&&z.mipmaps.length>0)for(let ye=0;ye<z.mipmaps.length;ye++)Me(B.__webglFramebuffer[oe][ye],C,z,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+oe,ye);else Me(B.__webglFramebuffer[oe],C,z,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0);v(z)&&f(s.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(be){for(let oe=0,ye=Q.length;oe<ye;oe++){const ze=Q[oe],se=i.get(ze);let ue=s.TEXTURE_2D;(C.isWebGL3DRenderTarget||C.isWebGLArrayRenderTarget)&&(ue=C.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY),t.bindTexture(ue,se.__webglTexture),we(ue,ze),Me(B.__webglFramebuffer,C,ze,s.COLOR_ATTACHMENT0+oe,ue,0),v(ze)&&f(ue)}t.unbindTexture()}else{let oe=s.TEXTURE_2D;if((C.isWebGL3DRenderTarget||C.isWebGLArrayRenderTarget)&&(oe=C.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY),t.bindTexture(oe,K.__webglTexture),we(oe,z),z.mipmaps&&z.mipmaps.length>0)for(let ye=0;ye<z.mipmaps.length;ye++)Me(B.__webglFramebuffer[ye],C,z,s.COLOR_ATTACHMENT0,oe,ye);else Me(B.__webglFramebuffer,C,z,s.COLOR_ATTACHMENT0,oe,0);v(z)&&f(oe),t.unbindTexture()}C.depthBuffer&&jt(C)}function bt(C){const z=C.textures;for(let B=0,K=z.length;B<K;B++){const Q=z[B];if(v(Q)){const J=y(C),be=i.get(Q).__webglTexture;t.bindTexture(J,be),f(J),t.unbindTexture()}}}const Ee=[],ht=[];function Te(C){if(C.samples>0){if(ge(C)===!1){const z=C.textures,B=C.width,K=C.height;let Q=s.COLOR_BUFFER_BIT;const J=C.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,be=i.get(C),oe=z.length>1;if(oe)for(let ze=0;ze<z.length;ze++)t.bindFramebuffer(s.FRAMEBUFFER,be.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+ze,s.RENDERBUFFER,null),t.bindFramebuffer(s.FRAMEBUFFER,be.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+ze,s.TEXTURE_2D,null,0);t.bindFramebuffer(s.READ_FRAMEBUFFER,be.__webglMultisampledFramebuffer);const ye=C.texture.mipmaps;ye&&ye.length>0?t.bindFramebuffer(s.DRAW_FRAMEBUFFER,be.__webglFramebuffer[0]):t.bindFramebuffer(s.DRAW_FRAMEBUFFER,be.__webglFramebuffer);for(let ze=0;ze<z.length;ze++){if(C.resolveDepthBuffer&&(C.depthBuffer&&(Q|=s.DEPTH_BUFFER_BIT),C.stencilBuffer&&C.resolveStencilBuffer&&(Q|=s.STENCIL_BUFFER_BIT)),oe){s.framebufferRenderbuffer(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,be.__webglColorRenderbuffer[ze]);const se=i.get(z[ze]).__webglTexture;s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,se,0)}s.blitFramebuffer(0,0,B,K,0,0,B,K,Q,s.NEAREST),l===!0&&(Ee.length=0,ht.length=0,Ee.push(s.COLOR_ATTACHMENT0+ze),C.depthBuffer&&C.resolveDepthBuffer===!1&&(Ee.push(J),ht.push(J),s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,ht)),s.invalidateFramebuffer(s.READ_FRAMEBUFFER,Ee))}if(t.bindFramebuffer(s.READ_FRAMEBUFFER,null),t.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),oe)for(let ze=0;ze<z.length;ze++){t.bindFramebuffer(s.FRAMEBUFFER,be.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+ze,s.RENDERBUFFER,be.__webglColorRenderbuffer[ze]);const se=i.get(z[ze]).__webglTexture;t.bindFramebuffer(s.FRAMEBUFFER,be.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+ze,s.TEXTURE_2D,se,0)}t.bindFramebuffer(s.DRAW_FRAMEBUFFER,be.__webglMultisampledFramebuffer)}else if(C.depthBuffer&&C.resolveDepthBuffer===!1&&l){const z=C.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT;s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,[z])}}}function Dt(C){return Math.min(a.maxSamples,C.samples)}function ge(C){const z=i.get(C);return C.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&z.__useRenderToTexture!==!1}function Xe(C){const z=n.render.frame;c.get(C)!==z&&(c.set(C,z),C.update())}function li(C,z){const B=C.colorSpace,K=C.format,Q=C.type;return C.isCompressedTexture===!0||C.isVideoTexture===!0||B!==Ot&&B!==Ms&&(Qe.getTransfer(B)===pt?(K!==At||Q!==$t)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",B)),z}function Zt(C){return typeof HTMLImageElement<"u"&&C instanceof HTMLImageElement?(h.width=C.naturalWidth||C.width,h.height=C.naturalHeight||C.height):typeof VideoFrame<"u"&&C instanceof VideoFrame?(h.width=C.displayWidth,h.height=C.displayHeight):(h.width=C.width,h.height=C.height),h}this.allocateTextureUnit=N,this.resetTextureUnits=U,this.setTexture2D=W,this.setTexture2DArray=V,this.setTexture3D=j,this.setTextureCube=G,this.rebindTextures=tt,this.setupRenderTarget=D,this.updateRenderTargetMipmap=bt,this.updateMultisampleRenderTarget=Te,this.setupDepthRenderbuffer=jt,this.setupFrameBufferTexture=Me,this.useMultisampledRTT=ge}function SP(s,e){function t(i,a=Ms){let r;const n=Qe.getTransfer(a);if(i===$t)return s.UNSIGNED_BYTE;if(i===s_)return s.UNSIGNED_SHORT_4_4_4_4;if(i===a_)return s.UNSIGNED_SHORT_5_5_5_1;if(i===m0)return s.UNSIGNED_INT_5_9_9_9_REV;if(i===x0)return s.BYTE;if(i===p0)return s.SHORT;if(i===vo)return s.UNSIGNED_SHORT;if(i===i_)return s.INT;if(i===Na)return s.UNSIGNED_INT;if(i===Et)return s.FLOAT;if(i===ns)return s.HALF_FLOAT;if(i===y0)return s.ALPHA;if(i===w0)return s.RGB;if(i===At)return s.RGBA;if(i===go)return s.DEPTH_COMPONENT;if(i===un)return s.DEPTH_STENCIL;if(i===r_)return s.RED;if(i===n_)return s.RED_INTEGER;if(i===z0)return s.RG;if(i===o_)return s.RG_INTEGER;if(i===l_)return s.RGBA_INTEGER;if(i===Ll||i===Fl||i===kl||i===Vl)if(n===pt)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===Ll)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Fl)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===kl)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Vl)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===Ll)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Fl)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===kl)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Vl)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===$c||i===ed||i===td||i===id)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===$c)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===ed)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===td)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===id)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===sd||i===ad||i===rd)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(i===sd||i===ad)return n===pt?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===rd)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===nd||i===od||i===ld||i===hd||i===cd||i===dd||i===_d||i===ud||i===fd||i===vd||i===gd||i===xd||i===pd||i===md)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(i===nd)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===od)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===ld)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===hd)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===cd)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===dd)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===_d)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===ud)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===fd)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===vd)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===gd)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===xd)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===pd)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===md)return n===pt?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Ul||i===yd||i===wd)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(i===Ul)return n===pt?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===yd)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===wd)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===P0||i===zd||i===Pd||i===bd)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(i===Ul)return r.COMPRESSED_RED_RGTC1_EXT;if(i===zd)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Pd)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===bd)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===_n?s.UNSIGNED_INT_24_8:s[i]!==void 0?s[i]:null}return{convert:t}}class Y0 extends Ct{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}}const EP=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,AP=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class MP{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new Y0(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Le({vertexShader:EP,fragmentShader:AP,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ne(new Vs(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class IP extends ks{constructor(e,t){super();const i=this;let a=null,r=1,n=null,o="local-floor",l=1,h=null,c=null,d=null,_=null,u=null,x=null;const g=new MP,v={},f=t.getContextAttributes();let y=null,w=null;const p=[],b=[],M=new $;let E=null;const A=new xi;A.viewport=new et;const m=new xi;m.viewport=new et;const P=[A,m],I=new O1;let U=null,N=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let ce=p[Z];return ce===void 0&&(ce=new Qh,p[Z]=ce),ce.getTargetRaySpace()},this.getControllerGrip=function(Z){let ce=p[Z];return ce===void 0&&(ce=new Qh,p[Z]=ce),ce.getGripSpace()},this.getHand=function(Z){let ce=p[Z];return ce===void 0&&(ce=new Qh,p[Z]=ce),ce.getHandSpace()};function F(Z){const ce=b.indexOf(Z.inputSource);if(ce===-1)return;const le=p[ce];le!==void 0&&(le.update(Z.inputSource,Z.frame,h||n),le.dispatchEvent({type:Z.type,data:Z.inputSource}))}function W(){a.removeEventListener("select",F),a.removeEventListener("selectstart",F),a.removeEventListener("selectend",F),a.removeEventListener("squeeze",F),a.removeEventListener("squeezestart",F),a.removeEventListener("squeezeend",F),a.removeEventListener("end",W),a.removeEventListener("inputsourceschange",V);for(let Z=0;Z<p.length;Z++){const ce=b[Z];ce!==null&&(b[Z]=null,p[Z].disconnect(ce))}U=null,N=null,g.reset();for(const Z in v)delete v[Z];e.setRenderTarget(y),u=null,_=null,d=null,a=null,w=null,qe.stop(),i.isPresenting=!1,e.setPixelRatio(E),e.setSize(M.width,M.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){r=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){o=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||n},this.setReferenceSpace=function(Z){h=Z},this.getBaseLayer=function(){return _!==null?_:u},this.getBinding=function(){return d},this.getFrame=function(){return x},this.getSession=function(){return a},this.setSession=async function(Z){if(a=Z,a!==null){if(y=e.getRenderTarget(),a.addEventListener("select",F),a.addEventListener("selectstart",F),a.addEventListener("selectend",F),a.addEventListener("squeeze",F),a.addEventListener("squeezestart",F),a.addEventListener("squeezeend",F),a.addEventListener("end",W),a.addEventListener("inputsourceschange",V),f.xrCompatible!==!0&&await t.makeXRCompatible(),E=e.getPixelRatio(),e.getSize(M),typeof XRWebGLBinding<"u"&&(d=new XRWebGLBinding(a,t)),d!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let le=null,Me=null,Ie=null;f.depth&&(Ie=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,le=f.stencil?un:go,Me=f.stencil?_n:Na);const Fe={colorFormat:t.RGBA8,depthFormat:Ie,scaleFactor:r};_=d.createProjectionLayer(Fe),a.updateRenderState({layers:[_]}),e.setPixelRatio(1),e.setSize(_.textureWidth,_.textureHeight,!1),w=new gt(_.textureWidth,_.textureHeight,{format:At,type:$t,depthTexture:new x_(_.textureWidth,_.textureHeight,Me,void 0,void 0,void 0,void 0,void 0,void 0,le),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}else{const le={antialias:f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:r};u=new XRWebGLLayer(a,t,le),a.updateRenderState({baseLayer:u}),e.setPixelRatio(1),e.setSize(u.framebufferWidth,u.framebufferHeight,!1),w=new gt(u.framebufferWidth,u.framebufferHeight,{format:At,type:$t,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil,resolveDepthBuffer:u.ignoreDepthValues===!1,resolveStencilBuffer:u.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(l),h=null,n=await a.requestReferenceSpace(o),qe.setContext(a),qe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function V(Z){for(let ce=0;ce<Z.removed.length;ce++){const le=Z.removed[ce],Me=b.indexOf(le);Me>=0&&(b[Me]=null,p[Me].disconnect(le))}for(let ce=0;ce<Z.added.length;ce++){const le=Z.added[ce];let Me=b.indexOf(le);if(Me===-1){for(let Fe=0;Fe<p.length;Fe++)if(Fe>=b.length){b.push(le),Me=Fe;break}else if(b[Fe]===null){b[Fe]=le,Me=Fe;break}if(Me===-1)break}const Ie=p[Me];Ie&&Ie.connect(le)}}const j=new S,G=new S;function re(Z,ce,le){j.setFromMatrixPosition(ce.matrixWorld),G.setFromMatrixPosition(le.matrixWorld);const Me=j.distanceTo(G),Ie=ce.projectionMatrix.elements,Fe=le.projectionMatrix.elements,jt=Ie[14]/(Ie[10]-1),tt=Ie[14]/(Ie[10]+1),D=(Ie[9]+1)/Ie[5],bt=(Ie[9]-1)/Ie[5],Ee=(Ie[8]-1)/Ie[0],ht=(Fe[8]+1)/Fe[0],Te=jt*Ee,Dt=jt*ht,ge=Me/(-Ee+ht),Xe=ge*-Ee;if(ce.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(Xe),Z.translateZ(ge),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert(),Ie[10]===-1)Z.projectionMatrix.copy(ce.projectionMatrix),Z.projectionMatrixInverse.copy(ce.projectionMatrixInverse);else{const li=jt+ge,Zt=tt+ge,C=Te-Xe,z=Dt+(Me-Xe),B=D*tt/Zt*li,K=bt*tt/Zt*li;Z.projectionMatrix.makePerspective(C,z,B,K,li,Zt),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert()}}function ne(Z,ce){ce===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(ce.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(a===null)return;let ce=Z.near,le=Z.far;g.texture!==null&&(g.depthNear>0&&(ce=g.depthNear),g.depthFar>0&&(le=g.depthFar)),I.near=m.near=A.near=ce,I.far=m.far=A.far=le,(U!==I.near||N!==I.far)&&(a.updateRenderState({depthNear:I.near,depthFar:I.far}),U=I.near,N=I.far),I.layers.mask=Z.layers.mask|6,A.layers.mask=I.layers.mask&3,m.layers.mask=I.layers.mask&5;const Me=Z.parent,Ie=I.cameras;ne(I,Me);for(let Fe=0;Fe<Ie.length;Fe++)ne(Ie[Fe],Me);Ie.length===2?re(I,A,m):I.projectionMatrix.copy(A.projectionMatrix),xe(Z,I,Me)};function xe(Z,ce,le){le===null?Z.matrix.copy(ce.matrixWorld):(Z.matrix.copy(le.matrixWorld),Z.matrix.invert(),Z.matrix.multiply(ce.matrixWorld)),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.updateMatrixWorld(!0),Z.projectionMatrix.copy(ce.projectionMatrix),Z.projectionMatrixInverse.copy(ce.projectionMatrixInverse),Z.isPerspectiveCamera&&(Z.fov=fn*2*Math.atan(1/Z.projectionMatrix.elements[5]),Z.zoom=1)}this.getCamera=function(){return I},this.getFoveation=function(){if(!(_===null&&u===null))return l},this.setFoveation=function(Z){l=Z,_!==null&&(_.fixedFoveation=Z),u!==null&&u.fixedFoveation!==void 0&&(u.fixedFoveation=Z)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(I)},this.getCameraTexture=function(Z){return v[Z]};let we=null;function Je(Z,ce){if(c=ce.getViewerPose(h||n),x=ce,c!==null){const le=c.views;u!==null&&(e.setRenderTargetFramebuffer(w,u.framebuffer),e.setRenderTarget(w));let Me=!1;le.length!==I.cameras.length&&(I.cameras.length=0,Me=!0);for(let tt=0;tt<le.length;tt++){const D=le[tt];let bt=null;if(u!==null)bt=u.getViewport(D);else{const ht=d.getViewSubImage(_,D);bt=ht.viewport,tt===0&&(e.setRenderTargetTextures(w,ht.colorTexture,ht.depthStencilTexture),e.setRenderTarget(w))}let Ee=P[tt];Ee===void 0&&(Ee=new xi,Ee.layers.enable(tt),Ee.viewport=new et,P[tt]=Ee),Ee.matrix.fromArray(D.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(D.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(bt.x,bt.y,bt.width,bt.height),tt===0&&(I.matrix.copy(Ee.matrix),I.matrix.decompose(I.position,I.quaternion,I.scale)),Me===!0&&I.cameras.push(Ee)}const Ie=a.enabledFeatures;if(Ie&&Ie.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&d){const tt=d.getDepthInformation(le[0]);tt&&tt.isValid&&tt.texture&&g.init(tt,a.renderState)}if(Ie&&Ie.includes("camera-access")&&(e.state.unbindTexture(),d))for(let tt=0;tt<le.length;tt++){const D=le[tt].camera;if(D){let bt=v[D];bt||(bt=new Y0,v[D]=bt);const Ee=d.getCameraImage(D);bt.sourceTexture=Ee}}}for(let le=0;le<p.length;le++){const Me=b[le],Ie=p[le];Me!==null&&Ie!==void 0&&Ie.update(Me,ce,h||n)}we&&we(Z,ce),ce.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ce}),x=null}const qe=new X0;qe.setAnimationLoop(Je),this.setAnimationLoop=function(Z){we=Z},this.dispose=function(){}}}const er=new Ps,CP=new De;function DP(s,e){function t(v,f){v.matrixAutoUpdate===!0&&v.updateMatrix(),f.value.copy(v.matrix)}function i(v,f){f.color.getRGB(v.fogColor.value,C0(s)),f.isFog?(v.fogNear.value=f.near,v.fogFar.value=f.far):f.isFogExp2&&(v.fogDensity.value=f.density)}function a(v,f,y,w,p){f.isMeshBasicMaterial||f.isMeshLambertMaterial?r(v,f):f.isMeshToonMaterial?(r(v,f),d(v,f)):f.isMeshPhongMaterial?(r(v,f),c(v,f)):f.isMeshStandardMaterial?(r(v,f),_(v,f),f.isMeshPhysicalMaterial&&u(v,f,p)):f.isMeshMatcapMaterial?(r(v,f),x(v,f)):f.isMeshDepthMaterial?r(v,f):f.isMeshDistanceMaterial?(r(v,f),g(v,f)):f.isMeshNormalMaterial?r(v,f):f.isLineBasicMaterial?(n(v,f),f.isLineDashedMaterial&&o(v,f)):f.isPointsMaterial?l(v,f,y,w):f.isSpriteMaterial?h(v,f):f.isShadowMaterial?(v.color.value.copy(f.color),v.opacity.value=f.opacity):f.isShaderMaterial&&(f.uniformsNeedUpdate=!1)}function r(v,f){v.opacity.value=f.opacity,f.color&&v.diffuse.value.copy(f.color),f.emissive&&v.emissive.value.copy(f.emissive).multiplyScalar(f.emissiveIntensity),f.map&&(v.map.value=f.map,t(f.map,v.mapTransform)),f.alphaMap&&(v.alphaMap.value=f.alphaMap,t(f.alphaMap,v.alphaMapTransform)),f.bumpMap&&(v.bumpMap.value=f.bumpMap,t(f.bumpMap,v.bumpMapTransform),v.bumpScale.value=f.bumpScale,f.side===ai&&(v.bumpScale.value*=-1)),f.normalMap&&(v.normalMap.value=f.normalMap,t(f.normalMap,v.normalMapTransform),v.normalScale.value.copy(f.normalScale),f.side===ai&&v.normalScale.value.negate()),f.displacementMap&&(v.displacementMap.value=f.displacementMap,t(f.displacementMap,v.displacementMapTransform),v.displacementScale.value=f.displacementScale,v.displacementBias.value=f.displacementBias),f.emissiveMap&&(v.emissiveMap.value=f.emissiveMap,t(f.emissiveMap,v.emissiveMapTransform)),f.specularMap&&(v.specularMap.value=f.specularMap,t(f.specularMap,v.specularMapTransform)),f.alphaTest>0&&(v.alphaTest.value=f.alphaTest);const y=e.get(f),w=y.envMap,p=y.envMapRotation;w&&(v.envMap.value=w,er.copy(p),er.x*=-1,er.y*=-1,er.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(er.y*=-1,er.z*=-1),v.envMapRotation.value.setFromMatrix4(CP.makeRotationFromEuler(er)),v.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=f.reflectivity,v.ior.value=f.ior,v.refractionRatio.value=f.refractionRatio),f.lightMap&&(v.lightMap.value=f.lightMap,v.lightMapIntensity.value=f.lightMapIntensity,t(f.lightMap,v.lightMapTransform)),f.aoMap&&(v.aoMap.value=f.aoMap,v.aoMapIntensity.value=f.aoMapIntensity,t(f.aoMap,v.aoMapTransform))}function n(v,f){v.diffuse.value.copy(f.color),v.opacity.value=f.opacity,f.map&&(v.map.value=f.map,t(f.map,v.mapTransform))}function o(v,f){v.dashSize.value=f.dashSize,v.totalSize.value=f.dashSize+f.gapSize,v.scale.value=f.scale}function l(v,f,y,w){v.diffuse.value.copy(f.color),v.opacity.value=f.opacity,v.size.value=f.size*y,v.scale.value=w*.5,f.map&&(v.map.value=f.map,t(f.map,v.uvTransform)),f.alphaMap&&(v.alphaMap.value=f.alphaMap,t(f.alphaMap,v.alphaMapTransform)),f.alphaTest>0&&(v.alphaTest.value=f.alphaTest)}function h(v,f){v.diffuse.value.copy(f.color),v.opacity.value=f.opacity,v.rotation.value=f.rotation,f.map&&(v.map.value=f.map,t(f.map,v.mapTransform)),f.alphaMap&&(v.alphaMap.value=f.alphaMap,t(f.alphaMap,v.alphaMapTransform)),f.alphaTest>0&&(v.alphaTest.value=f.alphaTest)}function c(v,f){v.specular.value.copy(f.specular),v.shininess.value=Math.max(f.shininess,1e-4)}function d(v,f){f.gradientMap&&(v.gradientMap.value=f.gradientMap)}function _(v,f){v.metalness.value=f.metalness,f.metalnessMap&&(v.metalnessMap.value=f.metalnessMap,t(f.metalnessMap,v.metalnessMapTransform)),v.roughness.value=f.roughness,f.roughnessMap&&(v.roughnessMap.value=f.roughnessMap,t(f.roughnessMap,v.roughnessMapTransform)),f.envMap&&(v.envMapIntensity.value=f.envMapIntensity)}function u(v,f,y){v.ior.value=f.ior,f.sheen>0&&(v.sheenColor.value.copy(f.sheenColor).multiplyScalar(f.sheen),v.sheenRoughness.value=f.sheenRoughness,f.sheenColorMap&&(v.sheenColorMap.value=f.sheenColorMap,t(f.sheenColorMap,v.sheenColorMapTransform)),f.sheenRoughnessMap&&(v.sheenRoughnessMap.value=f.sheenRoughnessMap,t(f.sheenRoughnessMap,v.sheenRoughnessMapTransform))),f.clearcoat>0&&(v.clearcoat.value=f.clearcoat,v.clearcoatRoughness.value=f.clearcoatRoughness,f.clearcoatMap&&(v.clearcoatMap.value=f.clearcoatMap,t(f.clearcoatMap,v.clearcoatMapTransform)),f.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=f.clearcoatRoughnessMap,t(f.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),f.clearcoatNormalMap&&(v.clearcoatNormalMap.value=f.clearcoatNormalMap,t(f.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(f.clearcoatNormalScale),f.side===ai&&v.clearcoatNormalScale.value.negate())),f.dispersion>0&&(v.dispersion.value=f.dispersion),f.iridescence>0&&(v.iridescence.value=f.iridescence,v.iridescenceIOR.value=f.iridescenceIOR,v.iridescenceThicknessMinimum.value=f.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=f.iridescenceThicknessRange[1],f.iridescenceMap&&(v.iridescenceMap.value=f.iridescenceMap,t(f.iridescenceMap,v.iridescenceMapTransform)),f.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=f.iridescenceThicknessMap,t(f.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),f.transmission>0&&(v.transmission.value=f.transmission,v.transmissionSamplerMap.value=y.texture,v.transmissionSamplerSize.value.set(y.width,y.height),f.transmissionMap&&(v.transmissionMap.value=f.transmissionMap,t(f.transmissionMap,v.transmissionMapTransform)),v.thickness.value=f.thickness,f.thicknessMap&&(v.thicknessMap.value=f.thicknessMap,t(f.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=f.attenuationDistance,v.attenuationColor.value.copy(f.attenuationColor)),f.anisotropy>0&&(v.anisotropyVector.value.set(f.anisotropy*Math.cos(f.anisotropyRotation),f.anisotropy*Math.sin(f.anisotropyRotation)),f.anisotropyMap&&(v.anisotropyMap.value=f.anisotropyMap,t(f.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=f.specularIntensity,v.specularColor.value.copy(f.specularColor),f.specularColorMap&&(v.specularColorMap.value=f.specularColorMap,t(f.specularColorMap,v.specularColorMapTransform)),f.specularIntensityMap&&(v.specularIntensityMap.value=f.specularIntensityMap,t(f.specularIntensityMap,v.specularIntensityMapTransform))}function x(v,f){f.matcap&&(v.matcap.value=f.matcap)}function g(v,f){const y=e.get(f).light;v.referencePosition.value.setFromMatrixPosition(y.matrixWorld),v.nearDistance.value=y.shadow.camera.near,v.farDistance.value=y.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:a}}function RP(s,e,t,i){let a={},r={},n=[];const o=s.getParameter(s.MAX_UNIFORM_BUFFER_BINDINGS);function l(y,w){const p=w.program;i.uniformBlockBinding(y,p)}function h(y,w){let p=a[y.id];p===void 0&&(x(y),p=c(y),a[y.id]=p,y.addEventListener("dispose",v));const b=w.program;i.updateUBOMapping(y,b);const M=e.render.frame;r[y.id]!==M&&(_(y),r[y.id]=M)}function c(y){const w=d();y.__bindingPointIndex=w;const p=s.createBuffer(),b=y.__size,M=y.usage;return s.bindBuffer(s.UNIFORM_BUFFER,p),s.bufferData(s.UNIFORM_BUFFER,b,M),s.bindBuffer(s.UNIFORM_BUFFER,null),s.bindBufferBase(s.UNIFORM_BUFFER,w,p),p}function d(){for(let y=0;y<o;y++)if(n.indexOf(y)===-1)return n.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(y){const w=a[y.id],p=y.uniforms,b=y.__cache;s.bindBuffer(s.UNIFORM_BUFFER,w);for(let M=0,E=p.length;M<E;M++){const A=Array.isArray(p[M])?p[M]:[p[M]];for(let m=0,P=A.length;m<P;m++){const I=A[m];if(u(I,M,m,b)===!0){const U=I.__offset,N=Array.isArray(I.value)?I.value:[I.value];let F=0;for(let W=0;W<N.length;W++){const V=N[W],j=g(V);typeof V=="number"||typeof V=="boolean"?(I.__data[0]=V,s.bufferSubData(s.UNIFORM_BUFFER,U+F,I.__data)):V.isMatrix3?(I.__data[0]=V.elements[0],I.__data[1]=V.elements[1],I.__data[2]=V.elements[2],I.__data[3]=0,I.__data[4]=V.elements[3],I.__data[5]=V.elements[4],I.__data[6]=V.elements[5],I.__data[7]=0,I.__data[8]=V.elements[6],I.__data[9]=V.elements[7],I.__data[10]=V.elements[8],I.__data[11]=0):(V.toArray(I.__data,F),F+=j.storage/Float32Array.BYTES_PER_ELEMENT)}s.bufferSubData(s.UNIFORM_BUFFER,U,I.__data)}}}s.bindBuffer(s.UNIFORM_BUFFER,null)}function u(y,w,p,b){const M=y.value,E=w+"_"+p;if(b[E]===void 0)return typeof M=="number"||typeof M=="boolean"?b[E]=M:b[E]=M.clone(),!0;{const A=b[E];if(typeof M=="number"||typeof M=="boolean"){if(A!==M)return b[E]=M,!0}else if(A.equals(M)===!1)return A.copy(M),!0}return!1}function x(y){const w=y.uniforms;let p=0;const b=16;for(let E=0,A=w.length;E<A;E++){const m=Array.isArray(w[E])?w[E]:[w[E]];for(let P=0,I=m.length;P<I;P++){const U=m[P],N=Array.isArray(U.value)?U.value:[U.value];for(let F=0,W=N.length;F<W;F++){const V=N[F],j=g(V),G=p%b,re=G%j.boundary,ne=G+re;p+=re,ne!==0&&b-ne<j.storage&&(p+=b-ne),U.__data=new Float32Array(j.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=p,p+=j.storage}}}const M=p%b;return M>0&&(p+=b-M),y.__size=p,y.__cache={},this}function g(y){const w={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(w.boundary=4,w.storage=4):y.isVector2?(w.boundary=8,w.storage=8):y.isVector3||y.isColor?(w.boundary=16,w.storage=12):y.isVector4?(w.boundary=16,w.storage=16):y.isMatrix3?(w.boundary=48,w.storage=48):y.isMatrix4?(w.boundary=64,w.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),w}function v(y){const w=y.target;w.removeEventListener("dispose",v);const p=n.indexOf(w.__bindingPointIndex);n.splice(p,1),s.deleteBuffer(a[w.id]),delete a[w.id],delete r[w.id]}function f(){for(const y in a)s.deleteBuffer(a[y]);n=[],a={},r={}}return{bind:l,update:h,dispose:f}}class OP{constructor(e={}){const{canvas:t=Mm(),context:i=null,depth:a=!0,stencil:r=!1,alpha:n=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:h=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:_=!1}=e;this.isWebGLRenderer=!0;let u;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");u=i.getContextAttributes().alpha}else u=n;const x=new Uint32Array(4),g=new Int32Array(4);let v=null,f=null;const y=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ia,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const p=this;let b=!1;this._outputColorSpace=Ge;let M=0,E=0,A=null,m=-1,P=null;const I=new et,U=new et;let N=null;const F=new X(0);let W=0,V=t.width,j=t.height,G=1,re=null,ne=null;const xe=new et(0,0,V,j),we=new et(0,0,V,j);let Je=!1;const qe=new Cn;let Z=!1,ce=!1;const le=new De,Me=new S,Ie=new et,Fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let jt=!1;function tt(){return A===null?G:1}let D=i;function bt(T,L){return t.getContext(T,L)}try{const T={alpha:!0,depth:a,stencil:r,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:h,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${yr}`),t.addEventListener("webglcontextlost",he,!1),t.addEventListener("webglcontextrestored",ve,!1),t.addEventListener("webglcontextcreationerror",ee,!1),D===null){const L="webgl2";if(D=bt(L,T),D===null)throw bt(L)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(T){throw console.error("THREE.WebGLRenderer: "+T.message),T}let Ee,ht,Te,Dt,ge,Xe,li,Zt,C,z,B,K,Q,J,be,oe,ye,ze,se,ue,Re,Pe,de,We;function R(){Ee=new qw(D),Ee.init(),Pe=new SP(D,Ee),ht=new Fw(D,Ee,e,Pe),Te=new bP(D,Ee),ht.reversedDepthBuffer&&_&&Te.buffers.depth.setReversed(!0),Dt=new jw(D),ge=new dP,Xe=new TP(D,Ee,Te,ge,ht,Pe,Dt),li=new Vw(p),Zt=new Gw(p),C=new $1(D),de=new Nw(D,C),z=new Hw(D,C,Dt,de),B=new Jw(D,z,C,Dt),se=new Zw(D,ht,Xe),oe=new kw(ge),K=new cP(p,li,Zt,Ee,ht,de,oe),Q=new DP(p,ge),J=new uP,be=new mP(Ee),ze=new Ow(p,li,Zt,Te,B,u,l),ye=new zP(p,B,ht),We=new RP(D,Dt,ht,Te),ue=new Lw(D,Ee,Dt),Re=new Xw(D,Ee,Dt),Dt.programs=K.programs,p.capabilities=ht,p.extensions=Ee,p.properties=ge,p.renderLists=J,p.shadowMap=ye,p.state=Te,p.info=Dt}R();const ae=new IP(p,D);this.xr=ae,this.getContext=function(){return D},this.getContextAttributes=function(){return D.getContextAttributes()},this.forceContextLoss=function(){const T=Ee.get("WEBGL_lose_context");T&&T.loseContext()},this.forceContextRestore=function(){const T=Ee.get("WEBGL_lose_context");T&&T.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(T){T!==void 0&&(G=T,this.setSize(V,j,!1))},this.getSize=function(T){return T.set(V,j)},this.setSize=function(T,L,q=!0){if(ae.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}V=T,j=L,t.width=Math.floor(T*G),t.height=Math.floor(L*G),q===!0&&(t.style.width=T+"px",t.style.height=L+"px"),this.setViewport(0,0,T,L)},this.getDrawingBufferSize=function(T){return T.set(V*G,j*G).floor()},this.setDrawingBufferSize=function(T,L,q){V=T,j=L,G=q,t.width=Math.floor(T*q),t.height=Math.floor(L*q),this.setViewport(0,0,T,L)},this.getCurrentViewport=function(T){return T.copy(I)},this.getViewport=function(T){return T.copy(xe)},this.setViewport=function(T,L,q,H){T.isVector4?xe.set(T.x,T.y,T.z,T.w):xe.set(T,L,q,H),Te.viewport(I.copy(xe).multiplyScalar(G).round())},this.getScissor=function(T){return T.copy(we)},this.setScissor=function(T,L,q,H){T.isVector4?we.set(T.x,T.y,T.z,T.w):we.set(T,L,q,H),Te.scissor(U.copy(we).multiplyScalar(G).round())},this.getScissorTest=function(){return Je},this.setScissorTest=function(T){Te.setScissorTest(Je=T)},this.setOpaqueSort=function(T){re=T},this.setTransparentSort=function(T){ne=T},this.getClearColor=function(T){return T.copy(ze.getClearColor())},this.setClearColor=function(){ze.setClearColor(...arguments)},this.getClearAlpha=function(){return ze.getClearAlpha()},this.setClearAlpha=function(){ze.setClearAlpha(...arguments)},this.clear=function(T=!0,L=!0,q=!0){let H=0;if(T){let k=!1;if(A!==null){const te=A.texture.format;k=te===l_||te===o_||te===n_}if(k){const te=A.texture.type,_e=te===$t||te===Na||te===vo||te===_n||te===s_||te===a_,pe=ze.getClearColor(),fe=ze.getClearAlpha(),Ce=pe.r,Oe=pe.g,Se=pe.b;_e?(x[0]=Ce,x[1]=Oe,x[2]=Se,x[3]=fe,D.clearBufferuiv(D.COLOR,0,x)):(g[0]=Ce,g[1]=Oe,g[2]=Se,g[3]=fe,D.clearBufferiv(D.COLOR,0,g))}else H|=D.COLOR_BUFFER_BIT}L&&(H|=D.DEPTH_BUFFER_BIT),q&&(H|=D.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),D.clear(H)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",he,!1),t.removeEventListener("webglcontextrestored",ve,!1),t.removeEventListener("webglcontextcreationerror",ee,!1),ze.dispose(),J.dispose(),be.dispose(),ge.dispose(),li.dispose(),Zt.dispose(),B.dispose(),de.dispose(),We.dispose(),K.dispose(),ae.dispose(),ae.removeEventListener("sessionstart",Ss),ae.removeEventListener("sessionend",zu),Wa.stop()};function he(T){T.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function ve(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const T=Dt.autoReset,L=ye.enabled,q=ye.autoUpdate,H=ye.needsUpdate,k=ye.type;R(),Dt.autoReset=T,ye.enabled=L,ye.autoUpdate=q,ye.needsUpdate=H,ye.type=k}function ee(T){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",T.statusMessage)}function Y(T){const L=T.target;L.removeEventListener("dispose",Y),me(L)}function me(T){ke(T),ge.remove(T)}function ke(T){const L=ge.get(T).programs;L!==void 0&&(L.forEach(function(q){K.releaseProgram(q)}),T.isShaderMaterial&&K.releaseShaderCache(T))}this.renderBufferDirect=function(T,L,q,H,k,te){L===null&&(L=Fe);const _e=k.isMesh&&k.matrixWorld.determinant()<0,pe=pp(T,L,q,H,k);Te.setMaterial(H,_e);let fe=q.index,Ce=1;if(H.wireframe===!0){if(fe=z.getWireframeAttribute(q),fe===void 0)return;Ce=2}const Oe=q.drawRange,Se=q.attributes.position;let Ye=Oe.start*Ce,xt=(Oe.start+Oe.count)*Ce;te!==null&&(Ye=Math.max(Ye,te.start*Ce),xt=Math.min(xt,(te.start+te.count)*Ce)),fe!==null?(Ye=Math.max(Ye,0),xt=Math.min(xt,fe.count)):Se!=null&&(Ye=Math.max(Ye,0),xt=Math.min(xt,Se.count));const qt=xt-Ye;if(qt<0||qt===1/0)return;de.setup(k,H,pe,q,fe);let It,wt=ue;if(fe!==null&&(It=C.get(fe),wt=Re,wt.setIndex(It)),k.isMesh)H.wireframe===!0?(Te.setLineWidth(H.wireframeLinewidth*tt()),wt.setMode(D.LINES)):wt.setMode(D.TRIANGLES);else if(k.isLine){let Ae=H.linewidth;Ae===void 0&&(Ae=1),Te.setLineWidth(Ae*tt()),k.isLineSegments?wt.setMode(D.LINES):k.isLineLoop?wt.setMode(D.LINE_LOOP):wt.setMode(D.LINE_STRIP)}else k.isPoints?wt.setMode(D.POINTS):k.isSprite&&wt.setMode(D.TRIANGLES);if(k.isBatchedMesh)if(k._multiDrawInstances!==null)$r("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),wt.renderMultiDrawInstances(k._multiDrawStarts,k._multiDrawCounts,k._multiDrawCount,k._multiDrawInstances);else if(Ee.get("WEBGL_multi_draw"))wt.renderMultiDraw(k._multiDrawStarts,k._multiDrawCounts,k._multiDrawCount);else{const Ae=k._multiDrawStarts,Lt=k._multiDrawCounts,at=k._multiDrawCount,Vi=fe?C.get(fe).bytesPerElement:1,Tr=ge.get(H).currentProgram.getUniforms();for(let Ui=0;Ui<at;Ui++)Tr.setValue(D,"_gl_DrawID",Ui),wt.render(Ae[Ui]/Vi,Lt[Ui])}else if(k.isInstancedMesh)wt.renderInstances(Ye,qt,k.count);else if(q.isInstancedBufferGeometry){const Ae=q._maxInstanceCount!==void 0?q._maxInstanceCount:1/0,Lt=Math.min(q.instanceCount,Ae);wt.renderInstances(Ye,qt,Lt)}else wt.render(Ye,qt)};function Tt(T,L,q){T.transparent===!0&&T.side===si&&T.forceSinglePass===!1?(T.side=ai,T.needsUpdate=!0,el(T,L,q),T.side=ds,T.needsUpdate=!0,el(T,L,q),T.side=si):el(T,L,q)}this.compile=function(T,L,q=null){q===null&&(q=T),f=be.get(q),f.init(L),w.push(f),q.traverseVisible(function(k){k.isLight&&k.layers.test(L.layers)&&(f.pushLight(k),k.castShadow&&f.pushShadow(k))}),T!==q&&T.traverseVisible(function(k){k.isLight&&k.layers.test(L.layers)&&(f.pushLight(k),k.castShadow&&f.pushShadow(k))}),f.setupLights();const H=new Set;return T.traverse(function(k){if(!(k.isMesh||k.isPoints||k.isLine||k.isSprite))return;const te=k.material;if(te)if(Array.isArray(te))for(let _e=0;_e<te.length;_e++){const pe=te[_e];Tt(pe,q,k),H.add(pe)}else Tt(te,q,k),H.add(te)}),f=w.pop(),H},this.compileAsync=function(T,L,q=null){const H=this.compile(T,L,q);return new Promise(k=>{function te(){if(H.forEach(function(_e){ge.get(_e).currentProgram.isReady()&&H.delete(_e)}),H.size===0){k(T);return}setTimeout(te,10)}Ee.get("KHR_parallel_shader_compile")!==null?te():setTimeout(te,10)})};let ct=null;function Us(T){ct&&ct(T)}function Ss(){Wa.stop()}function zu(){Wa.start()}const Wa=new X0;Wa.setAnimationLoop(Us),typeof self<"u"&&Wa.setContext(self),this.setAnimationLoop=function(T){ct=T,ae.setAnimationLoop(T),T===null?Wa.stop():Wa.start()},ae.addEventListener("sessionstart",Ss),ae.addEventListener("sessionend",zu),this.render=function(T,L){if(L!==void 0&&L.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(b===!0)return;if(T.matrixWorldAutoUpdate===!0&&T.updateMatrixWorld(),L.parent===null&&L.matrixWorldAutoUpdate===!0&&L.updateMatrixWorld(),ae.enabled===!0&&ae.isPresenting===!0&&(ae.cameraAutoUpdate===!0&&ae.updateCamera(L),L=ae.getCamera()),T.isScene===!0&&T.onBeforeRender(p,T,L,A),f=be.get(T,w.length),f.init(L),w.push(f),le.multiplyMatrices(L.projectionMatrix,L.matrixWorldInverse),qe.setFromProjectionMatrix(le,Cs,L.reversedDepth),ce=this.localClippingEnabled,Z=oe.init(this.clippingPlanes,ce),v=J.get(T,y.length),v.init(),y.push(v),ae.enabled===!0&&ae.isPresenting===!0){const te=p.xr.getDepthSensingMesh();te!==null&&Mh(te,L,-1/0,p.sortObjects)}Mh(T,L,0,p.sortObjects),v.finish(),p.sortObjects===!0&&v.sort(re,ne),jt=ae.enabled===!1||ae.isPresenting===!1||ae.hasDepthSensing()===!1,jt&&ze.addToRenderList(v,T),this.info.render.frame++,Z===!0&&oe.beginShadows();const q=f.state.shadowsArray;ye.render(q,T,L),Z===!0&&oe.endShadows(),this.info.autoReset===!0&&this.info.reset();const H=v.opaque,k=v.transmissive;if(f.setupLights(),L.isArrayCamera){const te=L.cameras;if(k.length>0)for(let _e=0,pe=te.length;_e<pe;_e++){const fe=te[_e];bu(H,k,T,fe)}jt&&ze.render(T);for(let _e=0,pe=te.length;_e<pe;_e++){const fe=te[_e];Pu(v,T,fe,fe.viewport)}}else k.length>0&&bu(H,k,T,L),jt&&ze.render(T),Pu(v,T,L);A!==null&&E===0&&(Xe.updateMultisampleRenderTarget(A),Xe.updateRenderTargetMipmap(A)),T.isScene===!0&&T.onAfterRender(p,T,L),de.resetDefaultState(),m=-1,P=null,w.pop(),w.length>0?(f=w[w.length-1],Z===!0&&oe.setGlobalState(p.clippingPlanes,f.state.camera)):f=null,y.pop(),y.length>0?v=y[y.length-1]:v=null};function Mh(T,L,q,H){if(T.visible===!1)return;if(T.layers.test(L.layers)){if(T.isGroup)q=T.renderOrder;else if(T.isLOD)T.autoUpdate===!0&&T.update(L);else if(T.isLight)f.pushLight(T),T.castShadow&&f.pushShadow(T);else if(T.isSprite){if(!T.frustumCulled||qe.intersectsSprite(T)){H&&Ie.setFromMatrixPosition(T.matrixWorld).applyMatrix4(le);const _e=B.update(T),pe=T.material;pe.visible&&v.push(T,_e,pe,q,Ie.z,null)}}else if((T.isMesh||T.isLine||T.isPoints)&&(!T.frustumCulled||qe.intersectsObject(T))){const _e=B.update(T),pe=T.material;if(H&&(T.boundingSphere!==void 0?(T.boundingSphere===null&&T.computeBoundingSphere(),Ie.copy(T.boundingSphere.center)):(_e.boundingSphere===null&&_e.computeBoundingSphere(),Ie.copy(_e.boundingSphere.center)),Ie.applyMatrix4(T.matrixWorld).applyMatrix4(le)),Array.isArray(pe)){const fe=_e.groups;for(let Ce=0,Oe=fe.length;Ce<Oe;Ce++){const Se=fe[Ce],Ye=pe[Se.materialIndex];Ye&&Ye.visible&&v.push(T,_e,Ye,q,Ie.z,Se)}}else pe.visible&&v.push(T,_e,pe,q,Ie.z,null)}}const te=T.children;for(let _e=0,pe=te.length;_e<pe;_e++)Mh(te[_e],L,q,H)}function Pu(T,L,q,H){const k=T.opaque,te=T.transmissive,_e=T.transparent;f.setupLightsView(q),Z===!0&&oe.setGlobalState(p.clippingPlanes,q),H&&Te.viewport(I.copy(H)),k.length>0&&$o(k,L,q),te.length>0&&$o(te,L,q),_e.length>0&&$o(_e,L,q),Te.buffers.depth.setTest(!0),Te.buffers.depth.setMask(!0),Te.buffers.color.setMask(!0),Te.setPolygonOffset(!1)}function bu(T,L,q,H){if((q.isScene===!0?q.overrideMaterial:null)!==null)return;f.state.transmissionRenderTarget[H.id]===void 0&&(f.state.transmissionRenderTarget[H.id]=new gt(1,1,{generateMipmaps:!0,type:Ee.has("EXT_color_buffer_half_float")||Ee.has("EXT_color_buffer_float")?ns:$t,minFilter:ms,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Qe.workingColorSpace}));const te=f.state.transmissionRenderTarget[H.id],_e=H.viewport||I;te.setSize(_e.z*p.transmissionResolutionScale,_e.w*p.transmissionResolutionScale);const pe=p.getRenderTarget(),fe=p.getActiveCubeFace(),Ce=p.getActiveMipmapLevel();p.setRenderTarget(te),p.getClearColor(F),W=p.getClearAlpha(),W<1&&p.setClearColor(16777215,.5),p.clear(),jt&&ze.render(q);const Oe=p.toneMapping;p.toneMapping=ia;const Se=H.viewport;if(H.viewport!==void 0&&(H.viewport=void 0),f.setupLightsView(H),Z===!0&&oe.setGlobalState(p.clippingPlanes,H),$o(T,q,H),Xe.updateMultisampleRenderTarget(te),Xe.updateRenderTargetMipmap(te),Ee.has("WEBGL_multisampled_render_to_texture")===!1){let Ye=!1;for(let xt=0,qt=L.length;xt<qt;xt++){const It=L[xt],wt=It.object,Ae=It.geometry,Lt=It.material,at=It.group;if(Lt.side===si&&wt.layers.test(H.layers)){const Vi=Lt.side;Lt.side=ai,Lt.needsUpdate=!0,Tu(wt,q,H,Ae,Lt,at),Lt.side=Vi,Lt.needsUpdate=!0,Ye=!0}}Ye===!0&&(Xe.updateMultisampleRenderTarget(te),Xe.updateRenderTargetMipmap(te))}p.setRenderTarget(pe,fe,Ce),p.setClearColor(F,W),Se!==void 0&&(H.viewport=Se),p.toneMapping=Oe}function $o(T,L,q){const H=L.isScene===!0?L.overrideMaterial:null;for(let k=0,te=T.length;k<te;k++){const _e=T[k],pe=_e.object,fe=_e.geometry,Ce=_e.group;let Oe=_e.material;Oe.allowOverride===!0&&H!==null&&(Oe=H),pe.layers.test(q.layers)&&Tu(pe,L,q,fe,Oe,Ce)}}function Tu(T,L,q,H,k,te){T.onBeforeRender(p,L,q,H,k,te),T.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse,T.matrixWorld),T.normalMatrix.getNormalMatrix(T.modelViewMatrix),k.onBeforeRender(p,L,q,H,T,te),k.transparent===!0&&k.side===si&&k.forceSinglePass===!1?(k.side=ai,k.needsUpdate=!0,p.renderBufferDirect(q,L,H,k,T,te),k.side=ds,k.needsUpdate=!0,p.renderBufferDirect(q,L,H,k,T,te),k.side=si):p.renderBufferDirect(q,L,H,k,T,te),T.onAfterRender(p,L,q,H,k,te)}function el(T,L,q){L.isScene!==!0&&(L=Fe);const H=ge.get(T),k=f.state.lights,te=f.state.shadowsArray,_e=k.state.version,pe=K.getParameters(T,k.state,te,L,q),fe=K.getProgramCacheKey(pe);let Ce=H.programs;H.environment=T.isMeshStandardMaterial?L.environment:null,H.fog=L.fog,H.envMap=(T.isMeshStandardMaterial?Zt:li).get(T.envMap||H.environment),H.envMapRotation=H.environment!==null&&T.envMap===null?L.environmentRotation:T.envMapRotation,Ce===void 0&&(T.addEventListener("dispose",Y),Ce=new Map,H.programs=Ce);let Oe=Ce.get(fe);if(Oe!==void 0){if(H.currentProgram===Oe&&H.lightsStateVersion===_e)return Eu(T,pe),Oe}else pe.uniforms=K.getUniforms(T),T.onBeforeCompile(pe,p),Oe=K.acquireProgram(pe,fe),Ce.set(fe,Oe),H.uniforms=pe.uniforms;const Se=H.uniforms;return(!T.isShaderMaterial&&!T.isRawShaderMaterial||T.clipping===!0)&&(Se.clippingPlanes=oe.uniform),Eu(T,pe),H.needsLights=yp(T),H.lightsStateVersion=_e,H.needsLights&&(Se.ambientLightColor.value=k.state.ambient,Se.lightProbe.value=k.state.probe,Se.directionalLights.value=k.state.directional,Se.directionalLightShadows.value=k.state.directionalShadow,Se.spotLights.value=k.state.spot,Se.spotLightShadows.value=k.state.spotShadow,Se.rectAreaLights.value=k.state.rectArea,Se.ltc_1.value=k.state.rectAreaLTC1,Se.ltc_2.value=k.state.rectAreaLTC2,Se.pointLights.value=k.state.point,Se.pointLightShadows.value=k.state.pointShadow,Se.hemisphereLights.value=k.state.hemi,Se.directionalShadowMap.value=k.state.directionalShadowMap,Se.directionalShadowMatrix.value=k.state.directionalShadowMatrix,Se.spotShadowMap.value=k.state.spotShadowMap,Se.spotLightMatrix.value=k.state.spotLightMatrix,Se.spotLightMap.value=k.state.spotLightMap,Se.pointShadowMap.value=k.state.pointShadowMap,Se.pointShadowMatrix.value=k.state.pointShadowMatrix),H.currentProgram=Oe,H.uniformsList=null,Oe}function Su(T){if(T.uniformsList===null){const L=T.currentProgram.getUniforms();T.uniformsList=Bl.seqWithValue(L.seq,T.uniforms)}return T.uniformsList}function Eu(T,L){const q=ge.get(T);q.outputColorSpace=L.outputColorSpace,q.batching=L.batching,q.batchingColor=L.batchingColor,q.instancing=L.instancing,q.instancingColor=L.instancingColor,q.instancingMorph=L.instancingMorph,q.skinning=L.skinning,q.morphTargets=L.morphTargets,q.morphNormals=L.morphNormals,q.morphColors=L.morphColors,q.morphTargetsCount=L.morphTargetsCount,q.numClippingPlanes=L.numClippingPlanes,q.numIntersection=L.numClipIntersection,q.vertexAlphas=L.vertexAlphas,q.vertexTangents=L.vertexTangents,q.toneMapping=L.toneMapping}function pp(T,L,q,H,k){L.isScene!==!0&&(L=Fe),Xe.resetTextureUnits();const te=L.fog,_e=H.isMeshStandardMaterial?L.environment:null,pe=A===null?p.outputColorSpace:A.isXRRenderTarget===!0?A.texture.colorSpace:Ot,fe=(H.isMeshStandardMaterial?Zt:li).get(H.envMap||_e),Ce=H.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,Oe=!!q.attributes.tangent&&(!!H.normalMap||H.anisotropy>0),Se=!!q.morphAttributes.position,Ye=!!q.morphAttributes.normal,xt=!!q.morphAttributes.color;let qt=ia;H.toneMapped&&(A===null||A.isXRRenderTarget===!0)&&(qt=p.toneMapping);const It=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,wt=It!==void 0?It.length:0,Ae=ge.get(H),Lt=f.state.lights;if(Z===!0&&(ce===!0||T!==P)){const yi=T===P&&H.id===m;oe.setState(H,T,yi)}let at=!1;H.version===Ae.__version?(Ae.needsLights&&Ae.lightsStateVersion!==Lt.state.version||Ae.outputColorSpace!==pe||k.isBatchedMesh&&Ae.batching===!1||!k.isBatchedMesh&&Ae.batching===!0||k.isBatchedMesh&&Ae.batchingColor===!0&&k.colorTexture===null||k.isBatchedMesh&&Ae.batchingColor===!1&&k.colorTexture!==null||k.isInstancedMesh&&Ae.instancing===!1||!k.isInstancedMesh&&Ae.instancing===!0||k.isSkinnedMesh&&Ae.skinning===!1||!k.isSkinnedMesh&&Ae.skinning===!0||k.isInstancedMesh&&Ae.instancingColor===!0&&k.instanceColor===null||k.isInstancedMesh&&Ae.instancingColor===!1&&k.instanceColor!==null||k.isInstancedMesh&&Ae.instancingMorph===!0&&k.morphTexture===null||k.isInstancedMesh&&Ae.instancingMorph===!1&&k.morphTexture!==null||Ae.envMap!==fe||H.fog===!0&&Ae.fog!==te||Ae.numClippingPlanes!==void 0&&(Ae.numClippingPlanes!==oe.numPlanes||Ae.numIntersection!==oe.numIntersection)||Ae.vertexAlphas!==Ce||Ae.vertexTangents!==Oe||Ae.morphTargets!==Se||Ae.morphNormals!==Ye||Ae.morphColors!==xt||Ae.toneMapping!==qt||Ae.morphTargetsCount!==wt)&&(at=!0):(at=!0,Ae.__version=H.version);let Vi=Ae.currentProgram;at===!0&&(Vi=el(H,L,k));let Tr=!1,Ui=!1,Un=!1;const Ft=Vi.getUniforms(),Qi=Ae.uniforms;if(Te.useProgram(Vi.program)&&(Tr=!0,Ui=!0,Un=!0),H.id!==m&&(m=H.id,Ui=!0),Tr||P!==T){Te.buffers.depth.getReversed()&&T.reversedDepth!==!0&&(T._reversedDepth=!0,T.updateProjectionMatrix()),Ft.setValue(D,"projectionMatrix",T.projectionMatrix),Ft.setValue(D,"viewMatrix",T.matrixWorldInverse);const Si=Ft.map.cameraPosition;Si!==void 0&&Si.setValue(D,Me.setFromMatrixPosition(T.matrixWorld)),ht.logarithmicDepthBuffer&&Ft.setValue(D,"logDepthBufFC",2/(Math.log(T.far+1)/Math.LN2)),(H.isMeshPhongMaterial||H.isMeshToonMaterial||H.isMeshLambertMaterial||H.isMeshBasicMaterial||H.isMeshStandardMaterial||H.isShaderMaterial)&&Ft.setValue(D,"isOrthographic",T.isOrthographicCamera===!0),P!==T&&(P=T,Ui=!0,Un=!0)}if(k.isSkinnedMesh){Ft.setOptional(D,k,"bindMatrix"),Ft.setOptional(D,k,"bindMatrixInverse");const yi=k.skeleton;yi&&(yi.boneTexture===null&&yi.computeBoneTexture(),Ft.setValue(D,"boneTexture",yi.boneTexture,Xe))}k.isBatchedMesh&&(Ft.setOptional(D,k,"batchingTexture"),Ft.setValue(D,"batchingTexture",k._matricesTexture,Xe),Ft.setOptional(D,k,"batchingIdTexture"),Ft.setValue(D,"batchingIdTexture",k._indirectTexture,Xe),Ft.setOptional(D,k,"batchingColorTexture"),k._colorsTexture!==null&&Ft.setValue(D,"batchingColorTexture",k._colorsTexture,Xe));const $i=q.morphAttributes;if(($i.position!==void 0||$i.normal!==void 0||$i.color!==void 0)&&se.update(k,q,Vi),(Ui||Ae.receiveShadow!==k.receiveShadow)&&(Ae.receiveShadow=k.receiveShadow,Ft.setValue(D,"receiveShadow",k.receiveShadow)),H.isMeshGouraudMaterial&&H.envMap!==null&&(Qi.envMap.value=fe,Qi.flipEnvMap.value=fe.isCubeTexture&&fe.isRenderTargetTexture===!1?-1:1),H.isMeshStandardMaterial&&H.envMap===null&&L.environment!==null&&(Qi.envMapIntensity.value=L.environmentIntensity),Ui&&(Ft.setValue(D,"toneMappingExposure",p.toneMappingExposure),Ae.needsLights&&mp(Qi,Un),te&&H.fog===!0&&Q.refreshFogUniforms(Qi,te),Q.refreshMaterialUniforms(Qi,H,G,j,f.state.transmissionRenderTarget[T.id]),Bl.upload(D,Su(Ae),Qi,Xe)),H.isShaderMaterial&&H.uniformsNeedUpdate===!0&&(Bl.upload(D,Su(Ae),Qi,Xe),H.uniformsNeedUpdate=!1),H.isSpriteMaterial&&Ft.setValue(D,"center",k.center),Ft.setValue(D,"modelViewMatrix",k.modelViewMatrix),Ft.setValue(D,"normalMatrix",k.normalMatrix),Ft.setValue(D,"modelMatrix",k.matrixWorld),H.isShaderMaterial||H.isRawShaderMaterial){const yi=H.uniformsGroups;for(let Si=0,Ih=yi.length;Si<Ih;Si++){const Ga=yi[Si];We.update(Ga,Vi),We.bind(Ga,Vi)}}return Vi}function mp(T,L){T.ambientLightColor.needsUpdate=L,T.lightProbe.needsUpdate=L,T.directionalLights.needsUpdate=L,T.directionalLightShadows.needsUpdate=L,T.pointLights.needsUpdate=L,T.pointLightShadows.needsUpdate=L,T.spotLights.needsUpdate=L,T.spotLightShadows.needsUpdate=L,T.rectAreaLights.needsUpdate=L,T.hemisphereLights.needsUpdate=L}function yp(T){return T.isMeshLambertMaterial||T.isMeshToonMaterial||T.isMeshPhongMaterial||T.isMeshStandardMaterial||T.isShadowMaterial||T.isShaderMaterial&&T.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(T,L,q){const H=ge.get(T);H.__autoAllocateDepthBuffer=T.resolveDepthBuffer===!1,H.__autoAllocateDepthBuffer===!1&&(H.__useRenderToTexture=!1),ge.get(T.texture).__webglTexture=L,ge.get(T.depthTexture).__webglTexture=H.__autoAllocateDepthBuffer?void 0:q,H.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(T,L){const q=ge.get(T);q.__webglFramebuffer=L,q.__useDefaultFramebuffer=L===void 0};const wp=D.createFramebuffer();this.setRenderTarget=function(T,L=0,q=0){A=T,M=L,E=q;let H=!0,k=null,te=!1,_e=!1;if(T){const fe=ge.get(T);if(fe.__useDefaultFramebuffer!==void 0)Te.bindFramebuffer(D.FRAMEBUFFER,null),H=!1;else if(fe.__webglFramebuffer===void 0)Xe.setupRenderTarget(T);else if(fe.__hasExternalTextures)Xe.rebindTextures(T,ge.get(T.texture).__webglTexture,ge.get(T.depthTexture).__webglTexture);else if(T.depthBuffer){const Se=T.depthTexture;if(fe.__boundDepthTexture!==Se){if(Se!==null&&ge.has(Se)&&(T.width!==Se.image.width||T.height!==Se.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Xe.setupDepthRenderbuffer(T)}}const Ce=T.texture;(Ce.isData3DTexture||Ce.isDataArrayTexture||Ce.isCompressedArrayTexture)&&(_e=!0);const Oe=ge.get(T).__webglFramebuffer;T.isWebGLCubeRenderTarget?(Array.isArray(Oe[L])?k=Oe[L][q]:k=Oe[L],te=!0):T.samples>0&&Xe.useMultisampledRTT(T)===!1?k=ge.get(T).__webglMultisampledFramebuffer:Array.isArray(Oe)?k=Oe[q]:k=Oe,I.copy(T.viewport),U.copy(T.scissor),N=T.scissorTest}else I.copy(xe).multiplyScalar(G).floor(),U.copy(we).multiplyScalar(G).floor(),N=Je;if(q!==0&&(k=wp),Te.bindFramebuffer(D.FRAMEBUFFER,k)&&H&&Te.drawBuffers(T,k),Te.viewport(I),Te.scissor(U),Te.setScissorTest(N),te){const fe=ge.get(T.texture);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+L,fe.__webglTexture,q)}else if(_e){const fe=L;for(let Ce=0;Ce<T.textures.length;Ce++){const Oe=ge.get(T.textures[Ce]);D.framebufferTextureLayer(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0+Ce,Oe.__webglTexture,q,fe)}}else if(T!==null&&q!==0){const fe=ge.get(T.texture);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,fe.__webglTexture,q)}m=-1},this.readRenderTargetPixels=function(T,L,q,H,k,te,_e,pe=0){if(!(T&&T.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let fe=ge.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&_e!==void 0&&(fe=fe[_e]),fe){Te.bindFramebuffer(D.FRAMEBUFFER,fe);try{const Ce=T.textures[pe],Oe=Ce.format,Se=Ce.type;if(!ht.textureFormatReadable(Oe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ht.textureTypeReadable(Se)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}L>=0&&L<=T.width-H&&q>=0&&q<=T.height-k&&(T.textures.length>1&&D.readBuffer(D.COLOR_ATTACHMENT0+pe),D.readPixels(L,q,H,k,Pe.convert(Oe),Pe.convert(Se),te))}finally{const Ce=A!==null?ge.get(A).__webglFramebuffer:null;Te.bindFramebuffer(D.FRAMEBUFFER,Ce)}}},this.readRenderTargetPixelsAsync=async function(T,L,q,H,k,te,_e,pe=0){if(!(T&&T.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let fe=ge.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&_e!==void 0&&(fe=fe[_e]),fe)if(L>=0&&L<=T.width-H&&q>=0&&q<=T.height-k){Te.bindFramebuffer(D.FRAMEBUFFER,fe);const Ce=T.textures[pe],Oe=Ce.format,Se=Ce.type;if(!ht.textureFormatReadable(Oe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ht.textureTypeReadable(Se))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ye=D.createBuffer();D.bindBuffer(D.PIXEL_PACK_BUFFER,Ye),D.bufferData(D.PIXEL_PACK_BUFFER,te.byteLength,D.STREAM_READ),T.textures.length>1&&D.readBuffer(D.COLOR_ATTACHMENT0+pe),D.readPixels(L,q,H,k,Pe.convert(Oe),Pe.convert(Se),0);const xt=A!==null?ge.get(A).__webglFramebuffer:null;Te.bindFramebuffer(D.FRAMEBUFFER,xt);const qt=D.fenceSync(D.SYNC_GPU_COMMANDS_COMPLETE,0);return D.flush(),await Im(D,qt,4),D.bindBuffer(D.PIXEL_PACK_BUFFER,Ye),D.getBufferSubData(D.PIXEL_PACK_BUFFER,0,te),D.deleteBuffer(Ye),D.deleteSync(qt),te}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(T,L=null,q=0){const H=Math.pow(2,-q),k=Math.floor(T.image.width*H),te=Math.floor(T.image.height*H),_e=L!==null?L.x:0,pe=L!==null?L.y:0;Xe.setTexture2D(T,0),D.copyTexSubImage2D(D.TEXTURE_2D,q,0,0,_e,pe,k,te),Te.unbindTexture()};const zp=D.createFramebuffer(),Pp=D.createFramebuffer();this.copyTextureToTexture=function(T,L,q=null,H=null,k=0,te=null){te===null&&(k!==0?($r("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),te=k,k=0):te=0);let _e,pe,fe,Ce,Oe,Se,Ye,xt,qt;const It=T.isCompressedTexture?T.mipmaps[te]:T.image;if(q!==null)_e=q.max.x-q.min.x,pe=q.max.y-q.min.y,fe=q.isBox3?q.max.z-q.min.z:1,Ce=q.min.x,Oe=q.min.y,Se=q.isBox3?q.min.z:0;else{const $i=Math.pow(2,-k);_e=Math.floor(It.width*$i),pe=Math.floor(It.height*$i),T.isDataArrayTexture?fe=It.depth:T.isData3DTexture?fe=Math.floor(It.depth*$i):fe=1,Ce=0,Oe=0,Se=0}H!==null?(Ye=H.x,xt=H.y,qt=H.z):(Ye=0,xt=0,qt=0);const wt=Pe.convert(L.format),Ae=Pe.convert(L.type);let Lt;L.isData3DTexture?(Xe.setTexture3D(L,0),Lt=D.TEXTURE_3D):L.isDataArrayTexture||L.isCompressedArrayTexture?(Xe.setTexture2DArray(L,0),Lt=D.TEXTURE_2D_ARRAY):(Xe.setTexture2D(L,0),Lt=D.TEXTURE_2D),D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,L.flipY),D.pixelStorei(D.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),D.pixelStorei(D.UNPACK_ALIGNMENT,L.unpackAlignment);const at=D.getParameter(D.UNPACK_ROW_LENGTH),Vi=D.getParameter(D.UNPACK_IMAGE_HEIGHT),Tr=D.getParameter(D.UNPACK_SKIP_PIXELS),Ui=D.getParameter(D.UNPACK_SKIP_ROWS),Un=D.getParameter(D.UNPACK_SKIP_IMAGES);D.pixelStorei(D.UNPACK_ROW_LENGTH,It.width),D.pixelStorei(D.UNPACK_IMAGE_HEIGHT,It.height),D.pixelStorei(D.UNPACK_SKIP_PIXELS,Ce),D.pixelStorei(D.UNPACK_SKIP_ROWS,Oe),D.pixelStorei(D.UNPACK_SKIP_IMAGES,Se);const Ft=T.isDataArrayTexture||T.isData3DTexture,Qi=L.isDataArrayTexture||L.isData3DTexture;if(T.isDepthTexture){const $i=ge.get(T),yi=ge.get(L),Si=ge.get($i.__renderTarget),Ih=ge.get(yi.__renderTarget);Te.bindFramebuffer(D.READ_FRAMEBUFFER,Si.__webglFramebuffer),Te.bindFramebuffer(D.DRAW_FRAMEBUFFER,Ih.__webglFramebuffer);for(let Ga=0;Ga<fe;Ga++)Ft&&(D.framebufferTextureLayer(D.READ_FRAMEBUFFER,D.COLOR_ATTACHMENT0,ge.get(T).__webglTexture,k,Se+Ga),D.framebufferTextureLayer(D.DRAW_FRAMEBUFFER,D.COLOR_ATTACHMENT0,ge.get(L).__webglTexture,te,qt+Ga)),D.blitFramebuffer(Ce,Oe,_e,pe,Ye,xt,_e,pe,D.DEPTH_BUFFER_BIT,D.NEAREST);Te.bindFramebuffer(D.READ_FRAMEBUFFER,null),Te.bindFramebuffer(D.DRAW_FRAMEBUFFER,null)}else if(k!==0||T.isRenderTargetTexture||ge.has(T)){const $i=ge.get(T),yi=ge.get(L);Te.bindFramebuffer(D.READ_FRAMEBUFFER,zp),Te.bindFramebuffer(D.DRAW_FRAMEBUFFER,Pp);for(let Si=0;Si<fe;Si++)Ft?D.framebufferTextureLayer(D.READ_FRAMEBUFFER,D.COLOR_ATTACHMENT0,$i.__webglTexture,k,Se+Si):D.framebufferTexture2D(D.READ_FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,$i.__webglTexture,k),Qi?D.framebufferTextureLayer(D.DRAW_FRAMEBUFFER,D.COLOR_ATTACHMENT0,yi.__webglTexture,te,qt+Si):D.framebufferTexture2D(D.DRAW_FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,yi.__webglTexture,te),k!==0?D.blitFramebuffer(Ce,Oe,_e,pe,Ye,xt,_e,pe,D.COLOR_BUFFER_BIT,D.NEAREST):Qi?D.copyTexSubImage3D(Lt,te,Ye,xt,qt+Si,Ce,Oe,_e,pe):D.copyTexSubImage2D(Lt,te,Ye,xt,Ce,Oe,_e,pe);Te.bindFramebuffer(D.READ_FRAMEBUFFER,null),Te.bindFramebuffer(D.DRAW_FRAMEBUFFER,null)}else Qi?T.isDataTexture||T.isData3DTexture?D.texSubImage3D(Lt,te,Ye,xt,qt,_e,pe,fe,wt,Ae,It.data):L.isCompressedArrayTexture?D.compressedTexSubImage3D(Lt,te,Ye,xt,qt,_e,pe,fe,wt,It.data):D.texSubImage3D(Lt,te,Ye,xt,qt,_e,pe,fe,wt,Ae,It):T.isDataTexture?D.texSubImage2D(D.TEXTURE_2D,te,Ye,xt,_e,pe,wt,Ae,It.data):T.isCompressedTexture?D.compressedTexSubImage2D(D.TEXTURE_2D,te,Ye,xt,It.width,It.height,wt,It.data):D.texSubImage2D(D.TEXTURE_2D,te,Ye,xt,_e,pe,wt,Ae,It);D.pixelStorei(D.UNPACK_ROW_LENGTH,at),D.pixelStorei(D.UNPACK_IMAGE_HEIGHT,Vi),D.pixelStorei(D.UNPACK_SKIP_PIXELS,Tr),D.pixelStorei(D.UNPACK_SKIP_ROWS,Ui),D.pixelStorei(D.UNPACK_SKIP_IMAGES,Un),te===0&&L.generateMipmaps&&D.generateMipmap(Lt),Te.unbindTexture()},this.copyTextureToTexture3D=function(T,L,q=null,H=null,k=0){return $r('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(T,L,q,H,k)},this.initRenderTarget=function(T){ge.get(T).__webglFramebuffer===void 0&&Xe.setupRenderTarget(T)},this.initTexture=function(T){T.isCubeTexture?Xe.setTextureCube(T,0):T.isData3DTexture?Xe.setTexture3D(T,0):T.isDataArrayTexture||T.isCompressedArrayTexture?Xe.setTexture2DArray(T,0):Xe.setTexture2D(T,0),Te.unbindTexture()},this.resetState=function(){M=0,E=0,A=null,Te.reset(),de.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Cs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Qe._getDrawingBufferColorSpace(e),t.unpackColorSpace=Qe._getUnpackColorSpace()}}function NP(s){return s.length===2&&typeof s[1]=="function"}class ui{persistent;state;listeners;constructor({persistent:e=!1}={}){this.persistent=e,this.listeners={},this.state={}}on(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].includes(t)||this.listeners[e].push(t),this.persistent&&e in this.state&&t(this.state[e])}onceAll(e,t){const i={},a=[],r=()=>{if(e.every(n=>n in i)){a.forEach(o=>o());const n=e.map(o=>i[o]);t(n)}};e.forEach(n=>{const o=l=>{i[n]=l,r()};this.on(n,o),a.push(()=>this.off(n,o))})}once(e,t){const i=a=>{this.off(e,i),t(a)};this.on(e,i)}off(...e){if(NP(e))return this.unregisterSpecificCallback(...e);e.forEach(t=>{this.unregisterAllCallbacks(t)})}reset(){this.listeners={}}unregisterAllCallbacks(e){e in this.listeners&&(this.listeners[e]=[])}unregisterSpecificCallback(e,t){e in this.listeners&&(this.listeners[e]=this.listeners[e].filter(i=>i!==t))}emit(e,t){this.persistent&&(this.state[e]=t),e in this.listeners&&this.listeners[e].forEach(i=>i(t))}}function LP(){return!!self.window}function FP(){return LP()?{width:window.innerWidth,height:window.innerHeight,devicePixelRatio:window.devicePixelRatio}:null}function kP(s){const e=FP(),t=s;return e&&(t.width=e.width,t.height=e.height,t.devicePixelRatio=e.devicePixelRatio),t}class VP extends ui{static configureMainThreadEventBus(e){e.addEventHook("window","resize","core:Sizes",()=>({width:window.innerWidth,height:window.innerHeight,devicePixelRatio:window.devicePixelRatio}))}eventBus;#e;#t;#i;#s;constructor({eventBus:e,...t}){super(),this.eventBus=e,this.update(t),this.#s=i=>{this.update(kP(i)),this.emit("resize")},this.eventBus.subscribe("window","resize",this.#s,{listenerId:"core:Sizes"})}update({width:e,height:t,devicePixelRatio:i}){this.#e=e,this.#t=t,this.#i=Math.min(i,2)}get width(){return this.#e}get height(){return this.#t}get pixelRatio(){return this.#i}get resolution(){return[this.width*this.pixelRatio,this.height*this.pixelRatio]}get resolutionAsNumber(){const[e,t]=this.resolution;return e*t}get aspectRatio(){const[e,t]=this.resolution;return e/t}destroy(){this.eventBus.unsubscribe("window","resize",this.#s)}}class UP extends ui{#e;#t;#i;#s;#a;#r;constructor({inWorker:e=!1}){super(),this.#e=performance.now(),this.#t=this.#e,this.#i=0,this.#s=16,this.#a=!1,this.#r=e,e||this.tick()}get elapsedMs(){return this.#i}get elapsedSeconds(){return this.#i/1e3}get deltaMs(){return this.#s}get deltaSeconds(){return this.#s/1e3}tick(){if(this.#a)return;const e=performance.now();this.#s=e-this.#t,this.#t=e,this.#i=this.#t-this.#e,this.emit("tick"),this.#r||requestAnimationFrame(this.tick.bind(this))}destroy(){this.#a=!0}}function Js(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Q0(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Xi={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Pn={duration:.5,overwrite:!1,delay:0},T_,_i,Rt,os=1e8,Pt=1/os,Id=Math.PI*2,BP=Id/4,WP=0,$0=Math.sqrt,GP=Math.cos,qP=Math.sin,ci=function(e){return typeof e=="string"},Xt=function(e){return typeof e=="function"},oa=function(e){return typeof e=="number"},S_=function(e){return typeof e>"u"},Ns=function(e){return typeof e=="object"},Di=function(e){return e!==!1},E_=function(){return typeof window<"u"},Cl=function(e){return Xt(e)||ci(e)},eg=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},mi=Array.isArray,Cd=/(?:-?\.?\d|\.)+/gi,tg=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Zr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,xc=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ig=/[+-]=-?[.\d]+/,sg=/[^,'"\[\]\s]+/gi,HP=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Vt,Es,Dd,A_,Zi={},ih={},ag,rg=function(e){return(ih=bn(e,Zi))&&Li},M_=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},zo=function(e,t){return!t&&console.warn(e)},ng=function(e,t){return e&&(Zi[e]=t)&&ih&&(ih[e]=t)||Zi},Po=function(){return 0},XP={suppressEvents:!0,isStart:!0,kill:!1},Wl={suppressEvents:!0,kill:!1},jP={suppressEvents:!0},I_={},Da=[],Rd={},og,Gi={},pc={},Yf=30,Gl=[],C_="",D_=function(e){var t=e[0],i,a;if(Ns(t)||Xt(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(a=Gl.length;a--&&!Gl[a].targetTest(t););i=Gl[a]}for(a=e.length;a--;)e[a]&&(e[a]._gsap||(e[a]._gsap=new Cg(e[a],i)))||e.splice(a,1);return e},dr=function(e){return e._gsap||D_(ls(e))[0]._gsap},lg=function(e,t,i){return(i=e[t])&&Xt(i)?e[t]():S_(i)&&e.getAttribute&&e.getAttribute(t)||i},Ri=function(e,t){return(e=e.split(",")).forEach(t)||e},Jt=function(e){return Math.round(e*1e5)/1e5||0},Qt=function(e){return Math.round(e*1e7)/1e7||0},tn=function(e,t){var i=t.charAt(0),a=parseFloat(t.substr(2));return e=parseFloat(e),i==="+"?e+a:i==="-"?e-a:i==="*"?e*a:e/a},ZP=function(e,t){for(var i=t.length,a=0;e.indexOf(t[a])<0&&++a<i;);return a<i},sh=function(){var e=Da.length,t=Da.slice(0),i,a;for(Rd={},Da.length=0,i=0;i<e;i++)a=t[i],a&&a._lazy&&(a.render(a._lazy[0],a._lazy[1],!0)._lazy=0)},R_=function(e){return!!(e._initted||e._startAt||e.add)},hg=function(e,t,i,a){Da.length&&!_i&&sh(),e.render(t,i,!!(_i&&t<0&&R_(e))),Da.length&&!_i&&sh()},cg=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(sg).length<2?t:ci(e)?e.trim():e},dg=function(e){return e},Ji=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},JP=function(e){return function(t,i){for(var a in i)a in t||a==="duration"&&e||a==="ease"||(t[a]=i[a])}},bn=function(e,t){for(var i in t)e[i]=t[i];return e},Qf=function s(e,t){for(var i in t)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=Ns(t[i])?s(e[i]||(e[i]={}),t[i]):t[i]);return e},ah=function(e,t){var i={},a;for(a in e)a in t||(i[a]=e[a]);return i},co=function(e){var t=e.parent||Vt,i=e.keyframes?JP(mi(e.keyframes)):Ji;if(Di(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},KP=function(e,t){for(var i=e.length,a=i===t.length;a&&i--&&e[i]===t[i];);return i<0},_g=function(e,t,i,a,r){var n=e[a],o;if(r)for(o=t[r];n&&n[r]>o;)n=n._prev;return n?(t._next=n._next,n._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[a]=t,t._prev=n,t.parent=t._dp=e,t},mh=function(e,t,i,a){i===void 0&&(i="_first"),a===void 0&&(a="_last");var r=t._prev,n=t._next;r?r._next=n:e[i]===t&&(e[i]=n),n?n._prev=r:e[a]===t&&(e[a]=r),t._next=t._prev=t.parent=null},La=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},_r=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},YP=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Od=function(e,t,i,a){return e._startAt&&(_i?e._startAt.revert(Wl):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,a))},QP=function s(e){return!e||e._ts&&s(e.parent)},$f=function(e){return e._repeat?Tn(e._tTime,e=e.duration()+e._rDelay)*e:0},Tn=function(e,t){var i=Math.floor(e=Qt(e/t));return e&&i===e?i-1:i},rh=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},yh=function(e){return e._end=Qt(e._start+(e._tDur/Math.abs(e._ts||e._rts||Pt)||0))},wh=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=Qt(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),yh(e),i._dirty||_r(i,e)),e},ug=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=rh(e.rawTime(),t),(!t._dur||Bo(0,t.totalDuration(),i)-t._tTime>Pt)&&t.render(i,!0)),_r(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Pt}},Is=function(e,t,i,a){return t.parent&&La(t),t._start=Qt((oa(i)?i:i||e!==Vt?is(e,i,t):e._time)+t._delay),t._end=Qt(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),_g(e,t,"_first","_last",e._sort?"_start":0),Nd(t)||(e._recent=t),a||ug(e,t),e._ts<0&&wh(e,e._tTime),e},fg=function(e,t){return(Zi.ScrollTrigger||M_("scrollTrigger",t))&&Zi.ScrollTrigger.create(t,e)},vg=function(e,t,i,a,r){if(N_(e,t,r),!e._initted)return 1;if(!i&&e._pt&&!_i&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&og!==qi.frame)return Da.push(e),e._lazy=[r,a],1},$P=function s(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||s(t))},Nd=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},e4=function(e,t,i,a){var r=e.ratio,n=t<0||!t&&(!e._start&&$P(e)&&!(!e._initted&&Nd(e))||(e._ts<0||e._dp._ts<0)&&!Nd(e))?0:1,o=e._rDelay,l=0,h,c,d;if(o&&e._repeat&&(l=Bo(0,e._tDur,t),c=Tn(l,o),e._yoyo&&c&1&&(n=1-n),c!==Tn(e._tTime,o)&&(r=1-n,e.vars.repeatRefresh&&e._initted&&e.invalidate())),n!==r||_i||a||e._zTime===Pt||!t&&e._zTime){if(!e._initted&&vg(e,t,a,i,l))return;for(d=e._zTime,e._zTime=t||(i?Pt:0),i||(i=t&&!d),e.ratio=n,e._from&&(n=1-n),e._time=0,e._tTime=l,h=e._pt;h;)h.r(n,h.d),h=h._next;t<0&&Od(e,t,i,!0),e._onUpdate&&!i&&Hi(e,"onUpdate"),l&&e._repeat&&!i&&e.parent&&Hi(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===n&&(n&&La(e,1),!i&&!_i&&(Hi(e,n?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},t4=function(e,t,i){var a;if(i>t)for(a=e._first;a&&a._start<=i;){if(a.data==="isPause"&&a._start>t)return a;a=a._next}else for(a=e._last;a&&a._start>=i;){if(a.data==="isPause"&&a._start<t)return a;a=a._prev}},Sn=function(e,t,i,a){var r=e._repeat,n=Qt(t)||0,o=e._tTime/e._tDur;return o&&!a&&(e._time*=n/e._dur),e._dur=n,e._tDur=r?r<0?1e10:Qt(n*(r+1)+e._rDelay*r):n,o>0&&!a&&wh(e,e._tTime=e._tDur*o),e.parent&&yh(e),i||_r(e.parent,e),e},ev=function(e){return e instanceof Pi?_r(e):Sn(e,e._dur)},i4={_start:0,endTime:Po,totalDuration:Po},is=function s(e,t,i){var a=e.labels,r=e._recent||i4,n=e.duration()>=os?r.endTime(!1):e._dur,o,l,h;return ci(t)&&(isNaN(t)||t in a)?(l=t.charAt(0),h=t.substr(-1)==="%",o=t.indexOf("="),l==="<"||l===">"?(o>=0&&(t=t.replace(/=/,"")),(l==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(h?(o<0?r:i).totalDuration()/100:1)):o<0?(t in a||(a[t]=n),a[t]):(l=parseFloat(t.charAt(o-1)+t.substr(o+1)),h&&i&&(l=l/100*(mi(i)?i[0]:i).totalDuration()),o>1?s(e,t.substr(0,o-1),i)+l:n+l)):t==null?n:+t},_o=function(e,t,i){var a=oa(t[1]),r=(a?2:1)+(e<2?0:1),n=t[r],o,l;if(a&&(n.duration=t[1]),n.parent=i,e){for(o=n,l=i;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=Di(l.vars.inherit)&&l.parent;n.immediateRender=Di(o.immediateRender),e<2?n.runBackwards=1:n.startAt=t[r-1]}return new Yt(t[0],n,t[r+1])},Ba=function(e,t){return e||e===0?t(e):t},Bo=function(e,t,i){return i<e?e:i>t?t:i},pi=function(e,t){return!ci(e)||!(t=HP.exec(e))?"":t[1]},s4=function(e,t,i){return Ba(i,function(a){return Bo(e,t,a)})},Ld=[].slice,gg=function(e,t){return e&&Ns(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Ns(e[0]))&&!e.nodeType&&e!==Es},a4=function(e,t,i){return i===void 0&&(i=[]),e.forEach(function(a){var r;return ci(a)&&!t||gg(a,1)?(r=i).push.apply(r,ls(a)):i.push(a)})||i},ls=function(e,t,i){return Rt&&!t&&Rt.selector?Rt.selector(e):ci(e)&&!i&&(Dd||!En())?Ld.call((t||A_).querySelectorAll(e),0):mi(e)?a4(e,i):gg(e)?Ld.call(e,0):e?[e]:[]},Fd=function(e){return e=ls(e)[0]||zo("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return ls(t,i.querySelectorAll?i:i===e?zo("Invalid scope")||A_.createElement("div"):e)}},xg=function(e){return e.sort(function(){return .5-Math.random()})},pg=function(e){if(Xt(e))return e;var t=Ns(e)?e:{each:e},i=ur(t.ease),a=t.from||0,r=parseFloat(t.base)||0,n={},o=a>0&&a<1,l=isNaN(a)||o,h=t.axis,c=a,d=a;return ci(a)?c=d={center:.5,edges:.5,end:1}[a]||0:!o&&l&&(c=a[0],d=a[1]),function(_,u,x){var g=(x||t).length,v=n[g],f,y,w,p,b,M,E,A,m;if(!v){if(m=t.grid==="auto"?0:(t.grid||[1,os])[1],!m){for(E=-os;E<(E=x[m++].getBoundingClientRect().left)&&m<g;);m<g&&m--}for(v=n[g]=[],f=l?Math.min(m,g)*c-.5:a%m,y=m===os?0:l?g*d/m-.5:a/m|0,E=0,A=os,M=0;M<g;M++)w=M%m-f,p=y-(M/m|0),v[M]=b=h?Math.abs(h==="y"?p:w):$0(w*w+p*p),b>E&&(E=b),b<A&&(A=b);a==="random"&&xg(v),v.max=E-A,v.min=A,v.v=g=(parseFloat(t.amount)||parseFloat(t.each)*(m>g?g-1:h?h==="y"?g/m:m:Math.max(m,g/m))||0)*(a==="edges"?-1:1),v.b=g<0?r-g:r,v.u=pi(t.amount||t.each)||0,i=i&&g<0?Ag(i):i}return g=(v[_]-v.min)/v.max||0,Qt(v.b+(i?i(g):g)*v.v)+v.u}},kd=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var a=Qt(Math.round(parseFloat(i)/e)*e*t);return(a-a%1)/t+(oa(i)?0:pi(i))}},mg=function(e,t){var i=mi(e),a,r;return!i&&Ns(e)&&(a=i=e.radius||os,e.values?(e=ls(e.values),(r=!oa(e[0]))&&(a*=a)):e=kd(e.increment)),Ba(t,i?Xt(e)?function(n){return r=e(n),Math.abs(r-n)<=a?r:n}:function(n){for(var o=parseFloat(r?n.x:n),l=parseFloat(r?n.y:0),h=os,c=0,d=e.length,_,u;d--;)r?(_=e[d].x-o,u=e[d].y-l,_=_*_+u*u):_=Math.abs(e[d]-o),_<h&&(h=_,c=d);return c=!a||h<=a?e[c]:n,r||c===n||oa(n)?c:c+pi(n)}:kd(e))},yg=function(e,t,i,a){return Ba(mi(e)?!t:i===!0?!!(i=0):!a,function(){return mi(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(a=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+i*.99))/i)*i*a)/a})},r4=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(a){return t.reduce(function(r,n){return n(r)},a)}},n4=function(e,t){return function(i){return e(parseFloat(i))+(t||pi(i))}},o4=function(e,t,i){return zg(e,t,0,1,i)},wg=function(e,t,i){return Ba(i,function(a){return e[~~t(a)]})},l4=function s(e,t,i){var a=t-e;return mi(e)?wg(e,s(0,e.length),t):Ba(i,function(r){return(a+(r-e)%a)%a+e})},h4=function s(e,t,i){var a=t-e,r=a*2;return mi(e)?wg(e,s(0,e.length-1),t):Ba(i,function(n){return n=(r+(n-e)%r)%r||0,e+(n>a?r-n:n)})},bo=function(e){for(var t=0,i="",a,r,n,o;~(a=e.indexOf("random(",t));)n=e.indexOf(")",a),o=e.charAt(a+7)==="[",r=e.substr(a+7,n-a-7).match(o?sg:Cd),i+=e.substr(t,a-t)+yg(o?r:+r[0],o?0:+r[1],+r[2]||1e-5),t=n+1;return i+e.substr(t,e.length-t)},zg=function(e,t,i,a,r){var n=t-e,o=a-i;return Ba(r,function(l){return i+((l-e)/n*o||0)})},c4=function s(e,t,i,a){var r=isNaN(e+t)?0:function(u){return(1-u)*e+u*t};if(!r){var n=ci(e),o={},l,h,c,d,_;if(i===!0&&(a=1)&&(i=null),n)e={p:e},t={p:t};else if(mi(e)&&!mi(t)){for(c=[],d=e.length,_=d-2,h=1;h<d;h++)c.push(s(e[h-1],e[h]));d--,r=function(x){x*=d;var g=Math.min(_,~~x);return c[g](x-g)},i=t}else a||(e=bn(mi(e)?[]:{},e));if(!c){for(l in t)O_.call(o,e,l,"get",t[l]);r=function(x){return k_(x,o)||(n?e.p:e)}}}return Ba(i,r)},tv=function(e,t,i){var a=e.labels,r=os,n,o,l;for(n in a)o=a[n]-t,o<0==!!i&&o&&r>(o=Math.abs(o))&&(l=n,r=o);return l},Hi=function(e,t,i){var a=e.vars,r=a[t],n=Rt,o=e._ctx,l,h,c;if(r)return l=a[t+"Params"],h=a.callbackScope||e,i&&Da.length&&sh(),o&&(Rt=o),c=l?r.apply(h,l):r.call(h),Rt=n,c},ro=function(e){return La(e),e.scrollTrigger&&e.scrollTrigger.kill(!!_i),e.progress()<1&&Hi(e,"onInterrupt"),e},Jr,Pg=[],bg=function(e){if(e)if(e=!e.name&&e.default||e,E_()||e.headless){var t=e.name,i=Xt(e),a=t&&!i&&e.init?function(){this._props=[]}:e,r={init:Po,render:k_,add:O_,kill:S4,modifier:T4,rawVars:0},n={targetTest:0,get:0,getSetter:F_,aliases:{},register:0};if(En(),e!==a){if(Gi[t])return;Ji(a,Ji(ah(e,r),n)),bn(a.prototype,bn(r,ah(e,n))),Gi[a.prop=t]=a,e.targetTest&&(Gl.push(a),I_[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}ng(t,a),e.register&&e.register(Li,a,Oi)}else Pg.push(e)},zt=255,no={aqua:[0,zt,zt],lime:[0,zt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,zt],navy:[0,0,128],white:[zt,zt,zt],olive:[128,128,0],yellow:[zt,zt,0],orange:[zt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[zt,0,0],pink:[zt,192,203],cyan:[0,zt,zt],transparent:[zt,zt,zt,0]},mc=function(e,t,i){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(i-t)*e*6:e<.5?i:e*3<2?t+(i-t)*(2/3-e)*6:t)*zt+.5|0},Tg=function(e,t,i){var a=e?oa(e)?[e>>16,e>>8&zt,e&zt]:0:no.black,r,n,o,l,h,c,d,_,u,x;if(!a){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),no[e])a=no[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),n=e.charAt(2),o=e.charAt(3),e="#"+r+r+n+n+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return a=parseInt(e.substr(1,6),16),[a>>16,a>>8&zt,a&zt,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),a=[e>>16,e>>8&zt,e&zt]}else if(e.substr(0,3)==="hsl"){if(a=x=e.match(Cd),!t)l=+a[0]%360/360,h=+a[1]/100,c=+a[2]/100,n=c<=.5?c*(h+1):c+h-c*h,r=c*2-n,a.length>3&&(a[3]*=1),a[0]=mc(l+1/3,r,n),a[1]=mc(l,r,n),a[2]=mc(l-1/3,r,n);else if(~e.indexOf("="))return a=e.match(tg),i&&a.length<4&&(a[3]=1),a}else a=e.match(Cd)||no.transparent;a=a.map(Number)}return t&&!x&&(r=a[0]/zt,n=a[1]/zt,o=a[2]/zt,d=Math.max(r,n,o),_=Math.min(r,n,o),c=(d+_)/2,d===_?l=h=0:(u=d-_,h=c>.5?u/(2-d-_):u/(d+_),l=d===r?(n-o)/u+(n<o?6:0):d===n?(o-r)/u+2:(r-n)/u+4,l*=60),a[0]=~~(l+.5),a[1]=~~(h*100+.5),a[2]=~~(c*100+.5)),i&&a.length<4&&(a[3]=1),a},Sg=function(e){var t=[],i=[],a=-1;return e.split(Ra).forEach(function(r){var n=r.match(Zr)||[];t.push.apply(t,n),i.push(a+=n.length+1)}),t.c=i,t},iv=function(e,t,i){var a="",r=(e+a).match(Ra),n=t?"hsla(":"rgba(",o=0,l,h,c,d;if(!r)return e;if(r=r.map(function(_){return(_=Tg(_,t,1))&&n+(t?_[0]+","+_[1]+"%,"+_[2]+"%,"+_[3]:_.join(","))+")"}),i&&(c=Sg(e),l=i.c,l.join(a)!==c.c.join(a)))for(h=e.replace(Ra,"1").split(Zr),d=h.length-1;o<d;o++)a+=h[o]+(~l.indexOf(o)?r.shift()||n+"0,0,0,0)":(c.length?c:r.length?r:i).shift());if(!h)for(h=e.split(Ra),d=h.length-1;o<d;o++)a+=h[o]+r[o];return a+h[d]},Ra=(function(){var s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in no)s+="|"+e+"\\b";return new RegExp(s+")","gi")})(),d4=/hsl[a]?\(/,Eg=function(e){var t=e.join(" "),i;if(Ra.lastIndex=0,Ra.test(t))return i=d4.test(t),e[1]=iv(e[1],i),e[0]=iv(e[0],i,Sg(e[1])),!0},To,qi=(function(){var s=Date.now,e=500,t=33,i=s(),a=i,r=1e3/240,n=r,o=[],l,h,c,d,_,u,x=function g(v){var f=s()-a,y=v===!0,w,p,b,M;if((f>e||f<0)&&(i+=f-t),a+=f,b=a-i,w=b-n,(w>0||y)&&(M=++d.frame,_=b-d.time*1e3,d.time=b=b/1e3,n+=w+(w>=r?4:r-w),p=1),y||(l=h(g)),p)for(u=0;u<o.length;u++)o[u](b,_,M,v)};return d={time:0,frame:0,tick:function(){x(!0)},deltaRatio:function(v){return _/(1e3/(v||60))},wake:function(){ag&&(!Dd&&E_()&&(Es=Dd=window,A_=Es.document||{},Zi.gsap=Li,(Es.gsapVersions||(Es.gsapVersions=[])).push(Li.version),rg(ih||Es.GreenSockGlobals||!Es.gsap&&Es||{}),Pg.forEach(bg)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&d.sleep(),h=c||function(v){return setTimeout(v,n-d.time*1e3+1|0)},To=1,x(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(l),To=0,h=Po},lagSmoothing:function(v,f){e=v||1/0,t=Math.min(f||33,e)},fps:function(v){r=1e3/(v||240),n=d.time*1e3+r},add:function(v,f,y){var w=f?function(p,b,M,E){v(p,b,M,E),d.remove(w)}:v;return d.remove(v),o[y?"unshift":"push"](w),En(),w},remove:function(v,f){~(f=o.indexOf(v))&&o.splice(f,1)&&u>=f&&u--},_listeners:o},d})(),En=function(){return!To&&qi.wake()},$e={},_4=/^[\d.\-M][\d.\-,\s]/,u4=/["']/g,f4=function(e){for(var t={},i=e.substr(1,e.length-3).split(":"),a=i[0],r=1,n=i.length,o,l,h;r<n;r++)l=i[r],o=r!==n-1?l.lastIndexOf(","):l.length,h=l.substr(0,o),t[a]=isNaN(h)?h.replace(u4,"").trim():+h,a=l.substr(o+1).trim();return t},v4=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),a=e.indexOf("(",t);return e.substring(t,~a&&a<i?e.indexOf(")",i+1):i)},g4=function(e){var t=(e+"").split("("),i=$e[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[f4(t[1])]:v4(e).split(",").map(cg)):$e._CE&&_4.test(e)?$e._CE("",e):i},Ag=function(e){return function(t){return 1-e(1-t)}},Mg=function s(e,t){for(var i=e._first,a;i;)i instanceof Pi?s(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?s(i.timeline,t):(a=i._ease,i._ease=i._yEase,i._yEase=a,i._yoyo=t)),i=i._next},ur=function(e,t){return e&&(Xt(e)?e:$e[e]||g4(e))||t},zr=function(e,t,i,a){i===void 0&&(i=function(l){return 1-t(1-l)}),a===void 0&&(a=function(l){return l<.5?t(l*2)/2:1-t((1-l)*2)/2});var r={easeIn:t,easeOut:i,easeInOut:a},n;return Ri(e,function(o){$e[o]=Zi[o]=r,$e[n=o.toLowerCase()]=i;for(var l in r)$e[n+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=$e[o+"."+l]=r[l]}),r},Ig=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},yc=function s(e,t,i){var a=t>=1?t:1,r=(i||(e?.3:.45))/(t<1?t:1),n=r/Id*(Math.asin(1/a)||0),o=function(c){return c===1?1:a*Math.pow(2,-10*c)*qP((c-n)*r)+1},l=e==="out"?o:e==="in"?function(h){return 1-o(1-h)}:Ig(o);return r=Id/r,l.config=function(h,c){return s(e,h,c)},l},wc=function s(e,t){t===void 0&&(t=1.70158);var i=function(n){return n?--n*n*((t+1)*n+t)+1:0},a=e==="out"?i:e==="in"?function(r){return 1-i(1-r)}:Ig(i);return a.config=function(r){return s(e,r)},a};Ri("Linear,Quad,Cubic,Quart,Quint,Strong",function(s,e){var t=e<5?e+1:e;zr(s+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(i*2,t)/2:1-Math.pow((1-i)*2,t)/2})});$e.Linear.easeNone=$e.none=$e.Linear.easeIn;zr("Elastic",yc("in"),yc("out"),yc());(function(s,e){var t=1/e,i=2*t,a=2.5*t,r=function(o){return o<t?s*o*o:o<i?s*Math.pow(o-1.5/e,2)+.75:o<a?s*(o-=2.25/e)*o+.9375:s*Math.pow(o-2.625/e,2)+.984375};zr("Bounce",function(n){return 1-r(1-n)},r)})(7.5625,2.75);zr("Expo",function(s){return Math.pow(2,10*(s-1))*s+s*s*s*s*s*s*(1-s)});zr("Circ",function(s){return-($0(1-s*s)-1)});zr("Sine",function(s){return s===1?1:-GP(s*BP)+1});zr("Back",wc("in"),wc("out"),wc());$e.SteppedEase=$e.steps=Zi.SteppedEase={config:function(e,t){e===void 0&&(e=1);var i=1/e,a=e+(t?0:1),r=t?1:0,n=1-Pt;return function(o){return((a*Bo(0,n,o)|0)+r)*i}}};Pn.ease=$e["quad.out"];Ri("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(s){return C_+=s+","+s+"Params,"});var Cg=function(e,t){this.id=WP++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:lg,this.set=t?t.getSetter:F_},So=(function(){function s(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Sn(this,+t.duration,1,1),this.data=t.data,Rt&&(this._ctx=Rt,Rt.data.push(this)),To||qi.wake()}var e=s.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Sn(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,a){if(En(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(wh(this,i),!r._dp||r.parent||ug(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Is(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!a||this._initted&&Math.abs(this._zTime)===Pt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),hg(this,i,a)),this},e.time=function(i,a){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+$f(this))%(this._dur+this._rDelay)||(i?this._dur:0),a):this._time},e.totalProgress=function(i,a){return arguments.length?this.totalTime(this.totalDuration()*i,a):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+$f(this),a):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,a){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,a):this._repeat?Tn(this._tTime,r)+1:1},e.timeScale=function(i,a){if(!arguments.length)return this._rts===-Pt?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?rh(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Pt?0:this._rts,this.totalTime(Bo(-Math.abs(this._delay),this.totalDuration(),r),a!==!1),yh(this),YP(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(En(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Pt&&(this._tTime-=Pt)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var a=this.parent||this._dp;return a&&(a._sort||!this.parent)&&Is(a,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Di(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var a=this.parent||this._dp;return a?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?rh(a.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=jP);var a=_i;return _i=i,R_(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),_i=a,this},e.globalTime=function(i){for(var a=this,r=arguments.length?i:a.rawTime();a;)r=a._start+r/(Math.abs(a._ts)||1),a=a._dp;return!this.parent&&this._sat?this._sat.globalTime(i):r},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,ev(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var a=this._time;return this._rDelay=i,ev(this),a?this.time(a):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,a){return this.totalTime(is(this,i),Di(a))},e.restart=function(i,a){return this.play().totalTime(i?-this._delay:0,Di(a)),this._dur||(this._zTime=-Pt),this},e.play=function(i,a){return i!=null&&this.seek(i,a),this.reversed(!1).paused(!1)},e.reverse=function(i,a){return i!=null&&this.seek(i||this.totalDuration(),a),this.reversed(!0).paused(!1)},e.pause=function(i,a){return i!=null&&this.seek(i,a),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Pt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Pt,this},e.isActive=function(){var i=this.parent||this._dp,a=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=a&&r<this.endTime(!0)-Pt)},e.eventCallback=function(i,a,r){var n=this.vars;return arguments.length>1?(a?(n[i]=a,r&&(n[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=a)):delete n[i],this):n[i]},e.then=function(i){var a=this;return new Promise(function(r){var n=Xt(i)?i:dg,o=function(){var h=a.then;a.then=null,Xt(n)&&(n=n(a))&&(n.then||n===a)&&(a.then=h),r(n),a.then=h};a._initted&&a.totalProgress()===1&&a._ts>=0||!a._tTime&&a._ts<0?o():a._prom=o})},e.kill=function(){ro(this)},s})();Ji(So.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Pt,_prom:0,_ps:!1,_rts:1});var Pi=(function(s){Q0(e,s);function e(i,a){var r;return i===void 0&&(i={}),r=s.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=Di(i.sortChildren),Vt&&Is(i.parent||Vt,Js(r),a),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&fg(Js(r),i.scrollTrigger),r}var t=e.prototype;return t.to=function(a,r,n){return _o(0,arguments,this),this},t.from=function(a,r,n){return _o(1,arguments,this),this},t.fromTo=function(a,r,n,o){return _o(2,arguments,this),this},t.set=function(a,r,n){return r.duration=0,r.parent=this,co(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new Yt(a,r,is(this,n),1),this},t.call=function(a,r,n){return Is(this,Yt.delayedCall(0,a,r),n)},t.staggerTo=function(a,r,n,o,l,h,c){return n.duration=r,n.stagger=n.stagger||o,n.onComplete=h,n.onCompleteParams=c,n.parent=this,new Yt(a,n,is(this,l)),this},t.staggerFrom=function(a,r,n,o,l,h,c){return n.runBackwards=1,co(n).immediateRender=Di(n.immediateRender),this.staggerTo(a,r,n,o,l,h,c)},t.staggerFromTo=function(a,r,n,o,l,h,c,d){return o.startAt=n,co(o).immediateRender=Di(o.immediateRender),this.staggerTo(a,r,o,l,h,c,d)},t.render=function(a,r,n){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,h=this._dur,c=a<=0?0:Qt(a),d=this._zTime<0!=a<0&&(this._initted||!h),_,u,x,g,v,f,y,w,p,b,M,E;if(this!==Vt&&c>l&&a>=0&&(c=l),c!==this._tTime||n||d){if(o!==this._time&&h&&(c+=this._time-o,a+=this._time-o),_=c,p=this._start,w=this._ts,f=!w,d&&(h||(o=this._zTime),(a||!r)&&(this._zTime=a)),this._repeat){if(M=this._yoyo,v=h+this._rDelay,this._repeat<-1&&a<0)return this.totalTime(v*100+a,r,n);if(_=Qt(c%v),c===l?(g=this._repeat,_=h):(b=Qt(c/v),g=~~b,g&&g===b&&(_=h,g--),_>h&&(_=h)),b=Tn(this._tTime,v),!o&&this._tTime&&b!==g&&this._tTime-b*v-this._dur<=0&&(b=g),M&&g&1&&(_=h-_,E=1),g!==b&&!this._lock){var A=M&&b&1,m=A===(M&&g&1);if(g<b&&(A=!A),o=A?0:c%h?h:c,this._lock=1,this.render(o||(E?0:Qt(g*v)),r,!h)._lock=0,this._tTime=c,!r&&this.parent&&Hi(this,"onRepeat"),this.vars.repeatRefresh&&!E&&(this.invalidate()._lock=1),o&&o!==this._time||f!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,l=this._tDur,m&&(this._lock=2,o=A?h:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!E&&this.invalidate()),this._lock=0,!this._ts&&!f)return this;Mg(this,E)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=t4(this,Qt(o),Qt(_)),y&&(c-=_-(_=y._start))),this._tTime=c,this._time=_,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=a,o=0),!o&&c&&!r&&!b&&(Hi(this,"onStart"),this._tTime!==c))return this;if(_>=o&&a>=0)for(u=this._first;u;){if(x=u._next,(u._act||_>=u._start)&&u._ts&&y!==u){if(u.parent!==this)return this.render(a,r,n);if(u.render(u._ts>0?(_-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(_-u._start)*u._ts,r,n),_!==this._time||!this._ts&&!f){y=0,x&&(c+=this._zTime=-Pt);break}}u=x}else{u=this._last;for(var P=a<0?a:_;u;){if(x=u._prev,(u._act||P<=u._end)&&u._ts&&y!==u){if(u.parent!==this)return this.render(a,r,n);if(u.render(u._ts>0?(P-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(P-u._start)*u._ts,r,n||_i&&R_(u)),_!==this._time||!this._ts&&!f){y=0,x&&(c+=this._zTime=P?-Pt:Pt);break}}u=x}}if(y&&!r&&(this.pause(),y.render(_>=o?0:-Pt)._zTime=_>=o?1:-1,this._ts))return this._start=p,yh(this),this.render(a,r,n);this._onUpdate&&!r&&Hi(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&o)&&(p===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((a||!h)&&(c===l&&this._ts>0||!c&&this._ts<0)&&La(this,1),!r&&!(a<0&&!o)&&(c||o||!l)&&(Hi(this,c===l&&a>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(a,r){var n=this;if(oa(r)||(r=is(this,r,a)),!(a instanceof So)){if(mi(a))return a.forEach(function(o){return n.add(o,r)}),this;if(ci(a))return this.addLabel(a,r);if(Xt(a))a=Yt.delayedCall(0,a);else return this}return this!==a?Is(this,a,r):this},t.getChildren=function(a,r,n,o){a===void 0&&(a=!0),r===void 0&&(r=!0),n===void 0&&(n=!0),o===void 0&&(o=-os);for(var l=[],h=this._first;h;)h._start>=o&&(h instanceof Yt?r&&l.push(h):(n&&l.push(h),a&&l.push.apply(l,h.getChildren(!0,r,n)))),h=h._next;return l},t.getById=function(a){for(var r=this.getChildren(1,1,1),n=r.length;n--;)if(r[n].vars.id===a)return r[n]},t.remove=function(a){return ci(a)?this.removeLabel(a):Xt(a)?this.killTweensOf(a):(a.parent===this&&mh(this,a),a===this._recent&&(this._recent=this._last),_r(this))},t.totalTime=function(a,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Qt(qi.time-(this._ts>0?a/this._ts:(this.totalDuration()-a)/-this._ts))),s.prototype.totalTime.call(this,a,r),this._forcing=0,this):this._tTime},t.addLabel=function(a,r){return this.labels[a]=is(this,r),this},t.removeLabel=function(a){return delete this.labels[a],this},t.addPause=function(a,r,n){var o=Yt.delayedCall(0,r||Po,n);return o.data="isPause",this._hasPause=1,Is(this,o,is(this,a))},t.removePause=function(a){var r=this._first;for(a=is(this,a);r;)r._start===a&&r.data==="isPause"&&La(r),r=r._next},t.killTweensOf=function(a,r,n){for(var o=this.getTweensOf(a,n),l=o.length;l--;)Aa!==o[l]&&o[l].kill(a,r);return this},t.getTweensOf=function(a,r){for(var n=[],o=ls(a),l=this._first,h=oa(r),c;l;)l instanceof Yt?ZP(l._targets,o)&&(h?(!Aa||l._initted&&l._ts)&&l.globalTime(0)<=r&&l.globalTime(l.totalDuration())>r:!r||l.isActive())&&n.push(l):(c=l.getTweensOf(o,r)).length&&n.push.apply(n,c),l=l._next;return n},t.tweenTo=function(a,r){r=r||{};var n=this,o=is(n,a),l=r,h=l.startAt,c=l.onStart,d=l.onStartParams,_=l.immediateRender,u,x=Yt.to(n,Ji({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:r.duration||Math.abs((o-(h&&"time"in h?h.time:n._time))/n.timeScale())||Pt,onStart:function(){if(n.pause(),!u){var v=r.duration||Math.abs((o-(h&&"time"in h?h.time:n._time))/n.timeScale());x._dur!==v&&Sn(x,v,0,1).render(x._time,!0,!0),u=1}c&&c.apply(x,d||[])}},r));return _?x.render(0):x},t.tweenFromTo=function(a,r,n){return this.tweenTo(r,Ji({startAt:{time:is(this,a)}},n))},t.recent=function(){return this._recent},t.nextLabel=function(a){return a===void 0&&(a=this._time),tv(this,is(this,a))},t.previousLabel=function(a){return a===void 0&&(a=this._time),tv(this,is(this,a),1)},t.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.previousLabel(this._time+Pt)},t.shiftChildren=function(a,r,n){n===void 0&&(n=0);for(var o=this._first,l=this.labels,h;o;)o._start>=n&&(o._start+=a,o._end+=a),o=o._next;if(r)for(h in l)l[h]>=n&&(l[h]+=a);return _r(this)},t.invalidate=function(a){var r=this._first;for(this._lock=0;r;)r.invalidate(a),r=r._next;return s.prototype.invalidate.call(this,a)},t.clear=function(a){a===void 0&&(a=!0);for(var r=this._first,n;r;)n=r._next,this.remove(r),r=n;return this._dp&&(this._time=this._tTime=this._pTime=0),a&&(this.labels={}),_r(this)},t.totalDuration=function(a){var r=0,n=this,o=n._last,l=os,h,c,d;if(arguments.length)return n.timeScale((n._repeat<0?n.duration():n.totalDuration())/(n.reversed()?-a:a));if(n._dirty){for(d=n.parent;o;)h=o._prev,o._dirty&&o.totalDuration(),c=o._start,c>l&&n._sort&&o._ts&&!n._lock?(n._lock=1,Is(n,o,c-o._delay,1)._lock=0):l=c,c<0&&o._ts&&(r-=c,(!d&&!n._dp||d&&d.smoothChildTiming)&&(n._start+=c/n._ts,n._time-=c,n._tTime-=c),n.shiftChildren(-c,!1,-1/0),l=0),o._end>r&&o._ts&&(r=o._end),o=h;Sn(n,n===Vt&&n._time>r?n._time:r,1,1),n._dirty=0}return n._tDur},e.updateRoot=function(a){if(Vt._ts&&(hg(Vt,rh(a,Vt)),og=qi.frame),qi.frame>=Yf){Yf+=Xi.autoSleep||120;var r=Vt._first;if((!r||!r._ts)&&Xi.autoSleep&&qi._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||qi.sleep()}}},e})(So);Ji(Pi.prototype,{_lock:0,_hasPause:0,_forcing:0});var x4=function(e,t,i,a,r,n,o){var l=new Oi(this._pt,e,t,0,1,Fg,null,r),h=0,c=0,d,_,u,x,g,v,f,y;for(l.b=i,l.e=a,i+="",a+="",(f=~a.indexOf("random("))&&(a=bo(a)),n&&(y=[i,a],n(y,e,t),i=y[0],a=y[1]),_=i.match(xc)||[];d=xc.exec(a);)x=d[0],g=a.substring(h,d.index),u?u=(u+1)%5:g.substr(-5)==="rgba("&&(u=1),x!==_[c++]&&(v=parseFloat(_[c-1])||0,l._pt={_next:l._pt,p:g||c===1?g:",",s:v,c:x.charAt(1)==="="?tn(v,x)-v:parseFloat(x)-v,m:u&&u<4?Math.round:0},h=xc.lastIndex);return l.c=h<a.length?a.substring(h,a.length):"",l.fp=o,(ig.test(a)||f)&&(l.e=0),this._pt=l,l},O_=function(e,t,i,a,r,n,o,l,h,c){Xt(a)&&(a=a(r||0,e,n));var d=e[t],_=i!=="get"?i:Xt(d)?h?e[t.indexOf("set")||!Xt(e["get"+t.substr(3)])?t:"get"+t.substr(3)](h):e[t]():d,u=Xt(d)?h?z4:Ng:L_,x;if(ci(a)&&(~a.indexOf("random(")&&(a=bo(a)),a.charAt(1)==="="&&(x=tn(_,a)+(pi(_)||0),(x||x===0)&&(a=x))),!c||_!==a||Vd)return!isNaN(_*a)&&a!==""?(x=new Oi(this._pt,e,t,+_||0,a-(_||0),typeof d=="boolean"?b4:Lg,0,u),h&&(x.fp=h),o&&x.modifier(o,this,e),this._pt=x):(!d&&!(t in e)&&M_(t,a),x4.call(this,e,t,_,a,u,l||Xi.stringFilter,h))},p4=function(e,t,i,a,r){if(Xt(e)&&(e=uo(e,r,t,i,a)),!Ns(e)||e.style&&e.nodeType||mi(e)||eg(e))return ci(e)?uo(e,r,t,i,a):e;var n={},o;for(o in e)n[o]=uo(e[o],r,t,i,a);return n},Dg=function(e,t,i,a,r,n){var o,l,h,c;if(Gi[e]&&(o=new Gi[e]).init(r,o.rawVars?t[e]:p4(t[e],a,r,n,i),i,a,n)!==!1&&(i._pt=l=new Oi(i._pt,r,e,0,1,o.render,o,0,o.priority),i!==Jr))for(h=i._ptLookup[i._targets.indexOf(r)],c=o._props.length;c--;)h[o._props[c]]=l;return o},Aa,Vd,N_=function s(e,t,i){var a=e.vars,r=a.ease,n=a.startAt,o=a.immediateRender,l=a.lazy,h=a.onUpdate,c=a.runBackwards,d=a.yoyoEase,_=a.keyframes,u=a.autoRevert,x=e._dur,g=e._startAt,v=e._targets,f=e.parent,y=f&&f.data==="nested"?f.vars.targets:v,w=e._overwrite==="auto"&&!T_,p=e.timeline,b,M,E,A,m,P,I,U,N,F,W,V,j;if(p&&(!_||!r)&&(r="none"),e._ease=ur(r,Pn.ease),e._yEase=d?Ag(ur(d===!0?r:d,Pn.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!p&&!!a.runBackwards,!p||_&&!a.stagger){if(U=v[0]?dr(v[0]).harness:0,V=U&&a[U.prop],b=ah(a,I_),g&&(g._zTime<0&&g.progress(1),t<0&&c&&o&&!u?g.render(-1,!0):g.revert(c&&x?Wl:XP),g._lazy=0),n){if(La(e._startAt=Yt.set(v,Ji({data:"isStart",overwrite:!1,parent:f,immediateRender:!0,lazy:!g&&Di(l),startAt:null,delay:0,onUpdate:h&&function(){return Hi(e,"onUpdate")},stagger:0},n))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(_i||!o&&!u)&&e._startAt.revert(Wl),o&&x&&t<=0&&i<=0){t&&(e._zTime=t);return}}else if(c&&x&&!g){if(t&&(o=!1),E=Ji({overwrite:!1,data:"isFromStart",lazy:o&&!g&&Di(l),immediateRender:o,stagger:0,parent:f},b),V&&(E[U.prop]=V),La(e._startAt=Yt.set(v,E)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(_i?e._startAt.revert(Wl):e._startAt.render(-1,!0)),e._zTime=t,!o)s(e._startAt,Pt,Pt);else if(!t)return}for(e._pt=e._ptCache=0,l=x&&Di(l)||l&&!x,M=0;M<v.length;M++){if(m=v[M],I=m._gsap||D_(v)[M]._gsap,e._ptLookup[M]=F={},Rd[I.id]&&Da.length&&sh(),W=y===v?M:y.indexOf(m),U&&(N=new U).init(m,V||b,e,W,y)!==!1&&(e._pt=A=new Oi(e._pt,m,N.name,0,1,N.render,N,0,N.priority),N._props.forEach(function(G){F[G]=A}),N.priority&&(P=1)),!U||V)for(E in b)Gi[E]&&(N=Dg(E,b,e,W,m,y))?N.priority&&(P=1):F[E]=A=O_.call(e,m,E,"get",b[E],W,y,0,a.stringFilter);e._op&&e._op[M]&&e.kill(m,e._op[M]),w&&e._pt&&(Aa=e,Vt.killTweensOf(m,F,e.globalTime(t)),j=!e.parent,Aa=0),e._pt&&l&&(Rd[I.id]=1)}P&&kg(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!j,_&&t<=0&&p.render(os,!0,!0)},m4=function(e,t,i,a,r,n,o,l){var h=(e._pt&&e._ptCache||(e._ptCache={}))[t],c,d,_,u;if(!h)for(h=e._ptCache[t]=[],_=e._ptLookup,u=e._targets.length;u--;){if(c=_[u][t],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==t&&c.fp!==t;)c=c._next;if(!c)return Vd=1,e.vars[t]="+=0",N_(e,o),Vd=0,l?zo(t+" not eligible for reset"):1;h.push(c)}for(u=h.length;u--;)d=h[u],c=d._pt||d,c.s=(a||a===0)&&!r?a:c.s+(a||0)+n*c.c,c.c=i-c.s,d.e&&(d.e=Jt(i)+pi(d.e)),d.b&&(d.b=c.s+pi(d.b))},y4=function(e,t){var i=e[0]?dr(e[0]).harness:0,a=i&&i.aliases,r,n,o,l;if(!a)return t;r=bn({},t);for(n in a)if(n in r)for(l=a[n].split(","),o=l.length;o--;)r[l[o]]=r[n];return r},w4=function(e,t,i,a){var r=t.ease||a||"power1.inOut",n,o;if(mi(t))o=i[e]||(i[e]=[]),t.forEach(function(l,h){return o.push({t:h/(t.length-1)*100,v:l,e:r})});else for(n in t)o=i[n]||(i[n]=[]),n==="ease"||o.push({t:parseFloat(e),v:t[n],e:r})},uo=function(e,t,i,a,r){return Xt(e)?e.call(t,i,a,r):ci(e)&&~e.indexOf("random(")?bo(e):e},Rg=C_+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Og={};Ri(Rg+",id,stagger,delay,duration,paused,scrollTrigger",function(s){return Og[s]=1});var Yt=(function(s){Q0(e,s);function e(i,a,r,n){var o;typeof a=="number"&&(r.duration=a,a=r,r=null),o=s.call(this,n?a:co(a))||this;var l=o.vars,h=l.duration,c=l.delay,d=l.immediateRender,_=l.stagger,u=l.overwrite,x=l.keyframes,g=l.defaults,v=l.scrollTrigger,f=l.yoyoEase,y=a.parent||Vt,w=(mi(i)||eg(i)?oa(i[0]):"length"in a)?[i]:ls(i),p,b,M,E,A,m,P,I;if(o._targets=w.length?D_(w):zo("GSAP target "+i+" not found. https://gsap.com",!Xi.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=u,x||_||Cl(h)||Cl(c)){if(a=o.vars,p=o.timeline=new Pi({data:"nested",defaults:g||{},targets:y&&y.data==="nested"?y.vars.targets:w}),p.kill(),p.parent=p._dp=Js(o),p._start=0,_||Cl(h)||Cl(c)){if(E=w.length,P=_&&pg(_),Ns(_))for(A in _)~Rg.indexOf(A)&&(I||(I={}),I[A]=_[A]);for(b=0;b<E;b++)M=ah(a,Og),M.stagger=0,f&&(M.yoyoEase=f),I&&bn(M,I),m=w[b],M.duration=+uo(h,Js(o),b,m,w),M.delay=(+uo(c,Js(o),b,m,w)||0)-o._delay,!_&&E===1&&M.delay&&(o._delay=c=M.delay,o._start+=c,M.delay=0),p.to(m,M,P?P(b,m,w):0),p._ease=$e.none;p.duration()?h=c=0:o.timeline=0}else if(x){co(Ji(p.vars.defaults,{ease:"none"})),p._ease=ur(x.ease||a.ease||"none");var U=0,N,F,W;if(mi(x))x.forEach(function(V){return p.to(w,V,">")}),p.duration();else{M={};for(A in x)A==="ease"||A==="easeEach"||w4(A,x[A],M,x.easeEach);for(A in M)for(N=M[A].sort(function(V,j){return V.t-j.t}),U=0,b=0;b<N.length;b++)F=N[b],W={ease:F.e,duration:(F.t-(b?N[b-1].t:0))/100*h},W[A]=F.v,p.to(w,W,U),U+=W.duration;p.duration()<h&&p.to({},{duration:h-p.duration()})}}h||o.duration(h=p.duration())}else o.timeline=0;return u===!0&&!T_&&(Aa=Js(o),Vt.killTweensOf(w),Aa=0),Is(y,Js(o),r),a.reversed&&o.reverse(),a.paused&&o.paused(!0),(d||!h&&!x&&o._start===Qt(y._time)&&Di(d)&&QP(Js(o))&&y.data!=="nested")&&(o._tTime=-Pt,o.render(Math.max(0,-c)||0)),v&&fg(Js(o),v),o}var t=e.prototype;return t.render=function(a,r,n){var o=this._time,l=this._tDur,h=this._dur,c=a<0,d=a>l-Pt&&!c?l:a<Pt?0:a,_,u,x,g,v,f,y,w,p;if(!h)e4(this,a,r,n);else if(d!==this._tTime||!a||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c||this._lazy){if(_=d,w=this.timeline,this._repeat){if(g=h+this._rDelay,this._repeat<-1&&c)return this.totalTime(g*100+a,r,n);if(_=Qt(d%g),d===l?(x=this._repeat,_=h):(v=Qt(d/g),x=~~v,x&&x===v?(_=h,x--):_>h&&(_=h)),f=this._yoyo&&x&1,f&&(p=this._yEase,_=h-_),v=Tn(this._tTime,g),_===o&&!n&&this._initted&&x===v)return this._tTime=d,this;x!==v&&(w&&this._yEase&&Mg(w,f),this.vars.repeatRefresh&&!f&&!this._lock&&_!==g&&this._initted&&(this._lock=n=1,this.render(Qt(g*x),!0).invalidate()._lock=0))}if(!this._initted){if(vg(this,c?a:_,n,r,d))return this._tTime=0,this;if(o!==this._time&&!(n&&this.vars.repeatRefresh&&x!==v))return this;if(h!==this._dur)return this.render(a,r,n)}if(this._tTime=d,this._time=_,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(p||this._ease)(_/h),this._from&&(this.ratio=y=1-y),!o&&d&&!r&&!v&&(Hi(this,"onStart"),this._tTime!==d))return this;for(u=this._pt;u;)u.r(y,u.d),u=u._next;w&&w.render(a<0?a:w._dur*w._ease(_/this._dur),r,n)||this._startAt&&(this._zTime=a),this._onUpdate&&!r&&(c&&Od(this,a,r,n),Hi(this,"onUpdate")),this._repeat&&x!==v&&this.vars.onRepeat&&!r&&this.parent&&Hi(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(c&&!this._onUpdate&&Od(this,a,!0,!0),(a||!h)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&La(this,1),!r&&!(c&&!o)&&(d||o||f)&&(Hi(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(a){return(!a||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(a),s.prototype.invalidate.call(this,a)},t.resetTo=function(a,r,n,o,l){To||qi.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||N_(this,h),c=this._ease(h/this._dur),m4(this,a,r,n,o,c,h,l)?this.resetTo(a,r,n,o,1):(wh(this,0),this.parent||_g(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(a,r){if(r===void 0&&(r="all"),!a&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?ro(this):this.scrollTrigger&&this.scrollTrigger.kill(!!_i),this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(a,r,Aa&&Aa.vars.overwrite!==!0)._first||ro(this),this.parent&&n!==this.timeline.totalDuration()&&Sn(this,this._dur*this.timeline._tDur/n,0,1),this}var o=this._targets,l=a?ls(a):o,h=this._ptLookup,c=this._pt,d,_,u,x,g,v,f;if((!r||r==="all")&&KP(o,l))return r==="all"&&(this._pt=0),ro(this);for(d=this._op=this._op||[],r!=="all"&&(ci(r)&&(g={},Ri(r,function(y){return g[y]=1}),r=g),r=y4(o,r)),f=o.length;f--;)if(~l.indexOf(o[f])){_=h[f],r==="all"?(d[f]=r,x=_,u={}):(u=d[f]=d[f]||{},x=r);for(g in x)v=_&&_[g],v&&((!("kill"in v.d)||v.d.kill(g)===!0)&&mh(this,v,"_pt"),delete _[g]),u!=="all"&&(u[g]=1)}return this._initted&&!this._pt&&c&&ro(this),this},e.to=function(a,r){return new e(a,r,arguments[2])},e.from=function(a,r){return _o(1,arguments)},e.delayedCall=function(a,r,n,o){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:a,onComplete:r,onReverseComplete:r,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:o})},e.fromTo=function(a,r,n){return _o(2,arguments)},e.set=function(a,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(a,r)},e.killTweensOf=function(a,r,n){return Vt.killTweensOf(a,r,n)},e})(So);Ji(Yt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ri("staggerTo,staggerFrom,staggerFromTo",function(s){Yt[s]=function(){var e=new Pi,t=Ld.call(arguments,0);return t.splice(s==="staggerFromTo"?5:4,0,0),e[s].apply(e,t)}});var L_=function(e,t,i){return e[t]=i},Ng=function(e,t,i){return e[t](i)},z4=function(e,t,i,a){return e[t](a.fp,i)},P4=function(e,t,i){return e.setAttribute(t,i)},F_=function(e,t){return Xt(e[t])?Ng:S_(e[t])&&e.setAttribute?P4:L_},Lg=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},b4=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},Fg=function(e,t){var i=t._pt,a="";if(!e&&t.b)a=t.b;else if(e===1&&t.e)a=t.e;else{for(;i;)a=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+a,i=i._next;a+=t.c}t.set(t.t,t.p,a,t)},k_=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},T4=function(e,t,i,a){for(var r=this._pt,n;r;)n=r._next,r.p===a&&r.modifier(e,t,i),r=n},S4=function(e){for(var t=this._pt,i,a;t;)a=t._next,t.p===e&&!t.op||t.op===e?mh(this,t,"_pt"):t.dep||(i=1),t=a;return!i},E4=function(e,t,i,a){a.mSet(e,t,a.m.call(a.tween,i,a.mt),a)},kg=function(e){for(var t=e._pt,i,a,r,n;t;){for(i=t._next,a=r;a&&a.pr>t.pr;)a=a._next;(t._prev=a?a._prev:n)?t._prev._next=t:r=t,(t._next=a)?a._prev=t:n=t,t=i}e._pt=r},Oi=(function(){function s(t,i,a,r,n,o,l,h,c){this.t=i,this.s=r,this.c=n,this.p=a,this.r=o||Lg,this.d=l||this,this.set=h||L_,this.pr=c||0,this._next=t,t&&(t._prev=this)}var e=s.prototype;return e.modifier=function(i,a,r){this.mSet=this.mSet||this.set,this.set=E4,this.m=i,this.mt=r,this.tween=a},s})();Ri(C_+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(s){return I_[s]=1});Zi.TweenMax=Zi.TweenLite=Yt;Zi.TimelineLite=Zi.TimelineMax=Pi;Vt=new Pi({sortChildren:!1,defaults:Pn,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Xi.stringFilter=Eg;var fr=[],ql={},A4=[],sv=0,M4=0,zc=function(e){return(ql[e]||A4).map(function(t){return t()})},Ud=function(){var e=Date.now(),t=[];e-sv>2&&(zc("matchMediaInit"),fr.forEach(function(i){var a=i.queries,r=i.conditions,n,o,l,h;for(o in a)n=Es.matchMedia(a[o]).matches,n&&(l=1),n!==r[o]&&(r[o]=n,h=1);h&&(i.revert(),l&&t.push(i))}),zc("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i,function(a){return i.add(null,a)})}),sv=e,zc("matchMedia"))},Vg=(function(){function s(t,i){this.selector=i&&Fd(i),this.data=[],this._r=[],this.isReverted=!1,this.id=M4++,t&&this.add(t)}var e=s.prototype;return e.add=function(i,a,r){Xt(i)&&(r=a,a=i,i=Xt);var n=this,o=function(){var h=Rt,c=n.selector,d;return h&&h!==n&&h.data.push(n),r&&(n.selector=Fd(r)),Rt=n,d=a.apply(n,arguments),Xt(d)&&n._r.push(d),Rt=h,n.selector=c,n.isReverted=!1,d};return n.last=o,i===Xt?o(n,function(l){return n.add(null,l)}):i?n[i]=o:o},e.ignore=function(i){var a=Rt;Rt=null,i(this),Rt=a},e.getTweens=function(){var i=[];return this.data.forEach(function(a){return a instanceof s?i.push.apply(i,a.getTweens()):a instanceof Yt&&!(a.parent&&a.parent.data==="nested")&&i.push(a)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,a){var r=this;if(i?(function(){for(var o=r.getTweens(),l=r.data.length,h;l--;)h=r.data[l],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(c){return o.splice(o.indexOf(c),1)}));for(o.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,d){return d.g-c.g||-1/0}).forEach(function(c){return c.t.revert(i)}),l=r.data.length;l--;)h=r.data[l],h instanceof Pi?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof Yt)&&h.revert&&h.revert(i);r._r.forEach(function(c){return c(i,r)}),r.isReverted=!0})():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),a)for(var n=fr.length;n--;)fr[n].id===this.id&&fr.splice(n,1)},e.revert=function(i){this.kill(i||{})},s})(),I4=(function(){function s(t){this.contexts=[],this.scope=t,Rt&&Rt.data.push(this)}var e=s.prototype;return e.add=function(i,a,r){Ns(i)||(i={matches:i});var n=new Vg(0,r||this.scope),o=n.conditions={},l,h,c;Rt&&!n.selector&&(n.selector=Rt.selector),this.contexts.push(n),a=n.add("onMatch",a),n.queries=i;for(h in i)h==="all"?c=1:(l=Es.matchMedia(i[h]),l&&(fr.indexOf(n)<0&&fr.push(n),(o[h]=l.matches)&&(c=1),l.addListener?l.addListener(Ud):l.addEventListener("change",Ud)));return c&&a(n,function(d){return n.add(null,d)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(a){return a.kill(i,!0)})},s})(),nh={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(a){return bg(a)})},timeline:function(e){return new Pi(e)},getTweensOf:function(e,t){return Vt.getTweensOf(e,t)},getProperty:function(e,t,i,a){ci(e)&&(e=ls(e)[0]);var r=dr(e||{}).get,n=i?dg:cg;return i==="native"&&(i=""),e&&(t?n((Gi[t]&&Gi[t].get||r)(e,t,i,a)):function(o,l,h){return n((Gi[o]&&Gi[o].get||r)(e,o,l,h))})},quickSetter:function(e,t,i){if(e=ls(e),e.length>1){var a=e.map(function(c){return Li.quickSetter(c,t,i)}),r=a.length;return function(c){for(var d=r;d--;)a[d](c)}}e=e[0]||{};var n=Gi[t],o=dr(e),l=o.harness&&(o.harness.aliases||{})[t]||t,h=n?function(c){var d=new n;Jr._pt=0,d.init(e,i?c+i:c,Jr,0,[e]),d.render(1,d),Jr._pt&&k_(1,Jr)}:o.set(e,l);return n?h:function(c){return h(e,l,i?c+i:c,o,1)}},quickTo:function(e,t,i){var a,r=Li.to(e,Ji((a={},a[t]="+=0.1",a.paused=!0,a.stagger=0,a),i||{})),n=function(l,h,c){return r.resetTo(t,l,h,c)};return n.tween=r,n},isTweening:function(e){return Vt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=ur(e.ease,Pn.ease)),Qf(Pn,e||{})},config:function(e){return Qf(Xi,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,a=e.plugins,r=e.defaults,n=e.extendTimeline;(a||"").split(",").forEach(function(o){return o&&!Gi[o]&&!Zi[o]&&zo(t+" effect requires "+o+" plugin.")}),pc[t]=function(o,l,h){return i(ls(o),Ji(l||{},r),h)},n&&(Pi.prototype[t]=function(o,l,h){return this.add(pc[t](o,Ns(l)?l:(h=l)&&{},this),h)})},registerEase:function(e,t){$e[e]=ur(t)},parseEase:function(e,t){return arguments.length?ur(e,t):$e},getById:function(e){return Vt.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var i=new Pi(e),a,r;for(i.smoothChildTiming=Di(e.smoothChildTiming),Vt.remove(i),i._dp=0,i._time=i._tTime=Vt._time,a=Vt._first;a;)r=a._next,(t||!(!a._dur&&a instanceof Yt&&a.vars.onComplete===a._targets[0]))&&Is(i,a,a._start-a._delay),a=r;return Is(Vt,i,0),i},context:function(e,t){return e?new Vg(e,t):Rt},matchMedia:function(e){return new I4(e)},matchMediaRefresh:function(){return fr.forEach(function(e){var t=e.conditions,i,a;for(a in t)t[a]&&(t[a]=!1,i=1);i&&e.revert()})||Ud()},addEventListener:function(e,t){var i=ql[e]||(ql[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=ql[e],a=i&&i.indexOf(t);a>=0&&i.splice(a,1)},utils:{wrap:l4,wrapYoyo:h4,distribute:pg,random:yg,snap:mg,normalize:o4,getUnit:pi,clamp:s4,splitColor:Tg,toArray:ls,selector:Fd,mapRange:zg,pipe:r4,unitize:n4,interpolate:c4,shuffle:xg},install:rg,effects:pc,ticker:qi,updateRoot:Pi.updateRoot,plugins:Gi,globalTimeline:Vt,core:{PropTween:Oi,globals:ng,Tween:Yt,Timeline:Pi,Animation:So,getCache:dr,_removeLinkedListItem:mh,reverting:function(){return _i},context:function(e){return e&&Rt&&(Rt.data.push(e),e._ctx=Rt),Rt},suppressOverwrites:function(e){return T_=e}}};Ri("to,from,fromTo,delayedCall,set,killTweensOf",function(s){return nh[s]=Yt[s]});qi.add(Pi.updateRoot);Jr=nh.to({},{duration:0});var C4=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},D4=function(e,t){var i=e._targets,a,r,n;for(a in t)for(r=i.length;r--;)n=e._ptLookup[r][a],n&&(n=n.d)&&(n._pt&&(n=C4(n,a)),n&&n.modifier&&n.modifier(t[a],e,i[r],a))},Pc=function(e,t){return{name:e,headless:1,rawVars:1,init:function(a,r,n){n._onInit=function(o){var l,h;if(ci(r)&&(l={},Ri(r,function(c){return l[c]=1}),r=l),t){l={};for(h in r)l[h]=t(r[h]);r=l}D4(o,r)}}}},Li=nh.registerPlugin({name:"attr",init:function(e,t,i,a,r){var n,o,l;this.tween=i;for(n in t)l=e.getAttribute(n)||"",o=this.add(e,"setAttribute",(l||0)+"",t[n],a,r,0,0,n),o.op=n,o.b=l,this._props.push(n)},render:function(e,t){for(var i=t._pt;i;)_i?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},Pc("roundProps",kd),Pc("modifiers"),Pc("snap",mg))||nh;Yt.version=Pi.version=Li.version="3.13.0";ag=1;E_()&&En();$e.Power0;$e.Power1;$e.Power2;$e.Power3;$e.Power4;$e.Linear;$e.Quad;$e.Cubic;$e.Quart;$e.Quint;$e.Strong;$e.Elastic;$e.Back;$e.SteppedEase;$e.Bounce;$e.Sine;$e.Expo;$e.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var av,Ma,sn,V_,cr,rv,U_,R4=function(){return typeof window<"u"},la={},nr=180/Math.PI,an=Math.PI/180,Wr=Math.atan2,nv=1e8,B_=/([A-Z])/g,O4=/(left|right|width|margin|padding|x)/i,N4=/[\s,\(]\S/,Ds={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Bd=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},L4=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},F4=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},k4=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},Ug=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},Bg=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},V4=function(e,t,i){return e.style[t]=i},U4=function(e,t,i){return e.style.setProperty(t,i)},B4=function(e,t,i){return e._gsap[t]=i},W4=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},G4=function(e,t,i,a,r){var n=e._gsap;n.scaleX=n.scaleY=i,n.renderTransform(r,n)},q4=function(e,t,i,a,r){var n=e._gsap;n[t]=i,n.renderTransform(r,n)},Ut="transform",Ni=Ut+"Origin",H4=function s(e,t){var i=this,a=this.target,r=a.style,n=a._gsap;if(e in la&&r){if(this.tfm=this.tfm||{},e!=="transform")e=Ds[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return i.tfm[o]=Qs(a,o)}):this.tfm[e]=n.x?n[e]:Qs(a,e),e===Ni&&(this.tfm.zOrigin=n.zOrigin);else return Ds.transform.split(",").forEach(function(o){return s.call(i,o,t)});if(this.props.indexOf(Ut)>=0)return;n.svg&&(this.svgo=a.getAttribute("data-svg-origin"),this.props.push(Ni,t,"")),e=Ut}(r||t)&&this.props.push(e,t,r[e])},Wg=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},X4=function(){var e=this.props,t=this.target,i=t.style,a=t._gsap,r,n;for(r=0;r<e.length;r+=3)e[r+1]?e[r+1]===2?t[e[r]](e[r+2]):t[e[r]]=e[r+2]:e[r+2]?i[e[r]]=e[r+2]:i.removeProperty(e[r].substr(0,2)==="--"?e[r]:e[r].replace(B_,"-$1").toLowerCase());if(this.tfm){for(n in this.tfm)a[n]=this.tfm[n];a.svg&&(a.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=U_(),(!r||!r.isStart)&&!i[Ut]&&(Wg(i),a.zOrigin&&i[Ni]&&(i[Ni]+=" "+a.zOrigin+"px",a.zOrigin=0,a.renderTransform()),a.uncache=1)}},Gg=function(e,t){var i={target:e,props:[],revert:X4,save:H4};return e._gsap||Li.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(a){return i.save(a)}),i},qg,Wd=function(e,t){var i=Ma.createElementNS?Ma.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ma.createElement(e);return i&&i.style?i:Ma.createElement(e)},hs=function s(e,t,i){var a=getComputedStyle(e);return a[t]||a.getPropertyValue(t.replace(B_,"-$1").toLowerCase())||a.getPropertyValue(t)||!i&&s(e,An(t)||t,1)||""},ov="O,Moz,ms,Ms,Webkit".split(","),An=function(e,t,i){var a=t||cr,r=a.style,n=5;if(e in r&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);n--&&!(ov[n]+e in r););return n<0?null:(n===3?"ms":n>=0?ov[n]:"")+e},Gd=function(){R4()&&window.document&&(av=window,Ma=av.document,sn=Ma.documentElement,cr=Wd("div")||{style:{}},Wd("div"),Ut=An(Ut),Ni=Ut+"Origin",cr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",qg=!!An("perspective"),U_=Li.core.reverting,V_=1)},lv=function(e){var t=e.ownerSVGElement,i=Wd("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),a=e.cloneNode(!0),r;a.style.display="block",i.appendChild(a),sn.appendChild(i);try{r=a.getBBox()}catch{}return i.removeChild(a),sn.removeChild(i),r},hv=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},Hg=function(e){var t,i;try{t=e.getBBox()}catch{t=lv(e),i=1}return t&&(t.width||t.height)||i||(t=lv(e)),t&&!t.width&&!t.x&&!t.y?{x:+hv(e,["x","cx","x1"])||0,y:+hv(e,["y","cy","y1"])||0,width:0,height:0}:t},Xg=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&Hg(e))},gr=function(e,t){if(t){var i=e.style,a;t in la&&t!==Ni&&(t=Ut),i.removeProperty?(a=t.substr(0,2),(a==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),i.removeProperty(a==="--"?t:t.replace(B_,"-$1").toLowerCase())):i.removeAttribute(t)}},Ia=function(e,t,i,a,r,n){var o=new Oi(e._pt,t,i,0,1,n?Bg:Ug);return e._pt=o,o.b=a,o.e=r,e._props.push(i),o},cv={deg:1,rad:1,turn:1},j4={grid:1,flex:1},Fa=function s(e,t,i,a){var r=parseFloat(i)||0,n=(i+"").trim().substr((r+"").length)||"px",o=cr.style,l=O4.test(t),h=e.tagName.toLowerCase()==="svg",c=(h?"client":"offset")+(l?"Width":"Height"),d=100,_=a==="px",u=a==="%",x,g,v,f;if(a===n||!r||cv[a]||cv[n])return r;if(n!=="px"&&!_&&(r=s(e,t,i,"px")),f=e.getCTM&&Xg(e),(u||n==="%")&&(la[t]||~t.indexOf("adius")))return x=f?e.getBBox()[l?"width":"height"]:e[c],Jt(u?r/x*d:r/100*x);if(o[l?"width":"height"]=d+(_?n:a),g=a!=="rem"&&~t.indexOf("adius")||a==="em"&&e.appendChild&&!h?e:e.parentNode,f&&(g=(e.ownerSVGElement||{}).parentNode),(!g||g===Ma||!g.appendChild)&&(g=Ma.body),v=g._gsap,v&&u&&v.width&&l&&v.time===qi.time&&!v.uncache)return Jt(r/v.width*d);if(u&&(t==="height"||t==="width")){var y=e.style[t];e.style[t]=d+a,x=e[c],y?e.style[t]=y:gr(e,t)}else(u||n==="%")&&!j4[hs(g,"display")]&&(o.position=hs(e,"position")),g===e&&(o.position="static"),g.appendChild(cr),x=cr[c],g.removeChild(cr),o.position="absolute";return l&&u&&(v=dr(g),v.time=qi.time,v.width=g[c]),Jt(_?x*r/d:x&&r?d/x*r:0)},Qs=function(e,t,i,a){var r;return V_||Gd(),t in Ds&&t!=="transform"&&(t=Ds[t],~t.indexOf(",")&&(t=t.split(",")[0])),la[t]&&t!=="transform"?(r=Ao(e,a),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:lh(hs(e,Ni))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||a||~(r+"").indexOf("calc("))&&(r=oh[t]&&oh[t](e,t,i)||hs(e,t)||lg(e,t)||(t==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?Fa(e,t,r,i)+i:r},Z4=function(e,t,i,a){if(!i||i==="none"){var r=An(t,e,1),n=r&&hs(e,r,1);n&&n!==i?(t=r,i=n):t==="borderColor"&&(i=hs(e,"borderTopColor"))}var o=new Oi(this._pt,e.style,t,0,1,Fg),l=0,h=0,c,d,_,u,x,g,v,f,y,w,p,b;if(o.b=i,o.e=a,i+="",a+="",a.substring(0,6)==="var(--"&&(a=hs(e,a.substring(4,a.indexOf(")")))),a==="auto"&&(g=e.style[t],e.style[t]=a,a=hs(e,t)||a,g?e.style[t]=g:gr(e,t)),c=[i,a],Eg(c),i=c[0],a=c[1],_=i.match(Zr)||[],b=a.match(Zr)||[],b.length){for(;d=Zr.exec(a);)v=d[0],y=a.substring(l,d.index),x?x=(x+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(x=1),v!==(g=_[h++]||"")&&(u=parseFloat(g)||0,p=g.substr((u+"").length),v.charAt(1)==="="&&(v=tn(u,v)+p),f=parseFloat(v),w=v.substr((f+"").length),l=Zr.lastIndex-w.length,w||(w=w||Xi.units[t]||p,l===a.length&&(a+=w,o.e+=w)),p!==w&&(u=Fa(e,t,g,w)||0),o._pt={_next:o._pt,p:y||h===1?y:",",s:u,c:f-u,m:x&&x<4||t==="zIndex"?Math.round:0});o.c=l<a.length?a.substring(l,a.length):""}else o.r=t==="display"&&a==="none"?Bg:Ug;return ig.test(a)&&(o.e=0),this._pt=o,o},dv={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},J4=function(e){var t=e.split(" "),i=t[0],a=t[1]||"50%";return(i==="top"||i==="bottom"||a==="left"||a==="right")&&(e=i,i=a,a=e),t[0]=dv[i]||i,t[1]=dv[a]||a,t.join(" ")},K4=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i=t.t,a=i.style,r=t.u,n=i._gsap,o,l,h;if(r==="all"||r===!0)a.cssText="",l=1;else for(r=r.split(","),h=r.length;--h>-1;)o=r[h],la[o]&&(l=1,o=o==="transformOrigin"?Ni:Ut),gr(i,o);l&&(gr(i,Ut),n&&(n.svg&&i.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",Ao(i,1),n.uncache=1,Wg(a)))}},oh={clearProps:function(e,t,i,a,r){if(r.data!=="isFromStart"){var n=e._pt=new Oi(e._pt,t,i,0,0,K4);return n.u=a,n.pr=-10,n.tween=r,e._props.push(i),1}}},Eo=[1,0,0,1,0,0],jg={},Zg=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},_v=function(e){var t=hs(e,Ut);return Zg(t)?Eo:t.substr(7).match(tg).map(Jt)},W_=function(e,t){var i=e._gsap||dr(e),a=e.style,r=_v(e),n,o,l,h;return i.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,r=[l.a,l.b,l.c,l.d,l.e,l.f],r.join(",")==="1,0,0,1,0,0"?Eo:r):(r===Eo&&!e.offsetParent&&e!==sn&&!i.svg&&(l=a.display,a.display="block",n=e.parentNode,(!n||!e.offsetParent&&!e.getBoundingClientRect().width)&&(h=1,o=e.nextElementSibling,sn.appendChild(e)),r=_v(e),l?a.display=l:gr(e,"display"),h&&(o?n.insertBefore(e,o):n?n.appendChild(e):sn.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},qd=function(e,t,i,a,r,n){var o=e._gsap,l=r||W_(e,!0),h=o.xOrigin||0,c=o.yOrigin||0,d=o.xOffset||0,_=o.yOffset||0,u=l[0],x=l[1],g=l[2],v=l[3],f=l[4],y=l[5],w=t.split(" "),p=parseFloat(w[0])||0,b=parseFloat(w[1])||0,M,E,A,m;i?l!==Eo&&(E=u*v-x*g)&&(A=p*(v/E)+b*(-g/E)+(g*y-v*f)/E,m=p*(-x/E)+b*(u/E)-(u*y-x*f)/E,p=A,b=m):(M=Hg(e),p=M.x+(~w[0].indexOf("%")?p/100*M.width:p),b=M.y+(~(w[1]||w[0]).indexOf("%")?b/100*M.height:b)),a||a!==!1&&o.smooth?(f=p-h,y=b-c,o.xOffset=d+(f*u+y*g)-f,o.yOffset=_+(f*x+y*v)-y):o.xOffset=o.yOffset=0,o.xOrigin=p,o.yOrigin=b,o.smooth=!!a,o.origin=t,o.originIsAbsolute=!!i,e.style[Ni]="0px 0px",n&&(Ia(n,o,"xOrigin",h,p),Ia(n,o,"yOrigin",c,b),Ia(n,o,"xOffset",d,o.xOffset),Ia(n,o,"yOffset",_,o.yOffset)),e.setAttribute("data-svg-origin",p+" "+b)},Ao=function(e,t){var i=e._gsap||new Cg(e);if("x"in i&&!t&&!i.uncache)return i;var a=e.style,r=i.scaleX<0,n="px",o="deg",l=getComputedStyle(e),h=hs(e,Ni)||"0",c,d,_,u,x,g,v,f,y,w,p,b,M,E,A,m,P,I,U,N,F,W,V,j,G,re,ne,xe,we,Je,qe,Z;return c=d=_=g=v=f=y=w=p=0,u=x=1,i.svg=!!(e.getCTM&&Xg(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(a[Ut]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Ut]!=="none"?l[Ut]:"")),a.scale=a.rotate=a.translate="none"),E=W_(e,i.svg),i.svg&&(i.uncache?(G=e.getBBox(),h=i.xOrigin-G.x+"px "+(i.yOrigin-G.y)+"px",j=""):j=!t&&e.getAttribute("data-svg-origin"),qd(e,j||h,!!j||i.originIsAbsolute,i.smooth!==!1,E)),b=i.xOrigin||0,M=i.yOrigin||0,E!==Eo&&(I=E[0],U=E[1],N=E[2],F=E[3],c=W=E[4],d=V=E[5],E.length===6?(u=Math.sqrt(I*I+U*U),x=Math.sqrt(F*F+N*N),g=I||U?Wr(U,I)*nr:0,y=N||F?Wr(N,F)*nr+g:0,y&&(x*=Math.abs(Math.cos(y*an))),i.svg&&(c-=b-(b*I+M*N),d-=M-(b*U+M*F))):(Z=E[6],Je=E[7],ne=E[8],xe=E[9],we=E[10],qe=E[11],c=E[12],d=E[13],_=E[14],A=Wr(Z,we),v=A*nr,A&&(m=Math.cos(-A),P=Math.sin(-A),j=W*m+ne*P,G=V*m+xe*P,re=Z*m+we*P,ne=W*-P+ne*m,xe=V*-P+xe*m,we=Z*-P+we*m,qe=Je*-P+qe*m,W=j,V=G,Z=re),A=Wr(-N,we),f=A*nr,A&&(m=Math.cos(-A),P=Math.sin(-A),j=I*m-ne*P,G=U*m-xe*P,re=N*m-we*P,qe=F*P+qe*m,I=j,U=G,N=re),A=Wr(U,I),g=A*nr,A&&(m=Math.cos(A),P=Math.sin(A),j=I*m+U*P,G=W*m+V*P,U=U*m-I*P,V=V*m-W*P,I=j,W=G),v&&Math.abs(v)+Math.abs(g)>359.9&&(v=g=0,f=180-f),u=Jt(Math.sqrt(I*I+U*U+N*N)),x=Jt(Math.sqrt(V*V+Z*Z)),A=Wr(W,V),y=Math.abs(A)>2e-4?A*nr:0,p=qe?1/(qe<0?-qe:qe):0),i.svg&&(j=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!Zg(hs(e,Ut)),j&&e.setAttribute("transform",j))),Math.abs(y)>90&&Math.abs(y)<270&&(r?(u*=-1,y+=g<=0?180:-180,g+=g<=0?180:-180):(x*=-1,y+=y<=0?180:-180)),t=t||i.uncache,i.x=c-((i.xPercent=c&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+n,i.y=d-((i.yPercent=d&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+n,i.z=_+n,i.scaleX=Jt(u),i.scaleY=Jt(x),i.rotation=Jt(g)+o,i.rotationX=Jt(v)+o,i.rotationY=Jt(f)+o,i.skewX=y+o,i.skewY=w+o,i.transformPerspective=p+n,(i.zOrigin=parseFloat(h.split(" ")[2])||!t&&i.zOrigin||0)&&(a[Ni]=lh(h)),i.xOffset=i.yOffset=0,i.force3D=Xi.force3D,i.renderTransform=i.svg?Q4:qg?Jg:Y4,i.uncache=0,i},lh=function(e){return(e=e.split(" "))[0]+" "+e[1]},bc=function(e,t,i){var a=pi(t);return Jt(parseFloat(t)+parseFloat(Fa(e,"x",i+"px",a)))+a},Y4=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Jg(e,t)},tr="0deg",Kn="0px",ir=") ",Jg=function(e,t){var i=t||this,a=i.xPercent,r=i.yPercent,n=i.x,o=i.y,l=i.z,h=i.rotation,c=i.rotationY,d=i.rotationX,_=i.skewX,u=i.skewY,x=i.scaleX,g=i.scaleY,v=i.transformPerspective,f=i.force3D,y=i.target,w=i.zOrigin,p="",b=f==="auto"&&e&&e!==1||f===!0;if(w&&(d!==tr||c!==tr)){var M=parseFloat(c)*an,E=Math.sin(M),A=Math.cos(M),m;M=parseFloat(d)*an,m=Math.cos(M),n=bc(y,n,E*m*-w),o=bc(y,o,-Math.sin(M)*-w),l=bc(y,l,A*m*-w+w)}v!==Kn&&(p+="perspective("+v+ir),(a||r)&&(p+="translate("+a+"%, "+r+"%) "),(b||n!==Kn||o!==Kn||l!==Kn)&&(p+=l!==Kn||b?"translate3d("+n+", "+o+", "+l+") ":"translate("+n+", "+o+ir),h!==tr&&(p+="rotate("+h+ir),c!==tr&&(p+="rotateY("+c+ir),d!==tr&&(p+="rotateX("+d+ir),(_!==tr||u!==tr)&&(p+="skew("+_+", "+u+ir),(x!==1||g!==1)&&(p+="scale("+x+", "+g+ir),y.style[Ut]=p||"translate(0, 0)"},Q4=function(e,t){var i=t||this,a=i.xPercent,r=i.yPercent,n=i.x,o=i.y,l=i.rotation,h=i.skewX,c=i.skewY,d=i.scaleX,_=i.scaleY,u=i.target,x=i.xOrigin,g=i.yOrigin,v=i.xOffset,f=i.yOffset,y=i.forceCSS,w=parseFloat(n),p=parseFloat(o),b,M,E,A,m;l=parseFloat(l),h=parseFloat(h),c=parseFloat(c),c&&(c=parseFloat(c),h+=c,l+=c),l||h?(l*=an,h*=an,b=Math.cos(l)*d,M=Math.sin(l)*d,E=Math.sin(l-h)*-_,A=Math.cos(l-h)*_,h&&(c*=an,m=Math.tan(h-c),m=Math.sqrt(1+m*m),E*=m,A*=m,c&&(m=Math.tan(c),m=Math.sqrt(1+m*m),b*=m,M*=m)),b=Jt(b),M=Jt(M),E=Jt(E),A=Jt(A)):(b=d,A=_,M=E=0),(w&&!~(n+"").indexOf("px")||p&&!~(o+"").indexOf("px"))&&(w=Fa(u,"x",n,"px"),p=Fa(u,"y",o,"px")),(x||g||v||f)&&(w=Jt(w+x-(x*b+g*E)+v),p=Jt(p+g-(x*M+g*A)+f)),(a||r)&&(m=u.getBBox(),w=Jt(w+a/100*m.width),p=Jt(p+r/100*m.height)),m="matrix("+b+","+M+","+E+","+A+","+w+","+p+")",u.setAttribute("transform",m),y&&(u.style[Ut]=m)},$4=function(e,t,i,a,r){var n=360,o=ci(r),l=parseFloat(r)*(o&&~r.indexOf("rad")?nr:1),h=l-a,c=a+h+"deg",d,_;return o&&(d=r.split("_")[1],d==="short"&&(h%=n,h!==h%(n/2)&&(h+=h<0?n:-n)),d==="cw"&&h<0?h=(h+n*nv)%n-~~(h/n)*n:d==="ccw"&&h>0&&(h=(h-n*nv)%n-~~(h/n)*n)),e._pt=_=new Oi(e._pt,t,i,a,h,L4),_.e=c,_.u="deg",e._props.push(i),_},uv=function(e,t){for(var i in t)e[i]=t[i];return e},e3=function(e,t,i){var a=uv({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",n=i.style,o,l,h,c,d,_,u,x;a.svg?(h=i.getAttribute("transform"),i.setAttribute("transform",""),n[Ut]=t,o=Ao(i,1),gr(i,Ut),i.setAttribute("transform",h)):(h=getComputedStyle(i)[Ut],n[Ut]=t,o=Ao(i,1),n[Ut]=h);for(l in la)h=a[l],c=o[l],h!==c&&r.indexOf(l)<0&&(u=pi(h),x=pi(c),d=u!==x?Fa(i,l,h,x):parseFloat(h),_=parseFloat(c),e._pt=new Oi(e._pt,o,l,d,_-d,Bd),e._pt.u=x||0,e._props.push(l));uv(o,a)};Ri("padding,margin,Width,Radius",function(s,e){var t="Top",i="Right",a="Bottom",r="Left",n=(e<3?[t,i,a,r]:[t+r,t+i,a+i,a+r]).map(function(o){return e<2?s+o:"border"+o+s});oh[e>1?"border"+s:s]=function(o,l,h,c,d){var _,u;if(arguments.length<4)return _=n.map(function(x){return Qs(o,x,h)}),u=_.join(" "),u.split(_[0]).length===5?_[0]:u;_=(c+"").split(" "),u={},n.forEach(function(x,g){return u[x]=_[g]=_[g]||_[(g-1)/2|0]}),o.init(l,u,d)}});var Kg={name:"css",register:Gd,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,a,r){var n=this._props,o=e.style,l=i.vars.startAt,h,c,d,_,u,x,g,v,f,y,w,p,b,M,E,A;V_||Gd(),this.styles=this.styles||Gg(e),A=this.styles.props,this.tween=i;for(g in t)if(g!=="autoRound"&&(c=t[g],!(Gi[g]&&Dg(g,t,i,a,e,r)))){if(u=typeof c,x=oh[g],u==="function"&&(c=c.call(i,a,e,r),u=typeof c),u==="string"&&~c.indexOf("random(")&&(c=bo(c)),x)x(this,e,g,c,i)&&(E=1);else if(g.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(g)+"").trim(),c+="",Ra.lastIndex=0,Ra.test(h)||(v=pi(h),f=pi(c)),f?v!==f&&(h=Fa(e,g,h,f)+f):v&&(c+=v),this.add(o,"setProperty",h,c,a,r,0,0,g),n.push(g),A.push(g,0,o[g]);else if(u!=="undefined"){if(l&&g in l?(h=typeof l[g]=="function"?l[g].call(i,a,e,r):l[g],ci(h)&&~h.indexOf("random(")&&(h=bo(h)),pi(h+"")||h==="auto"||(h+=Xi.units[g]||pi(Qs(e,g))||""),(h+"").charAt(1)==="="&&(h=Qs(e,g))):h=Qs(e,g),_=parseFloat(h),y=u==="string"&&c.charAt(1)==="="&&c.substr(0,2),y&&(c=c.substr(2)),d=parseFloat(c),g in Ds&&(g==="autoAlpha"&&(_===1&&Qs(e,"visibility")==="hidden"&&d&&(_=0),A.push("visibility",0,o.visibility),Ia(this,o,"visibility",_?"inherit":"hidden",d?"inherit":"hidden",!d)),g!=="scale"&&g!=="transform"&&(g=Ds[g],~g.indexOf(",")&&(g=g.split(",")[0]))),w=g in la,w){if(this.styles.save(g),u==="string"&&c.substring(0,6)==="var(--"&&(c=hs(e,c.substring(4,c.indexOf(")"))),d=parseFloat(c)),p||(b=e._gsap,b.renderTransform&&!t.parseTransform||Ao(e,t.parseTransform),M=t.smoothOrigin!==!1&&b.smooth,p=this._pt=new Oi(this._pt,o,Ut,0,1,b.renderTransform,b,0,-1),p.dep=1),g==="scale")this._pt=new Oi(this._pt,b,"scaleY",b.scaleY,(y?tn(b.scaleY,y+d):d)-b.scaleY||0,Bd),this._pt.u=0,n.push("scaleY",g),g+="X";else if(g==="transformOrigin"){A.push(Ni,0,o[Ni]),c=J4(c),b.svg?qd(e,c,0,M,0,this):(f=parseFloat(c.split(" ")[2])||0,f!==b.zOrigin&&Ia(this,b,"zOrigin",b.zOrigin,f),Ia(this,o,g,lh(h),lh(c)));continue}else if(g==="svgOrigin"){qd(e,c,1,M,0,this);continue}else if(g in jg){$4(this,b,g,_,y?tn(_,y+c):c);continue}else if(g==="smoothOrigin"){Ia(this,b,"smooth",b.smooth,c);continue}else if(g==="force3D"){b[g]=c;continue}else if(g==="transform"){e3(this,c,e);continue}}else g in o||(g=An(g)||g);if(w||(d||d===0)&&(_||_===0)&&!N4.test(c)&&g in o)v=(h+"").substr((_+"").length),d||(d=0),f=pi(c)||(g in Xi.units?Xi.units[g]:v),v!==f&&(_=Fa(e,g,h,f)),this._pt=new Oi(this._pt,w?b:o,g,_,(y?tn(_,y+d):d)-_,!w&&(f==="px"||g==="zIndex")&&t.autoRound!==!1?k4:Bd),this._pt.u=f||0,v!==f&&f!=="%"&&(this._pt.b=h,this._pt.r=F4);else if(g in o)Z4.call(this,e,g,h,y?y+c:c);else if(g in e)this.add(e,g,h||e[g],y?y+c:c,a,r);else if(g!=="parseTransform"){M_(g,c);continue}w||(g in o?A.push(g,0,o[g]):typeof e[g]=="function"?A.push(g,2,e[g]()):A.push(g,1,h||e[g])),n.push(g)}}E&&kg(this)},render:function(e,t){if(t.tween._time||!U_())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:Qs,aliases:Ds,getSetter:function(e,t,i){var a=Ds[t];return a&&a.indexOf(",")<0&&(t=a),t in la&&t!==Ni&&(e._gsap.x||Qs(e,"x"))?i&&rv===i?t==="scale"?W4:B4:(rv=i||{})&&(t==="scale"?G4:q4):e.style&&!S_(e.style[t])?V4:~t.indexOf("-")?U4:F_(e,t)},core:{_removeProperty:gr,_getMatrix:W_}};Li.utils.checkPrefix=An;Li.core.getStyleSaver=Gg;(function(s,e,t,i){var a=Ri(s+","+e+","+t,function(r){la[r]=1});Ri(e,function(r){Xi.units[r]="deg",jg[r]=1}),Ds[a[13]]=s+","+e,Ri(i,function(r){var n=r.split(":");Ds[n[1]]=a[n[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ri("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(s){Xi.units[s]="px"});Li.registerPlugin(Kg);var ka=Li.registerPlugin(Kg)||Li;ka.core.Tween;const fv={type:"change"},G_={type:"start"},Yg={type:"end"},Dl=new In,vv=new Ys,t3=Math.cos(70*sa.DEG2RAD),ti=new S,Ei=2*Math.PI,mt={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},Tc=1e-6;class i3 extends Y1{constructor(e,t=null){super(e,t),this.state=mt.NONE,this.target=new S,this.cursor=new S,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Yr.ROTATE,MIDDLE:Yr.DOLLY,RIGHT:Yr.PAN},this.touches={ONE:Xr.ROTATE,TWO:Xr.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new S,this._lastQuaternion=new ji,this._lastTargetPosition=new S,this._quat=new ji().setFromUnitVectors(e.up,new S(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new bf,this._sphericalDelta=new bf,this._scale=1,this._panOffset=new S,this._rotateStart=new $,this._rotateEnd=new $,this._rotateDelta=new $,this._panStart=new $,this._panEnd=new $,this._panDelta=new $,this._dollyStart=new $,this._dollyEnd=new $,this._dollyDelta=new $,this._dollyDirection=new S,this._mouse=new $,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=a3.bind(this),this._onPointerDown=s3.bind(this),this._onPointerUp=r3.bind(this),this._onContextMenu=_3.bind(this),this._onMouseWheel=l3.bind(this),this._onKeyDown=h3.bind(this),this._onTouchStart=c3.bind(this),this._onTouchMove=d3.bind(this),this._onMouseDown=n3.bind(this),this._onMouseMove=o3.bind(this),this._interceptControlDown=u3.bind(this),this._interceptControlUp=f3.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(fv),this.update(),this.state=mt.NONE}update(e=null){const t=this.object.position;ti.copy(t).sub(this.target),ti.applyQuaternion(this._quat),this._spherical.setFromVector3(ti),this.autoRotate&&this.state===mt.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,a=this.maxAzimuthAngle;isFinite(i)&&isFinite(a)&&(i<-Math.PI?i+=Ei:i>Math.PI&&(i-=Ei),a<-Math.PI?a+=Ei:a>Math.PI&&(a-=Ei),i<=a?this._spherical.theta=Math.max(i,Math.min(a,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+a)/2?Math.max(i,this._spherical.theta):Math.min(a,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let r=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const n=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),r=n!=this._spherical.radius}if(ti.setFromSpherical(this._spherical),ti.applyQuaternion(this._quatInverse),t.copy(this.target).add(ti),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let n=null;if(this.object.isPerspectiveCamera){const o=ti.length();n=this._clampDistance(o*this._scale);const l=o-n;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),r=!!l}else if(this.object.isOrthographicCamera){const o=new S(this._mouse.x,this._mouse.y,0);o.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),r=l!==this.object.zoom;const h=new S(this._mouse.x,this._mouse.y,0);h.unproject(this.object),this.object.position.sub(h).add(o),this.object.updateMatrixWorld(),n=ti.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;n!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(n).add(this.object.position):(Dl.origin.copy(this.object.position),Dl.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Dl.direction))<t3?this.object.lookAt(this.target):(vv.setFromNormalAndCoplanarPoint(this.object.up,this.target),Dl.intersectPlane(vv,this.target))))}else if(this.object.isOrthographicCamera){const n=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),n!==this.object.zoom&&(this.object.updateProjectionMatrix(),r=!0)}return this._scale=1,this._performCursorZoom=!1,r||this._lastPosition.distanceToSquared(this.object.position)>Tc||8*(1-this._lastQuaternion.dot(this.object.quaternion))>Tc||this._lastTargetPosition.distanceToSquared(this.target)>Tc?(this.dispatchEvent(fv),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Ei/60*this.autoRotateSpeed*e:Ei/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){ti.setFromMatrixColumn(t,0),ti.multiplyScalar(-e),this._panOffset.add(ti)}_panUp(e,t){this.screenSpacePanning===!0?ti.setFromMatrixColumn(t,1):(ti.setFromMatrixColumn(t,0),ti.crossVectors(this.object.up,ti)),ti.multiplyScalar(e),this._panOffset.add(ti)}_pan(e,t){const i=this.domElement;if(this.object.isPerspectiveCamera){const a=this.object.position;ti.copy(a).sub(this.target);let r=ti.length();r*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*r/i.clientHeight,this.object.matrix),this._panUp(2*t*r/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),a=e-i.left,r=t-i.top,n=i.width,o=i.height;this._mouse.x=a/n*2-1,this._mouse.y=-(r/o)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Ei*this._rotateDelta.x/t.clientHeight),this._rotateUp(Ei*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Ei*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Ei*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Ei*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Ei*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),a=.5*(e.pageY+t.y);this._rotateStart.set(i,a)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),a=.5*(e.pageY+t.y);this._panStart.set(i,a)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,a=e.pageY-t.y,r=Math.sqrt(i*i+a*a);this._dollyStart.set(0,r)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),a=.5*(e.pageX+i.x),r=.5*(e.pageY+i.y);this._rotateEnd.set(a,r)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Ei*this._rotateDelta.x/t.clientHeight),this._rotateUp(Ei*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),a=.5*(e.pageY+t.y);this._panEnd.set(i,a)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),i=e.pageX-t.x,a=e.pageY-t.y,r=Math.sqrt(i*i+a*a);this._dollyEnd.set(0,r),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const n=(e.pageX+t.x)*.5,o=(e.pageY+t.y)*.5;this._updateZoomParameters(n,o)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new $,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function s3(s){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(s.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(s)&&(this._addPointer(s),s.pointerType==="touch"?this._onTouchStart(s):this._onMouseDown(s)))}function a3(s){this.enabled!==!1&&(s.pointerType==="touch"?this._onTouchMove(s):this._onMouseMove(s))}function r3(s){switch(this._removePointer(s),this._pointers.length){case 0:this.domElement.releasePointerCapture(s.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(Yg),this.state=mt.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function n3(s){let e;switch(s.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Yr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(s),this.state=mt.DOLLY;break;case Yr.ROTATE:if(s.ctrlKey||s.metaKey||s.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(s),this.state=mt.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(s),this.state=mt.ROTATE}break;case Yr.PAN:if(s.ctrlKey||s.metaKey||s.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(s),this.state=mt.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(s),this.state=mt.PAN}break;default:this.state=mt.NONE}this.state!==mt.NONE&&this.dispatchEvent(G_)}function o3(s){switch(this.state){case mt.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(s);break;case mt.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(s);break;case mt.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(s);break}}function l3(s){this.enabled===!1||this.enableZoom===!1||this.state!==mt.NONE||(s.preventDefault(),this.dispatchEvent(G_),this._handleMouseWheel(this._customWheelEvent(s)),this.dispatchEvent(Yg))}function h3(s){this.enabled!==!1&&this._handleKeyDown(s)}function c3(s){switch(this._trackPointer(s),this._pointers.length){case 1:switch(this.touches.ONE){case Xr.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(s),this.state=mt.TOUCH_ROTATE;break;case Xr.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(s),this.state=mt.TOUCH_PAN;break;default:this.state=mt.NONE}break;case 2:switch(this.touches.TWO){case Xr.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(s),this.state=mt.TOUCH_DOLLY_PAN;break;case Xr.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(s),this.state=mt.TOUCH_DOLLY_ROTATE;break;default:this.state=mt.NONE}break;default:this.state=mt.NONE}this.state!==mt.NONE&&this.dispatchEvent(G_)}function d3(s){switch(this._trackPointer(s),this.state){case mt.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(s),this.update();break;case mt.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(s),this.update();break;case mt.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(s),this.update();break;case mt.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(s),this.update();break;default:this.state=mt.NONE}}function _3(s){this.enabled!==!1&&s.preventDefault()}function u3(s){s.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function f3(s){s.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}class v3{static configureMainThreadEventBus(e,t){e.style.touchAction="none",t.addEventHook("canvas","contextmenu","core:orbitControls",i=>{i.preventDefault()})}eventBus;sizes;constructor(e,t){this.eventBus=e,this.sizes=t}get clientWidth(){return this.sizes.resolution[0]}get clientHeight(){return this.sizes.resolution[1]}get width(){return this.sizes.resolution[0]}get height(){return this.sizes.resolution[1]}get ownerDocument(){return{addEventListener:(e,t,i)=>{this.eventBus.subscribe("document",e,t,{listenerId:"core:orbitControls",options:i})},removeEventListener:(e,t)=>{this.eventBus.unsubscribe("document",e,t)}}}getRootNode(){return{addEventListener:(e,t,i)=>{this.eventBus.subscribe("document",e,t,{listenerId:"core:orbitControls",options:i})},removeEventListener:(e,t)=>{this.eventBus.unsubscribe("document",e,t)}}}isMouseRelatedEvent(e){return e.startsWith("mouse")||e.startsWith("pointer")}addEventListener(e,t,i){this.isMouseRelatedEvent(e)?this.eventBus.subscribe("canvas",e,t,{listenerId:"core:orbitControls",propertiesToCopy:["ctrlKey","metaKey","shiftKey","button","pointerType","clientX","clientY","pointerId","pageX","pageY"],options:i}):e==="wheel"?this.eventBus.subscribe("canvas",e,t,{listenerId:"core:orbitControls",propertiesToCopy:["deltaX","deltaY"],options:i}):this.eventBus.subscribe("canvas",e,t,{listenerId:"core:orbitControls",options:i})}removeEventListener(e,t){this.eventBus.unsubscribe("canvas",e,t)}setPointerCapture(){}releasePointerCapture(){}focus(){}blur(){}get style(){return{touchAction:"none"}}}function g3(){return!!self.OffscreenCanvas}function q_(s){return g3()&&s instanceof self.OffscreenCanvas}class x3{sizes;scene;canvas;tweaks;autoUpdateFrustum;matrix;eventBus;vec3=new S;#e;#t;#i;#s;constructor({sizes:e,scene:t,canvas:i,tweaks:a,autoUpdateFrustum:r,eventBus:n}){this.sizes=e,this.tweaks=a,this.scene=t,this.canvas=i,this.eventBus=n,this.#e=new Cn,this.matrix=new De,this.autoUpdateFrustum=r??!0,this.#s=!1,this.initInstance(),this.initControls(),this.configureTweaks()}configureTweaks(){const a=new S(0,0,0),r=new S(1,.27,1).normalize();this.tweaks.configure({orbitLocked:!!this.#i?.enabled,fov:90},{folder:"Scene",orbitLocked:{onChange:n=>{this.#i.enabled=n}},fov:{params:{min:5,max:160,step:1},onChange:n=>{const o=n,h=4.2+(4.2*(Math.tan(sa.degToRad(75/2))/Math.tan(sa.degToRad(o/2)))-4.2)*.3;this.instance.position.copy(a).addScaledVector(r,h),this.instance.fov=o,this.instance.updateProjectionMatrix(),this.instance.lookAt(a)}}})}shake({duration:e=.5,intensity:t=.2}={}){if(this.#s)return;this.#s=!0;const i=this.#t,a=i.position.clone(),r={t:0};ka.to(r,{t:1,duration:e,ease:"power2.out",onUpdate:()=>{const n=1-r.t;i.position.set(a.x+(Math.random()-.5)*2*t*n,a.y+(Math.random()-.5)*2*t*n,a.z+(Math.random()-.5)*2*t*n)},onComplete:()=>{i.position.copy(a),this.#s=!1}})}disableControls(){this.#i&&(this.#i.enabled=!1)}enableControls(){this.#i&&(this.#i.enabled=!0)}isCloseEnough(e,t){return t||(t=new S),this.vec3.copy(t).sub(this.instance.position).length()<e}get instance(){return this.#t}get frustum(){return this.#e}get controls(){return this.#i}initInstance(){const e=this.sizes;this.#t=new xi(60,e.width/e.height,.1,1e3),this.#t.position.set(5.5,1.5,5.5),this.#t.lookAt(new S(0,10,-8)),this.scene.add(this.instance)}initControls(){this.#i=new i3(this.#t,q_(this.canvas)?new v3(this.eventBus,this.sizes):this.canvas),this.#i.enableDamping=!0}resize(){this.#t.aspect=this.sizes.width/this.sizes.height,this.#t.updateProjectionMatrix()}update(){this.#i?.update(),this.autoUpdateFrustum&&this.updateFrustum()}updateFrustum(){this.matrix.multiplyMatrices(this.instance.projectionMatrix,this.instance.matrixWorldInverse),this.#e.setFromProjectionMatrix(this.matrix)}destroy(){this.#i.dispose()}}class p3{sizes;camera;scene;canvas;#e;#t;constructor({sizes:e,scene:t,camera:i,canvas:a}){this.sizes=e,this.scene=t,this.canvas=a,this.camera=i,this.#t=this.isExecutedInWorker(),this.initInstance()}get instance(){return this.#e}get autoRenderOnResize(){return this.#t}disableAutoRenderOnResize(){this.#t=!1}enableAutoRenderOnResize(){this.#t=!0}isExecutedInWorker(){return q_(this.canvas)}initInstance(){this.#e=new OP({canvas:this.canvas,antialias:!0}),this.updateSize(),this.#e.toneMapping=ia,this.#e.outputColorSpace=Ge}runInWorker(){return this.canvas instanceof OffscreenCanvas}runInMainThread(){return!this.runInWorker()}updateSize(){this.#e&&(this.#e.setSize(this.sizes.width,this.sizes.height,this.runInMainThread()),this.#e.setPixelRatio(this.sizes.pixelRatio),this.#t&&this.update())}resize(){this.updateSize()}update(){this.#e.render(this.scene,this.camera.instance)}destroy(){this.#e.dispose()}}class m3{glContext;glExtension;gpuAlpha=.1;gpuQuery=null;lastGpuTime=null;pendingQuery=null;smoothedGpuTime=0;constructor(e){const t=e.instance.getContext();t instanceof WebGL2RenderingContext&&(this.glContext=t,this.glExtension=this.glContext.getExtension("EXT_disjoint_timer_query_webgl2"))}isGpuTimingSupported(){return this.glExtension&&this.glContext instanceof WebGL2RenderingContext}begin(){this.isGpuTimingSupported()&&!this.pendingQuery&&(this.gpuQuery=this.glContext.createQuery(),this.glContext.beginQuery(this.glExtension.TIME_ELAPSED_EXT,this.gpuQuery))}end(){let e;if(this.isGpuTimingSupported()){if(this.gpuQuery&&(this.glContext.endQuery(this.glExtension.TIME_ELAPSED_EXT),this.pendingQuery=this.gpuQuery,this.gpuQuery=null),this.glExtension&&this.pendingQuery){const t=this.glContext.getQueryParameter(this.pendingQuery,WebGL2RenderingContext.QUERY_RESULT_AVAILABLE),i=this.glContext.getParameter(this.glExtension.GPU_DISJOINT_EXT);if(t&&!i){const a=this.glContext.getQueryParameter(this.pendingQuery,WebGL2RenderingContext.QUERY_RESULT);return this.lastGpuTime=e=a/1e6,this.pendingQuery=null,this.smoothedGpuTime=this.gpuAlpha*e+(1-this.gpuAlpha)*this.smoothedGpuTime,this.smoothedGpuTime}}return this.smoothedGpuTime??this.lastGpuTime??0}}}class y3 extends ui{gui;renderer;gpuPerfCollector;fpsAlpha=.4;cpuAlpha=.4;lastFrameTime;startFrameTime;smoothedFps=60;smoothedCpuDelta=0;#e;constructor({renderer:e,monitor:t,gui:i}){super(),this.gui=i,this.#e=t,this.renderer=e,this.lastFrameTime=performance.now(),this.startFrameTime=0,this.gpuPerfCollector=new m3(e),this.renderer.instance.info.autoReset=!1,this.shouldBeVisible()||this.disable()}get monitor(){return this.#e}enable(){this.gui?.enable()}disable(){this.gui?.disable()}shouldBeVisible(){const e=window.location.search;return new URLSearchParams(e).get("monitor")==="true"}gatherFpsMetrics(){const e=performance.now(),t=Math.max(1e-4,e-this.lastFrameTime),i=Math.max(1e-4,e-this.startFrameTime),a=1e3/t;return this.smoothedFps=this.fpsAlpha*a+(1-this.fpsAlpha)*this.smoothedFps,this.smoothedCpuDelta=this.cpuAlpha*i+(1-this.cpuAlpha)*this.smoothedCpuDelta,this.lastFrameTime=e,{fps:Math.round(this.smoothedFps),cpuTimePerFrame:this.smoothedCpuDelta,fullFrameTime:t}}preRender(){this.startFrameTime=performance.now(),this.gpuPerfCollector.begin()}postRender(){const e=this.gatherFpsMetrics(),t=this.gpuPerfCollector.end();this.gui?.update(this.renderer.instance.info,{...e,gpuTimePerFrame:t??e.fullFrameTime-e.cpuTimePerFrame}),this.monitor?.addSample(e.fps),this.renderer.instance.info.reset()}destroy(){this.gui?.destroy()}}class w3 extends ui{fpsThreshold;maxDeclineLevel;sampleWindowMs;fpsSamples=[];isStarted=!1;declineLevel=0;lastDeclineEmitTime=0;lastSampleTime=performance.now();constructor(e={}){super(),this.fpsThreshold=e.fpsThreshold??30,this.maxDeclineLevel=e.maxDeclineLevel??5,this.sampleWindowMs=e.sampleWindowMs??3e3,this.init()}init(){document.addEventListener("visibilitychange",()=>{this.isStarted?this.stop():(this.fpsSamples.splice(0),this.start())})}start(){this.isStarted=!0,this.fpsSamples=[],this.declineLevel=0,this.lastDeclineEmitTime=0}stop(){this.isStarted=!1}addSample(e){if(!this.isStarted||document.visibilityState==="hidden")return;const t=performance.now(),i=t-this.lastSampleTime;if(this.lastSampleTime=t,i>500)return;this.fpsSamples.push({fps:e,timestamp:t});const a=t-this.sampleWindowMs;this.fpsSamples=this.fpsSamples.filter(r=>r.timestamp>=a),this.checkForDecline(t)}checkForDecline(e){if(this.fpsSamples.length<5)return;const t=this.computeFpsAverage();this.isBelowThreshold(t)&&this.canEmit()&&(this.declineLevel++,this.lastDeclineEmitTime=e,this.emit("decline",new CustomEvent("decline",{detail:{fps:t,declineLevel:this.declineLevel}})),this.fpsSamples.splice(0))}computeFpsAverage(){return this.fpsSamples.length===0?0:this.fpsSamples.reduce((t,i)=>t+i.fps,0)/this.fpsSamples.length}isBelowThreshold(e){return e<this.fpsThreshold}canEmit(){return performance.now()-this.lastDeclineEmitTime>=1e3&&this.declineLevel<this.maxDeclineLevel}setDeclineLevel(e){this.declineLevel=Math.max(0,Math.min(e,this.maxDeclineLevel))}}/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function Mt(s){return s==null}function H_(s){return s!==null&&typeof s=="object"}function Hd(s){return s!==null&&typeof s=="object"}function z3(s,e){if(s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!==e[t])return!1;return!0}function xr(s,e){return Array.from(new Set([...Object.keys(s),...Object.keys(e)])).reduce((i,a)=>{const r=s[a],n=e[a];return Hd(r)&&Hd(n)?Object.assign(Object.assign({},i),{[a]:xr(r,n)}):Object.assign(Object.assign({},i),{[a]:a in e?n:r})},{})}function X_(s){return H_(s)?"target"in s:!1}const P3={alreadydisposed:()=>"View has been already disposed",invalidparams:s=>`Invalid parameters for '${s.name}'`,nomatchingcontroller:s=>`No matching controller for '${s.key}'`,nomatchingview:s=>`No matching view for '${JSON.stringify(s.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:s=>`Not compatible with  plugin '${s.id}'`,propertynotfound:s=>`Property '${s.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Ht{static alreadyDisposed(){return new Ht({type:"alreadydisposed"})}static notBindable(){return new Ht({type:"notbindable"})}static notCompatible(e,t){return new Ht({type:"notcompatible",context:{id:`${e}.${t}`}})}static propertyNotFound(e){return new Ht({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new Ht({type:"shouldneverhappen"})}constructor(e){var t;this.message=(t=P3[e.type](e.context))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class hh{constructor(e,t){this.obj_=e,this.key=t}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,t){const i=this.read();if(!hh.isBindable(i))throw Ht.notBindable();if(!(e in i))throw Ht.propertyNotFound(e);i[e]=t}}class ei{constructor(){this.observers_={}}on(e,t,i){var a;let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:t,key:(a=i?.key)!==null&&a!==void 0?a:t}),this}off(e,t){const i=this.observers_[e];return i&&(this.observers_[e]=i.filter(a=>a.key!==t)),this}emit(e,t){const i=this.observers_[e];i&&i.forEach(a=>{a.handler(t)})}}class b3{constructor(e,t){var i;this.constraint_=t?.constraint,this.equals_=(i=t?.equals)!==null&&i!==void 0?i:((a,r)=>a===r),this.emitter=new ei,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},a=this.constraint_?this.constraint_.constrain(e):e,r=this.rawValue_;this.equals_(r,a)&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=a,this.emitter.emit("change",{options:i,previousRawValue:r,rawValue:a,sender:this}))}}class T3{constructor(e){this.emitter=new ei,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},a=this.value_;a===e&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:i,previousRawValue:a,rawValue:this.value_,sender:this}))}}class S3{constructor(e){this.emitter=new ei,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Nt(s,e){const t=e?.constraint,i=e?.equals;return!t&&!i?new T3(s):new b3(s,e)}function E3(s){return[new S3(s),(e,t)=>{s.setRawValue(e,t)}]}class Ze{constructor(e){this.emitter=new ei,this.valMap_=e;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(e){return Object.keys(e).reduce((i,a)=>Object.assign(i,{[a]:Nt(e[a])}),{})}static fromObject(e){const t=this.createCore(e);return new Ze(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}}class Wo{constructor(e){this.values=Ze.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(e,i),t)}}class A3{constructor(e){this.values=Ze.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");let a=e;return Mt(i)||(a=Math.max(a,i)),Mt(t)||(a=Math.min(a,t)),a}}class M3{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step,i=Math.round((e-t)/this.step);return t+i*this.step}}class I3{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const C3={"**":(s,e)=>Math.pow(s,e),"*":(s,e)=>s*e,"/":(s,e)=>s/e,"%":(s,e)=>s%e,"+":(s,e)=>s+e,"-":(s,e)=>s-e,"<<":(s,e)=>s<<e,">>":(s,e)=>s>>e,">>>":(s,e)=>s>>>e,"&":(s,e)=>s&e,"^":(s,e)=>s^e,"|":(s,e)=>s|e};class D3{constructor(e,t,i){this.left=t,this.operator=e,this.right=i}evaluate(){const e=C3[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const R3={"+":s=>s,"-":s=>-s,"~":s=>~s};class O3{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=R3[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function j_(s){return(e,t)=>{for(let i=0;i<s.length;i++){const a=s[i](e,t);if(a!=="")return a}return""}}function Mo(s,e){var t;const i=s.substr(e).match(/^\s+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function N3(s,e){const t=s.substr(e,1);return t.match(/^[1-9]$/)?t:""}function Io(s,e){var t;const i=s.substr(e).match(/^[0-9]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function L3(s,e){const t=Io(s,e);if(t!=="")return t;const i=s.substr(e,1);if(e+=1,i!=="-"&&i!=="+")return"";const a=Io(s,e);return a===""?"":i+a}function Z_(s,e){const t=s.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";const i=L3(s,e);return i===""?"":t+i}function Qg(s,e){const t=s.substr(e,1);if(t==="0")return t;const i=N3(s,e);return e+=i.length,i===""?"":i+Io(s,e)}function F3(s,e){const t=Qg(s,e);if(e+=t.length,t==="")return"";const i=s.substr(e,1);if(e+=i.length,i!==".")return"";const a=Io(s,e);return e+=a.length,t+i+a+Z_(s,e)}function k3(s,e){const t=s.substr(e,1);if(e+=t.length,t!==".")return"";const i=Io(s,e);return e+=i.length,i===""?"":t+i+Z_(s,e)}function V3(s,e){const t=Qg(s,e);return e+=t.length,t===""?"":t+Z_(s,e)}const U3=j_([F3,k3,V3]);function B3(s,e){var t;const i=s.substr(e).match(/^[01]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function W3(s,e){const t=s.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";const i=B3(s,e);return i===""?"":t+i}function G3(s,e){var t;const i=s.substr(e).match(/^[0-7]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function q3(s,e){const t=s.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";const i=G3(s,e);return i===""?"":t+i}function H3(s,e){var t;const i=s.substr(e).match(/^[0-9a-f]+/i);return(t=i&&i[0])!==null&&t!==void 0?t:""}function X3(s,e){const t=s.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";const i=H3(s,e);return i===""?"":t+i}const j3=j_([W3,q3,X3]),Z3=j_([j3,U3]);function J3(s,e){const t=Z3(s,e);return e+=t.length,t===""?null:{evaluable:new I3(t),cursor:e}}function K3(s,e){const t=s.substr(e,1);if(e+=t.length,t!=="(")return null;const i=ex(s,e);if(!i)return null;e=i.cursor,e+=Mo(s,e).length;const a=s.substr(e,1);return e+=a.length,a!==")"?null:{evaluable:i.evaluable,cursor:e}}function Y3(s,e){var t;return(t=J3(s,e))!==null&&t!==void 0?t:K3(s,e)}function $g(s,e){const t=Y3(s,e);if(t)return t;const i=s.substr(e,1);if(e+=i.length,i!=="+"&&i!=="-"&&i!=="~")return null;const a=$g(s,e);return a?(e=a.cursor,{cursor:e,evaluable:new O3(i,a.evaluable)}):null}function Q3(s,e,t){t+=Mo(e,t).length;const i=s.filter(a=>e.startsWith(a,t))[0];return i?(t+=i.length,t+=Mo(e,t).length,{cursor:t,operator:i}):null}function $3(s,e){return(t,i)=>{const a=s(t,i);if(!a)return null;i=a.cursor;let r=a.evaluable;for(;;){const n=Q3(e,t,i);if(!n)break;i=n.cursor;const o=s(t,i);if(!o)return null;i=o.cursor,r=new D3(n.operator,r,o.evaluable)}return r?{cursor:i,evaluable:r}:null}}const eb=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((s,e)=>$3(s,e),$g);function ex(s,e){return e+=Mo(s,e).length,eb(s,e)}function tb(s){const e=ex(s,0);return!e||e.cursor+Mo(s,e.cursor).length!==s.length?null:e.evaluable}function ha(s){var e;const t=tb(s);return(e=t?.evaluate())!==null&&e!==void 0?e:null}function tx(s){if(typeof s=="number")return s;if(typeof s=="string"){const e=ha(s);if(!Mt(e))return e}return 0}function ib(s){return String(s)}function Fi(s){return e=>e.toFixed(Math.max(Math.min(s,20),0))}function _t(s,e,t,i,a){const r=(s-e)/(t-e);return i+r*(a-i)}function gv(s){return String(s.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function ri(s,e,t){return Math.min(Math.max(s,e),t)}function ix(s,e){return(s%e+e)%e}function sb(s,e){return Mt(s.step)?Math.max(gv(e),2):gv(s.step)}function sx(s){var e;return(e=s.step)!==null&&e!==void 0?e:1}function ax(s,e){var t;const i=Math.abs((t=s.step)!==null&&t!==void 0?t:e);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function rx(s,e){return Mt(s.step)?null:new M3(s.step,e)}function nx(s){return!Mt(s.max)&&!Mt(s.min)?new Wo({max:s.max,min:s.min}):!Mt(s.max)||!Mt(s.min)?new A3({max:s.max,min:s.min}):null}function ox(s,e){var t,i,a;return{formatter:(t=s.format)!==null&&t!==void 0?t:Fi(sb(s,e)),keyScale:(i=s.keyScale)!==null&&i!==void 0?i:sx(s),pointerScale:(a=s.pointerScale)!==null&&a!==void 0?a:ax(s,e)}}function lx(s){return{format:s.optional.function,keyScale:s.optional.number,max:s.optional.number,min:s.optional.number,pointerScale:s.optional.number,step:s.optional.number}}function J_(s){return{constraint:s.constraint,textProps:Ze.fromObject(ox(s.params,s.initialValue))}}class Pr{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class zh{constructor(e){this.target=e}}class Go extends zh{constructor(e,t,i){super(e),this.value=t,this.last=i??!0}}class ab extends zh{constructor(e,t){super(e),this.expanded=t}}class rb extends zh{constructor(e,t){super(e),this.index=t}}class nb extends zh{constructor(e,t){super(e),this.native=t}}class Co extends Pr{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new ei,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,a=>{i(a)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const t=this.controller.value;this.emitter_.emit("change",new Go(this,t.binding.target.read(),e.options.last))}}class ob{constructor(e,t){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new ei}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function lb(s){if(!("binding"in s))return!1;const e=s.binding;return X_(e)&&"read"in e&&"write"in e}function hb(s,e){const i=Object.keys(e).reduce((a,r)=>{if(a===void 0)return;const n=e[r],o=n(s[r]);return o.succeeded?Object.assign(Object.assign({},a),{[r]:o.value}):void 0},{});return i}function cb(s,e){return s.reduce((t,i)=>{if(t===void 0)return;const a=e(i);if(!(!a.succeeded||a.value===void 0))return[...t,a.value]},[])}function db(s){return s===null?!1:typeof s=="object"}function js(s){return e=>t=>{if(!e&&t===void 0)return{succeeded:!1,value:void 0};if(e&&t===void 0)return{succeeded:!0,value:void 0};const i=s(t);return i!==void 0?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function xv(s){return{custom:e=>js(e)(s),boolean:js(e=>typeof e=="boolean"?e:void 0)(s),number:js(e=>typeof e=="number"?e:void 0)(s),string:js(e=>typeof e=="string"?e:void 0)(s),function:js(e=>typeof e=="function"?e:void 0)(s),constant:e=>js(t=>t===e?e:void 0)(s),raw:js(e=>e)(s),object:e=>js(t=>{if(db(t))return hb(t,e)})(s),array:e=>js(t=>{if(Array.isArray(t))return cb(t,e)})(s)}}const Xd={optional:xv(!0),required:xv(!1)};function Gt(s,e){const t=e(Xd),i=Xd.required.object(t)(s);return i.succeeded?i.value:void 0}function Ki(s,e,t,i){if(e&&!e(s))return!1;const a=Gt(s,t);return a?i(a):!1}function Yi(s,e){var t;return xr((t=s?.())!==null&&t!==void 0?t:{},e)}function vr(s){return"value"in s}function hx(s){if(!H_(s)||!("binding"in s))return!1;const e=s.binding;return X_(e)}const Rs="http://www.w3.org/2000/svg";function ch(s){s.offsetHeight}function _b(s,e){const t=s.style.transition;s.style.transition="none",e(),s.style.transition=t}function K_(s){return s.ontouchstart!==void 0}function ub(){return globalThis}function fb(){return ub().document}function vb(s){const e=s.ownerDocument.defaultView;return e&&"document"in e?s.getContext("2d",{willReadFrequently:!0}):null}const gb={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Ph(s,e){const t=s.createElementNS(Rs,"svg");return t.innerHTML=gb[e],t}function cx(s,e,t){s.insertBefore(e,s.children[t])}function Y_(s){s.parentElement&&s.parentElement.removeChild(s)}function dx(s){for(;s.children.length>0;)s.removeChild(s.children[0])}function xb(s){for(;s.childNodes.length>0;)s.removeChild(s.childNodes[0])}function _x(s){return s.relatedTarget?s.relatedTarget:"explicitOriginalTarget"in s?s.explicitOriginalTarget:null}function ra(s,e){s.emitter.on("change",t=>{e(t.rawValue)}),e(s.rawValue)}function Ls(s,e,t){ra(s.value(e),t)}const pb="tp";function st(s){return(t,i)=>[pb,"-",s,"v",t?`_${t}`:"",i?`-${i}`:""].join("")}const Yn=st("lbl");function mb(s,e){const t=s.createDocumentFragment();return e.split(`
`).map(a=>s.createTextNode(a)).forEach((a,r)=>{r>0&&t.appendChild(s.createElement("br")),t.appendChild(a)}),t}class ux{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Yn()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Yn("l")),Ls(t.props,"label",r=>{Mt(r)?this.element.classList.add(Yn(void 0,"nol")):(this.element.classList.remove(Yn(void 0,"nol")),xb(i),i.appendChild(mb(e,r)))}),this.element.appendChild(i),this.labelElement=i;const a=e.createElement("div");a.classList.add(Yn("v")),this.element.appendChild(a),this.valueElement=a}}class fx{constructor(e,t){this.props=t.props,this.valueController=t.valueController,this.viewProps=t.valueController.viewProps,this.view=new ux(e,{props:t.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Ki(e,null,t=>({label:t.optional.string}),t=>(this.props.set("label",t.label),!0))}exportProps(){return Yi(null,{label:this.props.get("label")})}}function yb(){return["veryfirst","first","last","verylast"]}const pv=st(""),mv={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class bh{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{yb().forEach(i=>{t.classList.remove(pv(void 0,mv[i]))}),this.blade.get("positions").forEach(i=>{t.classList.add(pv(void 0,mv[i]))})}),this.viewProps.handleDispose(()=>{Y_(t)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Ki(e,null,t=>({disabled:t.required.boolean,hidden:t.required.boolean}),t=>(this.viewProps.importState(t),!0))}exportState(){return Yi(null,Object.assign({},this.viewProps.exportState()))}}class pr extends bh{constructor(e,t){if(t.value!==t.valueController.value)throw Ht.shouldNeverHappen();const i=t.valueController.viewProps,a=new fx(e,{blade:t.blade,props:t.props,valueController:t.valueController});super(Object.assign(Object.assign({},t),{view:new ux(e,{props:t.props,viewProps:i}),viewProps:i})),this.labelController=a,this.value=t.value,this.valueController=t.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Ki(e,t=>{var i,a,r;return super.importState(t)&&this.labelController.importProps(t)&&((r=(a=(i=this.valueController).importProps)===null||a===void 0?void 0:a.call(i,e))!==null&&r!==void 0?r:!0)},t=>({value:t.optional.raw}),t=>(t.value&&(this.value.rawValue=t.value),!0))}exportState(){var e,t,i;return Yi(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(i=(t=(e=this.valueController).exportProps)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}))}}function yv(s){const e=Object.assign({},s);return delete e.value,e}class vx extends pr{constructor(e,t){super(e,t),this.tag=t.tag}importState(e){return Ki(e,t=>super.importState(yv(e)),t=>({tag:t.optional.string}),t=>(this.tag=t.tag,!0))}exportState(){return Yi(()=>yv(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function wb(s){return vr(s)&&hx(s.value)}class zb extends vx{importState(e){return Ki(e,t=>super.importState(t),t=>({binding:t.required.object({value:t.required.raw})}),t=>(this.value.binding.inject(t.binding.value),this.value.fetch(),!0))}}function Pb(s){return vr(s)&&lb(s.value)}function gx(s,e){for(;s.length<e;)s.push(void 0)}function bb(s){const e=[];return gx(e,s),e}function Tb(s){const e=s.indexOf(void 0);return e<0?s:s.slice(0,e)}function Sb(s,e){const t=[...Tb(s),e];return t.length>s.length?t.splice(0,t.length-s.length):gx(t,s.length),t}class Eb{constructor(e){this.emitter=new ei,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=Nt(bb(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=Sb(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Ab(s){if(!("binding"in s))return!1;const e=s.binding;return X_(e)&&"read"in e&&!("write"in e)}class Mb extends vx{exportState(){return Yi(()=>super.exportState(),{binding:{readonly:!0}})}}function Ib(s){return vr(s)&&Ab(s.value)}class Cb extends Pr{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,t){const i=t.bind(this);return this.controller.buttonController.emitter.on(e,r=>{i(new nb(this,r.nativeEvent))}),this}off(e,t){return this.controller.buttonController.emitter.off(e,t),this}}function Db(s,e,t){t?s.classList.add(e):s.classList.remove(e)}function Ln(s,e){return t=>{Db(s,e,t)}}function Q_(s,e){ra(s,t=>{e.textContent=t??""})}const Sc=st("btn");class Rb{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Sc()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("button");i.classList.add(Sc("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const a=e.createElement("div");a.classList.add(Sc("t")),Q_(t.props.value("title"),a),this.buttonElement.appendChild(a)}}class Ob{constructor(e,t){this.emitter=new ei,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Rb(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Ki(e,null,t=>({title:t.optional.string}),t=>(this.props.set("title",t.title),!0))}exportProps(){return Yi(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class wv extends bh{constructor(e,t){const i=new Ob(e,{props:t.buttonProps,viewProps:t.viewProps}),a=new fx(e,{blade:t.blade,props:t.labelProps,valueController:i});super({blade:t.blade,view:a.view,viewProps:t.viewProps}),this.buttonController=i,this.labelController=a}importState(e){return Ki(e,t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t),()=>({}),()=>!0)}exportState(){return Yi(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class xx{constructor(e){const[t,i]=e.split("-"),a=t.split(".");this.major=parseInt(a[0],10),this.minor=parseInt(a[1],10),this.patch=parseInt(a[2],10),this.prerelease=i??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const Fn=new xx("2.0.5");function Ti(s){return Object.assign({core:Fn},s)}const Nb=Ti({id:"button",type:"blade",accept(s){const e=Gt(s,t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string}));return e?{params:e}:null},controller(s){return new wv(s.document,{blade:s.blade,buttonProps:Ze.fromObject({title:s.params.title}),labelProps:Ze.fromObject({label:s.params.label}),viewProps:s.viewProps})},api(s){return s.controller instanceof wv?new Cb(s.controller):null}});function Lb(s,e){return s.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Fb(s,e){return s.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function kb(s,e){return s.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function Vb(s){return H_(s)?"refresh"in s&&typeof s.refresh=="function":!1}function Ub(s,e){if(!hh.isBindable(s))throw Ht.notBindable();return new hh(s,e)}class Bb{constructor(e,t){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new ei,this.pool_=t,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,t,i){const a=i??{},r=this.controller_.element.ownerDocument,n=this.pool_.createBinding(r,Ub(e,t),a),o=this.pool_.createBindingApi(n);return this.add(o,a.index)}addFolder(e){return Fb(this,e)}addButton(e){return Lb(this,e)}addTab(e){return kb(this,e)}add(e,t){const i=e.controller;return this.controller_.rack.add(i,t),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const t=this.controller_.element.ownerDocument,i=this.pool_.createBlade(t,e),a=this.pool_.createApi(i);return this.add(a,e.index)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,a=>{i(a)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.children.forEach(e=>{Vb(e)&&e.refresh()})}onRackValueChange_(e){const t=e.bladeController,i=this.pool_.createApi(t),a=hx(t.value)?t.value.binding:null;this.emitter_.emit("change",new Go(i,a?a.target.read():t.value.rawValue,e.options.last))}}class $_ extends Pr{constructor(e,t){super(e),this.rackApi_=new Bb(e.rackController,t)}refresh(){this.rackApi_.refresh()}}class eu extends bh{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Ki(e,t=>super.importState(t),t=>({children:t.required.array(t.required.raw)}),t=>this.rackController.rack.children.every((i,a)=>i.importState(t.children[a])))}exportState(){return Yi(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function jd(s){return"rackController"in s}class Wb{constructor(e){this.emitter=new ei,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw Ht.shouldNeverHappen();const i=t!==void 0?t:this.items_.length;this.items_.splice(i,0,e),this.cache_.add(e);const a=this.extract_(e);a&&(a.emitter.on("add",this.onSubListAdd_),a.emitter.on("remove",this.onSubListRemove_),a.allItems().forEach(r=>{this.cache_.add(r)})),this.emitter.emit("add",{index:i,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const i=this.extract_(e);i&&(i.allItems().forEach(a=>{this.cache_.delete(a)}),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function Gb(s,e){for(let t=0;t<s.length;t++){const i=s[t];if(vr(i)&&i.value===e)return i}return null}function qb(s){return jd(s)?s.rackController.rack.bcSet_:null}class Hb{constructor(e){var t,i;this.emitter=new ei,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(t=e.blade)!==null&&t!==void 0?t:null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new Wb(qb),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var i;(i=e.parent)===null||i===void 0||i.remove(e),e.parent=this,this.bcSet_.add(e,t)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:t,sender:this}),!t)return;const i=e.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),vr(i))i.value.emitter.on("change",this.onChildValueChange_);else if(jd(i)){const a=i.rackController.rack;if(a){const r=a.emitter;r.on("layout",this.onRackLayout_),r.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:t,sender:this}),!t)return;const i=e.item;if(vr(i))i.value.emitter.off("change",this.onChildValueChange_);else if(jd(i)){const a=i.rackController.rack;if(a){const r=a.emitter;r.off("layout",this.onRackLayout_),r.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(a=>!a.viewProps.get("hidden")),t=e[0],i=e[e.length-1];this.bcSet_.items.forEach(a=>{const r=[];a===t&&(r.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&r.push("veryfirst")),a===i&&(r.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&r.push("verylast")),a.blade.set("positions",r)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildValueChange_(e){const t=Gb(this.find(vr),e.sender);if(!t)throw Ht.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:t,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class tu{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const t=new Hb({blade:e.root?void 0:e.blade,viewProps:e.viewProps});t.emitter.on("add",this.onRackAdd_),t.emitter.on("remove",this.onRackRemove_),this.rack=t,this.viewProps.handleDispose(()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&cx(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&Y_(e.bladeController.view.element)}}function kn(){return new Ze({positions:Nt([],{equals:z3})})}class qo extends Ze{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=Ze.createCore(t);return new qo(i)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Mt(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const i=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};Ls(this,"expanded",i),Ls(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Xb(s,e){let t=0;return _b(e,()=>{s.set("expandedHeight",null),s.set("temporaryExpanded",!0),ch(e),t=e.clientHeight,s.set("temporaryExpanded",null),ch(e)}),t}function zv(s,e){e.style.height=s.styleHeight}function iu(s,e){s.value("expanded").emitter.on("beforechange",()=>{if(s.set("completed",!1),Mt(s.get("expandedHeight"))){const t=Xb(s,e);t>0&&s.set("expandedHeight",t)}s.set("shouldFixHeight",!0),ch(e)}),s.emitter.on("change",()=>{zv(s,e)}),zv(s,e),e.addEventListener("transitionend",t=>{t.propertyName==="height"&&s.cleanUpTransition()})}class px extends $_{constructor(e,t){super(e,t),this.emitter_=new ei,this.controller.foldable.value("expanded").emitter.on("change",i=>{this.emitter_.emit("fold",new ab(this,i.sender.rawValue))}),this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,a=>{i(a)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const mx=st("cnt");class jb{constructor(e,t){var i;this.className_=st((i=t.viewName)!==null&&i!==void 0?i:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),mx()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Ls(this.foldable_,"completed",Ln(this.element,this.className_(void 0,"cpl")));const a=e.createElement("button");a.classList.add(this.className_("b")),Ls(t.props,"title",h=>{Mt(h)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(a),this.element.appendChild(a),this.buttonElement=a;const r=e.createElement("div");r.classList.add(this.className_("i")),this.element.appendChild(r);const n=e.createElement("div");n.classList.add(this.className_("t")),Q_(t.props.value("title"),n),this.buttonElement.appendChild(n),this.titleElement=n;const o=e.createElement("div");o.classList.add(this.className_("m")),this.buttonElement.appendChild(o);const l=e.createElement("div");l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class Zd extends eu{constructor(e,t){var i;const a=qo.create((i=t.expanded)!==null&&i!==void 0?i:!0),r=new jb(e,{foldable:a,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new tu({blade:t.blade,element:r.containerElement,root:t.root,viewProps:t.viewProps}),view:r})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=a,iu(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Ki(e,t=>super.importState(t),t=>({expanded:t.required.boolean,title:t.optional.string}),t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0))}exportState(){return Yi(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Zb=Ti({id:"folder",type:"blade",accept(s){const e=Gt(s,t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}));return e?{params:e}:null},controller(s){return new Zd(s.document,{blade:s.blade,expanded:s.params.expanded,props:Ze.fromObject({title:s.params.title}),viewProps:s.viewProps})},api(s){return s.controller instanceof Zd?new px(s.controller,s.pool):null}}),Jb=st("");function Pv(s,e){return Ln(s,Jb(void 0,e))}class fa extends Ze{constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=E3(Nt(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,i,a;const r=e??{};return new fa(Ze.createCore({disabled:(t=r.disabled)!==null&&t!==void 0?t:!1,disposed:!1,hidden:(i=r.hidden)!==null&&i!==void 0?i:!1,parent:(a=r.parent)!==null&&a!==void 0?a:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){ra(this.globalDisabled_,Pv(e,"disabled")),Ls(this,"hidden",Pv(e,"hidden"))}bindDisabled(e){ra(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){ra(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const i=e.previousRawValue;i?.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const bv=st("tbp");class Kb{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(bv()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(bv("c")),this.element.appendChild(i),this.containerElement=i}}const Qn=st("tbi");class Yb{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Qn()),t.viewProps.bindClassModifiers(this.element),Ls(t.props,"selected",r=>{r?this.element.classList.add(Qn(void 0,"sel")):this.element.classList.remove(Qn(void 0,"sel"))});const i=e.createElement("button");i.classList.add(Qn("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const a=e.createElement("div");a.classList.add(Qn("t")),Q_(t.props.value("title"),a),this.buttonElement.appendChild(a),this.titleElement=a}}class Qb{constructor(e,t){this.emitter=new ei,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Yb(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Jd extends eu{constructor(e,t){const i=new Kb(e,{viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new tu({blade:t.blade,element:i.containerElement,viewProps:t.viewProps}),view:i})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Qb(e,{props:t.itemProps,viewProps:fa.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=t.props,Ls(this.props,"selected",a=>{this.itemController.props.set("selected",a),this.viewProps.set("hidden",!a)})}get itemController(){return this.ic_}importState(e){return Ki(e,t=>super.importState(t),t=>({selected:t.required.boolean,title:t.required.string}),t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0))}exportState(){return Yi(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class $b extends $_{constructor(e,t){super(e,t),this.emitter_=new ei,this.onSelect_=this.onSelect_.bind(this),this.pool_=t,this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const t=this.controller.view.element.ownerDocument,i=new Jd(t,{blade:kn(),itemProps:Ze.fromObject({selected:!1,title:e.title}),props:Ze.fromObject({selected:!1}),viewProps:fa.create()}),a=this.pool_.createApi(i);return this.rackApi_.add(a,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,t){const i=t.bind(this);return this.emitter_.on(e,a=>{i(a)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}onSelect_(e){this.emitter_.emit("select",new rb(this,e.rawValue))}}class eT extends $_{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addBlade(e){return this.rackApi_.addBlade(e)}}const Tv=-1;class tT{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Nt(!0),this.selectedIndex=Nt(Tv),this.items_=[]}add(e,t){const i=t??this.items_.length;this.items_.splice(i,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Tv,this.empty.rawValue=!0;return}const e=this.items_.findIndex(t=>t.rawValue);e<0?(this.items_.forEach((t,i)=>{t.rawValue=i===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,i)=>{t.rawValue=i===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex(i=>i===e.sender);this.items_.forEach((i,a)=>{i.rawValue=a===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}}const $n=st("tab");class iT{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add($n(),mx()),t.viewProps.bindClassModifiers(this.element),ra(t.empty,Ln(this.element,$n(void 0,"nop")));const i=e.createElement("div");i.classList.add($n("t")),this.element.appendChild(i),this.itemsElement=i;const a=e.createElement("div");a.classList.add($n("i")),this.element.appendChild(a);const r=e.createElement("div");r.classList.add($n("c")),this.element.appendChild(r),this.contentsElement=r}}class Sv extends eu{constructor(e,t){const i=new tT,a=new iT(e,{empty:i.empty,viewProps:t.viewProps});super({blade:t.blade,rackController:new tu({blade:t.blade,element:a.contentsElement,viewProps:t.viewProps}),view:a}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const r=this.rackController.rack;r.emitter.on("add",this.onRackAdd_),r.emitter.on("remove",this.onRackRemove_),this.tab=i}add(e,t){this.rackController.rack.add(e,t)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const t=e.bladeController;cx(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.tab.add(t.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const t=e.bladeController;Y_(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.tab.remove(t.props.value("selected"))}}const yx=Ti({id:"tab",type:"blade",accept(s){const e=Gt(s,t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(s){const e=new Sv(s.document,{blade:s.blade,viewProps:s.viewProps});return s.params.pages.forEach(t=>{const i=new Jd(s.document,{blade:kn(),itemProps:Ze.fromObject({selected:!1,title:t.title}),props:Ze.fromObject({selected:!1}),viewProps:fa.create()});e.add(i)}),e},api(s){return s.controller instanceof Sv?new $b(s.controller,s.pool):s.controller instanceof Jd?new eT(s.controller,s.pool):null}});function sT(s,e){const t=s.accept(e.params);if(!t)return null;const i=Gt(e.params,a=>({disabled:a.optional.boolean,hidden:a.optional.boolean}));return s.controller({blade:kn(),document:e.document,params:Object.assign(Object.assign({},t.params),{disabled:i?.disabled,hidden:i?.hidden}),viewProps:fa.create({disabled:i?.disabled,hidden:i?.hidden})})}class su extends Co{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class aT{constructor(){this.disabled=!1,this.emitter=new ei}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class rT{constructor(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new ei,this.interval_=t,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Ho{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((t,i)=>i.constrain(t),e)}}function dh(s,e){if(s instanceof e)return s;if(s instanceof Ho){const t=s.constraints.reduce((i,a)=>i||(a instanceof e?a:null),null);if(t)return t}return null}class Xo{constructor(e){this.values=Ze.fromObject({options:e})}constrain(e){const t=this.values.get("options");return t.length===0||t.filter(a=>a.value===e).length>0?e:t[0].value}}function jo(s){var e;const t=Xd;if(Array.isArray(s))return(e=Gt({items:s},i=>({items:i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof s=="object")return t.required.raw(s).value}function au(s){if(Array.isArray(s))return s;const e=[];return Object.keys(s).forEach(t=>{e.push({text:t,value:s[t]})}),e}function ru(s){return Mt(s)?null:new Xo(au(s))}const Ec=st("lst");class nT{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(Ec()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("select");i.classList.add(Ec("s")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const a=e.createElement("div");a.classList.add(Ec("m")),a.appendChild(Ph(e,"dropdown")),this.element.appendChild(a),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,Ls(this.props_,"options",r=>{dx(this.selectElement),r.forEach(n=>{const o=e.createElement("option");o.textContent=n.text,this.selectElement.appendChild(o)}),this.update_()})}update_(){const e=this.props_.get("options").map(t=>t.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class Va{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new nT(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}importProps(e){return Ki(e,null,t=>({options:t.required.custom(jo)}),t=>(this.props.set("options",au(t.options)),!0))}exportProps(){return Yi(null,{options:this.props.get("options")})}}const Ev=st("pop");class oT{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ev()),t.viewProps.bindClassModifiers(this.element),ra(t.shows,Ln(this.element,Ev(void 0,"v")))}}class wx{constructor(e,t){this.shows=Nt(!1),this.viewProps=t.viewProps,this.view=new oT(e,{shows:this.shows,viewProps:this.viewProps})}}const Av=st("txt");class lT{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Av()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const i=e.createElement("input");i.classList.add(Av("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class Do{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new lT(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget.value,a=this.parser_(i);Mt(a)||(this.value.rawValue=a),this.view.refresh()}}function hT(s){return String(s)}function zx(s){return s==="false"?!1:!!s}function Mv(s){return hT(s)}function cT(s){return e=>s.reduce((t,i)=>t!==null?t:i(e),null)}const dT=Fi(0);function _h(s){return dT(s)+"%"}function Px(s){return String(s)}function Kd(s){return s}function Vn({primary:s,secondary:e,forward:t,backward:i}){let a=!1;function r(n){a||(a=!0,n(),a=!1)}s.emitter.on("change",n=>{r(()=>{e.setRawValue(t(s.rawValue,e.rawValue),n.options)})}),e.emitter.on("change",n=>{r(()=>{s.setRawValue(i(s.rawValue,e.rawValue),n.options)}),r(()=>{e.setRawValue(t(s.rawValue,e.rawValue),n.options)})}),r(()=>{e.setRawValue(t(s.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Ii(s,e){const t=s*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}function Ro(s){return{altKey:s.altKey,downKey:s.key==="ArrowDown",shiftKey:s.shiftKey,upKey:s.key==="ArrowUp"}}function ca(s){return{altKey:s.altKey,downKey:s.key==="ArrowLeft",shiftKey:s.shiftKey,upKey:s.key==="ArrowRight"}}function _T(s){return s==="ArrowUp"||s==="ArrowDown"}function bx(s){return _T(s)||s==="ArrowLeft"||s==="ArrowRight"}function Ac(s,e){var t,i;const a=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:s.pageX-(((t=a&&a.scrollX)!==null&&t!==void 0?t:0)+r.left),y:s.pageY-(((i=a&&a.scrollY)!==null&&i!==void 0?i:0)+r.top)}}class br{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new ei,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(Ac(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(Ac(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(Ac(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const i=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,a=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-a.left,y:i.clientY-a.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const ts=st("txt");class uT{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(ts(),ts(void 0,"num")),t.arrayPosition&&this.element.classList.add(ts(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(ts("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ts()),this.inputElement.classList.add(ts("i"));const a=e.createElement("div");a.classList.add(ts("k")),this.element.appendChild(a),this.knobElement=a;const r=e.createElementNS(Rs,"svg");r.classList.add(ts("g")),this.knobElement.appendChild(r);const n=e.createElementNS(Rs,"path");n.classList.add(ts("gb")),r.appendChild(n),this.guideBodyElem_=n;const o=e.createElementNS(Rs,"path");o.classList.add(ts("gh")),r.appendChild(o),this.guideHeadElem_=o;const l=e.createElement("div");l.classList.add(st("tt")()),this.knobElement.appendChild(l),this.tooltipElem_=l,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(ts(void 0,"drg"));return}this.element.classList.add(ts(void 0,"drg"));const t=e.rawValue/this.props_.get("pointerScale"),i=t+(t>0?-1:t<0?1:0),a=ri(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+a},0 L${i},4 L${i+a},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const r=this.props_.get("formatter");this.tooltipElem_.textContent=r(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class Zo{constructor(e,t){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=t.parser,this.props=t.props,this.sliderProps_=(i=t.sliderProps)!==null&&i!==void 0?i:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=Nt(null),this.view=new uT(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const a=new br(this.view.knobElement);a.emitter.on("down",this.onPointerDown_),a.emitter.on("move",this.onPointerMove_),a.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,i;const a=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("min"),r=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("max");let n=e;return a!==void 0&&(n=Math.max(n,a)),r!==void 0&&(n=Math.min(n,r)),n}onInputChange_(e){const i=e.currentTarget.value,a=this.parser_(i);Mt(a)||(this.value.rawValue=this.constrainValue_(a)),this.view.refresh()}onInputKeyDown_(e){const t=Ii(this.props.get("keyScale"),Ro(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Ii(this.props.get("keyScale"),Ro(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("pointerScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Mc=st("sld");class fT{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Mc()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Mc("t")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const a=e.createElement("div");a.classList.add(Mc("k")),this.trackElement.appendChild(a),this.knobElement=a,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=ri(_t(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class vT{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new fT(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new br(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(_t(ri(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Ii(this.props.get("keyScale"),ca(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){Ii(this.props.get("keyScale"),ca(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Ic=st("sldtxt");class gT{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ic());const i=e.createElement("div");i.classList.add(Ic("s")),this.sliderView_=t.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const a=e.createElement("div");a.classList.add(Ic("t")),this.textView_=t.textView,a.appendChild(this.textView_.element),this.element.appendChild(a)}}class uh{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new vT(e,{props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new Zo(e,{parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new gT(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Ki(e,null,t=>({max:t.required.number,min:t.required.number}),t=>{const i=this.sliderC_.props;return i.set("max",t.max),i.set("min",t.min),!0})}exportProps(){const e=this.sliderC_.props;return Yi(null,{max:e.get("max"),min:e.get("min")})}}function Tx(s){return{sliderProps:new Ze({keyScale:s.keyScale,max:s.max,min:s.min}),textProps:new Ze({formatter:Nt(s.formatter),keyScale:s.keyScale,pointerScale:Nt(s.pointerScale)})}}const xT={containerUnitSize:"cnt-usz"};function Sx(s){return`--${xT[s]}`}function Oo(s){return lx(s)}function Ca(s){if(Hd(s))return Gt(s,Oo)}function ta(s,e){if(!s)return;const t=[],i=rx(s,e);i&&t.push(i);const a=nx(s);return a&&t.push(a),new Ho(t)}function pT(s){return s?s.major===Fn.major:!1}function Ex(s){if(s==="inline"||s==="popup")return s}function Jo(s,e){s.write(e)}const Rl=st("ckb");class mT{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Rl()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("label");i.classList.add(Rl("l")),this.element.appendChild(i),this.labelElement=i;const a=e.createElement("input");a.classList.add(Rl("i")),a.type="checkbox",this.labelElement.appendChild(a),this.inputElement=a,t.viewProps.bindDisabled(this.inputElement);const r=e.createElement("div");r.classList.add(Rl("w")),this.labelElement.appendChild(r);const n=Ph(e,"check");r.appendChild(n),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class yT{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new mT(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}function wT(s){const e=[],t=ru(s.options);return t&&e.push(t),new Ho(e)}const zT=Ti({id:"input-bool",type:"input",accept:(s,e)=>{if(typeof s!="boolean")return null;const t=Gt(e,i=>({options:i.optional.custom(jo),readonly:i.optional.constant(!1)}));return t?{initialValue:s,params:t}:null},binding:{reader:s=>zx,constraint:s=>wT(s.params),writer:s=>Jo},controller:s=>{const e=s.document,t=s.value,i=s.constraint,a=i&&dh(i,Xo);return a?new Va(e,{props:new Ze({options:a.values.value("options")}),value:t,viewProps:s.viewProps}):new yT(e,{value:t,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="boolean"?null:s.controller.valueController instanceof Va?new su(s.controller):null}}),sr=st("col");class PT{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(sr()),t.foldable.bindExpandedClass(this.element,sr(void 0,"expanded")),Ls(t.foldable,"completed",Ln(this.element,sr(void 0,"cpl")));const i=e.createElement("div");i.classList.add(sr("h")),this.element.appendChild(i);const a=e.createElement("div");a.classList.add(sr("s")),i.appendChild(a),this.swatchElement=a;const r=e.createElement("div");if(r.classList.add(sr("t")),i.appendChild(r),this.textElement=r,t.pickerLayout==="inline"){const n=e.createElement("div");n.classList.add(sr("p")),this.element.appendChild(n),this.pickerElement=n}else this.pickerElement=null}}function bT(s,e,t){const i=ri(s/255,0,1),a=ri(e/255,0,1),r=ri(t/255,0,1),n=Math.max(i,a,r),o=Math.min(i,a,r),l=n-o;let h=0,c=0;const d=(o+n)/2;return l!==0&&(c=l/(1-Math.abs(n+o-1)),i===n?h=(a-r)/l:a===n?h=2+(r-i)/l:h=4+(i-a)/l,h=h/6+(h<0?1:0)),[h*360,c*100,d*100]}function TT(s,e,t){const i=(s%360+360)%360,a=ri(e/100,0,1),r=ri(t/100,0,1),n=(1-Math.abs(2*r-1))*a,o=n*(1-Math.abs(i/60%2-1)),l=r-n/2;let h,c,d;return i>=0&&i<60?[h,c,d]=[n,o,0]:i>=60&&i<120?[h,c,d]=[o,n,0]:i>=120&&i<180?[h,c,d]=[0,n,o]:i>=180&&i<240?[h,c,d]=[0,o,n]:i>=240&&i<300?[h,c,d]=[o,0,n]:[h,c,d]=[n,0,o],[(h+l)*255,(c+l)*255,(d+l)*255]}function ST(s,e,t){const i=ri(s/255,0,1),a=ri(e/255,0,1),r=ri(t/255,0,1),n=Math.max(i,a,r),o=Math.min(i,a,r),l=n-o;let h;l===0?h=0:n===i?h=60*(((a-r)/l%6+6)%6):n===a?h=60*((r-i)/l+2):h=60*((i-a)/l+4);const c=n===0?0:l/n,d=n;return[h,c*100,d*100]}function Ax(s,e,t){const i=ix(s,360),a=ri(e/100,0,1),r=ri(t/100,0,1),n=r*a,o=n*(1-Math.abs(i/60%2-1)),l=r-n;let h,c,d;return i>=0&&i<60?[h,c,d]=[n,o,0]:i>=60&&i<120?[h,c,d]=[o,n,0]:i>=120&&i<180?[h,c,d]=[0,n,o]:i>=180&&i<240?[h,c,d]=[0,o,n]:i>=240&&i<300?[h,c,d]=[o,0,n]:[h,c,d]=[n,0,o],[(h+l)*255,(c+l)*255,(d+l)*255]}function ET(s,e,t){const i=t+e*(100-Math.abs(2*t-100))/200;return[s,i!==0?e*(100-Math.abs(2*t-100))/i:0,t+e*(100-Math.abs(2*t-100))/200]}function AT(s,e,t){const i=100-Math.abs(t*(200-e)/100-100);return[s,i!==0?e*t/i:0,t*(200-e)/200]}function Fs(s){return[s[0],s[1],s[2]]}function Th(s,e){return[s[0],s[1],s[2],e]}const MT={hsl:{hsl:(s,e,t)=>[s,e,t],hsv:ET,rgb:TT},hsv:{hsl:AT,hsv:(s,e,t)=>[s,e,t],rgb:Ax},rgb:{hsl:bT,hsv:ST,rgb:(s,e,t)=>[s,e,t]}};function Mn(s,e){return[e==="float"?1:s==="rgb"?255:360,e==="float"?1:s==="rgb"?255:100,e==="float"?1:s==="rgb"?255:100]}function IT(s,e){return s===e?e:ix(s,e)}function Mx(s,e,t){var i;const a=Mn(e,t);return[e==="rgb"?ri(s[0],0,a[0]):IT(s[0],a[0]),ri(s[1],0,a[1]),ri(s[2],0,a[2]),ri((i=s[3])!==null&&i!==void 0?i:1,0,1)]}function Iv(s,e,t,i){const a=Mn(e,t),r=Mn(e,i);return s.map((n,o)=>n/a[o]*r[o])}function Ix(s,e,t){const i=Iv(s,e.mode,e.type,"int"),a=MT[e.mode][t.mode](...i);return Iv(a,t.mode,"int",t.type)}class lt{static black(){return new lt([0,0,0],"rgb")}constructor(e,t){this.type="int",this.mode=t,this.comps_=Mx(e,t,this.type)}getComponents(e){return Th(Ix(Fs(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const wa=st("colp");class CT{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(wa()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(wa("hsv"));const a=e.createElement("div");a.classList.add(wa("sv")),this.svPaletteView_=t.svPaletteView,a.appendChild(this.svPaletteView_.element),i.appendChild(a);const r=e.createElement("div");r.classList.add(wa("h")),this.hPaletteView_=t.hPaletteView,r.appendChild(this.hPaletteView_.element),i.appendChild(r),this.element.appendChild(i);const n=e.createElement("div");if(n.classList.add(wa("rgb")),this.textsView_=t.textsView,n.appendChild(this.textsView_.element),this.element.appendChild(n),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const o=e.createElement("div");o.classList.add(wa("a"));const l=e.createElement("div");l.classList.add(wa("ap")),l.appendChild(this.alphaViews_.palette.element),o.appendChild(l);const h=e.createElement("div");h.classList.add(wa("at")),h.appendChild(this.alphaViews_.text.element),o.appendChild(h),this.element.appendChild(o)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(t=>t.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function DT(s){return s==="int"?"int":s==="float"?"float":void 0}function nu(s){return Gt(s,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(DT)}),expanded:e.optional.boolean,picker:e.optional.custom(Ex),readonly:e.optional.constant(!1)}))}function mr(s){return s?.1:1}function Cx(s){var e;return(e=s.color)===null||e===void 0?void 0:e.type}class ou{constructor(e,t){this.type="float",this.mode=t,this.comps_=Mx(e,t,this.type)}getComponents(e){return Th(Ix(Fs(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const RT={int:(s,e)=>new lt(s,e),float:(s,e)=>new ou(s,e)};function lu(s,e,t){return RT[t](s,e)}function OT(s){return s.type==="float"}function NT(s){return s.type==="int"}function LT(s){const e=s.getComponents(),t=Mn(s.mode,"int");return new lt([Math.round(_t(e[0],0,1,0,t[0])),Math.round(_t(e[1],0,1,0,t[1])),Math.round(_t(e[2],0,1,0,t[2])),e[3]],s.mode)}function FT(s){const e=s.getComponents(),t=Mn(s.mode,"int");return new ou([_t(e[0],0,t[0],0,1),_t(e[1],0,t[1],0,1),_t(e[2],0,t[2],0,1),e[3]],s.mode)}function bi(s,e){if(s.type===e)return s;if(NT(s)&&e==="float")return FT(s);if(OT(s)&&e==="int")return LT(s);throw Ht.shouldNeverHappen()}function kT(s,e){return s.alpha===e.alpha&&s.mode===e.mode&&s.notation===e.notation&&s.type===e.type}function cs(s,e){const t=s.match(/^(.+)%$/);return Math.min(t?parseFloat(t[1])*.01*e:parseFloat(s),e)}const VT={deg:s=>s,grad:s=>s*360/400,rad:s=>s*360/(2*Math.PI),turn:s=>s*360};function Dx(s){const e=s.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(s);const t=parseFloat(e[1]),i=e[2];return VT[i](t)}function Rx(s){const e=s.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[cs(e[1],255),cs(e[2],255),cs(e[3],255)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function UT(s){const e=Rx(s);return e?new lt(e,"rgb"):null}function Ox(s){const e=s.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[cs(e[1],255),cs(e[2],255),cs(e[3],255),cs(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function BT(s){const e=Ox(s);return e?new lt(e,"rgb"):null}function Nx(s){const e=s.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Dx(e[1]),cs(e[2],100),cs(e[3],100)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function WT(s){const e=Nx(s);return e?new lt(e,"hsl"):null}function Lx(s){const e=s.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Dx(e[1]),cs(e[2],100),cs(e[3],100),cs(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function GT(s){const e=Lx(s);return e?new lt(e,"hsl"):null}function Fx(s){const e=s.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const t=s.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function qT(s){const e=Fx(s);return e?new lt(e,"rgb"):null}function kx(s){const e=s.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),_t(parseInt(e[4]+e[4],16),0,255,0,1)];const t=s.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),_t(parseInt(t[4],16),0,255,0,1)]:null}function HT(s){const e=kx(s);return e?new lt(e,"rgb"):null}function Vx(s){const e=s.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function XT(s){return e=>{const t=Vx(e);return t?lu(t,"rgb",s):null}}function Ux(s){const e=s.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function jT(s){return e=>{const t=Ux(e);return t?lu(t,"rgb",s):null}}const ZT=[{parser:Fx,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:kx,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Rx,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Ox,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:Nx,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Lx,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Vx,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Ux,result:{alpha:!0,mode:"rgb",notation:"object"}}];function JT(s){return ZT.reduce((e,{parser:t,result:i})=>e||(t(s)?i:null),null)}function KT(s,e="int"){const t=JT(s);return t?t.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},t),{type:"int"}):t.notation==="func"?Object.assign(Object.assign({},t),{type:e}):null:null}function Ko(s){const e=[qT,HT,UT,BT,WT,GT];e.push(XT("int"),jT("int"));const t=cT(e);return i=>{const a=t(i);return a?bi(a,s):null}}function YT(s){const e=Ko("int");if(typeof s!="string")return lt.black();const t=e(s);return t??lt.black()}function Bx(s){const e=ri(Math.floor(s),0,255).toString(16);return e.length===1?`0${e}`:e}function hu(s,e="#"){const t=Fs(s.getComponents("rgb")).map(Bx).join("");return`${e}${t}`}function cu(s,e="#"){const t=s.getComponents("rgb"),i=[t[0],t[1],t[2],t[3]*255].map(Bx).join("");return`${e}${i}`}function Wx(s){const e=Fi(0),t=bi(s,"int");return`rgb(${Fs(t.getComponents("rgb")).map(a=>e(a)).join(", ")})`}function Hl(s){const e=Fi(2),t=Fi(0);return`rgba(${bi(s,"int").getComponents("rgb").map((r,n)=>(n===3?e:t)(r)).join(", ")})`}function QT(s){const e=[Fi(0),_h,_h],t=bi(s,"int");return`hsl(${Fs(t.getComponents("hsl")).map((a,r)=>e[r](a)).join(", ")})`}function $T(s){const e=[Fi(0),_h,_h,Fi(2)];return`hsla(${bi(s,"int").getComponents("hsl").map((a,r)=>e[r](a)).join(", ")})`}function Gx(s,e){const t=Fi(e==="float"?2:0),i=["r","g","b"],a=bi(s,e);return`{${Fs(a.getComponents("rgb")).map((n,o)=>`${i[o]}: ${t(n)}`).join(", ")}}`}function eS(s){return e=>Gx(e,s)}function qx(s,e){const t=Fi(2),i=Fi(e==="float"?2:0),a=["r","g","b","a"];return`{${bi(s,e).getComponents("rgb").map((o,l)=>{const h=l===3?t:i;return`${a[l]}: ${h(o)}`}).join(", ")}}`}function tS(s){return e=>qx(e,s)}const iS=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:hu},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:cu},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Wx},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Hl},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:QT},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:$T},...["int","float"].reduce((s,e)=>[...s,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:eS(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:tS(e)}],[])];function Hx(s){return iS.reduce((e,t)=>e||(kT(t.format,s)?t.stringifier:null),null)}const eo=st("apl");class sS{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(eo()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(eo("b")),this.element.appendChild(i);const a=e.createElement("div");a.classList.add(eo("c")),i.appendChild(a),this.colorElem_=a;const r=e.createElement("div");r.classList.add(eo("m")),this.element.appendChild(r),this.markerElem_=r;const n=e.createElement("div");n.classList.add(eo("p")),this.markerElem_.appendChild(n),this.previewElem_=n,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),i=new lt([t[0],t[1],t[2],0],"rgb"),a=new lt([t[0],t[1],t[2],255],"rgb"),r=["to right",Hl(i),Hl(a)];this.colorElem_.style.background=`linear-gradient(${r.join(",")})`,this.previewElem_.style.backgroundColor=Hl(e);const n=_t(t[3],0,1,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class aS{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new sS(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new br(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=e.point.x/e.bounds.width,a=this.value.rawValue,[r,n,o]=a.getComponents("hsv");this.value.setRawValue(new lt([r,n,o,i],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Ii(mr(!0),ca(e));if(t===0)return;const i=this.value.rawValue,[a,r,n,o]=i.getComponents("hsv");this.value.setRawValue(new lt([a,r,n,o+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ii(mr(!0),ca(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Gr=st("coltxt");function rS(s){const e=s.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(t.reduce((i,a)=>{const r=s.createElement("option");return r.textContent=a.text,r.value=a.value,i.appendChild(r),i},s.createDocumentFragment())),e}class nS{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Gr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Gr("m")),this.modeElem_=rS(e),this.modeElem_.classList.add(Gr("ms")),i.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const a=e.createElement("div");a.classList.add(Gr("mm")),a.appendChild(Ph(e,"dropdown")),i.appendChild(a),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Gr("w")),this.element.appendChild(r),this.inputsElem_=r,this.inputViews_=t.inputViews,this.applyInputViews_(),ra(t.mode,n=>{this.modeElem_.value=n})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){dx(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(t=>{const i=e.createElement("div");i.classList.add(Gr("c")),i.appendChild(t.element),this.inputsElem_.appendChild(i)})}}function oS(s){return Fi(s==="float"?2:0)}function lS(s,e,t){const i=Mn(s,e)[t];return new Wo({min:0,max:i})}function hS(s,e,t){return new Zo(s,{arrayPosition:t===0?"fst":t===2?"lst":"mid",parser:e.parser,props:Ze.fromObject({formatter:oS(e.colorType),keyScale:mr(!1),pointerScale:e.colorType==="float"?.01:1}),value:Nt(0,{constraint:lS(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}function cS(s,e){const t={colorMode:e.colorMode,colorType:e.colorType,parser:ha,viewProps:e.viewProps};return[0,1,2].map(i=>{const a=hS(s,t,i);return Vn({primary:e.value,secondary:a.value,forward(r){return bi(r,e.colorType).getComponents(e.colorMode)[i]},backward(r,n){const o=e.colorMode,h=bi(r,e.colorType).getComponents(o);h[i]=n;const c=lu(Th(Fs(h),h[3]),o,e.colorType);return bi(c,"int")}}),a})}function dS(s,e){const t=new Do(s,{parser:Ko("int"),props:Ze.fromObject({formatter:hu}),value:Nt(lt.black()),viewProps:e.viewProps});return Vn({primary:e.value,secondary:t.value,forward:i=>new lt(Fs(i.getComponents()),i.mode),backward:(i,a)=>new lt(Th(Fs(a.getComponents(i.mode)),i.getComponents()[3]),i.mode)}),[t]}function _S(s){return s!=="hex"}class uS{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=Nt(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new nS(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t=this.colorMode.rawValue;return _S(t)?cS(e,{colorMode:t,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):dS(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(i=>i.view)}}const Cc=st("hpl");class fS{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Cc()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(Cc("c")),this.element.appendChild(i);const a=e.createElement("div");a.classList.add(Cc("m")),this.element.appendChild(a),this.markerElem_=a,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=Wx(new lt([t,100,100],"hsv"));const i=_t(t,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}}class vS{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new fS(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new br(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=_t(ri(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),a=this.value.rawValue,[,r,n,o]=a.getComponents("hsv");this.value.setRawValue(new lt([i,r,n,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Ii(mr(!1),ca(e));if(t===0)return;const i=this.value.rawValue,[a,r,n,o]=i.getComponents("hsv");this.value.setRawValue(new lt([a+t,r,n,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ii(mr(!1),ca(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Dc=st("svp"),Cv=64;class gS{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Dc()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("canvas");i.height=Cv,i.width=Cv,i.classList.add(Dc("c")),this.element.appendChild(i),this.canvasElement=i;const a=e.createElement("div");a.classList.add(Dc("m")),this.element.appendChild(a),this.markerElem_=a,this.update_()}update_(){const e=vb(this.canvasElement);if(!e)return;const i=this.value.rawValue.getComponents("hsv"),a=this.canvasElement.width,r=this.canvasElement.height,n=e.getImageData(0,0,a,r),o=n.data;for(let c=0;c<r;c++)for(let d=0;d<a;d++){const _=_t(d,0,a,0,100),u=_t(c,0,r,100,0),x=Ax(i[0],_,u),g=(c*a+d)*4;o[g]=x[0],o[g+1]=x[1],o[g+2]=x[2],o[g+3]=255}e.putImageData(n,0,0);const l=_t(i[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;const h=_t(i[2],0,100,100,0);this.markerElem_.style.top=`${h}%`}onValueChange_(){this.update_()}}class xS{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new gS(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new br(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=_t(e.point.x,0,e.bounds.width,0,100),a=_t(e.point.y,0,e.bounds.height,100,0),[r,,,n]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new lt([r,i,a,n],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){bx(e.key)&&e.preventDefault();const[t,i,a,r]=this.value.rawValue.getComponents("hsv"),n=mr(!1),o=Ii(n,ca(e)),l=Ii(n,Ro(e));o===0&&l===0||this.value.setRawValue(new lt([t,i+o,a+l,r],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=mr(!1),i=Ii(t,ca(e)),a=Ii(t,Ro(e));i===0&&a===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class pS{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new vS(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new xS(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new aS(e,{value:this.value,viewProps:this.viewProps}),text:new Zo(e,{parser:ha,props:Ze.fromObject({pointerScale:.01,keyScale:.1,formatter:Fi(2)}),value:Nt(0,{constraint:new Wo({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Vn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:i=>i.getComponents()[3],backward:(i,a)=>{const r=i.getComponents();return r[3]=a,new lt(r,i.mode)}}),this.textsC_=new uS(e,{colorType:t.colorType,value:this.value,viewProps:this.viewProps}),this.view=new CT(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const Rc=st("colsw");class mS{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(Rc()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Rc("sw")),this.element.appendChild(i),this.swatchElem_=i;const a=e.createElement("button");a.classList.add(Rc("b")),t.viewProps.bindDisabled(a),this.element.appendChild(a),this.buttonElement=a,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=cu(e)}onValueChange_(){this.update_()}}class yS{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new mS(e,{value:this.value,viewProps:this.viewProps})}}class du{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=qo.create(t.expanded),this.swatchC_=new yS(e,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new Do(e,{parser:t.parser,props:Ze.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new PT(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new wx(e,{viewProps:this.viewProps}):null;const a=new pS(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});a.view.allFocusableElements.forEach(r=>{r.addEventListener("blur",this.onPopupChildBlur_),r.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=a,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(a.view.element),Vn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:r=>r,backward:(r,n)=>n})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),iu(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=_x(e);i&&t.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!K_(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function wS(s){return Fs(s.getComponents("rgb")).reduce((e,t)=>e<<8|Math.floor(t)&255,0)}function zS(s){return s.getComponents("rgb").reduce((e,t,i)=>{const a=Math.floor(i===3?t*255:t)&255;return e<<8|a},0)>>>0}function PS(s){return new lt([s>>16&255,s>>8&255,s&255],"rgb")}function bS(s){return new lt([s>>24&255,s>>16&255,s>>8&255,_t(s&255,0,255,0,1)],"rgb")}function TS(s){return typeof s!="number"?lt.black():PS(s)}function SS(s){return typeof s!="number"?lt.black():bS(s)}function Xl(s,e){return typeof s!="object"||Mt(s)?!1:e in s&&typeof s[e]=="number"}function Xx(s){return Xl(s,"r")&&Xl(s,"g")&&Xl(s,"b")}function jx(s){return Xx(s)&&Xl(s,"a")}function Zx(s){return Xx(s)}function _u(s,e){if(s.mode!==e.mode||s.type!==e.type)return!1;const t=s.getComponents(),i=e.getComponents();for(let a=0;a<t.length;a++)if(t[a]!==i[a])return!1;return!0}function Dv(s){return"a"in s?[s.r,s.g,s.b,s.a]:[s.r,s.g,s.b]}function ES(s){const e=Hx(s);return e?(t,i)=>{Jo(t,e(i))}:null}function AS(s){const e=s?zS:wS;return(t,i)=>{Jo(t,e(i))}}function MS(s,e,t){const a=bi(e,t).toRgbaObject();s.writeProperty("r",a.r),s.writeProperty("g",a.g),s.writeProperty("b",a.b),s.writeProperty("a",a.a)}function IS(s,e,t){const a=bi(e,t).toRgbaObject();s.writeProperty("r",a.r),s.writeProperty("g",a.g),s.writeProperty("b",a.b)}function CS(s,e){return(t,i)=>{s?MS(t,i,e):IS(t,i,e)}}function DS(s){var e;return!!(!((e=s?.color)===null||e===void 0)&&e.alpha)}function RS(s){return s?e=>cu(e,"0x"):e=>hu(e,"0x")}function OS(s){return"color"in s||s.view==="color"}const NS=Ti({id:"input-color-number",type:"input",accept:(s,e)=>{if(typeof s!="number"||!OS(e))return null;const t=nu(e);return t?{initialValue:s,params:Object.assign(Object.assign({},t),{supportsAlpha:DS(e)})}:null},binding:{reader:s=>s.params.supportsAlpha?SS:TS,equals:_u,writer:s=>AS(s.params.supportsAlpha)},controller:s=>{var e,t;return new du(s.document,{colorType:"int",expanded:(e=s.params.expanded)!==null&&e!==void 0?e:!1,formatter:RS(s.params.supportsAlpha),parser:Ko("int"),pickerLayout:(t=s.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:s.params.supportsAlpha,value:s.value,viewProps:s.viewProps})}});function LS(s,e){if(!Zx(s))return bi(lt.black(),e);if(e==="int"){const t=Dv(s);return new lt(t,"rgb")}if(e==="float"){const t=Dv(s);return new ou(t,"rgb")}return bi(lt.black(),"int")}function FS(s){return jx(s)}function kS(s){return e=>{const t=LS(e,s);return bi(t,"int")}}function VS(s,e){return t=>s?qx(t,e):Gx(t,e)}const US=Ti({id:"input-color-object",type:"input",accept:(s,e)=>{var t;if(!Zx(s))return null;const i=nu(e);return i?{initialValue:s,params:Object.assign(Object.assign({},i),{colorType:(t=Cx(e))!==null&&t!==void 0?t:"int"})}:null},binding:{reader:s=>kS(s.params.colorType),equals:_u,writer:s=>CS(FS(s.initialValue),s.params.colorType)},controller:s=>{var e,t;const i=jx(s.initialValue);return new du(s.document,{colorType:s.params.colorType,expanded:(e=s.params.expanded)!==null&&e!==void 0?e:!1,formatter:VS(i,s.params.colorType),parser:Ko("int"),pickerLayout:(t=s.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:i,value:s.value,viewProps:s.viewProps})}}),BS=Ti({id:"input-color-string",type:"input",accept:(s,e)=>{if(typeof s!="string"||e.view==="text")return null;const t=KT(s,Cx(e));if(!t)return null;const i=Hx(t);if(!i)return null;const a=nu(e);return a?{initialValue:s,params:Object.assign(Object.assign({},a),{format:t,stringifier:i})}:null},binding:{reader:()=>YT,equals:_u,writer:s=>{const e=ES(s.params.format);if(!e)throw Ht.notBindable();return e}},controller:s=>{var e,t;return new du(s.document,{colorType:s.params.format.type,expanded:(e=s.params.expanded)!==null&&e!==void 0?e:!1,formatter:s.params.stringifier,parser:Ko("int"),pickerLayout:(t=s.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:s.params.format.alpha,value:s.value,viewProps:s.viewProps})}});class uu{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((i,a)=>{var r,n;return(n=(r=this.components[a])===null||r===void 0?void 0:r.constrain(i))!==null&&n!==void 0?n:i});return this.asm_.fromComponents(t)}}const Rv=st("pndtxt");class WS{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(Rv()),this.textViews.forEach(i=>{const a=e.createElement("div");a.classList.add(Rv("a")),a.appendChild(i.element),this.element.appendChild(a)})}}function GS(s,e,t){return new Zo(s,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[t].textProps,value:Nt(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}class fu{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((i,a)=>GS(e,t,a)),this.acs_.forEach((i,a)=>{Vn({primary:this.value,secondary:i.value,forward:r=>t.assembly.toComponents(r)[a],backward:(r,n)=>{const o=t.assembly.toComponents(r);return o[a]=n,t.assembly.fromComponents(o)}})}),this.view=new WS(e,{textViews:this.acs_.map(i=>i.view)})}get textControllers(){return this.acs_}}class qS extends Co{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function HS(s,e){const t=[],i=rx(s,e);i&&t.push(i);const a=nx(s);a&&t.push(a);const r=ru(s.options);return r&&t.push(r),new Ho(t)}const XS=Ti({id:"input-number",type:"input",accept:(s,e)=>{if(typeof s!="number")return null;const t=Gt(e,i=>Object.assign(Object.assign({},lx(i)),{options:i.optional.custom(jo),readonly:i.optional.constant(!1)}));return t?{initialValue:s,params:t}:null},binding:{reader:s=>tx,constraint:s=>HS(s.params,s.initialValue),writer:s=>Jo},controller:s=>{const e=s.value,t=s.constraint,i=t&&dh(t,Xo);if(i)return new Va(s.document,{props:new Ze({options:i.values.value("options")}),value:e,viewProps:s.viewProps});const a=ox(s.params,e.rawValue),r=t&&dh(t,Wo);return r?new uh(s.document,Object.assign(Object.assign({},Tx(Object.assign(Object.assign({},a),{keyScale:Nt(a.keyScale),max:r.values.value("max"),min:r.values.value("min")}))),{parser:ha,value:e,viewProps:s.viewProps})):new Zo(s.document,{parser:ha,props:Ze.fromObject(a),value:e,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="number"?null:s.controller.valueController instanceof uh?new qS(s.controller):s.controller.valueController instanceof Va?new su(s.controller):null}});class Oa{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(Mt(e))return!1;const t=e.x,i=e.y;return!(typeof t!="number"||typeof i!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}}const Jx={toComponents:s=>s.getComponents(),fromComponents:s=>new Oa(...s)},qr=st("p2d");class jS{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(qr()),t.viewProps.bindClassModifiers(this.element),ra(t.expanded,Ln(this.element,qr(void 0,"expanded")));const i=e.createElement("div");i.classList.add(qr("h")),this.element.appendChild(i);const a=e.createElement("button");a.classList.add(qr("b")),a.appendChild(Ph(e,"p2dpad")),t.viewProps.bindDisabled(a),i.appendChild(a),this.buttonElement=a;const r=e.createElement("div");if(r.classList.add(qr("t")),i.appendChild(r),this.textElement=r,t.pickerLayout==="inline"){const n=e.createElement("div");n.classList.add(qr("p")),this.element.appendChild(n),this.pickerElement=n}else this.pickerElement=null}}const za=st("p2dp");class ZS{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(za()),t.layout==="popup"&&this.element.classList.add(za(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(za("p")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const a=e.createElementNS(Rs,"svg");a.classList.add(za("g")),this.padElement.appendChild(a),this.svgElem_=a;const r=e.createElementNS(Rs,"line");r.classList.add(za("ax")),r.setAttributeNS(null,"x1","0"),r.setAttributeNS(null,"y1","50%"),r.setAttributeNS(null,"x2","100%"),r.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(r);const n=e.createElementNS(Rs,"line");n.classList.add(za("ax")),n.setAttributeNS(null,"x1","50%"),n.setAttributeNS(null,"y1","0"),n.setAttributeNS(null,"x2","50%"),n.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(n);const o=e.createElementNS(Rs,"line");o.classList.add(za("l")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(o),this.lineElem_=o;const l=e.createElement("div");l.classList.add(za("m")),this.padElement.appendChild(l),this.markerElem_=l,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),i=this.props_.get("max"),a=_t(e,-i,+i,0,100),r=_t(t,-i,+i,0,100),n=this.props_.get("invertsY")?100-r:r;this.lineElem_.setAttributeNS(null,"x2",`${a}%`),this.lineElem_.setAttributeNS(null,"y2",`${n}%`),this.markerElem_.style.left=`${a}%`,this.markerElem_.style.top=`${n}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Ov(s,e,t){return[Ii(e[0],ca(s)),Ii(e[1],Ro(s))*(t?1:-1)]}class JS{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new ZS(e,{layout:t.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new br(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=this.props.get("max"),a=_t(e.point.x,0,e.bounds.width,-i,+i),r=_t(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-i,+i);this.value.setRawValue(new Oa(a,r),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){bx(e.key)&&e.preventDefault();const[t,i]=Ov(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(new Oa(this.value.rawValue.x+t,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,i]=Ov(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class KS{constructor(e,t){var i,a;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=qo.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new wx(e,{viewProps:this.viewProps}):null;const r=new JS(e,{layout:t.pickerLayout,props:new Ze({invertsY:Nt(t.invertsY),max:Nt(t.max),xKeyScale:t.axes[0].textProps.value("keyScale"),yKeyScale:t.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(n=>{n.addEventListener("blur",this.onPopupChildBlur_),n.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.textC_=new fu(e,{assembly:Jx,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new jS(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(a=this.view.buttonElement)===null||a===void 0||a.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Vn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:n=>n,backward:(n,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),iu(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=_x(e);i&&t.contains(i)||i&&i===this.view.buttonElement&&!K_(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function YS(s){return Oa.isObject(s)?new Oa(s.x,s.y):new Oa}function QS(s,e){s.writeProperty("x",e.x),s.writeProperty("y",e.y)}function $S(s,e){return new uu({assembly:Jx,components:[ta(Object.assign(Object.assign({},s),s.x),e.x),ta(Object.assign(Object.assign({},s),s.y),e.y)]})}function Nv(s,e){var t,i;if(!Mt(s.min)||!Mt(s.max))return Math.max(Math.abs((t=s.min)!==null&&t!==void 0?t:0),Math.abs((i=s.max)!==null&&i!==void 0?i:0));const a=sx(s);return Math.max(Math.abs(a)*10,Math.abs(e)*10)}function eE(s,e){var t,i;const a=Nv(xr(s,(t=s.x)!==null&&t!==void 0?t:{}),e.x),r=Nv(xr(s,(i=s.y)!==null&&i!==void 0?i:{}),e.y);return Math.max(a,r)}function tE(s){if(!("y"in s))return!1;const e=s.y;return e&&"inverted"in e?!!e.inverted:!1}const iE=Ti({id:"input-point2d",type:"input",accept:(s,e)=>{if(!Oa.isObject(s))return null;const t=Gt(e,i=>Object.assign(Object.assign({},Oo(i)),{expanded:i.optional.boolean,picker:i.optional.custom(Ex),readonly:i.optional.constant(!1),x:i.optional.custom(Ca),y:i.optional.object(Object.assign(Object.assign({},Oo(i)),{inverted:i.optional.boolean}))}));return t?{initialValue:s,params:t}:null},binding:{reader:()=>YS,constraint:s=>$S(s.params,s.initialValue),equals:Oa.equals,writer:()=>QS},controller:s=>{var e,t;const i=s.document,a=s.value,r=s.constraint,n=[s.params.x,s.params.y];return new KS(i,{axes:a.rawValue.getComponents().map((o,l)=>{var h;return J_({constraint:r.components[l],initialValue:o,params:xr(s.params,(h=n[l])!==null&&h!==void 0?h:{})})}),expanded:(e=s.params.expanded)!==null&&e!==void 0?e:!1,invertsY:tE(s.params),max:eE(s.params,a.rawValue),parser:ha,pickerLayout:(t=s.params.picker)!==null&&t!==void 0?t:"popup",value:a,viewProps:s.viewProps})}});class rn{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Mt(e))return!1;const t=e.x,i=e.y,a=e.z;return!(typeof t!="number"||typeof i!="number"||typeof a!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Kx={toComponents:s=>s.getComponents(),fromComponents:s=>new rn(...s)};function sE(s){return rn.isObject(s)?new rn(s.x,s.y,s.z):new rn}function aE(s,e){s.writeProperty("x",e.x),s.writeProperty("y",e.y),s.writeProperty("z",e.z)}function rE(s,e){return new uu({assembly:Kx,components:[ta(Object.assign(Object.assign({},s),s.x),e.x),ta(Object.assign(Object.assign({},s),s.y),e.y),ta(Object.assign(Object.assign({},s),s.z),e.z)]})}const nE=Ti({id:"input-point3d",type:"input",accept:(s,e)=>{if(!rn.isObject(s))return null;const t=Gt(e,i=>Object.assign(Object.assign({},Oo(i)),{readonly:i.optional.constant(!1),x:i.optional.custom(Ca),y:i.optional.custom(Ca),z:i.optional.custom(Ca)}));return t?{initialValue:s,params:t}:null},binding:{reader:s=>sE,constraint:s=>rE(s.params,s.initialValue),equals:rn.equals,writer:s=>aE},controller:s=>{const e=s.value,t=s.constraint,i=[s.params.x,s.params.y,s.params.z];return new fu(s.document,{assembly:Kx,axes:e.rawValue.getComponents().map((a,r)=>{var n;return J_({constraint:t.components[r],initialValue:a,params:xr(s.params,(n=i[r])!==null&&n!==void 0?n:{})})}),parser:ha,value:e,viewProps:s.viewProps})}});class nn{constructor(e=0,t=0,i=0,a=0){this.x=e,this.y=t,this.z=i,this.w=a}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Mt(e))return!1;const t=e.x,i=e.y,a=e.z,r=e.w;return!(typeof t!="number"||typeof i!="number"||typeof a!="number"||typeof r!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Yx={toComponents:s=>s.getComponents(),fromComponents:s=>new nn(...s)};function oE(s){return nn.isObject(s)?new nn(s.x,s.y,s.z,s.w):new nn}function lE(s,e){s.writeProperty("x",e.x),s.writeProperty("y",e.y),s.writeProperty("z",e.z),s.writeProperty("w",e.w)}function hE(s,e){return new uu({assembly:Yx,components:[ta(Object.assign(Object.assign({},s),s.x),e.x),ta(Object.assign(Object.assign({},s),s.y),e.y),ta(Object.assign(Object.assign({},s),s.z),e.z),ta(Object.assign(Object.assign({},s),s.w),e.w)]})}const cE=Ti({id:"input-point4d",type:"input",accept:(s,e)=>{if(!nn.isObject(s))return null;const t=Gt(e,i=>Object.assign(Object.assign({},Oo(i)),{readonly:i.optional.constant(!1),w:i.optional.custom(Ca),x:i.optional.custom(Ca),y:i.optional.custom(Ca),z:i.optional.custom(Ca)}));return t?{initialValue:s,params:t}:null},binding:{reader:s=>oE,constraint:s=>hE(s.params,s.initialValue),equals:nn.equals,writer:s=>lE},controller:s=>{const e=s.value,t=s.constraint,i=[s.params.x,s.params.y,s.params.z,s.params.w];return new fu(s.document,{assembly:Yx,axes:e.rawValue.getComponents().map((a,r)=>{var n;return J_({constraint:t.components[r],initialValue:a,params:xr(s.params,(n=i[r])!==null&&n!==void 0?n:{})})}),parser:ha,value:e,viewProps:s.viewProps})}});function dE(s){const e=[],t=ru(s.options);return t&&e.push(t),new Ho(e)}const _E=Ti({id:"input-string",type:"input",accept:(s,e)=>{if(typeof s!="string")return null;const t=Gt(e,i=>({readonly:i.optional.constant(!1),options:i.optional.custom(jo)}));return t?{initialValue:s,params:t}:null},binding:{reader:s=>Px,constraint:s=>dE(s.params),writer:s=>Jo},controller:s=>{const e=s.document,t=s.value,i=s.constraint,a=i&&dh(i,Xo);return a?new Va(e,{props:new Ze({options:a.values.value("options")}),value:t,viewProps:s.viewProps}):new Do(e,{parser:r=>r,props:Ze.fromObject({formatter:Kd}),value:t,viewProps:s.viewProps})},api(s){return typeof s.controller.value.rawValue!="string"?null:s.controller.valueController instanceof Va?new su(s.controller):null}}),Yo={monitor:{defaultInterval:200,defaultRows:3}},Lv=st("mll");class uE{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(Lv()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("textarea");i.classList.add(Lv("i")),i.style.height=`calc(var(${Sx("containerUnitSize")}) * ${t.rows})`,i.readOnly=!0,t.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,i=[];this.value.rawValue.forEach(a=>{a!==void 0&&i.push(this.formatter_(a))}),e.textContent=i.join(`
`),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class vu{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new uE(e,{formatter:t.formatter,rows:t.rows,value:this.value,viewProps:this.viewProps})}}const Fv=st("sgl");class fE{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(Fv()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(Fv("i")),i.readOnly=!0,i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""}onValueUpdate_(){this.update_()}}class gu{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new fE(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}}const vE=Ti({id:"monitor-bool",type:"monitor",accept:(s,e)=>{if(typeof s!="boolean")return null;const t=Gt(e,i=>({readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:s,params:t}:null},binding:{reader:s=>zx},controller:s=>{var e;return s.value.rawValue.length===1?new gu(s.document,{formatter:Mv,value:s.value,viewProps:s.viewProps}):new vu(s.document,{formatter:Mv,rows:(e=s.params.rows)!==null&&e!==void 0?e:Yo.monitor.defaultRows,value:s.value,viewProps:s.viewProps})}});class gE extends Co{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const Pa=st("grl");class xE{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Pa()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=e.createElementNS(Rs,"svg");i.classList.add(Pa("g")),i.style.height=`calc(var(${Sx("containerUnitSize")}) * ${t.rows})`,this.element.appendChild(i),this.svgElem_=i;const a=e.createElementNS(Rs,"polyline");this.svgElem_.appendChild(a),this.lineElem_=a;const r=e.createElement("div");r.classList.add(Pa("t"),st("tt")()),this.element.appendChild(r),this.tooltipElem_=r,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:t}=this.element,i=this.value.rawValue.length-1,a=this.props_.get("min"),r=this.props_.get("max"),n=[];this.value.rawValue.forEach((d,_)=>{if(d===void 0)return;const u=_t(_,0,i,0,e),x=_t(d,a,r,t,0);n.push([u,x].join(","))}),this.lineElem_.setAttributeNS(null,"points",n.join(" "));const o=this.tooltipElem_,l=this.value.rawValue[this.cursor_.rawValue];if(l===void 0){o.classList.remove(Pa("t","a"));return}const h=_t(this.cursor_.rawValue,0,i,0,e),c=_t(l,a,r,t,0);o.style.left=`${h}px`,o.style.top=`${c}px`,o.textContent=`${this.formatter_(l)}`,o.classList.contains(Pa("t","a"))||(o.classList.add(Pa("t","a"),Pa("t","in")),ch(o),o.classList.remove(Pa("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Qx{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=Nt(-1),this.view=new xE(e,{cursor:this.cursor_,formatter:t.formatter,rows:t.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!K_(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const i=new br(this.view.element);i.emitter.on("down",this.onGraphPointerDown_),i.emitter.on("move",this.onGraphPointerMove_),i.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Ki(e,null,t=>({max:t.required.number,min:t.required.number}),t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0))}exportProps(){return Yi(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:t}=this.view.element;this.cursor_.rawValue=Math.floor(_t(e.offsetX,0,t,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(_t(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function Yd(s){return Mt(s.format)?Fi(2):s.format}function pE(s){var e;return s.value.rawValue.length===1?new gu(s.document,{formatter:Yd(s.params),value:s.value,viewProps:s.viewProps}):new vu(s.document,{formatter:Yd(s.params),rows:(e=s.params.rows)!==null&&e!==void 0?e:Yo.monitor.defaultRows,value:s.value,viewProps:s.viewProps})}function mE(s){var e,t,i;return new Qx(s.document,{formatter:Yd(s.params),rows:(e=s.params.rows)!==null&&e!==void 0?e:Yo.monitor.defaultRows,props:Ze.fromObject({max:(t=s.params.max)!==null&&t!==void 0?t:100,min:(i=s.params.min)!==null&&i!==void 0?i:0}),value:s.value,viewProps:s.viewProps})}function kv(s){return s.view==="graph"}const yE=Ti({id:"monitor-number",type:"monitor",accept:(s,e)=>{if(typeof s!="number")return null;const t=Gt(e,i=>({format:i.optional.function,max:i.optional.number,min:i.optional.number,readonly:i.required.constant(!0),rows:i.optional.number,view:i.optional.string}));return t?{initialValue:s,params:t}:null},binding:{defaultBufferSize:s=>kv(s)?64:1,reader:s=>tx},controller:s=>kv(s.params)?mE(s):pE(s),api:s=>s.controller.valueController instanceof Qx?new gE(s.controller):null}),wE=Ti({id:"monitor-string",type:"monitor",accept:(s,e)=>{if(typeof s!="string")return null;const t=Gt(e,i=>({multiline:i.optional.boolean,readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:s,params:t}:null},binding:{reader:s=>Px},controller:s=>{var e;const t=s.value;return t.rawValue.length>1||s.params.multiline?new vu(s.document,{formatter:Kd,rows:(e=s.params.rows)!==null&&e!==void 0?e:Yo.monitor.defaultRows,value:t,viewProps:s.viewProps}):new gu(s.document,{formatter:Kd,value:t,viewProps:s.viewProps})}});class zE{constructor(){this.map_=new Map}get(e){var t;return(t=this.map_.get(e))!==null&&t!==void 0?t:null}has(e){return this.map_.has(e)}add(e,t){return this.map_.set(e,t),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),t}}class PE{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function bE(s,e){var t;const i=s.accept(e.target.read(),e.params);if(Mt(i))return null;const a={target:e.target,initialValue:i.initialValue,params:i.params},r=Gt(e.params,d=>({disabled:d.optional.boolean,hidden:d.optional.boolean,label:d.optional.string,tag:d.optional.string})),n=s.binding.reader(a),o=s.binding.constraint?s.binding.constraint(a):void 0,l=new PE({reader:n,target:e.target,writer:s.binding.writer(a)}),h=new ob(Nt(n(i.initialValue),{constraint:o,equals:s.binding.equals}),l),c=s.controller({constraint:o,document:e.document,initialValue:i.initialValue,params:i.params,value:h,viewProps:fa.create({disabled:r?.disabled,hidden:r?.hidden})});return new zb(e.document,{blade:kn(),props:Ze.fromObject({label:"label"in e.params?(t=r?.label)!==null&&t!==void 0?t:null:e.target.key}),tag:r?.tag,value:h,valueController:c})}class TE{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function SE(s,e){return e===0?new aT:new rT(s,e??Yo.monitor.defaultInterval)}function EE(s,e){var t,i,a;const r=s.accept(e.target.read(),e.params);if(Mt(r))return null;const n={target:e.target,initialValue:r.initialValue,params:r.params},o=Gt(e.params,_=>({bufferSize:_.optional.number,disabled:_.optional.boolean,hidden:_.optional.boolean,interval:_.optional.number,label:_.optional.string})),l=s.binding.reader(n),h=(i=(t=o?.bufferSize)!==null&&t!==void 0?t:s.binding.defaultBufferSize&&s.binding.defaultBufferSize(r.params))!==null&&i!==void 0?i:1,c=new Eb({binding:new TE({reader:l,target:e.target}),bufferSize:h,ticker:SE(e.document,o?.interval)}),d=s.controller({document:e.document,params:r.params,value:c,viewProps:fa.create({disabled:o?.disabled,hidden:o?.hidden})});return d.viewProps.bindDisabled(c.ticker),d.viewProps.handleDispose(()=>{c.ticker.dispose()}),new Mb(e.document,{blade:kn(),props:Ze.fromObject({label:"label"in e.params?(a=o?.label)!==null&&a!==void 0?a:null:e.target.key}),value:c,valueController:d})}class AE{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,t){if(!pT(t.core))throw Ht.notCompatible(e,t.id);t.type==="blade"?this.pluginsMap_.blades.unshift(t):t.type==="input"?this.pluginsMap_.inputs.unshift(t):t.type==="monitor"&&this.pluginsMap_.monitors.unshift(t)}createInput_(e,t,i){return this.pluginsMap_.inputs.reduce((a,r)=>a??bE(r,{document:e,target:t,params:i}),null)}createMonitor_(e,t,i){return this.pluginsMap_.monitors.reduce((a,r)=>a??EE(r,{document:e,params:i,target:t}),null)}createBinding(e,t,i){const a=t.read();if(Mt(a))throw new Ht({context:{key:t.key},type:"nomatchingcontroller"});const r=this.createInput_(e,t,i);if(r)return r;const n=this.createMonitor_(e,t,i);if(n)return n;throw new Ht({context:{key:t.key},type:"nomatchingcontroller"})}createBlade(e,t){const i=this.pluginsMap_.blades.reduce((a,r)=>a??sT(r,{document:e,params:t}),null);if(!i)throw new Ht({type:"nomatchingview",context:{params:t}});return i}createInputBindingApi_(e){const t=this.pluginsMap_.inputs.reduce((i,a)=>{var r,n;return i||((n=(r=a.api)===null||r===void 0?void 0:r.call(a,{controller:e}))!==null&&n!==void 0?n:null)},null);return this.apiCache_.add(e,t??new Co(e))}createMonitorBindingApi_(e){const t=this.pluginsMap_.monitors.reduce((i,a)=>{var r,n;return i||((n=(r=a.api)===null||r===void 0?void 0:r.call(a,{controller:e}))!==null&&n!==void 0?n:null)},null);return this.apiCache_.add(e,t??new Co(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(Pb(e))return this.createInputBindingApi_(e);if(Ib(e))return this.createMonitorBindingApi_(e);throw Ht.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(wb(e))return this.createBindingApi(e);const t=this.pluginsMap_.blades.reduce((i,a)=>i??a.api({controller:e,pool:this}),null);if(!t)throw Ht.shouldNeverHappen();return this.apiCache_.add(e,t)}}const ME=new zE;function IE(){const s=new AE(ME);return[iE,nE,cE,_E,XS,BS,US,NS,zT,vE,wE,yE,Nb,Zb,yx].forEach(e=>{s.register("core",e)}),s}class CE extends Pr{constructor(e){super(e),this.emitter_=new ei,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new Go(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,a=>{i(a)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}class DE extends Pr{}class RE extends Pr{constructor(e){super(e),this.emitter_=new ei,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new Go(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,a=>{i(a)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}class OE extends Pr{constructor(e){super(e),this.emitter_=new ei,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new Go(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,a=>{i(a)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const NE=(function(){return{id:"list",type:"blade",core:Fn,accept(s){const e=Gt(s,t=>({options:t.required.custom(jo),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string}));return e?{params:e}:null},controller(s){const e=new Xo(au(s.params.options)),t=Nt(s.params.value,{constraint:e}),i=new Va(s.document,{props:new Ze({options:e.values.value("options")}),value:t,viewProps:s.viewProps});return new pr(s.document,{blade:s.blade,props:Ze.fromObject({label:s.params.label}),value:t,valueController:i})},api(s){return!(s.controller instanceof pr)||!(s.controller.valueController instanceof Va)?null:new CE(s.controller)}}})();class LE extends px{constructor(e,t){super(e,t)}get element(){return this.controller.view.element}}class FE extends Zd{constructor(e,t){super(e,{expanded:t.expanded,blade:t.blade,props:t.props,root:!0,viewProps:t.viewProps})}}const Vv=st("spr");class kE{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Vv()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("hr");i.classList.add(Vv("r")),this.element.appendChild(i)}}class Uv extends bh{constructor(e,t){super(Object.assign(Object.assign({},t),{view:new kE(e,{viewProps:t.viewProps})}))}}const VE={id:"separator",type:"blade",core:Fn,accept(s){const e=Gt(s,t=>({view:t.required.constant("separator")}));return e?{params:e}:null},controller(s){return new Uv(s.document,{blade:s.blade,viewProps:s.viewProps})},api(s){return s.controller instanceof Uv?new DE(s.controller):null}},UE={id:"slider",type:"blade",core:Fn,accept(s){const e=Gt(s,t=>({max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number}));return e?{params:e}:null},controller(s){var e,t;const i=(e=s.params.value)!==null&&e!==void 0?e:0,a=new Wo({max:s.params.max,min:s.params.min}),r=Nt(i,{constraint:a}),n=new uh(s.document,Object.assign(Object.assign({},Tx({formatter:(t=s.params.format)!==null&&t!==void 0?t:ib,keyScale:Nt(1),max:a.values.value("max"),min:a.values.value("min"),pointerScale:ax(s.params,i)})),{parser:ha,value:r,viewProps:s.viewProps}));return new pr(s.document,{blade:s.blade,props:Ze.fromObject({label:s.params.label}),value:r,valueController:n})},api(s){return!(s.controller instanceof pr)||!(s.controller.valueController instanceof uh)?null:new RE(s.controller)}},BE=(function(){return{id:"text",type:"blade",core:Fn,accept(s){const e=Gt(s,t=>({parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string}));return e?{params:e}:null},controller(s){var e;const t=Nt(s.params.value),i=new Do(s.document,{parser:s.params.parse,props:Ze.fromObject({formatter:(e=s.params.format)!==null&&e!==void 0?e:(a=>String(a))}),value:t,viewProps:s.viewProps});return new pr(s.document,{blade:s.blade,props:Ze.fromObject({label:s.params.label}),value:t,valueController:i})},api(s){return!(s.controller instanceof pr)||!(s.controller.valueController instanceof Do)?null:new OE(s.controller)}}})();function WE(s){const e=s.createElement("div");return e.classList.add(st("dfw")()),s.body&&s.body.appendChild(e),e}function GE(s,e,t){if(s.querySelector(`style[data-tp-style=${e}]`))return;const i=s.createElement("style");i.dataset.tpStyle=e,i.textContent=t,s.head.appendChild(i)}class qE extends LE{constructor(e){var t,i;const a=e??{},r=(t=a.document)!==null&&t!==void 0?t:fb(),n=IE(),o=new FE(r,{expanded:a.expanded,blade:kn(),props:Ze.fromObject({title:a.title}),viewProps:fa.create()});super(o,n),this.pool_=n,this.containerElem_=(i=a.container)!==null&&i!==void 0?i:WE(r),this.containerElem_.appendChild(this.element),this.doc_=r,this.usesDefaultWrapper_=!a.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw Ht.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw Ht.alreadyDisposed();if(this.usesDefaultWrapper_){const t=e.parentElement;t&&t.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&GE(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(i=>{this.pool_.register(e.id,i)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[NE,VE,UE,yx,BE]})}}new xx("4.0.5");function HE(s){return Object.keys(s)}class Sh{static isActive(){const e=window.location.search;return new URLSearchParams(e).get("debug")==="true"}folders;draggableFeatureInitialized;#e;textarea;constructor(){if(this.folders={},this.draggableFeatureInitialized=!1,Sh.isActive()){this.#e=new qE({title:"Tweaks"}),this.textarea=document.createElement("textarea"),this.textarea.style.width="100%",this.textarea.style.height="150px",this.textarea.style.fontFamily="monospace",this.textarea.style.fontSize="12px",this.textarea.style.boxSizing="border-box",this.textarea.style.resize="vertical",this.textarea.style.margin="0",this.configure({},{folder:"Import/Export",buttons:{Apply:()=>{try{const i=JSON.parse(this.textarea?.value??"");this.#e.importState(i)}catch(i){alert(` unable to apply configuration : ${i?.stack??i}`)}},Download:this.downloadAsJSON.bind(this),"Copy to clipboard":this.copyToClipboard.bind(this)}});const t=this.getFolder("Import/Export").element.querySelector(".tp-fldv_c > :first-child");t.parentNode?.insertBefore(this.textarea,t),this.#e.on("change",this.updateConfigExporterState.bind(this))}else this.enhanceOrbitControlSupport()}enhanceOrbitControlSupport(){document.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1})}async copyToClipboard(){try{const e=this.textarea?.value??"";await navigator.clipboard.writeText(e),alert(" Config copied to clipboard!")}catch{this.downloadAsJSON()}}downloadAsJSON(){try{const e=this.textarea?.value??"",t=new Blob([e],{type:"application/json"}),i=URL.createObjectURL(t),a=document.createElement("a");a.href=i,a.download="tweakpane-config.json",a.click(),URL.revokeObjectURL(i),alert(" Config downloaded!")}catch(e){alert(` Unable to download configuration:
${e?.stack??e}`)}}updateConfigExporterState(){const e=this.getFolder("Import/Export");if(!e||(e.element.parentNode?.appendChild(e.element),e.element.parentNode?.querySelector(":scope > .tp-v-lst.tp-v-vlst")?.classList?.remove("tp-v-lst","tp-v-vlst"),e.element.classList.add("tp-v-lst","tp-v-vlst"),e.element.classList.remove("tp-v-fst"),!this.textarea))return;const i=this.#e.exportState();this.textarea.value=JSON.stringify(i,null,2)}initDraggableFeature(){if(this.draggableFeatureInitialized||!this.#e)return;const e=document.querySelector(".tp-dfwv"),t=document.querySelector(".tp-rotv_b");if(!t||!e)return;let i=!1,a=0,r=0;function n(h,c){i=!0,a=h-e.offsetLeft,r=c-e.offsetTop}function o(h,c){i&&(e.style.left=`${h-a}px`,e.style.top=`${c-r}px`)}function l(){i=!1}t.addEventListener("mousedown",h=>{n(h.clientX,h.clientY)}),document.addEventListener("mousemove",h=>{o(h.clientX,h.clientY)}),document.addEventListener("mouseup",l),t.addEventListener("touchstart",h=>{const c=h.touches[0];n(c.clientX,c.clientY)},{passive:!0}),document.addEventListener("touchmove",h=>{h.preventDefault();const c=h.touches[0];c&&o(c.clientX,c.clientY)},{passive:!1}),document.addEventListener("touchend",l)}getFolder(e){if(this.#e){if(!(e in this.folders)){const t=e.split(".");let i=this.#e,a="";for(const r of t)a?a+=`.${r}`:a=r,a in this.folders?i=this.folders[a]:(i=i.addFolder({title:r}),i.expanded=!1,this.folders[a]=i)}return this.folders[e].expanded=!1,this.folders[e]}}update(){this.#e&&this.#e.refresh()}configure(e,{folder:t,buttons:i,...a}={}){if(!this.#e)return;const r=t?this.getFolder(t)??this.#e:this.#e;Object.entries(i??{}).forEach(([n,o])=>{r.addButton({title:n}).on("click",o)}),HE(e).forEach(n=>{const o=a?.[n]?.params,l=a?.[n]?.onChange;if(Array.isArray(e[n])){console.warn(`Ignored key ${String(n)}: arrays not supported yet`);return}r.addBinding(e,n,o).on("change",h=>{l?.(h.value)})}),this.draggableFeatureInitialized||this.initDraggableFeature(),this.updateConfigExporterState()}destroy(){this.#e&&this.#e.dispose()}}var on=(s=>(s.POINTER_IN="mesh:pointerIn",s.POINTER_OUT="mesh:pointerOut",s.POINTER_MOVE="mesh:pointerMove",s.POINTER_DOWN="mesh:pointerDown",s.POINTER_UP="mesh:pointerUp",s))(on||{});class XE extends ui{camera;sizes;eventBus;pointer;lastPointer;pointerMoveListener;pointerLeaveListener;pointerUpListener;pointerDownListener;lastEvent;raycaster;hoveredMeshes=new Set;pointerUp=null;pointerDown=null;meshListeners=new Map;INTERACTIVE_LAYER=Number.MAX_SAFE_INTEGER;constructor({sizes:e,camera:t,eventBus:i}){super(),this.sizes=e,this.camera=t,this.eventBus=i,this.pointer=new $,this.lastPointer=new $,this.pointerMoveListener=this.onPointerMove.bind(this),this.pointerLeaveListener=this.onPointerLeave.bind(this),this.pointerDownListener=this.onPointerDown.bind(this),this.pointerUpListener=this.onPointerUp.bind(this),this.init()}init(){this.eventBus.subscribe("canvas","pointermove",this.pointerMoveListener),this.eventBus.subscribe("canvas","pointerout",this.pointerLeaveListener),this.eventBus.subscribe("canvas","pointerup",this.pointerUpListener),this.eventBus.subscribe("canvas","pointerdown",this.pointerDownListener),this.raycaster=new H0,this.raycaster.layers.set(this.INTERACTIVE_LAYER)}extractPointerCoordinates(e){this.pointer.x=e.clientX/this.sizes.width*2-1,this.pointer.y=-(e.clientY/this.sizes.height)*2+1}onPointerMove(e){this.lastPointer.copy(this.pointer),this.extractPointerCoordinates(e),this.lastEvent=e}onPointerDown(e){this.lastPointer.copy(this.pointer),this.extractPointerCoordinates(e),this.pointerDown=e}onPointerUp(e){this.lastPointer.copy(this.pointer),this.extractPointerCoordinates(e),this.pointerUp=e}onPointerLeave(){this.lastPointer.copy(this.pointer),this.hoveredMeshes.forEach(e=>{this.emitEvent("mesh:pointerOut",e,this.lastEvent)}),this.hoveredMeshes.clear()}subscribe(e){this.meshListeners.has(e)||(this.meshListeners.set(e,new Map),e.layers.enable(this.INTERACTIVE_LAYER))}unsubscribe(e){e.layers.disable(this.INTERACTIVE_LAYER),this.meshListeners.delete(e),this.hoveredMeshes.delete(e)}remove(e){this.meshListeners.delete(e),this.meshListeners.delete(e)}on(e,t,i){if(t instanceof ut){const a=t,r=e;this.subscribe(a);const n=this.meshListeners.get(a);if(!n)return;n.has(r)||n.set(r,new Set),n.get(r).add(i);return}super.on(e,t)}off(e,t,i,...a){if(t instanceof ut){const r=t,n=e,o=this.meshListeners.get(r);if(!o.has(n))return;const l=o.get(n);i?l.delete(i):l.clear(),l.size===0&&o.delete(n),o.size===0&&this.unsubscribe(r);return}if(typeof t=="function"){super.off(e,t);return}super.off(...[e,t,i,...a].filter(Boolean))}emitEvent(e,t,i,a){const r=this.meshListeners.get(t)?.get(e);if(!r)return;const n=new CustomEvent(e,{detail:{object:t,intersect:a,pointer:this.pointer.clone(),originalEvent:i}});for(const o of r)o(n)}pointerMoved(){return this.pointer.x!==this.lastPointer.x||this.pointer.y!==this.lastPointer.y}update(){this.raycaster.setFromCamera(this.pointer,this.camera.instance);const e=Array.from(this.meshListeners.keys()),t=this.raycaster.intersectObjects(e,!0),i=new Set;for(const a of t){const r=a.object;i.add(r),this.hoveredMeshes.has(r)||(this.hoveredMeshes.add(r),this.emitEvent("mesh:pointerIn",r,this.lastEvent,a)),this.pointerMoved()&&this.emitEvent("mesh:pointerMove",r,this.lastEvent,a),this.pointerDown&&(this.emitEvent("mesh:pointerDown",r,this.pointerDown,a),this.pointerDown=null),this.pointerUp&&(this.emitEvent("mesh:pointerUp",r,this.pointerUp,a),this.pointerUp=null)}for(const a of Array.from(this.hoveredMeshes))i.has(a)||(this.emitEvent("mesh:pointerOut",a,this.lastEvent),this.hoveredMeshes.delete(a));this.pointerDown=null,this.pointerUp=null,this.lastPointer.copy(this.pointer)}destroy(){this.eventBus.unsubscribe("canvas","pointermove",this.pointerMoveListener),this.eventBus.unsubscribe("canvas","pointerout",this.pointerLeaveListener),this.eventBus.unsubscribe("canvas","pointerup",this.pointerUpListener),this.eventBus.unsubscribe("canvas","pointerdown",this.pointerDownListener)}}class jE{buffer;size;defaultMax=0;index=0;isFull=!1;_max=0;constructor(e,t){if(e<=0)throw new Error(`RingBuffer size must be > 0 (provided: ${e})`);this.defaultMax=t??0,this._max=this.defaultMax,this.size=e,this.buffer=new Array(e).fill(0)}push(e){const t=this.buffer[this.index];this.buffer[this.index]=e,t===this._max&&(this._max=Math.max(...this.buffer),this._max<this.defaultMax&&(this._max=this.defaultMax)),e>this._max&&(this._max=e),this.index=(this.index+1)%this.size,this.index===0&&(this.isFull=!0)}get values(){return this.isFull?[...this.buffer.slice(this.index),...this.buffer.slice(0,this.index)]:this.buffer.slice(0,this.index)}get max(){return this._max}get length(){return this.isFull?this.size:this.index}}class ZE{canvas;bufferSize;ctx;curves=[];padding=1.1;constructor(e=document.body,t=150){this.bufferSize=t,this.canvas=document.createElement("canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.minHeight="75px",this.canvas.style.display="block",this.canvas.style.gridArea="graphs",this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight,e.appendChild(this.canvas);const i=this.canvas.getContext("2d");if(!i)throw new Error("Canvas 2D context not supported");this.ctx=i,window.addEventListener("resize",()=>this.resize()),this.resize(),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}resize(){this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight}addCurve(e,t,i=0){this.curves.push({name:e,color:t,buffer:new jE(this.bufferSize??this.canvas.width,i)})}push(e,t){const i=this.curves.find(a=>a.name===e);i&&i.buffer.push(t)}render(){this.resize();const{ctx:e,canvas:t}=this,i=t.width,a=t.height;e.clearRect(0,0,i,a);for(const{color:r,buffer:n}of this.curves){const o=n.values,l=i/n.length;e.beginPath(),e.strokeStyle=r,e.lineWidth=1,o.forEach((h,c)=>{const d=c*l,_=a-h/(n.max*this.padding)*a;c===0?e.moveTo(d,_):e.lineTo(d,_)}),e.stroke()}}destroy(){this.ctx=void 0,this.canvas.remove(),this.curves=[]}}class $x{parent;state;updateInterval;enabled;lastUpdate;graph;constructor({parent:e,enabled:t}){this.parent=e,this.lastUpdate=performance.now(),this.updateInterval=200,this.parent.classList.add("stats"),this.state={fps:0,cpu:0,gpu:0,lines:0,points:0,shaders:0,textures:0,triangles:0,geometries:0,draw_calls:0,time_per_frame:0},this.initDetailedInfosPanel(),t&&this.enable()}enable(){this.enabled=!0,this.parent.classList.remove("hidden")}disable(){this.enabled=!1,this.parent.classList.add("hidden")}toggleMode(){this.parent.classList.contains("expanded")?this.parent.classList.remove("expanded"):this.parent.classList.add("expanded")}initDetailedInfosPanel(){const e=this.parent;this.parent.classList.add("expanded"),e.addEventListener("click",()=>{this.toggleMode()}),this.insertNumber(e,{key:"geometries"}),this.insertNumber(e,{key:"textures"}),this.insertNumber(e,{key:"shaders"}),this.insertNumber(e,{key:"lines"}),this.insertNumber(e,{key:"points"}),this.insertNumber(e,{key:"triangles"}),this.insertNumber(e,{key:"fps"}),this.insertNumber(e,{key:"cpu",label:"Cpu (ms)"}),this.insertNumber(e,{key:"gpu",label:"Gpu (ms)"}),this.insertNumber(e,{key:"time_per_frame",label:"Frame (ms)"}),this.insertNumber(e,{key:"draw_calls",label:"Draw calls"}),this.graph=new ZE(e),this.graph.addCurve("fps","#ff0000",60),this.graph.addCurve("cpu","#00ff00",10),this.graph.addCurve("gpu","#ffae00",10)}insertNumber(e,{key:t,label:i}){const a=document.createElement("div");a.classList.add("number"),a.dataset.key=t,a.style.gridArea=t;const r=document.createElement("div");r.className="label",r.innerText=i??t;const n=document.createElement("span");n.innerText="0";const o=document.createElement("div");o.className="value",o.appendChild(n),a.appendChild(r),a.appendChild(o),e.appendChild(a)}updateNumber(e,t){if(!(e in this.state))throw new Error(`Perf key ${e} not found !`);if(this.state[e]===t)return;const i=this.parent.querySelector(`[data-key=${e}] .value`);if(!i)throw new Error(`Perf element ${e} to update not found !`);i.innerHTML=t.toString()}fixTo(e,t){return e.toFixed(t??4)}update(e,t){if(!this.enabled)return;const i=performance.now();i-this.lastUpdate<this.updateInterval||(this.lastUpdate=i,this.updateNumber("geometries",e.memory.geometries),this.updateNumber("textures",e.memory.textures),this.updateNumber("shaders",e.programs?.length??0),this.updateNumber("draw_calls",e.render.calls),this.updateNumber("lines",e.render.lines),this.updateNumber("points",e.render.points),this.updateNumber("triangles",e.render.triangles),this.updateNumber("fps",Math.round(t.fps)),this.updateNumber("cpu",this.fixTo(t.cpuTimePerFrame,3)),this.updateNumber("gpu",this.fixTo(t.gpuTimePerFrame,3)),this.updateNumber("time_per_frame",this.fixTo(t.fullFrameTime,2)),this.graph.push("fps",t.fps),this.graph.push("gpu",t.gpuTimePerFrame),this.graph.push("cpu",t.cpuTimePerFrame),this.graph.render())}destroy(){this.graph.destroy(),this.parent.remove()}}class JE{static configure(){const e=self.document.body?.querySelector("#perfs-monitor");if(!e)throw new Error('No element with id "perfs-monitor" found in document body !');const t=new $x({parent:e,enabled:!0});self.window.addEventListener("perfMetrics:update",i=>{const a=i;t.update(a.detail.info,a.detail.fpsStats)}),self.window.addEventListener("perfMetrics:enable",()=>{t.enable()}),self.window.addEventListener("perfMetrics:disable",()=>{t.disable()}),self.window.addEventListener("perfMetrics:destroy",()=>{t.destroy()})}eventBus;constructor(e){this.eventBus=e}enable(){this.eventBus.dispatch("window","perfMetrics:enable")}disable(){this.eventBus.dispatch("window","perfMetrics:disable")}update(e,t){this.eventBus.dispatch("window","perfMetrics:update",{info:{memory:e.memory,render:e.render,programs:e.programs?.map(({name:i})=>({name:i}))??[]},fpsStats:t})}destroy(){this.eventBus.dispatch("window","perfMetrics:destroy")}}class KE{static configure(){const e=new Sh;self.window.addEventListener("tweaks:update",()=>{e.update()}),self.window.addEventListener("tweaks:destroy",()=>{e.destroy()}),self.window.addEventListener("tweaks:configure",t=>{const i=t,{params:a,options:r}=i.detail,{folder:n,...o}=r;Object.entries(o??{}).forEach(([l,h])=>{h?.onChange&&(h.onChange=c=>{self.window.dispatchEvent(new CustomEvent("tweaks:change",{detail:{key:`${n}:${l}`,value:c}}))})}),e.configure(a,r)})}eventBus;listeners;constructor(e){this.eventBus=e,this.listeners={},e.subscribe("window","tweaks:change",t=>{const i=t,{key:a,value:r}=i.detail;if(!(a in this.listeners))throw new Error(`Unknown property update on key ${a} with value ${JSON.stringify(r)}`);this.listeners[a](r)})}configure(e,{folder:t,...i}={}){Object.entries(i).forEach(([a,r])=>{typeof r.onChange=="function"&&(this.listeners[`${t}:${a}`]=r.onChange,r.onChange=!0)}),this.eventBus.dispatch("window","tweaks:configure",{params:e,options:{folder:t,...i}})}update(){this.eventBus.dispatch("window","tweaks:update")}destroy(){this.eventBus.dispatch("window","tweaks:destroy")}}class YE{_listener;camera;audios;constructor({camera:e}){this._listener=new F1,this.camera=e,this.camera.instance.add(this._listener),this.audios={}}get listener(){return this._listener}get items(){return this.audios}configure(e,t){const{volume:i,loop:a}=t;e.userData={...e.userData,initialVolume:i??1,crossfadeFactor:1,spatialFactor:1},e.setLoop(a??!1)}createAmbientAudio(e,t,i={}){const a=new q0(this._listener);return a.setBuffer(t),this.configure(a,i),this.audios[e]=a,a}createPositionalAudio(e,t,i={}){const a=new V1(this._listener);return a.setBuffer(t),this.configure(a,i),this.audios[e]=a,a}disable(){this._listener.setMasterVolume(0)}enable(){this._listener.setMasterVolume(1)}crossfade(e,t,{duration:i=2,inVolume:a=1,outVolume:r=0}={}){const n=e.userData,o=t.userData;n.crossfadeTarget=r,o.crossfadeTarget=a,n.crossfadeSpeed=Math.abs(n.crossfadeTarget-n.crossfadeFactor)/i,o.crossfadeSpeed=Math.abs(o.crossfadeTarget-o.crossfadeFactor)/i,t.isPlaying||t.play()}update(e){for(const t in this.audios){const i=this.audios[t];if(!i)continue;const a=i.userData;if(a.crossfadeTarget!==void 0&&a.crossfadeSpeed!==void 0){const l=Math.sign(a.crossfadeTarget-a.crossfadeFactor);a.crossfadeFactor+=l*a.crossfadeSpeed*e,(l>0&&a.crossfadeFactor>=a.crossfadeTarget||l<0&&a.crossfadeFactor<=a.crossfadeTarget)&&(a.crossfadeFactor=a.crossfadeTarget,a.crossfadeTarget=void 0,a.crossfadeSpeed=void 0)}const r=a.initialVolume??1,n=a.crossfadeFactor??1,o=a.spatialFactor??1;i.setVolume(r*n*o)}}}class QE extends ui{camera;canvas;renderer;scene;sizes;time;tweaks;raycaster;audio;eventBus;monitor;perfs;postProcessing;constructor({canvas:e,initialSizes:t,eventBus:i}){if(super(),!e)throw new Error("canvas is required");this.eventBus=i,this.canvas=e,this.tweaks=this.isExecutedInWorker()?new KE(i):new Sh,this.sizes=new VP({eventBus:i,...t}),this.time=new UP({inWorker:this.isExecutedInWorker()}),this.scene=new gn,this.camera=new x3({sizes:this.sizes,scene:this.scene,canvas:this.canvas,tweaks:this.tweaks,eventBus:i}),this.audio=new YE({camera:this.camera}),this.raycaster=new XE({sizes:this.sizes,camera:this.camera,eventBus:i}),this.renderer=new p3({sizes:this.sizes,scene:this.scene,canvas:this.canvas,camera:this.camera}),this.monitor=new w3,this.perfs=new y3({gui:this.renderer.isExecutedInWorker()?new JE(i):new $x({parent:self.document.body.querySelector("#perfs-monitor"),enabled:!0}),renderer:this.renderer,monitor:this.monitor}),this.sizes.on("resize",()=>{this.resize()}),this.time.on("tick",()=>{this.update()})}changeCursor(e){this.canvas instanceof HTMLCanvasElement?this.canvas.setAttribute("style",`cursor: ${e};`):console.warn("changeCursor is not supported in OffscreenCanvas")}isExecutedInWorker(){return q_(this.canvas)}resize(){this.camera.resize(),this.renderer.resize(),this.postProcessing?.resize()}usePostProcessing(e){this.postProcessing=e}update(){this.perfs.preRender(),this.emit("update"),this.camera.update(),this.audio.update(this.time.deltaSeconds),this.postProcessing?this.postProcessing.update():this.renderer.update(),this.raycaster.update(),this.perfs.postRender()}destroy(){this.sizes.off("resize"),this.time.off("tick"),this.scene.traverse(e=>{if(e instanceof Ne){e.geometry.dispose();for(const t in e.material){const i=e.material[t];i&&typeof i.dispose=="function"&&i.dispose()}}}),this.raycaster.destroy(),this.camera.destroy(),this.renderer.destroy(),this.postProcessing?.destroy(),this.sizes.destroy(),this.tweaks.destroy(),this.perfs.destroy()}}const nt={scene:{light:{sunColor:"#a29344",sunIntensity:5,lensflare:{enabled:!0}},environment:{intensity:3,backgroundIntensity:1,map:"environmentMap"},godrays:{enabled:!0,color:"#ffad31",density:.004}},clouds:{shadowColor:"#cfac91",lightIntensity:1},islands:{main:{scale:9},foliage:{density:120,lightContrast:.4,lightOffset:.4,colorVariation:.2,treeHeight:4,treeWidth:7,treeLightColor:"#92b922",treeDarkColor:"#033e03",mainTreeHeight:4,mainTreeWidth:7,mainTreeLightColor:"#b00e6c",mainTreeDarkColor:"#033e03",bushWidth:3,bushHeight:8,bushLightColor:"#db6c24",bushDarkColor:"#db6c24",bushLightColors:["#ffc400","#ffffff"]},waterfalls:{baseColor:"#2f5f6f",topColor:"#3e7894",midColor:"#1f4c5b"},water:{baseColor:"#2f5f6f",topColor:"#3e7894",midColor:"#1f4c5b"},foam:{color:"#bfeaff",shadow:"#82c4d9"},basalRocks:{floatingRocks:{speed:.1,minSpeed:.1,maxSpeed:2}},swarm:{explosivness:100,lightColor:"#0061ff",baseColor:"#082065",count:512,particlesSize:.006}},grassField:{bending:{factor:.75,color:"#0f2b0f",colorIntensity:.5,brushRadius:.009,fadingFactor:.25},flowers:{count:2e3,size:.03,configs:[{color1:"#ffab3d",color2:"#ffe4a1",glowIntensity:1},{color1:"#ff90fb",color2:"#f0d1ff",glowIntensity:1}]},pampa:{lightColor:"#fff0cf",darkColor:"#e4dec7",count:400},grass:{count:12e4,height:14,width:14,lightColor:"#678909",darkColor:"#2d652e",dirt:{lightColor:"#ac925e",darkColor:"#a18854"},misc:{lightDirection:new S(2,3,2),shadowColor:"#0a200f"}}}};class $E{group;engine;resources;environmentMap;mesh;constructor({engine:e,resources:t,group:i}){this.group=i,this.engine=e,this.resources=t,this.environmentMap={background:"",map:nt.scene.environment.map,intensity:nt.scene.environment.intensity,backgroundIntensity:nt.scene.environment.backgroundIntensity},this.initEnvironmentMap(),this.configureTweaks(),this.engine.on("global:config:changed",a=>{const r=a?.detail?.config;r&&this.configChanged(r)})}configChanged(e){e&&(e.scene.environment.intensity&&(this.environmentMap.intensity=e.scene.environment.intensity),e.scene.environment.backgroundIntensity&&(this.environmentMap.backgroundIntensity=e.scene.environment.backgroundIntensity,this.engine.scene.backgroundIntensity=e.scene.environment.backgroundIntensity),e.scene.environment.map&&(this.environmentMap.map=e.scene.environment.map,this.engine.scene.background=this.resources.items[e.scene.environment.map],this.environmentMap.texture=this.resources.items[e.scene.environment.map]),this.updateMaterials())}configureTweaks(){this.tweaks.configure(this.environmentMap,{folder:"Scene",intensity:{params:{min:0,max:10,step:.1},onChange:e=>{this.engine.scene.environmentIntensity=e,this.updateMaterials()}},backgroundIntensity:{params:{min:0,max:1,step:.01},onChange:e=>{this.engine.scene.backgroundIntensity=e,this.updateMaterials()}}})}initEnvironmentMap(){this.resources.on("loaded:environmentMap",()=>{this.environmentMap.texture=this.resources.items[this.environmentMap.map],this.lightSceneWithEnvironmentMap()})}lightSceneWithEnvironmentMap(){this.engine.scene.environment=this.environmentMap.texture,this.engine.scene.background=this.environmentMap.texture,this.engine.scene.backgroundIntensity=this.environmentMap.backgroundIntensity,this.engine.scene.backgroundRotation.set(0,Math.PI*.11,0),this.engine.scene.environmentRotation.copy(this.engine.scene.backgroundRotation),this.updateMaterials()}updateMaterials(){this.engine.scene.traverse(e=>{this.childIsAffectedByEnvironment(e)&&(e.material instanceof Le?(e.material.uniforms.envMap&&(console.log(e),e.material.uniforms.envMap.value=this.environmentMap.texture),e.material.uniforms.envMapIntensity&&(e.material.uniforms.envMapIntensity.value=this.environmentMap.intensity),e.material.uniforms.flipEnvMap&&(e.material.uniforms.flipEnvMap.value=-1)):(e.material.envMap=this.engine.scene.environment,e.material.envMapIntensity=this.environmentMap.intensity,e.material.envMapRotation=this.engine.scene.environmentRotation),e.material.needsUpdate=!0)})}childIsAffectedByEnvironment(e){return e.material&&(e.material instanceof _a||e.material instanceof bs||e.material instanceof V0||e.material instanceof Le||"USE_ENVMAP"in(e.material.defines??{}))}get tweaks(){return this.engine.tweaks}update(){}destroy(){this.mesh&&(this.group.remove(this.mesh),this.mesh.material.dispose(),this.mesh.geometry.dispose())}}function xu(s,e=!1){const t=s[0].index!==null,i=new Set(Object.keys(s[0].attributes)),a=new Set(Object.keys(s[0].morphAttributes)),r={},n={},o=s[0].morphTargetsRelative,l=new Wt;let h=0;for(let c=0;c<s.length;++c){const d=s[c];let _=0;if(t!==(d.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const u in d.attributes){if(!i.has(u))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+u+'" attribute exists among all geometries, or in none of them.'),null;r[u]===void 0&&(r[u]=[]),r[u].push(d.attributes[u]),_++}if(_!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(o!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const u in d.morphAttributes){if(!a.has(u))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;n[u]===void 0&&(n[u]=[]),n[u].push(d.morphAttributes[u])}if(e){let u;if(t)u=d.index.count;else if(d.attributes.position!==void 0)u=d.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;l.addGroup(h,u,c),h+=u}}if(t){let c=0;const d=[];for(let _=0;_<s.length;++_){const u=s[_].index;for(let x=0;x<u.count;++x)d.push(u.getX(x)+c);c+=s[_].attributes.position.count}l.setIndex(d)}for(const c in r){const d=Bv(r[c]);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,d)}for(const c in n){const d=n[c][0].length;if(d===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let _=0;_<d;++_){const u=[];for(let g=0;g<n[c].length;++g)u.push(n[c][g][_]);const x=Bv(u);if(!x)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(x)}}return l}function Bv(s){let e,t,i,a=-1,r=0;for(let h=0;h<s.length;++h){const c=s[h];if(e===void 0&&(e=c.array.constructor),e!==c.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=c.itemSize),t!==c.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=c.normalized),i!==c.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(a===-1&&(a=c.gpuType),a!==c.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;r+=c.count*t}const n=new e(r),o=new Be(n,t,i);let l=0;for(let h=0;h<s.length;++h){const c=s[h];if(c.isInterleavedBufferAttribute){const d=l/t;for(let _=0,u=c.count;_<u;_++)for(let x=0;x<t;x++){const g=c.getComponent(_,x);o.setComponent(_+d,x,g)}}else n.set(c.array,l);l+=c.count*t}return a!==void 0&&(o.gpuType=a),o}function eA(s,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},i=s.getIndex(),a=s.getAttribute("position"),r=i?i.count:a.count;let n=0;const o=Object.keys(s.attributes),l={},h={},c=[],d=["getX","getY","getZ","getW"],_=["setX","setY","setZ","setW"];for(let y=0,w=o.length;y<w;y++){const p=o[y],b=s.attributes[p];l[p]=new b.constructor(new b.array.constructor(b.count*b.itemSize),b.itemSize,b.normalized);const M=s.morphAttributes[p];M&&(h[p]||(h[p]=[]),M.forEach((E,A)=>{const m=new E.array.constructor(E.count*E.itemSize);h[p][A]=new E.constructor(m,E.itemSize,E.normalized)}))}const u=e*.5,x=Math.log10(1/e),g=Math.pow(10,x),v=u*g;for(let y=0;y<r;y++){const w=i?i.getX(y):y;let p="";for(let b=0,M=o.length;b<M;b++){const E=o[b],A=s.getAttribute(E),m=A.itemSize;for(let P=0;P<m;P++)p+=`${~~(A[d[P]](w)*g+v)},`}if(p in t)c.push(t[p]);else{for(let b=0,M=o.length;b<M;b++){const E=o[b],A=s.getAttribute(E),m=s.morphAttributes[E],P=A.itemSize,I=l[E],U=h[E];for(let N=0;N<P;N++){const F=d[N],W=_[N];if(I[W](n,A[F](w)),m)for(let V=0,j=m.length;V<j;V++)U[V][W](n,m[V][F](w))}}t[p]=n,c.push(n),n++}}const f=s.clone();for(const y in s.attributes){const w=l[y];if(f.setAttribute(y,new w.constructor(w.array.slice(0,n*w.itemSize),w.itemSize,w.normalized)),y in h)for(let p=0;p<h[y].length;p++){const b=h[y][p];f.morphAttributes[y][p]=new b.constructor(b.array.slice(0,n*b.itemSize),b.itemSize,b.normalized)}}return f.setIndex(c),f}function Wv(s,e){if(e===sm)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),s;if(e===Td||e===b0){let t=s.getIndex();if(t===null){const n=[],o=s.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)n.push(l);s.setIndex(n),t=s.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s}const i=t.count-2,a=[];if(e===Td)for(let n=1;n<=i;n++)a.push(t.getX(0)),a.push(t.getX(n)),a.push(t.getX(n+1));else for(let n=0;n<i;n++)n%2===0?(a.push(t.getX(n)),a.push(t.getX(n+1)),a.push(t.getX(n+2))):(a.push(t.getX(n+2)),a.push(t.getX(n+1)),a.push(t.getX(n)));a.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=s.clone();return r.setIndex(a),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),s}class Gv extends ua{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new rA(t)}),this.register(function(t){return new nA(t)}),this.register(function(t){return new vA(t)}),this.register(function(t){return new gA(t)}),this.register(function(t){return new xA(t)}),this.register(function(t){return new lA(t)}),this.register(function(t){return new hA(t)}),this.register(function(t){return new cA(t)}),this.register(function(t){return new dA(t)}),this.register(function(t){return new aA(t)}),this.register(function(t){return new _A(t)}),this.register(function(t){return new oA(t)}),this.register(function(t){return new fA(t)}),this.register(function(t){return new uA(t)}),this.register(function(t){return new iA(t)}),this.register(function(t){return new pA(t)}),this.register(function(t){return new mA(t)})}load(e,t,i,a){const r=this;let n;if(this.resourcePath!=="")n=this.resourcePath;else if(this.path!==""){const h=ho.extractUrlBase(e);n=ho.resolveURL(h,this.path)}else n=ho.extractUrlBase(e);this.manager.itemStart(e);const o=function(h){a?a(h):console.error(h),r.manager.itemError(e),r.manager.itemEnd(e)},l=new wn(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(h){try{r.parse(h,n,function(c){t(c),r.manager.itemEnd(e)},o)}catch(c){o(c)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,a){let r;const n={},o={},l=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===ep){try{n[Ke.KHR_BINARY_GLTF]=new yA(e)}catch(d){a&&a(d);return}r=JSON.parse(n[Ke.KHR_BINARY_GLTF].content)}else r=JSON.parse(l.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2){a&&a(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new RA(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const d=this.pluginCallbacks[c](h);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[d.name]=d,n[d.name]=!0}if(r.extensionsUsed)for(let c=0;c<r.extensionsUsed.length;++c){const d=r.extensionsUsed[c],_=r.extensionsRequired||[];switch(d){case Ke.KHR_MATERIALS_UNLIT:n[d]=new sA;break;case Ke.KHR_DRACO_MESH_COMPRESSION:n[d]=new wA(r,this.dracoLoader);break;case Ke.KHR_TEXTURE_TRANSFORM:n[d]=new zA;break;case Ke.KHR_MESH_QUANTIZATION:n[d]=new PA;break;default:_.indexOf(d)>=0&&o[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}h.setExtensions(n),h.setPlugins(o),h.parse(i,a)}parseAsync(e,t){const i=this;return new Promise(function(a,r){i.parse(e,t,a,r)})}}function tA(){let s={};return{get:function(e){return s[e]},add:function(e,t){s[e]=t},remove:function(e){delete s[e]},removeAll:function(){s={}}}}const Ke={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class iA{constructor(e){this.parser=e,this.name=Ke.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,a=t.length;i<a;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let a=t.cache.get(i);if(a)return a;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let h;const c=new X(16777215);l.color!==void 0&&c.setRGB(l.color[0],l.color[1],l.color[2],Ot);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":h=new wo(c),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new zn(c),h.distance=d;break;case"spot":h=new I1(c),h.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,h.angle=l.spot.outerConeAngle,h.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return h.position.set(0,0,0),Ks(h,l),l.intensity!==void 0&&(h.intensity=l.intensity),h.name=t.createUniqueName(l.name||"light_"+e),a=Promise.resolve(h),t.cache.add(i,a),a}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],o=(r.extensions&&r.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return i._getNodeRef(t.cache,o,l)})}}class sA{constructor(){this.name=Ke.KHR_MATERIALS_UNLIT}getMaterialType(){return Mi}extendParams(e,t,i){const a=[];e.color=new X(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const n=r.baseColorFactor;e.color.setRGB(n[0],n[1],n[2],Ot),e.opacity=n[3]}r.baseColorTexture!==void 0&&a.push(i.assignTexture(e,"map",r.baseColorTexture,Ge))}return Promise.all(a)}}class aA{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const r=a.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class rA{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const r=[],n=a.extensions[this.name];if(n.clearcoatFactor!==void 0&&(t.clearcoat=n.clearcoatFactor),n.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",n.clearcoatTexture)),n.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=n.clearcoatRoughnessFactor),n.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",n.clearcoatRoughnessTexture)),n.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",n.clearcoatNormalTexture)),n.clearcoatNormalTexture.scale!==void 0)){const o=n.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new $(o,o)}return Promise.all(r)}}class nA{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const r=a.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class oA{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const r=[],n=a.extensions[this.name];return n.iridescenceFactor!==void 0&&(t.iridescence=n.iridescenceFactor),n.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",n.iridescenceTexture)),n.iridescenceIor!==void 0&&(t.iridescenceIOR=n.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),n.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=n.iridescenceThicknessMinimum),n.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=n.iridescenceThicknessMaximum),n.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",n.iridescenceThicknessTexture)),Promise.all(r)}}class lA{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new X(0,0,0),t.sheenRoughness=0,t.sheen=1;const n=a.extensions[this.name];if(n.sheenColorFactor!==void 0){const o=n.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],Ot)}return n.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=n.sheenRoughnessFactor),n.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",n.sheenColorTexture,Ge)),n.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",n.sheenRoughnessTexture)),Promise.all(r)}}class hA{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const r=[],n=a.extensions[this.name];return n.transmissionFactor!==void 0&&(t.transmission=n.transmissionFactor),n.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",n.transmissionTexture)),Promise.all(r)}}class cA{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const r=[],n=a.extensions[this.name];t.thickness=n.thicknessFactor!==void 0?n.thicknessFactor:0,n.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",n.thicknessTexture)),t.attenuationDistance=n.attenuationDistance||1/0;const o=n.attenuationColor||[1,1,1];return t.attenuationColor=new X().setRGB(o[0],o[1],o[2],Ot),Promise.all(r)}}class dA{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const r=a.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class _A{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const r=[],n=a.extensions[this.name];t.specularIntensity=n.specularFactor!==void 0?n.specularFactor:1,n.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",n.specularTexture));const o=n.specularColorFactor||[1,1,1];return t.specularColor=new X().setRGB(o[0],o[1],o[2],Ot),n.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",n.specularColorTexture,Ge)),Promise.all(r)}}class uA{constructor(e){this.parser=e,this.name=Ke.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const r=[],n=a.extensions[this.name];return t.bumpScale=n.bumpFactor!==void 0?n.bumpFactor:1,n.bumpTexture!==void 0&&r.push(i.assignTexture(t,"bumpMap",n.bumpTexture)),Promise.all(r)}}class fA{constructor(e){this.parser=e,this.name=Ke.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:bs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const r=[],n=a.extensions[this.name];return n.anisotropyStrength!==void 0&&(t.anisotropy=n.anisotropyStrength),n.anisotropyRotation!==void 0&&(t.anisotropyRotation=n.anisotropyRotation),n.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",n.anisotropyTexture)),Promise.all(r)}}class vA{constructor(e){this.parser=e,this.name=Ke.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,a=i.textures[e];if(!a.extensions||!a.extensions[this.name])return null;const r=a.extensions[this.name],n=t.options.ktx2Loader;if(!n){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,n)}}class gA{constructor(e){this.parser=e,this.name=Ke.EXT_TEXTURE_WEBP}loadTexture(e){const t=this.name,i=this.parser,a=i.json,r=a.textures[e];if(!r.extensions||!r.extensions[t])return null;const n=r.extensions[t],o=a.images[n.source];let l=i.textureLoader;if(o.uri){const h=i.options.manager.getHandler(o.uri);h!==null&&(l=h)}return i.loadTextureImage(e,n.source,l)}}class xA{constructor(e){this.parser=e,this.name=Ke.EXT_TEXTURE_AVIF}loadTexture(e){const t=this.name,i=this.parser,a=i.json,r=a.textures[e];if(!r.extensions||!r.extensions[t])return null;const n=r.extensions[t],o=a.images[n.source];let l=i.textureLoader;if(o.uri){const h=i.options.manager.getHandler(o.uri);h!==null&&(l=h)}return i.loadTextureImage(e,n.source,l)}}class pA{constructor(e){this.name=Ke.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const a=i.extensions[this.name],r=this.parser.getDependency("buffer",a.buffer),n=this.parser.options.meshoptDecoder;if(!n||!n.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(o){const l=a.byteOffset||0,h=a.byteLength||0,c=a.count,d=a.byteStride,_=new Uint8Array(o,l,h);return n.decodeGltfBufferAsync?n.decodeGltfBufferAsync(c,d,_,a.mode,a.filter).then(function(u){return u.buffer}):n.ready.then(function(){const u=new ArrayBuffer(c*d);return n.decodeGltfBuffer(new Uint8Array(u),c,d,_,a.mode,a.filter),u})})}else return null}}class mA{constructor(e){this.name=Ke.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const a=t.meshes[i.mesh];for(const h of a.primitives)if(h.mode!==ss.TRIANGLES&&h.mode!==ss.TRIANGLE_STRIP&&h.mode!==ss.TRIANGLE_FAN&&h.mode!==void 0)return null;const n=i.extensions[this.name].attributes,o=[],l={};for(const h in n)o.push(this.parser.getDependency("accessor",n[h]).then(c=>(l[h]=c,l[h])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(h=>{const c=h.pop(),d=c.isGroup?c.children:[c],_=h[0].count,u=[];for(const x of d){const g=new De,v=new S,f=new ji,y=new S(1,1,1),w=new f_(x.geometry,x.material,_);for(let p=0;p<_;p++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,p),l.ROTATION&&f.fromBufferAttribute(l.ROTATION,p),l.SCALE&&y.fromBufferAttribute(l.SCALE,p),w.setMatrixAt(p,g.compose(v,f,y));for(const p in l)if(p==="_COLOR_0"){const b=l[p];w.instanceColor=new xs(b.array,b.itemSize,b.normalized)}else p!=="TRANSLATION"&&p!=="ROTATION"&&p!=="SCALE"&&x.geometry.setAttribute(p,l[p]);ut.prototype.copy.call(w,x),this.parser.assignFinalMaterial(w),u.push(w)}return c.isGroup?(c.clear(),c.add(...u),c):u[0]}))}}const ep="glTF",to=12,qv={JSON:1313821514,BIN:5130562};class yA{constructor(e){this.name=Ke.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,to),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==ep)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const a=this.header.length-to,r=new DataView(e,to);let n=0;for(;n<a;){const o=r.getUint32(n,!0);n+=4;const l=r.getUint32(n,!0);if(n+=4,l===qv.JSON){const h=new Uint8Array(e,to+n,o);this.content=i.decode(h)}else if(l===qv.BIN){const h=to+n;this.body=e.slice(h,h+o)}n+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class wA{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ke.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,a=this.dracoLoader,r=e.extensions[this.name].bufferView,n=e.extensions[this.name].attributes,o={},l={},h={};for(const c in n){const d=Qd[c]||c.toLowerCase();o[d]=n[c]}for(const c in e.attributes){const d=Qd[c]||c.toLowerCase();if(n[c]!==void 0){const _=i.accessors[e.attributes[c]],u=ln[_.componentType];h[d]=u.name,l[d]=_.normalized===!0}}return t.getDependency("bufferView",r).then(function(c){return new Promise(function(d,_){a.decodeDracoFile(c,function(u){for(const x in u.attributes){const g=u.attributes[x],v=l[x];v!==void 0&&(g.normalized=v)}d(u)},o,h,Ot,_)})})}}class zA{constructor(){this.name=Ke.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class PA{constructor(){this.name=Ke.KHR_MESH_QUANTIZATION}}class tp extends Uo{constructor(e,t,i,a){super(e,t,i,a)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,a=this.valueSize,r=e*a*3+a;for(let n=0;n!==a;n++)t[n]=i[r+n];return t}interpolate_(e,t,i,a){const r=this.resultBuffer,n=this.sampleValues,o=this.valueSize,l=o*2,h=o*3,c=a-t,d=(i-t)/c,_=d*d,u=_*d,x=e*h,g=x-h,v=-2*u+3*_,f=u-_,y=1-v,w=f-_+d;for(let p=0;p!==o;p++){const b=n[g+p+o],M=n[g+p+l]*c,E=n[x+p+o],A=n[x+p]*c;r[p]=y*b+w*M+v*E+f*A}return r}}const bA=new ji;class TA extends tp{interpolate_(e,t,i,a){const r=super.interpolate_(e,t,i,a);return bA.fromArray(r).normalize().toArray(r),r}}const ss={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ln={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Hv={9728:it,9729:yt,9984:g0,9985:Nl,9986:so,9987:ms},Xv={33071:rs,33648:Yl,10497:rt},Oc={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Qd={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ba={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},SA={CUBICSPLINE:void 0,LINEAR:po,STEP:xo},Nc={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function EA(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new _a({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ds})),s.DefaultMaterial}function ar(s,e,t){for(const i in t.extensions)s[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Ks(s,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(s.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function AA(s,e,t){let i=!1,a=!1,r=!1;for(let h=0,c=e.length;h<c;h++){const d=e[h];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(a=!0),d.COLOR_0!==void 0&&(r=!0),i&&a&&r)break}if(!i&&!a&&!r)return Promise.resolve(s);const n=[],o=[],l=[];for(let h=0,c=e.length;h<c;h++){const d=e[h];if(i){const _=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):s.attributes.position;n.push(_)}if(a){const _=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):s.attributes.normal;o.push(_)}if(r){const _=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):s.attributes.color;l.push(_)}}return Promise.all([Promise.all(n),Promise.all(o),Promise.all(l)]).then(function(h){const c=h[0],d=h[1],_=h[2];return i&&(s.morphAttributes.position=c),a&&(s.morphAttributes.normal=d),r&&(s.morphAttributes.color=_),s.morphTargetsRelative=!0,s})}function MA(s,e){if(s.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)s.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(s.morphTargetInfluences.length===t.length){s.morphTargetDictionary={};for(let i=0,a=t.length;i<a;i++)s.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function IA(s){let e;const t=s.extensions&&s.extensions[Ke.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Lc(t.attributes):e=s.indices+":"+Lc(s.attributes)+":"+s.mode,s.targets!==void 0)for(let i=0,a=s.targets.length;i<a;i++)e+=":"+Lc(s.targets[i]);return e}function Lc(s){let e="";const t=Object.keys(s).sort();for(let i=0,a=t.length;i<a;i++)e+=t[i]+":"+s[t[i]]+";";return e}function $d(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function CA(s){return s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0?"image/jpeg":s.search(/\.webp($|\?)/i)>0||s.search(/^data\:image\/webp/)===0?"image/webp":s.search(/\.ktx2($|\?)/i)>0||s.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const DA=new De;class RA{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new tA,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,a=-1,r=!1,n=-1;if(typeof navigator<"u"){const o=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(o)===!0;const l=o.match(/Version\/(\d+)/);a=i&&l?parseInt(l[1],10):-1,r=o.indexOf("Firefox")>-1,n=r?o.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&a<17||r&&n<98?this.textureLoader=new A1(this.options.manager):this.textureLoader=new w_(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new wn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,a=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(n){return n._markDefs&&n._markDefs()}),Promise.all(this._invokeAll(function(n){return n.beforeRoot&&n.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(n){const o={scene:n[0][a.scene||0],scenes:n[0],animations:n[1],cameras:n[2],asset:a.asset,parser:i,userData:{}};return ar(r,o,a),Ks(o,a),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){for(const l of o.scenes)l.updateMatrixWorld();e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let a=0,r=t.length;a<r;a++){const n=t[a].joints;for(let o=0,l=n.length;o<l;o++)e[n[o]].isBone=!0}for(let a=0,r=e.length;a<r;a++){const n=e[a];n.mesh!==void 0&&(this._addNodeRef(this.meshCache,n.mesh),n.skin!==void 0&&(i[n.mesh].isSkinnedMesh=!0)),n.camera!==void 0&&this._addNodeRef(this.cameraCache,n.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const a=i.clone(),r=(n,o)=>{const l=this.associations.get(n);l!=null&&this.associations.set(o,l);for(const[h,c]of n.children.entries())r(c,o.children[h])};return r(i,a),a.name+="_instance_"+e.uses[t]++,a}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const a=e(t[i]);if(a)return a}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let a=0;a<t.length;a++){const r=e(t[a]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let a=this.cache.get(i);if(!a){switch(e){case"scene":a=this.loadScene(t);break;case"node":a=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":a=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":a=this.loadAccessor(t);break;case"bufferView":a=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":a=this.loadBuffer(t);break;case"material":a=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":a=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":a=this.loadSkin(t);break;case"animation":a=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":a=this.loadCamera(t);break;default:if(a=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!a)throw new Error("Unknown type: "+e);break}this.cache.add(i,a)}return a}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,a=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(a.map(function(r,n){return i.getDependency(e,n)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ke.KHR_BINARY_GLTF].body);const a=this.options;return new Promise(function(r,n){i.load(ho.resolveURL(t.uri,a.path),r,void 0,function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const a=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+a)})}loadAccessor(e){const t=this,i=this.json,a=this.json.accessors[e];if(a.bufferView===void 0&&a.sparse===void 0){const n=Oc[a.type],o=ln[a.componentType],l=a.normalized===!0,h=new o(a.count*n);return Promise.resolve(new Be(h,n,l))}const r=[];return a.bufferView!==void 0?r.push(this.getDependency("bufferView",a.bufferView)):r.push(null),a.sparse!==void 0&&(r.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(r).then(function(n){const o=n[0],l=Oc[a.type],h=ln[a.componentType],c=h.BYTES_PER_ELEMENT,d=c*l,_=a.byteOffset||0,u=a.bufferView!==void 0?i.bufferViews[a.bufferView].byteStride:void 0,x=a.normalized===!0;let g,v;if(u&&u!==d){const f=Math.floor(_/u),y="InterleavedBuffer:"+a.bufferView+":"+a.componentType+":"+f+":"+a.count;let w=t.cache.get(y);w||(g=new h(o,f*u,a.count*u/c),w=new R0(g,u/c),t.cache.add(y,w)),v=new yo(w,l,_%u/c,x)}else o===null?g=new h(a.count*l):g=new h(o,_,a.count*l),v=new Be(g,l,x);if(a.sparse!==void 0){const f=Oc.SCALAR,y=ln[a.sparse.indices.componentType],w=a.sparse.indices.byteOffset||0,p=a.sparse.values.byteOffset||0,b=new y(n[1],w,a.sparse.count*f),M=new h(n[2],p,a.sparse.count*l);o!==null&&(v=new Be(v.array.slice(),v.itemSize,v.normalized)),v.normalized=!1;for(let E=0,A=b.length;E<A;E++){const m=b[E];if(v.setX(m,M[E*l]),l>=2&&v.setY(m,M[E*l+1]),l>=3&&v.setZ(m,M[E*l+2]),l>=4&&v.setW(m,M[E*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}v.normalized=x}return v})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,n=t.images[r];let o=this.textureLoader;if(n.uri){const l=i.manager.getHandler(n.uri);l!==null&&(o=l)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,i){const a=this,r=this.json,n=r.textures[e],o=r.images[t],l=(o.uri||o.bufferView)+":"+n.sampler;if(this.textureCache[l])return this.textureCache[l];const h=this.loadImageSource(t,i).then(function(c){c.flipY=!1,c.name=n.name||o.name||"",c.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(c.name=o.uri);const _=(r.samplers||{})[n.sampler]||{};return c.magFilter=Hv[_.magFilter]||yt,c.minFilter=Hv[_.minFilter]||ms,c.wrapS=Xv[_.wrapS]||rt,c.wrapT=Xv[_.wrapT]||rt,c.generateMipmaps=!c.isCompressedTexture&&c.minFilter!==it&&c.minFilter!==yt,a.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=h,h}loadImageSource(e,t){const i=this,a=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const n=a.images[e],o=self.URL||self.webkitURL;let l=n.uri||"",h=!1;if(n.bufferView!==void 0)l=i.getDependency("bufferView",n.bufferView).then(function(d){h=!0;const _=new Blob([d],{type:n.mimeType});return l=o.createObjectURL(_),l});else if(n.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(d){return new Promise(function(_,u){let x=_;t.isImageBitmapLoader===!0&&(x=function(g){const v=new Ct(g);v.needsUpdate=!0,_(v)}),t.load(ho.resolveURL(d,r.path),x,void 0,u)})}).then(function(d){return h===!0&&o.revokeObjectURL(l),Ks(d,n),d.userData.mimeType=n.mimeType||CA(n.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=c,c}assignTexture(e,t,i,a){const r=this;return this.getDependency("texture",i.index).then(function(n){if(!n)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(n=n.clone(),n.channel=i.texCoord),r.extensions[Ke.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[Ke.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=r.associations.get(n);n=r.extensions[Ke.KHR_TEXTURE_TRANSFORM].extendTexture(n,o),r.associations.set(n,l)}}return a!==void 0&&(n.colorSpace=a),e[t]=n,n})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const a=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,n=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new L0,Ci.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(o,l)),i=l}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new v_,Ci.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(o,l)),i=l}if(a||r||n){let o="ClonedMaterial:"+i.uuid+":";a&&(o+="derivative-tangents:"),r&&(o+="vertex-colors:"),n&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=i.clone(),r&&(l.vertexColors=!0),n&&(l.flatShading=!0),a&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return _a}loadMaterial(e){const t=this,i=this.json,a=this.extensions,r=i.materials[e];let n;const o={},l=r.extensions||{},h=[];if(l[Ke.KHR_MATERIALS_UNLIT]){const d=a[Ke.KHR_MATERIALS_UNLIT];n=d.getMaterialType(),h.push(d.extendParams(o,r,t))}else{const d=r.pbrMetallicRoughness||{};if(o.color=new X(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){const _=d.baseColorFactor;o.color.setRGB(_[0],_[1],_[2],Ot),o.opacity=_[3]}d.baseColorTexture!==void 0&&h.push(t.assignTexture(o,"map",d.baseColorTexture,Ge)),o.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,o.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),h.push(t.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),n=this._invokeOne(function(_){return _.getMaterialType&&_.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(_){return _.extendMaterialParams&&_.extendMaterialParams(e,o)})))}r.doubleSided===!0&&(o.side=si);const c=r.alphaMode||Nc.OPAQUE;if(c===Nc.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,c===Nc.MASK&&(o.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&n!==Mi&&(h.push(t.assignTexture(o,"normalMap",r.normalTexture)),o.normalScale=new $(1,1),r.normalTexture.scale!==void 0)){const d=r.normalTexture.scale;o.normalScale.set(d,d)}if(r.occlusionTexture!==void 0&&n!==Mi&&(h.push(t.assignTexture(o,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&n!==Mi){const d=r.emissiveFactor;o.emissive=new X().setRGB(d[0],d[1],d[2],Ot)}return r.emissiveTexture!==void 0&&n!==Mi&&h.push(t.assignTexture(o,"emissiveMap",r.emissiveTexture,Ge)),Promise.all(h).then(function(){const d=new n(o);return r.name&&(d.name=r.name),Ks(d,r),t.associations.set(d,{materials:e}),r.extensions&&ar(a,d,r),d})}createUniqueName(e){const t=vt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,a=this.primitiveCache;function r(o){return i[Ke.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return jv(l,o,t)})}const n=[];for(let o=0,l=e.length;o<l;o++){const h=e[o],c=IA(h),d=a[c];if(d)n.push(d.promise);else{let _;h.extensions&&h.extensions[Ke.KHR_DRACO_MESH_COMPRESSION]?_=r(h):_=jv(new Wt,h,t),a[c]={primitive:h,promise:_},n.push(_)}}return Promise.all(n)}loadMesh(e){const t=this,i=this.json,a=this.extensions,r=i.meshes[e],n=r.primitives,o=[];for(let l=0,h=n.length;l<h;l++){const c=n[l].material===void 0?EA(this.cache):this.getDependency("material",n[l].material);o.push(c)}return o.push(t.loadGeometries(n)),Promise.all(o).then(function(l){const h=l.slice(0,l.length-1),c=l[l.length-1],d=[];for(let u=0,x=c.length;u<x;u++){const g=c[u],v=n[u];let f;const y=h[u];if(v.mode===ss.TRIANGLES||v.mode===ss.TRIANGLE_STRIP||v.mode===ss.TRIANGLE_FAN||v.mode===void 0)f=r.isSkinnedMesh===!0?new r1(g,y):new Ne(g,y),f.isSkinnedMesh===!0&&f.normalizeSkinWeights(),v.mode===ss.TRIANGLE_STRIP?f.geometry=Wv(f.geometry,b0):v.mode===ss.TRIANGLE_FAN&&(f.geometry=Wv(f.geometry,Td));else if(v.mode===ss.LINES)f=new N0(g,y);else if(v.mode===ss.LINE_STRIP)f=new g_(g,y);else if(v.mode===ss.LINE_LOOP)f=new d1(g,y);else if(v.mode===ss.POINTS)f=new Dn(g,y);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(f.geometry.morphAttributes).length>0&&MA(f,r),f.name=t.createUniqueName(r.name||"mesh_"+e),Ks(f,r),v.extensions&&ar(a,f,v),t.assignFinalMaterial(f),d.push(f)}for(let u=0,x=d.length;u<x;u++)t.associations.set(d[u],{meshes:e,primitives:u});if(d.length===1)return r.extensions&&ar(a,d[0],r),d[0];const _=new ys;r.extensions&&ar(a,_,r),t.associations.set(_,{meshes:e});for(let u=0,x=d.length;u<x;u++)_.add(d[u]);return _})}loadCamera(e){let t;const i=this.json.cameras[e],a=i[i.type];if(!a){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new xi(sa.radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):i.type==="orthographic"&&(t=new wr(-a.xmag,a.xmag,a.ymag,-a.ymag,a.znear,a.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Ks(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let a=0,r=t.joints.length;a<r;a++)i.push(this._loadNodeShallow(t.joints[a]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(a){const r=a.pop(),n=a,o=[],l=[];for(let h=0,c=n.length;h<c;h++){const d=n[h];if(d){o.push(d);const _=new De;r!==null&&_.fromArray(r.array,h*16),l.push(_)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new u_(o,l)})}loadAnimation(e){const t=this.json,i=this,a=t.animations[e],r=a.name?a.name:"animation_"+e,n=[],o=[],l=[],h=[],c=[];for(let d=0,_=a.channels.length;d<_;d++){const u=a.channels[d],x=a.samplers[u.sampler],g=u.target,v=g.node,f=a.parameters!==void 0?a.parameters[x.input]:x.input,y=a.parameters!==void 0?a.parameters[x.output]:x.output;g.node!==void 0&&(n.push(this.getDependency("node",v)),o.push(this.getDependency("accessor",f)),l.push(this.getDependency("accessor",y)),h.push(x),c.push(g))}return Promise.all([Promise.all(n),Promise.all(o),Promise.all(l),Promise.all(h),Promise.all(c)]).then(function(d){const _=d[0],u=d[1],x=d[2],g=d[3],v=d[4],f=[];for(let y=0,w=_.length;y<w;y++){const p=_[y],b=u[y],M=x[y],E=g[y],A=v[y];if(p===void 0)continue;p.updateMatrix&&p.updateMatrix();const m=i._createAnimationTracks(p,b,M,E,A);if(m)for(let P=0;P<m.length;P++)f.push(m[P])}return new w1(r,void 0,f)})}createNodeMesh(e){const t=this.json,i=this,a=t.nodes[e];return a.mesh===void 0?null:i.getDependency("mesh",a.mesh).then(function(r){const n=i._getNodeRef(i.meshCache,a.mesh,r);return a.weights!==void 0&&n.traverse(function(o){if(o.isMesh)for(let l=0,h=a.weights.length;l<h;l++)o.morphTargetInfluences[l]=a.weights[l]}),n})}loadNode(e){const t=this.json,i=this,a=t.nodes[e],r=i._loadNodeShallow(e),n=[],o=a.children||[];for(let h=0,c=o.length;h<c;h++)n.push(i.getDependency("node",o[h]));const l=a.skin===void 0?Promise.resolve(null):i.getDependency("skin",a.skin);return Promise.all([r,Promise.all(n),l]).then(function(h){const c=h[0],d=h[1],_=h[2];_!==null&&c.traverse(function(u){u.isSkinnedMesh&&u.bind(_,DA)});for(let u=0,x=d.length;u<x;u++)c.add(d[u]);return c})}_loadNodeShallow(e){const t=this.json,i=this.extensions,a=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],n=r.name?a.createUniqueName(r.name):"",o=[],l=a._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return l&&o.push(l),r.camera!==void 0&&o.push(a.getDependency("camera",r.camera).then(function(h){return a._getNodeRef(a.cameraCache,r.camera,h)})),a._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){o.push(h)}),this.nodeCache[e]=Promise.all(o).then(function(h){let c;if(r.isBone===!0?c=new O0:h.length>1?c=new ys:h.length===1?c=h[0]:c=new ut,c!==h[0])for(let d=0,_=h.length;d<_;d++)c.add(h[d]);if(r.name&&(c.userData.name=r.name,c.name=n),Ks(c,r),r.extensions&&ar(i,c,r),r.matrix!==void 0){const d=new De;d.fromArray(r.matrix),c.applyMatrix4(d)}else r.translation!==void 0&&c.position.fromArray(r.translation),r.rotation!==void 0&&c.quaternion.fromArray(r.rotation),r.scale!==void 0&&c.scale.fromArray(r.scale);if(!a.associations.has(c))a.associations.set(c,{});else if(r.mesh!==void 0&&a.meshCache.refs[r.mesh]>1){const d=a.associations.get(c);a.associations.set(c,{...d})}return a.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],a=this,r=new ys;i.name&&(r.name=a.createUniqueName(i.name)),Ks(r,i),i.extensions&&ar(t,r,i);const n=i.nodes||[],o=[];for(let l=0,h=n.length;l<h;l++)o.push(a.getDependency("node",n[l]));return Promise.all(o).then(function(l){for(let c=0,d=l.length;c<d;c++)r.add(l[c]);const h=c=>{const d=new Map;for(const[_,u]of a.associations)(_ instanceof Ci||_ instanceof Ct)&&d.set(_,u);return c.traverse(_=>{const u=a.associations.get(_);u!=null&&d.set(_,u)}),d};return a.associations=h(r),r})}_createAnimationTracks(e,t,i,a,r){const n=[],o=e.name?e.name:e.uuid,l=[];ba[r.path]===ba.weights?e.traverse(function(_){_.morphTargetInfluences&&l.push(_.name?_.name:_.uuid)}):l.push(o);let h;switch(ba[r.path]){case ba.weights:h=pn;break;case ba.rotation:h=mn;break;case ba.translation:case ba.scale:h=yn;break;default:switch(i.itemSize){case 1:h=pn;break;case 2:case 3:default:h=yn;break}break}const c=a.interpolation!==void 0?SA[a.interpolation]:po,d=this._getArrayFromAccessor(i);for(let _=0,u=l.length;_<u;_++){const x=new h(l[_]+"."+ba[r.path],t.array,d,c);a.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(x),n.push(x)}return n}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=$d(t.constructor),a=new Float32Array(t.length);for(let r=0,n=t.length;r<n;r++)a[r]=t[r]*i;t=a}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const a=this instanceof mn?TA:tp;return new a(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function OA(s,e,t){const i=e.attributes,a=new ki;if(i.POSITION!==void 0){const o=t.json.accessors[i.POSITION],l=o.min,h=o.max;if(l!==void 0&&h!==void 0){if(a.set(new S(l[0],l[1],l[2]),new S(h[0],h[1],h[2])),o.normalized){const c=$d(ln[o.componentType]);a.min.multiplyScalar(c),a.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const o=new S,l=new S;for(let h=0,c=r.length;h<c;h++){const d=r[h];if(d.POSITION!==void 0){const _=t.json.accessors[d.POSITION],u=_.min,x=_.max;if(u!==void 0&&x!==void 0){if(l.setX(Math.max(Math.abs(u[0]),Math.abs(x[0]))),l.setY(Math.max(Math.abs(u[1]),Math.abs(x[1]))),l.setZ(Math.max(Math.abs(u[2]),Math.abs(x[2]))),_.normalized){const g=$d(ln[_.componentType]);l.multiplyScalar(g)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(o)}s.boundingBox=a;const n=new _s;a.getCenter(n.center),n.radius=a.min.distanceTo(a.max)/2,s.boundingSphere=n}function jv(s,e,t){const i=e.attributes,a=[];function r(n,o){return t.getDependency("accessor",n).then(function(l){s.setAttribute(o,l)})}for(const n in i){const o=Qd[n]||n.toLowerCase();o in s.attributes||a.push(r(i[n],o))}if(e.indices!==void 0&&!s.index){const n=t.getDependency("accessor",e.indices).then(function(o){s.setIndex(o)});a.push(n)}return Qe.workingColorSpace!==Ot&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Qe.workingColorSpace}" not supported.`),Ks(s,e),OA(s,e,t),Promise.all(a).then(function(){return e.targets!==void 0?AA(s,e.targets,t):s})}class NA extends E1{constructor(e){super(e),this.type=ns}parse(e){const n=function(A,m){switch(A){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(m||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(m||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(m||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(m||""))}},d=function(A,m,P){m=m||1024;let U=A.pos,N=-1,F=0,W="",V=String.fromCharCode.apply(null,new Uint16Array(A.subarray(U,U+128)));for(;0>(N=V.indexOf(`
`))&&F<m&&U<A.byteLength;)W+=V,F+=V.length,U+=128,V+=String.fromCharCode.apply(null,new Uint16Array(A.subarray(U,U+128)));return-1<N?(A.pos+=F+N+1,W+V.slice(0,N)):!1},_=function(A){const m=/^#\?(\S+)/,P=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,I=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,U=/^\s*FORMAT=(\S+)\s*$/,N=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,F={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let W,V;for((A.pos>=A.byteLength||!(W=d(A)))&&n(1,"no header found"),(V=W.match(m))||n(3,"bad initial token"),F.valid|=1,F.programtype=V[1],F.string+=W+`
`;W=d(A),W!==!1;){if(F.string+=W+`
`,W.charAt(0)==="#"){F.comments+=W+`
`;continue}if((V=W.match(P))&&(F.gamma=parseFloat(V[1])),(V=W.match(I))&&(F.exposure=parseFloat(V[1])),(V=W.match(U))&&(F.valid|=2,F.format=V[1]),(V=W.match(N))&&(F.valid|=4,F.height=parseInt(V[1],10),F.width=parseInt(V[2],10)),F.valid&2&&F.valid&4)break}return F.valid&2||n(3,"missing format specifier"),F.valid&4||n(3,"missing image size specifier"),F},u=function(A,m,P){const I=m;if(I<8||I>32767||A[0]!==2||A[1]!==2||A[2]&128)return new Uint8Array(A);I!==(A[2]<<8|A[3])&&n(3,"wrong scanline width");const U=new Uint8Array(4*m*P);U.length||n(4,"unable to allocate buffer space");let N=0,F=0;const W=4*I,V=new Uint8Array(4),j=new Uint8Array(W);let G=P;for(;G>0&&F<A.byteLength;){F+4>A.byteLength&&n(1),V[0]=A[F++],V[1]=A[F++],V[2]=A[F++],V[3]=A[F++],(V[0]!=2||V[1]!=2||(V[2]<<8|V[3])!=I)&&n(3,"bad rgbe scanline format");let re=0,ne;for(;re<W&&F<A.byteLength;){ne=A[F++];const we=ne>128;if(we&&(ne-=128),(ne===0||re+ne>W)&&n(3,"bad scanline data"),we){const Je=A[F++];for(let qe=0;qe<ne;qe++)j[re++]=Je}else j.set(A.subarray(F,F+ne),re),re+=ne,F+=ne}const xe=I;for(let we=0;we<xe;we++){let Je=0;U[N]=j[we+Je],Je+=I,U[N+1]=j[we+Je],Je+=I,U[N+2]=j[we+Je],Je+=I,U[N+3]=j[we+Je],N+=4}G--}return U},x=function(A,m,P,I){const U=A[m+3],N=Math.pow(2,U-128)/255;P[I+0]=A[m+0]*N,P[I+1]=A[m+1]*N,P[I+2]=A[m+2]*N,P[I+3]=1},g=function(A,m,P,I){const U=A[m+3],N=Math.pow(2,U-128)/255;P[I+0]=hl.toHalfFloat(Math.min(A[m+0]*N,65504)),P[I+1]=hl.toHalfFloat(Math.min(A[m+1]*N,65504)),P[I+2]=hl.toHalfFloat(Math.min(A[m+2]*N,65504)),P[I+3]=hl.toHalfFloat(1)},v=new Uint8Array(e);v.pos=0;const f=_(v),y=f.width,w=f.height,p=u(v.subarray(v.pos),y,w);let b,M,E;switch(this.type){case Et:E=p.length/4;const A=new Float32Array(E*4);for(let P=0;P<E;P++)x(p,P*4,A,P*4);b=A,M=Et;break;case ns:E=p.length/4;const m=new Uint16Array(E*4);for(let P=0;P<E;P++)g(p,P*4,m,P*4);b=m,M=ns;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:y,height:w,data:b,header:f.string,gamma:f.gamma,exposure:f.exposure,type:M}}setDataType(e){return this.type=e,this}load(e,t,i,a){function r(n,o){switch(n.type){case Et:case ns:n.colorSpace=Ot,n.minFilter=yt,n.magFilter=yt,n.generateMipmaps=!1,n.flipY=!0;break}t&&t(n,o)}return super.load(e,r,i,a)}}const Fc=new WeakMap;class LA extends ua{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,a){const r=new wn(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,n=>{this.parse(n,t,a)},i,a)}parse(e,t,i=()=>{}){this.decodeDracoFile(e,t,null,null,Ge,i).catch(i)}decodeDracoFile(e,t,i,a,r=Ot,n=()=>{}){const o={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:a||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:r};return this.decodeGeometry(e,o).then(t).catch(n)}decodeGeometry(e,t){const i=JSON.stringify(t);if(Fc.has(e)){const l=Fc.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let a;const r=this.workerNextTaskID++,n=e.byteLength,o=this._getWorker(r,n).then(l=>(a=l,new Promise((h,c)=>{a._callbacks[r]={resolve:h,reject:c},a.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{a&&r&&this._releaseTask(a,r)}),Fc.set(e,{key:i,promise:o}),o}_createGeometry(e){const t=new Wt;e.index&&t.setIndex(new Be(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const a=e.attributes[i],r=a.name,n=a.array,o=a.itemSize,l=new Be(n,o);r==="color"&&(this._assignVertexColorSpace(l,a.vertexColorSpace),l.normalized=!(n instanceof Float32Array)),t.setAttribute(r,l)}return t}_assignVertexColorSpace(e,t){if(t!==Ge)return;const i=new X;for(let a=0,r=e.count;a<r;a++)i.fromBufferAttribute(e,a),Qe.colorSpaceToWorking(i,Ge),e.setXYZ(a,i.r,i.g,i.b)}_loadLibrary(e,t){const i=new wn(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((a,r)=>{i.load(e,a,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const a=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const r=FA.toString(),n=["/* draco decoder */",a,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([n]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const a=new Worker(this.workerSourceURL);a._callbacks={},a._taskCosts={},a._taskLoad=0,a.postMessage({type:"init",decoderConfig:this.decoderConfig}),a.onmessage=function(r){const n=r.data;switch(n.type){case"decode":a._callbacks[n.id].resolve(n);break;case"error":a._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(a)}else this.workerPool.sort(function(a,r){return a._taskLoad>r._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function FA(){let s,e;onmessage=function(n){const o=n.data;switch(o.type){case"init":s=o.decoderConfig,e=new Promise(function(c){s.onModuleLoaded=function(d){c({draco:d})},DracoDecoderModule(s)});break;case"decode":const l=o.buffer,h=o.taskConfig;e.then(c=>{const d=c.draco,_=new d.Decoder;try{const u=t(d,_,new Int8Array(l),h),x=u.attributes.map(g=>g.array.buffer);u.index&&x.push(u.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:u},x)}catch(u){console.error(u),self.postMessage({type:"error",id:o.id,error:u.message})}finally{d.destroy(_)}});break}};function t(n,o,l,h){const c=h.attributeIDs,d=h.attributeTypes;let _,u;const x=o.GetEncodedGeometryType(l);if(x===n.TRIANGULAR_MESH)_=new n.Mesh,u=o.DecodeArrayToMesh(l,l.byteLength,_);else if(x===n.POINT_CLOUD)_=new n.PointCloud,u=o.DecodeArrayToPointCloud(l,l.byteLength,_);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!u.ok()||_.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+u.error_msg());const g={index:null,attributes:[]};for(const v in c){const f=self[d[v]];let y,w;if(h.useUniqueIDs)w=c[v],y=o.GetAttributeByUniqueId(_,w);else{if(w=o.GetAttributeId(_,n[c[v]]),w===-1)continue;y=o.GetAttribute(_,w)}const p=a(n,o,_,v,f,y);v==="color"&&(p.vertexColorSpace=h.vertexColorSpace),g.attributes.push(p)}return x===n.TRIANGULAR_MESH&&(g.index=i(n,o,_)),n.destroy(_),g}function i(n,o,l){const c=l.num_faces()*3,d=c*4,_=n._malloc(d);o.GetTrianglesUInt32Array(l,d,_);const u=new Uint32Array(n.HEAPF32.buffer,_,c).slice();return n._free(_),{array:u,itemSize:1}}function a(n,o,l,h,c,d){const _=d.num_components(),x=l.num_points()*_,g=x*c.BYTES_PER_ELEMENT,v=r(n,c),f=n._malloc(g);o.GetAttributeDataArrayForAllPoints(l,d,v,g,f);const y=new c(n.HEAPF32.buffer,f,x).slice();return n._free(f),{name:h,array:y,itemSize:_}}function r(n,o){switch(o){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32}}}const kA=["- Check your browser network console for more details.","- You may also double check the source type."];function VA(s){return`${s.charAt(0).toUpperCase()}${s.slice(1)}`}function ii(s,{loadingMode:e,on:t}={}){return{type:"texture",urls:[s],loadingMode:e??"auto",on:t}}function kc(s,{on:e,loadingMode:t,compressed:i}={}){return{type:i?"draco":"gltf",urls:[s],loadingMode:t??"auto",on:e}}function gs(s,{loadingMode:e}={}){return{type:"sound",urls:[s],loadingMode:e??"auto"}}class UA extends ui{#e;#t;#i;#s;#a;constructor(e){super({persistent:!0}),this.#e=e,this.#t={},this.#i=this.getAutoSources().length,this.#s=0,this.initLoaders(),this.startLoading()}getAutoSources(){return Object.values(this.#e).filter(e=>!e.loadingMode||e.loadingMode==="auto")}get gltfLoader(){return this.#a.gltfLoader}get textureLoader(){return this.#a.textureLoader}get rgbeLoader(){return this.#a.rgbeLoader}get dracoLoader(){return this.#a.dracoLoader}get soundLoader(){return this.#a.soundLoader}get items(){return this.#t}initLoaders(){const e=new LA;e.setDecoderPath("/draco/");const t=new Gv;t.setDRACOLoader(e),this.#a={gltfLoader:new Gv,dracoLoader:t,textureLoader:new w_,rgbeLoader:new NA,soundLoader:new R1}}getSourcesToLoadImmediately(){return Object.keys(this.#e).filter(e=>this.#e[e].loadingMode!=="manual")}startLoading(){this.getSourcesToLoadImmediately().forEach(e=>this.loadSource(e))}loadSource(e){const t=this.#e[e],i=`load${VA(t.type)}`;if(typeof this[i]!="function")throw new Error(`Unsupported asset type ${t.type} for resource ${String(e)} !`);this[i](e,t)}load(e){const t=this.#e[e];if(t.loadingMode!=="manual")throw new Error(`Can't load manually the resource ${String(e)}: its loading mode is ${t.loadingMode} instead of manual`);this.loadSource(e)}loadDraco(e,t){this.checkType(t,"draco"),this.dracoLoader.load(t.urls[0],i=>{this.sourceLoaded(e,i)},()=>{},this.loadingError.bind(this,e,t))}loadGltf(e,t){this.checkType(t,"gltf"),this.gltfLoader.load(t.urls[0],i=>{this.sourceLoaded(e,i)},()=>{},this.loadingError.bind(this,e,t))}loadHdr(e,t){this.checkType(t,"hdr"),this.rgbeLoader.load(t.urls[0],i=>{this.sourceLoaded(e,i)},()=>{},this.loadingError.bind(this,e,t))}loadTexture(e,t){this.checkType(t,"texture"),this.textureLoader.load(t.urls[0],i=>{const a=self.OffscreenCanvas?new OffscreenCanvas(i.width,i.height):document.createElement("canvas");a.width=i.width,a.height=i.height;const r=a.getContext("2d");if(!r)throw new Error("Unable to access canvas context !");r.drawImage(i,0,0);const n=new F0(a);n.flipY=!0,n.needsUpdate=!0,this.sourceLoaded(e,n)},()=>{},this.loadingError.bind(this,e,t))}loadSound(e,t){this.checkType(t,"sound"),this.soundLoader.load(t.urls[0],i=>{this.sourceLoaded(e,i)},()=>{},this.loadingError.bind(this,e,t))}checkType(e,t){if(e.type!==t)throw new Error(`Invalid type : expected '${t}', got '${e.type}'`)}loadingError(e,t,i){if(t.loadingMode==="auto"&&this.#s++,i instanceof Error){console.error(`An error occurred while trying to load resource ${String(e)} (type: ${t.type}) at ${t.urls.join(", ")} : ${i.stack}`);return}console.error(`An unknown error occurred while trying to load ${String(e)} (${t.type}) at ${t.urls.join(", ")}.
${kA.join(`
`)}`,i)}sourceLoaded(e,t){this.#t[e]=t,this.emit(`loaded:${String(e)}`);const i=this.#e[e];i.loadingMode==="auto"&&this.#s++,typeof i.on?.load=="function"&&i.on.load(t),this.emit("loaded",new CustomEvent("loaded",{detail:{name:String(e),file:t,total:this.#i,loaded:this.#s}})),this.#s===this.#i&&this.emit("ready")}destroy(){Object.values(this.#t).forEach(e=>{e.dispose==="function"&&e.dispose()})}}const Zv={on:{load:s=>{s.colorSpace=Ge,s.mapping=Kl}}},BA={testIsland:kc("/models/islands/islands-2.glb",{compressed:!0}),cloud:ii("/textures/clouds/cloud10.webp",{on:{load:s=>{s.colorSpace=Ge,s.minFilter=tm}}}),lensFlare0:ii("/textures/lenses/lensflare0.webp"),lensFlare1:ii("/textures/lenses/lensflare1.webp"),cliffsAo:ii("/textures/cliffs/8/ao.webp",{on:{load:s=>{s.wrapT=rt,s.wrapS=rt,s.rotation=Math.PI*.5,s.repeat.set(2,2)}}}),cliffsColor:ii("/textures/cliffs/8/color.webp",{on:{load:s=>{s.colorSpace=Ge,s.wrapT=rt,s.wrapS=rt,s.rotation=Math.PI*.5,s.repeat.set(2,2)}}}),cliffsNormal:ii("/textures/cliffs/8/normal.webp",{on:{load:s=>{s.wrapT=rt,s.wrapS=rt,s.rotation=Math.PI*.5,s.repeat.set(2,2)}}}),cliffsRoughness:ii("/textures/cliffs/8/roughness.webp",{on:{load:s=>{s.wrapT=rt,s.wrapS=rt,s.rotation=Math.PI*.5,s.repeat.set(2,2)}}}),barkColor:ii("/textures/bark/sycomore/color.webp",{on:{load:s=>{s.colorSpace=Ge,s.wrapT=rt,s.wrapS=rt,s.rotation=Math.PI*.5,s.repeat.set(4,4)}}}),barkNormal:ii("/textures/bark/sycomore/normal.webp",{on:{load:s=>{s.wrapT=rt,s.wrapS=rt,s.rotation=Math.PI*.5,s.repeat.set(4,4)}}}),barkArm:ii("/textures/bark/sycomore/arm.webp",{on:{load:s=>{s.wrapT=rt,s.wrapS=rt,s.rotation=Math.PI*.5,s.repeat.set(4,4)}}}),foliage:ii("/textures/foliage/combined-foliages.webp"),environmentMap:ii("/environments/sky_clouds_09_2k.webp",Zv),nightEnvironmentMap:ii("/environments/night-sky-1.webp",Zv),flowersSamplingTexture:ii("/textures/flowers/sampling5.webp",{on:{load:s=>{s.colorSpace=Ot}}}),flowersTexture:ii("/particles/flower.webp"),grassFieldDisplacementMap:ii("/textures/grass/displacement_map2.webp",{on:{load:s=>{s.wrapS=rt,s.wrapT=rt,s.colorSpace=Ot}}}),smoothWind:ii("/textures/grass/wind-4.webp",{on:{load:s=>{s.wrapS=rt,s.wrapT=rt,s.colorSpace=Ot}}}),grassFieldWindNoiseTexture:ii("/textures/grass/wind.webp",{on:{load:s=>{s.wrapS=rt,s.wrapT=rt,s.colorSpace=Ot}}}),butterflyTexture:ii("/textures/butterfly/butterfly-medium.webp",{on:{load:s=>{s.wrapS=rt,s.wrapT=rt,s.colorSpace=Ot}}}),grassModel:kc("/models/grass/grass.glb"),pampaGrassModel:kc("/models/grass/pampa-grass.glb"),soundMain:gs("/audio/firebird-feather.mp3"),soundNightMain:gs("/audio/goodnight.mp3"),soundAmbience:gs("/audio/birds.mp3"),soundNightAmbience:gs("/audio/night.mp3"),soundButton:gs("/audio/button.mp3"),soundWind:gs("/audio/wind.mp3"),soundWaterfall:gs("/audio/waterfall.mp3"),soundCampfire:gs("/audio/campfire.mp3"),soundMysteriousAmbience:gs("/audio/mysterious-ambience.mp3"),soundExplosion:gs("/audio/explosion.mp3"),soundSwap:gs("/audio/swap.mp3")},WA={r:0,g:1,b:2,a:3};class fo{static getImageDataFromTexture(e){const t=typeof OffscreenCanvas<"u"?new OffscreenCanvas(e.image.width,e.image.height):document.createElement("canvas");t.width=e.image.width,t.height=e.image.height;const i=t.getContext("2d");return i.drawImage(e.image,0,0),i.getImageData(0,0,t.width,t.height)}static getBrightnessAtUV(e,t,i,a){const r=Math.floor(t*(e.width-1)),o=(Math.floor((1-i)*(e.height-1))*e.width+r)*4;return e.data[o+WA[a]]/255}static createVertexWeightsFromTexture(e,t,i){const a=e.attributes.uv.array,r=e.attributes.position.count,n=new Float32Array(r);for(let o=0;o<r;o++){const l=a[o*2],h=a[o*2+1];n[o]=fo.getBrightnessAtUV(t,l,h,i)}return new Bt(n,1)}imageData;constructor(e){this.imageData=fo.getImageDataFromTexture(e)}createVertexWeightsFromTexture(e,t){return fo.createVertexWeightsFromTexture(e,this.imageData,t)}}var GA=`vec3 directionalLight(vec3 lightColor,float lightIntensity,vec3 normal,vec3 lightPosition,vec3 viewPosition,float specularPower){vec3 lightDirection=normalize(lightPosition);float shading=max(dot(normalize(normal),lightDirection),0.0);vec3 ligthReflection=reflect(-lightDirection,normal);float specular=min(dot(ligthReflection,viewPosition),0.0);specular=specularPower==0.0 ? 1.0 : pow(specular,specularPower);return lightColor*lightIntensity*(shading+specular);}vec4 SGPP_coord_prepare(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 SGPP_coord_prepare(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 SGPP_permute(vec4 x){return fract(x*((34.0/289.0)*x+(1.0/289.0)))*289.0;}vec4 SGPP_resolve(vec4 x){return fract(x*(7.0/288.0));}vec4 SGPP_hash_2D(vec2 gridcell){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));return SGPP_resolve(SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww));}void SGPP_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));hash_0=SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww);hash_1=SGPP_resolve(SGPP_permute(hash_0));hash_0=SGPP_resolve(hash_0);}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell.zzzz));highz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell_inc1.zzzz));}void SGPP_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){vec3 coords0=gridcell.xyz-floor(gridcell.xyz*(1.0/289.0))*289.0;vec3 coords3=step(coords0,vec3(287.5))*(coords0+1.0);vec3 coords1=mix(coords0,coords3,v1_mask);vec3 coords2=mix(coords0,coords3,v2_mask);hash_2=SGPP_permute(SGPP_permute(SGPP_permute(vec4(coords0.x,coords1.x,coords2.x,coords3.x))+vec4(coords0.y,coords1.y,coords2.y,coords3.y))+vec4(coords0.z,coords1.z,coords2.z,coords3.z));hash_0=SGPP_resolve(hash_2);hash_1=SGPP_resolve(hash_2=SGPP_permute(hash_2));hash_2=SGPP_resolve(SGPP_permute(hash_2));}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash_2=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash_0=SGPP_resolve(lowz_hash_2=SGPP_permute(highz_hash_2+gridcell.zzzz));highz_hash_0=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2+gridcell_inc1.zzzz));lowz_hash_1=SGPP_resolve(lowz_hash_2=SGPP_permute(lowz_hash_2));highz_hash_1=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2));lowz_hash_2=SGPP_resolve(SGPP_permute(lowz_hash_2));highz_hash_2=SGPP_resolve(SGPP_permute(highz_hash_2));}vec4 BBS_coord_prepare(vec4 x){return x-floor(x*(1.0/61.0))*61.0;}vec3 BBS_coord_prepare(vec3 x){return x-floor(x*(1.0/61.0))*61.0;}vec4 BBS_permute(vec4 x){return fract(x*x*(1.0/61.0))*61.0;}vec4 BBS_permute_and_resolve(vec4 x){return fract(x*x*(1.0/61.0));}vec4 BBS_hash_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);return BBS_permute_and_resolve(p+hash_coord.yyww);}vec4 BBS_hash_hq_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);p=BBS_permute(p+hash_coord.yyww);return BBS_permute_and_resolve(p+hash_coord.xzxz);}void BBS_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const float DOMAIN=60.0;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 p=BBS_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy);p=BBS_permute(p+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=BBS_permute_and_resolve(p+gridcell.zzzz);highz_hash=BBS_permute_and_resolve(p+gridcell_inc1.zzzz);}vec4 FAST32_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const float SOMELARGEFLOAT=951.135664;vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec2 SOMELARGEFLOATS=vec2(951.135664,642.949883);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec3 SOMELARGEFLOATS=vec3(951.135664,642.949883,803.202459);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));hash_2=fract(P*(1.0/SOMELARGEFLOATS.z));}vec4 FAST32_hash_2D_Cell(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec4 SOMELARGEFLOATS=vec4(951.135664,642.949883,803.202459,986.973274);vec2 P=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xy;P*=P;return fract((P.x*P.y)*(1.0/SOMELARGEFLOATS.xyzw));}vec4 FAST32_hash_3D_Cell(vec3 gridcell){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;gridcell.xy+=OFFSET.xy;gridcell.xy*=gridcell.xy;return fract((gridcell.x*gridcell.y)*(1.0/(SOMELARGEFLOATS+gridcell.zzzz*ZINC)));}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;highz_hash.xy=vec2(1.0/(SOMELARGEFLOAT+vec2(gridcell.z,gridcell_inc1.z)*ZINC));lowz_hash=fract(P*highz_hash.xxxx);highz_hash=fract(P*highz_hash.yyyy);}void FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec3 lowz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));v1_mask=(v1_mask.z<0.5)? lowz_mods : highz_mods;v2_mask=(v2_mask.z<0.5)? lowz_mods : highz_mods;hash_0=fract(P*vec4(lowz_mods.x,v1_mask.x,v2_mask.x,highz_mods.x));hash_1=fract(P*vec4(lowz_mods.y,v1_mask.y,v2_mask.y,highz_mods.y));hash_2=fract(P*vec4(lowz_mods.z,v1_mask.z,v2_mask.z,highz_mods.z));}vec4 FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec2 V1z_V2z=vec2(v1_mask.z<0.5 ? gridcell.z : gridcell_inc1.z,v2_mask.z<0.5 ? gridcell.z : gridcell_inc1.z);vec4 mod_vals=vec4(1.0/(SOMELARGEFLOAT+vec4(gridcell.z,V1z_V2z,gridcell_inc1.z)*ZINC));return fract(P*mod_vals);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;vec3 lowz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));lowz_hash_0=fract(P*lowz_mod.xxxx);highz_hash_0=fract(P*highz_mod.xxxx);lowz_hash_1=fract(P*lowz_mod.yyyy);highz_hash_1=fract(P*highz_mod.yyyy);lowz_hash_2=fract(P*lowz_mod.zzzz);highz_hash_2=fract(P*highz_mod.zzzz);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 lowz_hash_3,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2,out vec4 highz_hash_3){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;lowz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell.zzzz*ZINC.xyzw));highz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell_inc1.zzzz*ZINC.xyzw));lowz_hash_0=fract(P*lowz_hash_3.xxxx);highz_hash_0=fract(P*highz_hash_3.xxxx);lowz_hash_1=fract(P*lowz_hash_3.yyyy);highz_hash_1=fract(P*highz_hash_3.yyyy);lowz_hash_2=fract(P*lowz_hash_3.zzzz);highz_hash_2=fract(P*highz_hash_3.zzzz);lowz_hash_3=fract(P*lowz_hash_3.wwww);highz_hash_3=fract(P*highz_hash_3.wwww);}vec4 FAST32_2_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(403.839172,377.242706);const float DOMAIN=69.0;const float SOMELARGEFLOAT=32745.708984;const vec2 SCALE=vec2(2.009842,1.372549);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P=(P*SCALE.xyxy)+OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_3D(vec3 gridcell,out vec4 z0_hash,out vec4 z1_hash){const vec3 OFFSET=vec3(55.882355,63.167774,52.941177);const float DOMAIN=69.0;const float SOMELARGEFLOAT=69412.070313;const vec3 SCALE=vec3(0.235142,0.205890,0.216449);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);z0_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell.zzzz*(1.0/SOMELARGEFLOAT));z1_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell_inc1.zzzz*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash,out vec4 z1w0_hash,out vec4 z0w1_hash,out vec4 z1w1_hash){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const float SOMELARGEFLOAT=47165.636719;const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww)*(1.0/SOMELARGEFLOAT);z0w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx);z1w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy);z0w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz);z1w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww);}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash_0,out vec4 z0w0_hash_1,out vec4 z0w0_hash_2,out vec4 z0w0_hash_3,out vec4 z1w0_hash_0,out vec4 z1w0_hash_1,out vec4 z1w0_hash_2,out vec4 z1w0_hash_3,out vec4 z0w1_hash_0,out vec4 z0w1_hash_1,out vec4 z0w1_hash_2,out vec4 z0w1_hash_3,out vec4 z1w1_hash_0,out vec4 z1w1_hash_1,out vec4 z1w1_hash_2,out vec4 z1w1_hash_3){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(56974.746094,47165.636719,55049.667969,49901.273438);const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww);vec4 hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx;z0w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy;z1w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz;z0w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww;z1w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));}float Interpolation_C1(float x){return x*x*(3.0-2.0*x);}vec2 Interpolation_C1(vec2 x){return x*x*(3.0-2.0*x);}vec3 Interpolation_C1(vec3 x){return x*x*(3.0-2.0*x);}vec4 Interpolation_C1(vec4 x){return x*x*(3.0-2.0*x);}float Interpolation_C2(float x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec2 Interpolation_C2(vec2 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec3 Interpolation_C2(vec3 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2(vec4 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2_InterpAndDeriv(vec2 x){return x.xyxy*x.xyxy*(x.xyxy*(x.xyxy*(x.xyxy*vec2(6.0,0.0).xxyy+vec2(-15.0,30.0).xxyy)+vec2(10.0,-60.0).xxyy)+vec2(0.0,30.0).xxyy);}vec3 Interpolation_C2_Deriv(vec3 x){return x*x*(x*(x*30.0-60.0)+30.0);}float Interpolation_C2_Fast(float x){float x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec2 Interpolation_C2_Fast(vec2 x){vec2 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec3 Interpolation_C2_Fast(vec3 x){vec3 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec4 Interpolation_C2_Fast(vec4 x){vec4 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}float Interpolation_C3(float x){float xsq=x*x;float xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec2 Interpolation_C3(vec2 x){vec2 xsq=x*x;vec2 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec3 Interpolation_C3(vec3 x){vec3 xsq=x*x;vec3 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec4 Interpolation_C3(vec4 x){vec4 xsq=x*x;vec4 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}float Falloff_Xsq_C1(float xsq){xsq=1.0-xsq;return xsq*xsq;}float Falloff_Xsq_C2(float xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}vec4 Falloff_Xsq_C2(vec4 xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}float Value2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec2 blend=Interpolation_C2(Pf);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(hash,blend2.zxzx*blend2.wwyy);}float Value3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Value4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 z0w0_hash;vec4 z1w0_hash;vec4 z0w1_hash;vec4 z1w1_hash;FAST32_2_hash_4D(Pi,z0w0_hash,z1w0_hash,z0w1_hash,z1w1_hash);vec4 blend=Interpolation_C2(Pf);vec4 res0=z0w0_hash+(z0w1_hash-z0w0_hash)*blend.wwww;vec4 res1=z1w0_hash+(z1w1_hash-z1w0_hash)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0-blend.xy);return dot(res0,blend.zxzx*blend.wwyy);}float Perlin2D(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);
#if 1
vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);
#if 1
grad_results*=1.4142135623730950488016887242097;vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#else
grad_results*=2.3703703703703703703703703703704;vec4 vecs_len_sq=Pf_Pfmin1*Pf_Pfmin1;vecs_len_sq=vecs_len_sq.xzxz+vecs_len_sq.yyww;return dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq)),grad_results);
#endif
#else
vec4 hash=FAST32_hash_2D(Pi);hash-=0.5;vec4 grad_results=Pf_Pfmin1.xzxz*sign(hash)+Pf_Pfmin1.yyww*sign(abs(hash)-0.25);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#endif
}float Perlin3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;
#if 1
vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);
#if 1
vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);final*=1.1547005383792515290182975610039;return final;
#else
Pf*=Pf;Pf_min1*=Pf_min1;vec4 vecs_len_sq=vec4(Pf.x,Pf_min1.x,Pf.x,Pf_min1.x)+vec4(Pf.yy,Pf_min1.yy);float final=dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf.zzzz)),grad_results_0)+dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf_min1.zzzz)),grad_results_1);final*=2.3703703703703703703703703703704;return final;
#endif
#else
vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);hash_lowz-=0.5;vec4 grad_results_0_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_lowz);hash_lowz=abs(hash_lowz)-0.25;vec4 grad_results_0_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_lowz);vec4 grad_results_0_2=Pf.zzzz*sign(abs(hash_lowz)-0.125);vec4 grad_results_0=grad_results_0_0+grad_results_0_1+grad_results_0_2;hash_highz-=0.5;vec4 grad_results_1_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_highz);hash_highz=abs(hash_highz)-0.25;vec4 grad_results_1_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_highz);vec4 grad_results_1_2=Pf_min1.zzzz*sign(abs(hash_highz)-0.125);vec4 grad_results_1=grad_results_1_0+grad_results_1_1+grad_results_1_2;vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy)*(2.0/3.0);
#endif
}float Perlin4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 Pf_min1=Pf-1.0;vec4 lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3;vec4 highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3;vec4 lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3;vec4 highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3;FAST32_2_hash_4D(Pi,lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3,highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3,lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3,highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3);lowz_loww_hash_0-=0.49999;lowz_loww_hash_1-=0.49999;lowz_loww_hash_2-=0.49999;lowz_loww_hash_3-=0.49999;highz_loww_hash_0-=0.49999;highz_loww_hash_1-=0.49999;highz_loww_hash_2-=0.49999;highz_loww_hash_3-=0.49999;lowz_highw_hash_0-=0.49999;lowz_highw_hash_1-=0.49999;lowz_highw_hash_2-=0.49999;lowz_highw_hash_3-=0.49999;highz_highw_hash_0-=0.49999;highz_highw_hash_1-=0.49999;highz_highw_hash_2-=0.49999;highz_highw_hash_3-=0.49999;vec4 grad_results_lowz_loww=inversesqrt(lowz_loww_hash_0*lowz_loww_hash_0+lowz_loww_hash_1*lowz_loww_hash_1+lowz_loww_hash_2*lowz_loww_hash_2+lowz_loww_hash_3*lowz_loww_hash_3);grad_results_lowz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_loww_hash_1+Pf.zzzz*lowz_loww_hash_2+Pf.wwww*lowz_loww_hash_3);vec4 grad_results_highz_loww=inversesqrt(highz_loww_hash_0*highz_loww_hash_0+highz_loww_hash_1*highz_loww_hash_1+highz_loww_hash_2*highz_loww_hash_2+highz_loww_hash_3*highz_loww_hash_3);grad_results_highz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_loww_hash_1+Pf_min1.zzzz*highz_loww_hash_2+Pf.wwww*highz_loww_hash_3);vec4 grad_results_lowz_highw=inversesqrt(lowz_highw_hash_0*lowz_highw_hash_0+lowz_highw_hash_1*lowz_highw_hash_1+lowz_highw_hash_2*lowz_highw_hash_2+lowz_highw_hash_3*lowz_highw_hash_3);grad_results_lowz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_highw_hash_1+Pf.zzzz*lowz_highw_hash_2+Pf_min1.wwww*lowz_highw_hash_3);vec4 grad_results_highz_highw=inversesqrt(highz_highw_hash_0*highz_highw_hash_0+highz_highw_hash_1*highz_highw_hash_1+highz_highw_hash_2*highz_highw_hash_2+highz_highw_hash_3*highz_highw_hash_3);grad_results_highz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_highw_hash_1+Pf_min1.zzzz*highz_highw_hash_2+Pf_min1.wwww*highz_highw_hash_3);vec4 blend=Interpolation_C2(Pf);vec4 res0=grad_results_lowz_loww+(grad_results_lowz_highw-grad_results_lowz_loww)*blend.wwww;vec4 res1=grad_results_highz_loww+(grad_results_highz_highw-grad_results_highz_loww)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0)-blend.xy;return dot(res0,blend.zxzx*blend.wwyy);}float ValuePerlin2D(vec2 P,float blend_val){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_value,hash_x,hash_y;FAST32_hash_2D(Pi,hash_value,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results*=1.4142135623730950488016887242097;grad_results=mix((hash_value*2.0-1.0),grad_results,blend_val);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);}float ValuePerlin3D(vec3 P,float blend_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0*=1.1547005383792515290182975610039;grad_results_1*=1.1547005383792515290182975610039;grad_results_0=mix((hash_value0*2.0-1.0),grad_results_0,blend_val);grad_results_1=mix((hash_value1*2.0-1.0),grad_results_1,blend_val);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Cubist2D(vec2 P,vec2 range_clamp){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y,hash_value;FAST32_hash_2D(Pi,hash_x,hash_y,hash_value);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results=(hash_value-0.5)*(1.0/grad_results);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));float final=dot(grad_results,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}float Cubist3D(vec3 P,vec2 range_clamp){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0=(hash_value0-0.5)*(1.0/grad_results_0);grad_results_1=(hash_value1-0.5)*(1.0/grad_results_1);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}vec4 Cellular_weight_samples(vec4 samples){samples=samples*2.0-1.0;return(samples*samples*samples)-sign(samples);}float Cellular2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);
#if 1
const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x=hash_x*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y=hash_y*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;d.xy=min(d.xy,d.zw);return min(d.x,d.y)*(1.0/1.125);}float Cellular3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);
#if 1
const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x0=hash_x0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y0=hash_y0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_x1=hash_x1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y1=hash_y1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_z0=hash_z0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW);hash_z1=hash_z1*JITTER_WINDOW*2.0+vec4(1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;d1=min(d1,d2);d1.xy=min(d1.xy,d1.wz);return min(d1.x,d1.y)*(9.0/12.0);}/*float SparseConvolution2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;const float RADIUS=1.0-JITTER_WINDOW;d*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d,vec4(1.0))),vec4(1.0));}float SparseConvolution3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;const float RADIUS=(1.0-JITTER_WINDOW);d1*=((1.0/RADIUS)*(1.0/RADIUS));d2*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d1,vec4(1.0)))+Falloff_Xsq_C2(min(d2,vec4(1.0))),vec4(1.0));}*/float PolkaDot2D(vec2 P,float radius_low,float radius_high){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.z*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xy*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float PolkaDot3D(vec3 P,float radius_low,float radius_high){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash=FAST32_hash_3D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.w*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xyz*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float Stars2D(vec2 P,float probability_threshold,float max_dimness,float two_over_radius){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float VALUE=1.0-max_dimness*hash.z;Pf*=two_over_radius;Pf-=(two_over_radius-1.0);Pf+=hash.xy*(two_over_radius-2.0);return(hash.w<probability_threshold)?(Falloff_Xsq_C1(min(dot(Pf,Pf),1.0))*VALUE): 0.0;}float SimplexPerlin2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw));const float FINAL_NORMALIZATION=99.204334582718712976990005025589;vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);m=m*m;return dot(m*m,grad_results)*FINAL_NORMALIZATION;}float SimplexPolkaDot2D(vec2 P,float radius,float max_dimness){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.4494897427831780981972840747059;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec2 v0=(Pi-dot(Pi,vec2(UNSKEWFACTOR))-P);vec4 v0123_x=vec4(0.0,SIMPLEX_POINTS.xyz)+v0.x;vec4 v0123_y=vec4(0.0,SIMPLEX_POINTS.yxz)+v0.y;vec4 hash=FAST32_hash_2D(Pi);radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v0123_x*=radius;v0123_y*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v0123_x*v0123_x+v0123_y*v0123_y));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float SimplexCellular2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HEIGHT=1.4142135623730950488016887242097;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR)*INV_SIMPLEX_TRI_HEIGHT;P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=(0.10566243270259355887271280487451*INV_SIMPLEX_TRI_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;vec2 p0=((Pi-dot(Pi,vec2(UNSKEWFACTOR)))-P)*INV_SIMPLEX_TRI_HEIGHT;hash_x+=p0.xxxx;hash_y+=p0.yyyy;hash_x.yzw+=SIMPLEX_POINTS.xyz;hash_y.yzw+=SIMPLEX_POINTS.yxz;vec4 distsq=hash_x*hash_x+hash_y*hash_y;vec2 tmp=min(distsq.xy,distsq.zw);return min(tmp.x,tmp.y);}void Simplex3D_GetCornerVectors(vec3 P,out vec3 Pi,out vec3 Pi_1,out vec3 Pi_2,out vec4 v1234_x,out vec4 v1234_y,out vec4 v1234_z){const float SKEWFACTOR=1.0/3.0;const float UNSKEWFACTOR=1.0/6.0;const float SIMPLEX_CORNER_POS=0.5;const float SIMPLEX_PYRAMID_HEIGHT=0.70710678118654752440084436210485;P*=SIMPLEX_PYRAMID_HEIGHT;Pi=floor(P+dot(P,vec3(SKEWFACTOR)));vec3 x0=P-Pi+dot(Pi,vec3(UNSKEWFACTOR));vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;Pi_1=min(g.xyz,l.zxy);Pi_2=max(g.xyz,l.zxy);vec3 x1=x0-Pi_1+UNSKEWFACTOR;vec3 x2=x0-Pi_2+SKEWFACTOR;vec3 x3=x0-SIMPLEX_CORNER_POS;v1234_x=vec4(x0.x,x1.x,x2.x,x3.x);v1234_y=vec4(x0.y,x1.y,x2.y,x3.y);v1234_z=vec4(x0.z,x1.z,x2.z,x3.z);}vec4 Simplex3D_GetSurfletWeights(vec4 v1234_x,vec4 v1234_y,vec4 v1234_z){vec4 surflet_weights=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;surflet_weights=max(0.5-surflet_weights,0.0);return surflet_weights*surflet_weights*surflet_weights;}float SimplexPerlin3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 grad_results=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2)*(hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return dot(Simplex3D_GetSurfletWeights(v1234_x,v1234_y,v1234_z),grad_results)*FINAL_NORMALIZATION;}float SimplexCellular3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_x;vec4 hash_y;vec4 hash_z;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_x,hash_y,hash_z);const float INV_SIMPLEX_PYRAMID_HEIGHT=1.4142135623730950488016887242097;const float JITTER_WINDOW=(0.0597865779345250670558198111*INV_SIMPLEX_PYRAMID_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;hash_z=Cellular_weight_samples(hash_z)*JITTER_WINDOW;v1234_x*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_y*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_z*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_x+=hash_x;v1234_y+=hash_y;v1234_z+=hash_z;vec4 distsq=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;return min(min(distsq.x,distsq.y),min(distsq.z,distsq.w));}float SimplexPolkaDot3D(vec3 P,float radius,float max_dimness){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash=FAST32_hash_3D(Pi,Pi_1,Pi_2);const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.3094010767585030580365951220078;radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v1234_x*=radius;v1234_y*=radius;v1234_z*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float QuinticHermite(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,x,0.0));}vec4 QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 egrad0,vec4 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;}vec4 QuinticHermite(float x,vec2 igrad0,vec2 igrad1,vec2 egrad0,vec2 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return vec4(egrad1,igrad0)*vec4(h123.zz,1.0,1.0)+vec4(egrad0,h123.xx)*vec4(vec2(h123.y+x),(igrad1-igrad0));}void QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}void QuinticHermite(float x,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}float QuinticHermiteDeriv(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(30.0,-15.0,-15.0);const vec3 C1=vec3(-60.0,32.0,28.0);const vec3 C2=vec3(30.0,-18.0,-12.0);vec3 h123=(((C1+C0*x)*x)+C2)*(x*x);return dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,1.0,0.0));}float Hermite2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float Hermite3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float ValueHermite2D(vec2 P,float value_scale,float gradient_scale,float normalization_val){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_value,hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_value,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999)*gradient_scale;hash_grady=(hash_grady-0.49999)*gradient_scale;hash_value=(hash_value-0.5)*value_scale;vec4 qh_results=QuinticHermite(Pf.y,vec4(hash_value.xy,hash_gradx.xy),vec4(hash_value.zw,hash_gradx.zw),vec4(hash_grady.xy,0.0,0.0),vec4(hash_grady.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}float ValueHermite3D(vec3 P,float value_scale,float gradient_scale,float normalization_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999)*gradient_scale;hash_grady0=(hash_grady0-0.49999)*gradient_scale;hash_gradz0=(hash_gradz0-0.49999)*gradient_scale;hash_gradx1=(hash_gradx1-0.49999)*gradient_scale;hash_grady1=(hash_grady1-0.49999)*gradient_scale;hash_gradz1=(hash_gradz1-0.49999)*gradient_scale;hash_value0=(hash_value0-0.5)*value_scale;hash_value1=(hash_value1-0.5)*value_scale;vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_value0,hash_value1,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}vec3 Value2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec4 blend=Interpolation_C2_InterpAndDeriv(Pf);vec4 res0=mix(hash.xyxz,hash.zwyw,blend.yyxx);return vec3(res0.x,0.0,0.0)+(res0.yyw-res0.xxz)*blend.xzw;}vec4 Value3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 res1=mix(res0.xyxz,res0.zwyw,blend.yyxx);vec4 res3=mix(vec4(hash_lowz.xy,hash_highz.xy),vec4(hash_lowz.zw,hash_highz.zw),blend.y);vec2 res4=mix(res3.xz,res3.yw,blend.x);return vec4(res1.x,0.0,0.0,0.0)+(vec4(res1.yyw,res4.y)-vec4(res1.xxz,res4.x))*vec4(blend.x,Interpolation_C2_Deriv(Pf));}vec3 Perlin2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 dotval=(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);vec3 dotval0_grad0=vec3(dotval.x,grad_x.x,grad_y.x);vec3 dotval1_grad1=vec3(dotval.y,grad_x.y,grad_y.y);vec3 dotval2_grad2=vec3(dotval.z,grad_x.z,grad_y.z);vec3 dotval3_grad3=vec3(dotval.w,grad_x.w,grad_y.w);vec3 k0_gk0=dotval1_grad1-dotval0_grad0;vec3 k1_gk1=dotval2_grad2-dotval0_grad0;vec3 k2_gk2=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 blend=Interpolation_C2_InterpAndDeriv(Pf_Pfmin1.xy);vec3 results=dotval0_grad0+blend.x*k0_gk0+blend.y*(k1_gk1+blend.x*k2_gk2);results.yz+=blend.zw*(vec2(k0_gk0.x,k1_gk1.x)+blend.yx*k2_gk2.xx);return results*1.4142135623730950488016887242097;}vec4 Perlin3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 dotval_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 dotval_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec4 dotval0_grad0=vec4(dotval_0.x,grad_x0.x,grad_y0.x,grad_z0.x);vec4 dotval1_grad1=vec4(dotval_0.y,grad_x0.y,grad_y0.y,grad_z0.y);vec4 dotval2_grad2=vec4(dotval_0.z,grad_x0.z,grad_y0.z,grad_z0.z);vec4 dotval3_grad3=vec4(dotval_0.w,grad_x0.w,grad_y0.w,grad_z0.w);vec4 dotval4_grad4=vec4(dotval_1.x,grad_x1.x,grad_y1.x,grad_z1.x);vec4 dotval5_grad5=vec4(dotval_1.y,grad_x1.y,grad_y1.y,grad_z1.y);vec4 dotval6_grad6=vec4(dotval_1.z,grad_x1.z,grad_y1.z,grad_z1.z);vec4 dotval7_grad7=vec4(dotval_1.w,grad_x1.w,grad_y1.w,grad_z1.w);vec4 k0_gk0=dotval1_grad1-dotval0_grad0;vec4 k1_gk1=dotval2_grad2-dotval0_grad0;vec4 k2_gk2=dotval4_grad4-dotval0_grad0;vec4 k3_gk3=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 k4_gk4=dotval5_grad5-dotval4_grad4-k0_gk0;vec4 k5_gk5=dotval6_grad6-dotval4_grad4-k1_gk1;vec4 k6_gk6=(dotval7_grad7-dotval6_grad6)-(dotval5_grad5-dotval4_grad4)-k3_gk3;vec3 blend=Interpolation_C2(Pf);vec3 blendDeriv=Interpolation_C2_Deriv(Pf);float u=blend.x;float v=blend.y;float w=blend.z;vec4 result=dotval0_grad0+u*(k0_gk0+v*k3_gk3)+v*(k1_gk1+w*k5_gk5)+w*(k2_gk2+u*(k4_gk4+v*k6_gk6));result.y+=dot(vec4(k0_gk0.x,k3_gk3.x*v,vec2(k4_gk4.x,k6_gk6.x*v)*w),vec4(blendDeriv.x));result.z+=dot(vec4(k1_gk1.x,k3_gk3.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*w),vec4(blendDeriv.y));result.w+=dot(vec4(k2_gk2.x,k4_gk4.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*v),vec4(blendDeriv.z));result*=1.1547005383792515290182975610039;return result;}vec3 PerlinSurflet2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 grad_results=grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww;vec4 m=Pf_Pfmin1*Pf_Pfmin1;m=m.xzxz+m.yyww;m=max(1.0-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,Pf_Pfmin1.xzxz)+dot(m3,grad_x);float yderiv=dot(temp,Pf_Pfmin1.yyww)+dot(m3,grad_y);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec3(dot(m3,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 PerlinSurflet3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 grad_results_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 grad_results_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec3 Pf_sq=Pf*Pf;vec3 Pf_min1_sq=Pf_min1*Pf_min1;vec4 vecs_len_sq=vec2(Pf_sq.x,Pf_min1_sq.x).xyxy+vec2(Pf_sq.y,Pf_min1_sq.y).xxyy;vec4 m_0=vecs_len_sq+Pf_sq.zzzz;m_0=max(1.0-m_0,0.0);vec4 m2_0=m_0*m_0;vec4 m3_0=m_0*m2_0;vec4 m_1=vecs_len_sq+Pf_min1_sq.zzzz;m_1=max(1.0-m_1,0.0);vec4 m2_1=m_1*m_1;vec4 m3_1=m_1*m2_1;vec4 temp_0=-6.0*m2_0*grad_results_0;float xderiv_0=dot(temp_0,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_0,grad_x0);float yderiv_0=dot(temp_0,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_0,grad_y0);float zderiv_0=dot(temp_0,Pf.zzzz)+dot(m3_0,grad_z0);vec4 temp_1=-6.0*m2_1*grad_results_1;float xderiv_1=dot(temp_1,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_1,grad_x1);float yderiv_1=dot(temp_1,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_1,grad_y1);float zderiv_1=dot(temp_1,Pf_min1.zzzz)+dot(m3_1,grad_z1);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec4(dot(m3_0,grad_results_0)+dot(m3_1,grad_results_1),vec3(xderiv_0,yderiv_0,zderiv_0)+vec3(xderiv_1,yderiv_1,zderiv_1))*FINAL_NORMALIZATION;}vec3 Cellular2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;vec3 t1=d.x<d.y ? vec3(d.x,dx.x,dy.x): vec3(d.y,dx.y,dy.y);vec3 t2=d.z<d.w ? vec3(d.z,dx.z,dy.z): vec3(d.w,dx.w,dy.w);return(t1.x<t2.x ? t1 : t2)*vec3(1.0,2.0,2.0)*(1.0/1.125);}vec4 Cellular3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;vec4 r1=d1.x<d1.y ? vec4(d1.x,dx1.x,dy1.x,dz1.x): vec4(d1.y,dx1.y,dy1.y,dz1.y);vec4 r2=d1.z<d1.w ? vec4(d1.z,dx1.z,dy1.z,dz1.z): vec4(d1.w,dx1.w,dy1.w,dz1.w);vec4 r3=d2.x<d2.y ? vec4(d2.x,dx2.x,dy2.x,dz2.x): vec4(d2.y,dx2.y,dy2.y,dz2.y);vec4 r4=d2.z<d2.w ? vec4(d2.z,dx2.z,dy2.z,dz2.z): vec4(d2.w,dx2.w,dy2.w,dz2.w);vec4 t1=r1.x<r2.x ? r1 : r2;vec4 t2=r3.x<r4.x ? r3 : r4;return(t1.x<t2.x ? t1 : t2)*vec4(1.0,vec3(2.0))*(9.0/12.0);}vec3 SimplexPerlin2D_Deriv(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec3 grad_results=grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw);vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);vec3 m2=m*m;vec3 m4=m2*m2;vec3 temp=8.0*m2*m*grad_results;float xderiv=dot(temp,vec3(v0.x,v12.xz))-dot(m4,grad_x);float yderiv=dot(temp,vec3(v0.y,v12.yw))-dot(m4,grad_y);const float FINAL_NORMALIZATION=99.204334582718712976990005025589;return vec3(dot(m4,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 SimplexPerlin3D_Deriv(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 norm=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2);hash_0*=norm;hash_1*=norm;hash_2*=norm;vec4 grad_results=hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z;vec4 m=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;m=max(0.5-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,v1234_x)+dot(m3,hash_0);float yderiv=dot(temp,v1234_y)+dot(m3,hash_1);float zderiv=dot(temp,v1234_z)+dot(m3,hash_2);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return vec4(dot(m3,grad_results),xderiv,yderiv,zderiv)*FINAL_NORMALIZATION;}vec3 Hermite2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results_x=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);vec4 qh_results_y=QuinticHermite(Pf.x,hash_grady.xz,hash_grady.yw,hash_gradx.xz,hash_gradx.yw);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);return vec3(finalpos,deriv_x,deriv_y)*FINAL_NORM_VAL;}vec4 Hermite3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results_z,igrad_results_x_z,igrad_results_y_z;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results_z,igrad_results_x_z,igrad_results_y_z);vec4 ival_results_y,igrad_results_x_y,igrad_results_z_y;QuinticHermite(Pf.y,vec4(hash_gradx0.xy,hash_gradx1.xy),vec4(hash_gradx0.zw,hash_gradx1.zw),vec4(hash_gradz0.xy,hash_gradz1.xy),vec4(hash_gradz0.zw,hash_gradz1.zw),vec4(hash_grady0.xy,hash_grady1.xy),vec4(hash_grady0.zw,hash_grady1.zw),ival_results_y,igrad_results_x_y,igrad_results_z_y);vec4 qh_results_x=QuinticHermite(Pf.y,vec4(ival_results_z.xy,igrad_results_x_z.xy),vec4(ival_results_z.zw,igrad_results_x_z.zw),vec4(igrad_results_y_z.xy,0.0,0.0),vec4(igrad_results_y_z.zw,0.0,0.0));vec4 qh_results_y=QuinticHermite(Pf.x,vec4(ival_results_z.xz,igrad_results_y_z.xz),vec4(ival_results_z.yw,igrad_results_y_z.yw),vec4(igrad_results_x_z.xz,0.0,0.0),vec4(igrad_results_x_z.yw,0.0,0.0));vec4 qh_results_z=QuinticHermite(Pf.x,vec4(ival_results_y.xz,igrad_results_z_y.xz),vec4(ival_results_y.yw,igrad_results_z_y.yw),vec4(igrad_results_x_y.xz,0.0,0.0),vec4(igrad_results_x_y.yw,0.0,0.0));float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);float deriv_z=QuinticHermiteDeriv(Pf.z,qh_results_z.x,qh_results_z.y,qh_results_z.z,qh_results_z.w);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);return vec4(finalpos,deriv_x,deriv_y,deriv_z)*FINAL_NORM_VAL;}vec3 inclineVectorTowardSlerp(vec3 sourceVector,vec3 targetVector,float percentage){vec3 source=normalize(sourceVector);vec3 target=normalize(targetVector);float dotProduct=clamp(dot(source,target),-1.0,1.0);float angle=acos(dotProduct);if(abs(dotProduct+1.0)<0.001){return normalize(cross(source,vec3(1.0,0.0,0.0)));}if(angle<0.001)return sourceVector;vec3 result=(sin((1.0-percentage)*angle)*source+sin(percentage*angle)*target)/sin(angle);return result;}mat3 createAlignmentMatrix(vec3 from,vec3 to){vec3 a=normalize(from);vec3 b=normalize(to);if(dot(a,vec3(0.0,1.0,0.0))<0.0){b.y*=-1.0;}float cosAngle=dot(a,b);if(cosAngle>0.9999){return mat3(1.0);}if(cosAngle<-0.9999){vec3 perp=abs(a.x)<0.9 ? vec3(1.0,0.0,0.0): vec3(0.0,1.0,0.0);vec3 axis=normalize(cross(a,perp));return mat3(1.0-2.0*(axis.y*axis.y+axis.z*axis.z),2.0*(axis.x*axis.y),2.0*(axis.x*axis.z),2.0*(axis.x*axis.y),1.0-2.0*(axis.x*axis.x+axis.z*axis.z),2.0*(axis.y*axis.z),2.0*(axis.x*axis.z),2.0*(axis.y*axis.z),1.0-2.0*(axis.x*axis.x+axis.y*axis.y));}vec3 v=cross(a,b);float s=length(v);float c=cosAngle;mat3 vx=mat3(0.0,-v.z,v.y,v.z,0.0,-v.x,-v.y,v.x,0.0);mat3 identity=mat3(1.0);return identity+vx+(vx*vx)*((1.0-c)/(s*s));}float computeShadow(vec3 lightPosition,vec3 terrainNormal){return 1.0-max(dot(normalize(terrainNormal),normalize(lightPosition)),0.0);}float getElevation(vec2 vect,sampler2D displacementMap){return(texture(displacementMap,vec2(vect.x,vect.y)*0.3).r)*0.15;}float getColorVariation(vec2 groundPosition,sampler2D colorTexture){vec2 textureUv=groundPosition.yx*0.11+0.3;float noise=texture(colorTexture,textureUv).r;noise=smoothstep(0.35,0.75,noise);return noise;}vec2 adjustRoadTexturePosition(vec2 position){float scale=0.8;return position*scale*0.5+0.5;}float getWindStrength(vec2 vect,sampler2D windTexture,float time){float windSpeed=0.2;float noise=texture(windTexture,(adjustRoadTexturePosition(vect)+time*windSpeed)).r;noise=smoothstep(0.3,0.8,noise);return noise;}float getRoadAwareGrassScale(sampler2D grassRoadTexture,vec2 position){float grassRoadScale=texture(grassRoadTexture,adjustRoadTexturePosition(position)).g;grassRoadScale=min(1.0,grassRoadScale);return grassRoadScale;}vec3 getRoadColor(vec2 colorPosition,vec3 grassColor,sampler2D roadTexture,vec3 lightColor,vec3 darkColor,sampler2D colorTexture){vec3 color=mix(lightColor,darkColor,getColorVariation(vec2(colorPosition.x+-0.35,colorPosition.y)*2.0-2.8,colorTexture));color=mix(grassColor,color,1.0-texture(roadTexture,adjustRoadTexturePosition(colorPosition)).g);return color;}vec2 displaceGrassInRadius(vec3 worldPos,vec2 mousePosition,float radius){vec2 dir=worldPos.xz-mousePosition;float dist=length(dir);vec2 normalizedDir=normalize(dir);float influence=1.0-smoothstep(0.0,radius,dist);return normalizedDir*influence;}vec3 getGrassColor(vec3 darkGreen,vec3 lightGreen,float grassColorVariation,float shadowStrength,vec3 shadowColor,float windStrength,vec3 lightColor,float lightIntensity,vec3 terrainNormal,vec3 lightPosition,vec3 grassPosition){vec3 color=mix(darkGreen,lightGreen,grassColorVariation);color=mix(color,shadowColor,shadowStrength*0.6);color=mix(color,shadowColor,smoothstep(0.0,1.0,abs(windStrength)));vec3 light=vec3(0.0);light+=directionalLight(lightColor,lightIntensity,terrainNormal,lightPosition,grassPosition,0.0);color*=light;return color;}
#include <fog_pars_vertex>
uniform float uTime;uniform vec2 uResolution;uniform float uSize;uniform sampler2D uDisplacementMap;uniform sampler2D uBendingTexture;uniform vec2 uMousePosition;uniform float uHeightFactor;uniform float uBendingFactor;uniform sampler2D uWindTexture;attribute vec2 aUv;attribute float aSize;attribute float aRotation;attribute vec2 aDeformation;attribute float aColorMix;attribute vec3 aNormal;varying vec2 vUv;varying float vColorVariation;varying vec3 vPosition;varying float vRotation;varying vec2 vDeformation;varying float vAppliedWind;varying float vColorMix;void main(){vec3 newPosition=position;vec3 flowerOrigin=position;vec3 flowerNormal=normalize(aNormal);vec3 flowerInclination=flowerNormal;float elevation=getElevation(flowerOrigin.xz,uDisplacementMap);newPosition+=aNormal*elevation;float windNoise=getWindStrength(flowerOrigin.xz,uWindTexture,uTime);vec3 worldUp=vec3(0.0,1.0,0.0);vec3 windDirection=cross(flowerNormal,worldUp);if(length(windDirection)<0.01||length(windDirection)>-0.01){windDirection=cross(flowerNormal,vec3(1.0,0.0,0.0));}windDirection=normalize(windDirection);windDirection=windDirection-dot(windDirection,flowerNormal)*flowerNormal;windDirection=normalize(windDirection);float windStrength=0.4;windStrength*=-windNoise;flowerInclination=inclineVectorTowardSlerp(flowerInclination,windDirection,windStrength);vec2 bendUv=aUv;vec4 bendData=texture(uBendingTexture,bendUv).rgba;float bendingIntensity=bendData.r*uBendingFactor;vec3 bendingDirection=bendData.gba*2.0-1.0;bendingDirection=bendingDirection;flowerInclination=inclineVectorTowardSlerp(flowerInclination,normalize(bendingDirection),bendingIntensity);vec3 offset=newPosition-flowerOrigin;newPosition=flowerOrigin+(flowerInclination*elevation);vec4 modelPosition=modelMatrix*vec4(newPosition,1.0);vec4 mvPosition=viewMatrix*modelPosition;vec4 projectedPosition=projectionMatrix*mvPosition;gl_Position=projectedPosition;gl_PointSize=uSize*uResolution.y*aSize;gl_PointSize*=(1.0/-mvPosition.z);vColorVariation=aSize*0.9;vPosition=position;vRotation=aRotation;vDeformation=aDeformation;vAppliedWind=windStrength;vColorMix=aColorMix;
#include <fog_vertex>
}`,qA=`vec3 directionalLight(vec3 lightColor,float lightIntensity,vec3 normal,vec3 lightPosition,vec3 viewPosition,float specularPower){vec3 lightDirection=normalize(lightPosition);float shading=max(dot(normalize(normal),lightDirection),0.0);vec3 ligthReflection=reflect(-lightDirection,normal);float specular=min(dot(ligthReflection,viewPosition),0.0);specular=specularPower==0.0 ? 1.0 : pow(specular,specularPower);return lightColor*lightIntensity*(shading+specular);}vec4 SGPP_coord_prepare(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 SGPP_coord_prepare(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 SGPP_permute(vec4 x){return fract(x*((34.0/289.0)*x+(1.0/289.0)))*289.0;}vec4 SGPP_resolve(vec4 x){return fract(x*(7.0/288.0));}vec4 SGPP_hash_2D(vec2 gridcell){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));return SGPP_resolve(SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww));}void SGPP_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));hash_0=SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww);hash_1=SGPP_resolve(SGPP_permute(hash_0));hash_0=SGPP_resolve(hash_0);}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell.zzzz));highz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell_inc1.zzzz));}void SGPP_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){vec3 coords0=gridcell.xyz-floor(gridcell.xyz*(1.0/289.0))*289.0;vec3 coords3=step(coords0,vec3(287.5))*(coords0+1.0);vec3 coords1=mix(coords0,coords3,v1_mask);vec3 coords2=mix(coords0,coords3,v2_mask);hash_2=SGPP_permute(SGPP_permute(SGPP_permute(vec4(coords0.x,coords1.x,coords2.x,coords3.x))+vec4(coords0.y,coords1.y,coords2.y,coords3.y))+vec4(coords0.z,coords1.z,coords2.z,coords3.z));hash_0=SGPP_resolve(hash_2);hash_1=SGPP_resolve(hash_2=SGPP_permute(hash_2));hash_2=SGPP_resolve(SGPP_permute(hash_2));}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash_2=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash_0=SGPP_resolve(lowz_hash_2=SGPP_permute(highz_hash_2+gridcell.zzzz));highz_hash_0=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2+gridcell_inc1.zzzz));lowz_hash_1=SGPP_resolve(lowz_hash_2=SGPP_permute(lowz_hash_2));highz_hash_1=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2));lowz_hash_2=SGPP_resolve(SGPP_permute(lowz_hash_2));highz_hash_2=SGPP_resolve(SGPP_permute(highz_hash_2));}vec4 BBS_coord_prepare(vec4 x){return x-floor(x*(1.0/61.0))*61.0;}vec3 BBS_coord_prepare(vec3 x){return x-floor(x*(1.0/61.0))*61.0;}vec4 BBS_permute(vec4 x){return fract(x*x*(1.0/61.0))*61.0;}vec4 BBS_permute_and_resolve(vec4 x){return fract(x*x*(1.0/61.0));}vec4 BBS_hash_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);return BBS_permute_and_resolve(p+hash_coord.yyww);}vec4 BBS_hash_hq_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);p=BBS_permute(p+hash_coord.yyww);return BBS_permute_and_resolve(p+hash_coord.xzxz);}void BBS_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const float DOMAIN=60.0;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 p=BBS_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy);p=BBS_permute(p+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=BBS_permute_and_resolve(p+gridcell.zzzz);highz_hash=BBS_permute_and_resolve(p+gridcell_inc1.zzzz);}vec4 FAST32_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const float SOMELARGEFLOAT=951.135664;vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec2 SOMELARGEFLOATS=vec2(951.135664,642.949883);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec3 SOMELARGEFLOATS=vec3(951.135664,642.949883,803.202459);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));hash_2=fract(P*(1.0/SOMELARGEFLOATS.z));}vec4 FAST32_hash_2D_Cell(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec4 SOMELARGEFLOATS=vec4(951.135664,642.949883,803.202459,986.973274);vec2 P=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xy;P*=P;return fract((P.x*P.y)*(1.0/SOMELARGEFLOATS.xyzw));}vec4 FAST32_hash_3D_Cell(vec3 gridcell){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;gridcell.xy+=OFFSET.xy;gridcell.xy*=gridcell.xy;return fract((gridcell.x*gridcell.y)*(1.0/(SOMELARGEFLOATS+gridcell.zzzz*ZINC)));}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;highz_hash.xy=vec2(1.0/(SOMELARGEFLOAT+vec2(gridcell.z,gridcell_inc1.z)*ZINC));lowz_hash=fract(P*highz_hash.xxxx);highz_hash=fract(P*highz_hash.yyyy);}void FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec3 lowz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));v1_mask=(v1_mask.z<0.5)? lowz_mods : highz_mods;v2_mask=(v2_mask.z<0.5)? lowz_mods : highz_mods;hash_0=fract(P*vec4(lowz_mods.x,v1_mask.x,v2_mask.x,highz_mods.x));hash_1=fract(P*vec4(lowz_mods.y,v1_mask.y,v2_mask.y,highz_mods.y));hash_2=fract(P*vec4(lowz_mods.z,v1_mask.z,v2_mask.z,highz_mods.z));}vec4 FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec2 V1z_V2z=vec2(v1_mask.z<0.5 ? gridcell.z : gridcell_inc1.z,v2_mask.z<0.5 ? gridcell.z : gridcell_inc1.z);vec4 mod_vals=vec4(1.0/(SOMELARGEFLOAT+vec4(gridcell.z,V1z_V2z,gridcell_inc1.z)*ZINC));return fract(P*mod_vals);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;vec3 lowz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));lowz_hash_0=fract(P*lowz_mod.xxxx);highz_hash_0=fract(P*highz_mod.xxxx);lowz_hash_1=fract(P*lowz_mod.yyyy);highz_hash_1=fract(P*highz_mod.yyyy);lowz_hash_2=fract(P*lowz_mod.zzzz);highz_hash_2=fract(P*highz_mod.zzzz);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 lowz_hash_3,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2,out vec4 highz_hash_3){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;lowz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell.zzzz*ZINC.xyzw));highz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell_inc1.zzzz*ZINC.xyzw));lowz_hash_0=fract(P*lowz_hash_3.xxxx);highz_hash_0=fract(P*highz_hash_3.xxxx);lowz_hash_1=fract(P*lowz_hash_3.yyyy);highz_hash_1=fract(P*highz_hash_3.yyyy);lowz_hash_2=fract(P*lowz_hash_3.zzzz);highz_hash_2=fract(P*highz_hash_3.zzzz);lowz_hash_3=fract(P*lowz_hash_3.wwww);highz_hash_3=fract(P*highz_hash_3.wwww);}vec4 FAST32_2_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(403.839172,377.242706);const float DOMAIN=69.0;const float SOMELARGEFLOAT=32745.708984;const vec2 SCALE=vec2(2.009842,1.372549);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P=(P*SCALE.xyxy)+OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_3D(vec3 gridcell,out vec4 z0_hash,out vec4 z1_hash){const vec3 OFFSET=vec3(55.882355,63.167774,52.941177);const float DOMAIN=69.0;const float SOMELARGEFLOAT=69412.070313;const vec3 SCALE=vec3(0.235142,0.205890,0.216449);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);z0_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell.zzzz*(1.0/SOMELARGEFLOAT));z1_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell_inc1.zzzz*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash,out vec4 z1w0_hash,out vec4 z0w1_hash,out vec4 z1w1_hash){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const float SOMELARGEFLOAT=47165.636719;const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww)*(1.0/SOMELARGEFLOAT);z0w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx);z1w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy);z0w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz);z1w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww);}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash_0,out vec4 z0w0_hash_1,out vec4 z0w0_hash_2,out vec4 z0w0_hash_3,out vec4 z1w0_hash_0,out vec4 z1w0_hash_1,out vec4 z1w0_hash_2,out vec4 z1w0_hash_3,out vec4 z0w1_hash_0,out vec4 z0w1_hash_1,out vec4 z0w1_hash_2,out vec4 z0w1_hash_3,out vec4 z1w1_hash_0,out vec4 z1w1_hash_1,out vec4 z1w1_hash_2,out vec4 z1w1_hash_3){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(56974.746094,47165.636719,55049.667969,49901.273438);const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww);vec4 hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx;z0w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy;z1w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz;z0w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww;z1w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));}float Interpolation_C1(float x){return x*x*(3.0-2.0*x);}vec2 Interpolation_C1(vec2 x){return x*x*(3.0-2.0*x);}vec3 Interpolation_C1(vec3 x){return x*x*(3.0-2.0*x);}vec4 Interpolation_C1(vec4 x){return x*x*(3.0-2.0*x);}float Interpolation_C2(float x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec2 Interpolation_C2(vec2 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec3 Interpolation_C2(vec3 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2(vec4 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2_InterpAndDeriv(vec2 x){return x.xyxy*x.xyxy*(x.xyxy*(x.xyxy*(x.xyxy*vec2(6.0,0.0).xxyy+vec2(-15.0,30.0).xxyy)+vec2(10.0,-60.0).xxyy)+vec2(0.0,30.0).xxyy);}vec3 Interpolation_C2_Deriv(vec3 x){return x*x*(x*(x*30.0-60.0)+30.0);}float Interpolation_C2_Fast(float x){float x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec2 Interpolation_C2_Fast(vec2 x){vec2 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec3 Interpolation_C2_Fast(vec3 x){vec3 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec4 Interpolation_C2_Fast(vec4 x){vec4 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}float Interpolation_C3(float x){float xsq=x*x;float xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec2 Interpolation_C3(vec2 x){vec2 xsq=x*x;vec2 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec3 Interpolation_C3(vec3 x){vec3 xsq=x*x;vec3 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec4 Interpolation_C3(vec4 x){vec4 xsq=x*x;vec4 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}float Falloff_Xsq_C1(float xsq){xsq=1.0-xsq;return xsq*xsq;}float Falloff_Xsq_C2(float xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}vec4 Falloff_Xsq_C2(vec4 xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}float Value2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec2 blend=Interpolation_C2(Pf);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(hash,blend2.zxzx*blend2.wwyy);}float Value3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Value4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 z0w0_hash;vec4 z1w0_hash;vec4 z0w1_hash;vec4 z1w1_hash;FAST32_2_hash_4D(Pi,z0w0_hash,z1w0_hash,z0w1_hash,z1w1_hash);vec4 blend=Interpolation_C2(Pf);vec4 res0=z0w0_hash+(z0w1_hash-z0w0_hash)*blend.wwww;vec4 res1=z1w0_hash+(z1w1_hash-z1w0_hash)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0-blend.xy);return dot(res0,blend.zxzx*blend.wwyy);}float Perlin2D(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);
#if 1
vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);
#if 1
grad_results*=1.4142135623730950488016887242097;vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#else
grad_results*=2.3703703703703703703703703703704;vec4 vecs_len_sq=Pf_Pfmin1*Pf_Pfmin1;vecs_len_sq=vecs_len_sq.xzxz+vecs_len_sq.yyww;return dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq)),grad_results);
#endif
#else
vec4 hash=FAST32_hash_2D(Pi);hash-=0.5;vec4 grad_results=Pf_Pfmin1.xzxz*sign(hash)+Pf_Pfmin1.yyww*sign(abs(hash)-0.25);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#endif
}float Perlin3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;
#if 1
vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);
#if 1
vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);final*=1.1547005383792515290182975610039;return final;
#else
Pf*=Pf;Pf_min1*=Pf_min1;vec4 vecs_len_sq=vec4(Pf.x,Pf_min1.x,Pf.x,Pf_min1.x)+vec4(Pf.yy,Pf_min1.yy);float final=dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf.zzzz)),grad_results_0)+dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf_min1.zzzz)),grad_results_1);final*=2.3703703703703703703703703703704;return final;
#endif
#else
vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);hash_lowz-=0.5;vec4 grad_results_0_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_lowz);hash_lowz=abs(hash_lowz)-0.25;vec4 grad_results_0_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_lowz);vec4 grad_results_0_2=Pf.zzzz*sign(abs(hash_lowz)-0.125);vec4 grad_results_0=grad_results_0_0+grad_results_0_1+grad_results_0_2;hash_highz-=0.5;vec4 grad_results_1_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_highz);hash_highz=abs(hash_highz)-0.25;vec4 grad_results_1_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_highz);vec4 grad_results_1_2=Pf_min1.zzzz*sign(abs(hash_highz)-0.125);vec4 grad_results_1=grad_results_1_0+grad_results_1_1+grad_results_1_2;vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy)*(2.0/3.0);
#endif
}float Perlin4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 Pf_min1=Pf-1.0;vec4 lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3;vec4 highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3;vec4 lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3;vec4 highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3;FAST32_2_hash_4D(Pi,lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3,highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3,lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3,highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3);lowz_loww_hash_0-=0.49999;lowz_loww_hash_1-=0.49999;lowz_loww_hash_2-=0.49999;lowz_loww_hash_3-=0.49999;highz_loww_hash_0-=0.49999;highz_loww_hash_1-=0.49999;highz_loww_hash_2-=0.49999;highz_loww_hash_3-=0.49999;lowz_highw_hash_0-=0.49999;lowz_highw_hash_1-=0.49999;lowz_highw_hash_2-=0.49999;lowz_highw_hash_3-=0.49999;highz_highw_hash_0-=0.49999;highz_highw_hash_1-=0.49999;highz_highw_hash_2-=0.49999;highz_highw_hash_3-=0.49999;vec4 grad_results_lowz_loww=inversesqrt(lowz_loww_hash_0*lowz_loww_hash_0+lowz_loww_hash_1*lowz_loww_hash_1+lowz_loww_hash_2*lowz_loww_hash_2+lowz_loww_hash_3*lowz_loww_hash_3);grad_results_lowz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_loww_hash_1+Pf.zzzz*lowz_loww_hash_2+Pf.wwww*lowz_loww_hash_3);vec4 grad_results_highz_loww=inversesqrt(highz_loww_hash_0*highz_loww_hash_0+highz_loww_hash_1*highz_loww_hash_1+highz_loww_hash_2*highz_loww_hash_2+highz_loww_hash_3*highz_loww_hash_3);grad_results_highz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_loww_hash_1+Pf_min1.zzzz*highz_loww_hash_2+Pf.wwww*highz_loww_hash_3);vec4 grad_results_lowz_highw=inversesqrt(lowz_highw_hash_0*lowz_highw_hash_0+lowz_highw_hash_1*lowz_highw_hash_1+lowz_highw_hash_2*lowz_highw_hash_2+lowz_highw_hash_3*lowz_highw_hash_3);grad_results_lowz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_highw_hash_1+Pf.zzzz*lowz_highw_hash_2+Pf_min1.wwww*lowz_highw_hash_3);vec4 grad_results_highz_highw=inversesqrt(highz_highw_hash_0*highz_highw_hash_0+highz_highw_hash_1*highz_highw_hash_1+highz_highw_hash_2*highz_highw_hash_2+highz_highw_hash_3*highz_highw_hash_3);grad_results_highz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_highw_hash_1+Pf_min1.zzzz*highz_highw_hash_2+Pf_min1.wwww*highz_highw_hash_3);vec4 blend=Interpolation_C2(Pf);vec4 res0=grad_results_lowz_loww+(grad_results_lowz_highw-grad_results_lowz_loww)*blend.wwww;vec4 res1=grad_results_highz_loww+(grad_results_highz_highw-grad_results_highz_loww)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0)-blend.xy;return dot(res0,blend.zxzx*blend.wwyy);}float ValuePerlin2D(vec2 P,float blend_val){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_value,hash_x,hash_y;FAST32_hash_2D(Pi,hash_value,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results*=1.4142135623730950488016887242097;grad_results=mix((hash_value*2.0-1.0),grad_results,blend_val);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);}float ValuePerlin3D(vec3 P,float blend_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0*=1.1547005383792515290182975610039;grad_results_1*=1.1547005383792515290182975610039;grad_results_0=mix((hash_value0*2.0-1.0),grad_results_0,blend_val);grad_results_1=mix((hash_value1*2.0-1.0),grad_results_1,blend_val);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Cubist2D(vec2 P,vec2 range_clamp){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y,hash_value;FAST32_hash_2D(Pi,hash_x,hash_y,hash_value);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results=(hash_value-0.5)*(1.0/grad_results);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));float final=dot(grad_results,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}float Cubist3D(vec3 P,vec2 range_clamp){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0=(hash_value0-0.5)*(1.0/grad_results_0);grad_results_1=(hash_value1-0.5)*(1.0/grad_results_1);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}vec4 Cellular_weight_samples(vec4 samples){samples=samples*2.0-1.0;return(samples*samples*samples)-sign(samples);}float Cellular2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);
#if 1
const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x=hash_x*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y=hash_y*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;d.xy=min(d.xy,d.zw);return min(d.x,d.y)*(1.0/1.125);}float Cellular3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);
#if 1
const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x0=hash_x0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y0=hash_y0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_x1=hash_x1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y1=hash_y1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_z0=hash_z0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW);hash_z1=hash_z1*JITTER_WINDOW*2.0+vec4(1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;d1=min(d1,d2);d1.xy=min(d1.xy,d1.wz);return min(d1.x,d1.y)*(9.0/12.0);}/*float SparseConvolution2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;const float RADIUS=1.0-JITTER_WINDOW;d*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d,vec4(1.0))),vec4(1.0));}float SparseConvolution3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;const float RADIUS=(1.0-JITTER_WINDOW);d1*=((1.0/RADIUS)*(1.0/RADIUS));d2*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d1,vec4(1.0)))+Falloff_Xsq_C2(min(d2,vec4(1.0))),vec4(1.0));}*/float PolkaDot2D(vec2 P,float radius_low,float radius_high){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.z*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xy*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float PolkaDot3D(vec3 P,float radius_low,float radius_high){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash=FAST32_hash_3D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.w*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xyz*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float Stars2D(vec2 P,float probability_threshold,float max_dimness,float two_over_radius){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float VALUE=1.0-max_dimness*hash.z;Pf*=two_over_radius;Pf-=(two_over_radius-1.0);Pf+=hash.xy*(two_over_radius-2.0);return(hash.w<probability_threshold)?(Falloff_Xsq_C1(min(dot(Pf,Pf),1.0))*VALUE): 0.0;}float SimplexPerlin2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw));const float FINAL_NORMALIZATION=99.204334582718712976990005025589;vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);m=m*m;return dot(m*m,grad_results)*FINAL_NORMALIZATION;}float SimplexPolkaDot2D(vec2 P,float radius,float max_dimness){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.4494897427831780981972840747059;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec2 v0=(Pi-dot(Pi,vec2(UNSKEWFACTOR))-P);vec4 v0123_x=vec4(0.0,SIMPLEX_POINTS.xyz)+v0.x;vec4 v0123_y=vec4(0.0,SIMPLEX_POINTS.yxz)+v0.y;vec4 hash=FAST32_hash_2D(Pi);radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v0123_x*=radius;v0123_y*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v0123_x*v0123_x+v0123_y*v0123_y));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float SimplexCellular2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HEIGHT=1.4142135623730950488016887242097;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR)*INV_SIMPLEX_TRI_HEIGHT;P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=(0.10566243270259355887271280487451*INV_SIMPLEX_TRI_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;vec2 p0=((Pi-dot(Pi,vec2(UNSKEWFACTOR)))-P)*INV_SIMPLEX_TRI_HEIGHT;hash_x+=p0.xxxx;hash_y+=p0.yyyy;hash_x.yzw+=SIMPLEX_POINTS.xyz;hash_y.yzw+=SIMPLEX_POINTS.yxz;vec4 distsq=hash_x*hash_x+hash_y*hash_y;vec2 tmp=min(distsq.xy,distsq.zw);return min(tmp.x,tmp.y);}void Simplex3D_GetCornerVectors(vec3 P,out vec3 Pi,out vec3 Pi_1,out vec3 Pi_2,out vec4 v1234_x,out vec4 v1234_y,out vec4 v1234_z){const float SKEWFACTOR=1.0/3.0;const float UNSKEWFACTOR=1.0/6.0;const float SIMPLEX_CORNER_POS=0.5;const float SIMPLEX_PYRAMID_HEIGHT=0.70710678118654752440084436210485;P*=SIMPLEX_PYRAMID_HEIGHT;Pi=floor(P+dot(P,vec3(SKEWFACTOR)));vec3 x0=P-Pi+dot(Pi,vec3(UNSKEWFACTOR));vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;Pi_1=min(g.xyz,l.zxy);Pi_2=max(g.xyz,l.zxy);vec3 x1=x0-Pi_1+UNSKEWFACTOR;vec3 x2=x0-Pi_2+SKEWFACTOR;vec3 x3=x0-SIMPLEX_CORNER_POS;v1234_x=vec4(x0.x,x1.x,x2.x,x3.x);v1234_y=vec4(x0.y,x1.y,x2.y,x3.y);v1234_z=vec4(x0.z,x1.z,x2.z,x3.z);}vec4 Simplex3D_GetSurfletWeights(vec4 v1234_x,vec4 v1234_y,vec4 v1234_z){vec4 surflet_weights=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;surflet_weights=max(0.5-surflet_weights,0.0);return surflet_weights*surflet_weights*surflet_weights;}float SimplexPerlin3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 grad_results=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2)*(hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return dot(Simplex3D_GetSurfletWeights(v1234_x,v1234_y,v1234_z),grad_results)*FINAL_NORMALIZATION;}float SimplexCellular3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_x;vec4 hash_y;vec4 hash_z;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_x,hash_y,hash_z);const float INV_SIMPLEX_PYRAMID_HEIGHT=1.4142135623730950488016887242097;const float JITTER_WINDOW=(0.0597865779345250670558198111*INV_SIMPLEX_PYRAMID_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;hash_z=Cellular_weight_samples(hash_z)*JITTER_WINDOW;v1234_x*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_y*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_z*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_x+=hash_x;v1234_y+=hash_y;v1234_z+=hash_z;vec4 distsq=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;return min(min(distsq.x,distsq.y),min(distsq.z,distsq.w));}float SimplexPolkaDot3D(vec3 P,float radius,float max_dimness){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash=FAST32_hash_3D(Pi,Pi_1,Pi_2);const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.3094010767585030580365951220078;radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v1234_x*=radius;v1234_y*=radius;v1234_z*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float QuinticHermite(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,x,0.0));}vec4 QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 egrad0,vec4 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;}vec4 QuinticHermite(float x,vec2 igrad0,vec2 igrad1,vec2 egrad0,vec2 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return vec4(egrad1,igrad0)*vec4(h123.zz,1.0,1.0)+vec4(egrad0,h123.xx)*vec4(vec2(h123.y+x),(igrad1-igrad0));}void QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}void QuinticHermite(float x,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}float QuinticHermiteDeriv(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(30.0,-15.0,-15.0);const vec3 C1=vec3(-60.0,32.0,28.0);const vec3 C2=vec3(30.0,-18.0,-12.0);vec3 h123=(((C1+C0*x)*x)+C2)*(x*x);return dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,1.0,0.0));}float Hermite2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float Hermite3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float ValueHermite2D(vec2 P,float value_scale,float gradient_scale,float normalization_val){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_value,hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_value,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999)*gradient_scale;hash_grady=(hash_grady-0.49999)*gradient_scale;hash_value=(hash_value-0.5)*value_scale;vec4 qh_results=QuinticHermite(Pf.y,vec4(hash_value.xy,hash_gradx.xy),vec4(hash_value.zw,hash_gradx.zw),vec4(hash_grady.xy,0.0,0.0),vec4(hash_grady.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}float ValueHermite3D(vec3 P,float value_scale,float gradient_scale,float normalization_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999)*gradient_scale;hash_grady0=(hash_grady0-0.49999)*gradient_scale;hash_gradz0=(hash_gradz0-0.49999)*gradient_scale;hash_gradx1=(hash_gradx1-0.49999)*gradient_scale;hash_grady1=(hash_grady1-0.49999)*gradient_scale;hash_gradz1=(hash_gradz1-0.49999)*gradient_scale;hash_value0=(hash_value0-0.5)*value_scale;hash_value1=(hash_value1-0.5)*value_scale;vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_value0,hash_value1,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}vec3 Value2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec4 blend=Interpolation_C2_InterpAndDeriv(Pf);vec4 res0=mix(hash.xyxz,hash.zwyw,blend.yyxx);return vec3(res0.x,0.0,0.0)+(res0.yyw-res0.xxz)*blend.xzw;}vec4 Value3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 res1=mix(res0.xyxz,res0.zwyw,blend.yyxx);vec4 res3=mix(vec4(hash_lowz.xy,hash_highz.xy),vec4(hash_lowz.zw,hash_highz.zw),blend.y);vec2 res4=mix(res3.xz,res3.yw,blend.x);return vec4(res1.x,0.0,0.0,0.0)+(vec4(res1.yyw,res4.y)-vec4(res1.xxz,res4.x))*vec4(blend.x,Interpolation_C2_Deriv(Pf));}vec3 Perlin2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 dotval=(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);vec3 dotval0_grad0=vec3(dotval.x,grad_x.x,grad_y.x);vec3 dotval1_grad1=vec3(dotval.y,grad_x.y,grad_y.y);vec3 dotval2_grad2=vec3(dotval.z,grad_x.z,grad_y.z);vec3 dotval3_grad3=vec3(dotval.w,grad_x.w,grad_y.w);vec3 k0_gk0=dotval1_grad1-dotval0_grad0;vec3 k1_gk1=dotval2_grad2-dotval0_grad0;vec3 k2_gk2=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 blend=Interpolation_C2_InterpAndDeriv(Pf_Pfmin1.xy);vec3 results=dotval0_grad0+blend.x*k0_gk0+blend.y*(k1_gk1+blend.x*k2_gk2);results.yz+=blend.zw*(vec2(k0_gk0.x,k1_gk1.x)+blend.yx*k2_gk2.xx);return results*1.4142135623730950488016887242097;}vec4 Perlin3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 dotval_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 dotval_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec4 dotval0_grad0=vec4(dotval_0.x,grad_x0.x,grad_y0.x,grad_z0.x);vec4 dotval1_grad1=vec4(dotval_0.y,grad_x0.y,grad_y0.y,grad_z0.y);vec4 dotval2_grad2=vec4(dotval_0.z,grad_x0.z,grad_y0.z,grad_z0.z);vec4 dotval3_grad3=vec4(dotval_0.w,grad_x0.w,grad_y0.w,grad_z0.w);vec4 dotval4_grad4=vec4(dotval_1.x,grad_x1.x,grad_y1.x,grad_z1.x);vec4 dotval5_grad5=vec4(dotval_1.y,grad_x1.y,grad_y1.y,grad_z1.y);vec4 dotval6_grad6=vec4(dotval_1.z,grad_x1.z,grad_y1.z,grad_z1.z);vec4 dotval7_grad7=vec4(dotval_1.w,grad_x1.w,grad_y1.w,grad_z1.w);vec4 k0_gk0=dotval1_grad1-dotval0_grad0;vec4 k1_gk1=dotval2_grad2-dotval0_grad0;vec4 k2_gk2=dotval4_grad4-dotval0_grad0;vec4 k3_gk3=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 k4_gk4=dotval5_grad5-dotval4_grad4-k0_gk0;vec4 k5_gk5=dotval6_grad6-dotval4_grad4-k1_gk1;vec4 k6_gk6=(dotval7_grad7-dotval6_grad6)-(dotval5_grad5-dotval4_grad4)-k3_gk3;vec3 blend=Interpolation_C2(Pf);vec3 blendDeriv=Interpolation_C2_Deriv(Pf);float u=blend.x;float v=blend.y;float w=blend.z;vec4 result=dotval0_grad0+u*(k0_gk0+v*k3_gk3)+v*(k1_gk1+w*k5_gk5)+w*(k2_gk2+u*(k4_gk4+v*k6_gk6));result.y+=dot(vec4(k0_gk0.x,k3_gk3.x*v,vec2(k4_gk4.x,k6_gk6.x*v)*w),vec4(blendDeriv.x));result.z+=dot(vec4(k1_gk1.x,k3_gk3.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*w),vec4(blendDeriv.y));result.w+=dot(vec4(k2_gk2.x,k4_gk4.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*v),vec4(blendDeriv.z));result*=1.1547005383792515290182975610039;return result;}vec3 PerlinSurflet2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 grad_results=grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww;vec4 m=Pf_Pfmin1*Pf_Pfmin1;m=m.xzxz+m.yyww;m=max(1.0-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,Pf_Pfmin1.xzxz)+dot(m3,grad_x);float yderiv=dot(temp,Pf_Pfmin1.yyww)+dot(m3,grad_y);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec3(dot(m3,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 PerlinSurflet3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 grad_results_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 grad_results_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec3 Pf_sq=Pf*Pf;vec3 Pf_min1_sq=Pf_min1*Pf_min1;vec4 vecs_len_sq=vec2(Pf_sq.x,Pf_min1_sq.x).xyxy+vec2(Pf_sq.y,Pf_min1_sq.y).xxyy;vec4 m_0=vecs_len_sq+Pf_sq.zzzz;m_0=max(1.0-m_0,0.0);vec4 m2_0=m_0*m_0;vec4 m3_0=m_0*m2_0;vec4 m_1=vecs_len_sq+Pf_min1_sq.zzzz;m_1=max(1.0-m_1,0.0);vec4 m2_1=m_1*m_1;vec4 m3_1=m_1*m2_1;vec4 temp_0=-6.0*m2_0*grad_results_0;float xderiv_0=dot(temp_0,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_0,grad_x0);float yderiv_0=dot(temp_0,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_0,grad_y0);float zderiv_0=dot(temp_0,Pf.zzzz)+dot(m3_0,grad_z0);vec4 temp_1=-6.0*m2_1*grad_results_1;float xderiv_1=dot(temp_1,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_1,grad_x1);float yderiv_1=dot(temp_1,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_1,grad_y1);float zderiv_1=dot(temp_1,Pf_min1.zzzz)+dot(m3_1,grad_z1);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec4(dot(m3_0,grad_results_0)+dot(m3_1,grad_results_1),vec3(xderiv_0,yderiv_0,zderiv_0)+vec3(xderiv_1,yderiv_1,zderiv_1))*FINAL_NORMALIZATION;}vec3 Cellular2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;vec3 t1=d.x<d.y ? vec3(d.x,dx.x,dy.x): vec3(d.y,dx.y,dy.y);vec3 t2=d.z<d.w ? vec3(d.z,dx.z,dy.z): vec3(d.w,dx.w,dy.w);return(t1.x<t2.x ? t1 : t2)*vec3(1.0,2.0,2.0)*(1.0/1.125);}vec4 Cellular3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;vec4 r1=d1.x<d1.y ? vec4(d1.x,dx1.x,dy1.x,dz1.x): vec4(d1.y,dx1.y,dy1.y,dz1.y);vec4 r2=d1.z<d1.w ? vec4(d1.z,dx1.z,dy1.z,dz1.z): vec4(d1.w,dx1.w,dy1.w,dz1.w);vec4 r3=d2.x<d2.y ? vec4(d2.x,dx2.x,dy2.x,dz2.x): vec4(d2.y,dx2.y,dy2.y,dz2.y);vec4 r4=d2.z<d2.w ? vec4(d2.z,dx2.z,dy2.z,dz2.z): vec4(d2.w,dx2.w,dy2.w,dz2.w);vec4 t1=r1.x<r2.x ? r1 : r2;vec4 t2=r3.x<r4.x ? r3 : r4;return(t1.x<t2.x ? t1 : t2)*vec4(1.0,vec3(2.0))*(9.0/12.0);}vec3 SimplexPerlin2D_Deriv(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec3 grad_results=grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw);vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);vec3 m2=m*m;vec3 m4=m2*m2;vec3 temp=8.0*m2*m*grad_results;float xderiv=dot(temp,vec3(v0.x,v12.xz))-dot(m4,grad_x);float yderiv=dot(temp,vec3(v0.y,v12.yw))-dot(m4,grad_y);const float FINAL_NORMALIZATION=99.204334582718712976990005025589;return vec3(dot(m4,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 SimplexPerlin3D_Deriv(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 norm=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2);hash_0*=norm;hash_1*=norm;hash_2*=norm;vec4 grad_results=hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z;vec4 m=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;m=max(0.5-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,v1234_x)+dot(m3,hash_0);float yderiv=dot(temp,v1234_y)+dot(m3,hash_1);float zderiv=dot(temp,v1234_z)+dot(m3,hash_2);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return vec4(dot(m3,grad_results),xderiv,yderiv,zderiv)*FINAL_NORMALIZATION;}vec3 Hermite2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results_x=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);vec4 qh_results_y=QuinticHermite(Pf.x,hash_grady.xz,hash_grady.yw,hash_gradx.xz,hash_gradx.yw);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);return vec3(finalpos,deriv_x,deriv_y)*FINAL_NORM_VAL;}vec4 Hermite3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results_z,igrad_results_x_z,igrad_results_y_z;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results_z,igrad_results_x_z,igrad_results_y_z);vec4 ival_results_y,igrad_results_x_y,igrad_results_z_y;QuinticHermite(Pf.y,vec4(hash_gradx0.xy,hash_gradx1.xy),vec4(hash_gradx0.zw,hash_gradx1.zw),vec4(hash_gradz0.xy,hash_gradz1.xy),vec4(hash_gradz0.zw,hash_gradz1.zw),vec4(hash_grady0.xy,hash_grady1.xy),vec4(hash_grady0.zw,hash_grady1.zw),ival_results_y,igrad_results_x_y,igrad_results_z_y);vec4 qh_results_x=QuinticHermite(Pf.y,vec4(ival_results_z.xy,igrad_results_x_z.xy),vec4(ival_results_z.zw,igrad_results_x_z.zw),vec4(igrad_results_y_z.xy,0.0,0.0),vec4(igrad_results_y_z.zw,0.0,0.0));vec4 qh_results_y=QuinticHermite(Pf.x,vec4(ival_results_z.xz,igrad_results_y_z.xz),vec4(ival_results_z.yw,igrad_results_y_z.yw),vec4(igrad_results_x_z.xz,0.0,0.0),vec4(igrad_results_x_z.yw,0.0,0.0));vec4 qh_results_z=QuinticHermite(Pf.x,vec4(ival_results_y.xz,igrad_results_z_y.xz),vec4(ival_results_y.yw,igrad_results_z_y.yw),vec4(igrad_results_x_y.xz,0.0,0.0),vec4(igrad_results_x_y.yw,0.0,0.0));float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);float deriv_z=QuinticHermiteDeriv(Pf.z,qh_results_z.x,qh_results_z.y,qh_results_z.z,qh_results_z.w);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);return vec4(finalpos,deriv_x,deriv_y,deriv_z)*FINAL_NORM_VAL;}vec3 inclineVectorTowardSlerp(vec3 sourceVector,vec3 targetVector,float percentage){vec3 source=normalize(sourceVector);vec3 target=normalize(targetVector);float dotProduct=clamp(dot(source,target),-1.0,1.0);float angle=acos(dotProduct);if(abs(dotProduct+1.0)<0.001){return normalize(cross(source,vec3(1.0,0.0,0.0)));}if(angle<0.001)return sourceVector;vec3 result=(sin((1.0-percentage)*angle)*source+sin(percentage*angle)*target)/sin(angle);return result;}mat3 createAlignmentMatrix(vec3 from,vec3 to){vec3 a=normalize(from);vec3 b=normalize(to);if(dot(a,vec3(0.0,1.0,0.0))<0.0){b.y*=-1.0;}float cosAngle=dot(a,b);if(cosAngle>0.9999){return mat3(1.0);}if(cosAngle<-0.9999){vec3 perp=abs(a.x)<0.9 ? vec3(1.0,0.0,0.0): vec3(0.0,1.0,0.0);vec3 axis=normalize(cross(a,perp));return mat3(1.0-2.0*(axis.y*axis.y+axis.z*axis.z),2.0*(axis.x*axis.y),2.0*(axis.x*axis.z),2.0*(axis.x*axis.y),1.0-2.0*(axis.x*axis.x+axis.z*axis.z),2.0*(axis.y*axis.z),2.0*(axis.x*axis.z),2.0*(axis.y*axis.z),1.0-2.0*(axis.x*axis.x+axis.y*axis.y));}vec3 v=cross(a,b);float s=length(v);float c=cosAngle;mat3 vx=mat3(0.0,-v.z,v.y,v.z,0.0,-v.x,-v.y,v.x,0.0);mat3 identity=mat3(1.0);return identity+vx+(vx*vx)*((1.0-c)/(s*s));}float computeShadow(vec3 lightPosition,vec3 terrainNormal){return 1.0-max(dot(normalize(terrainNormal),normalize(lightPosition)),0.0);}float getElevation(vec2 vect,sampler2D displacementMap){return(texture(displacementMap,vec2(vect.x,vect.y)*0.3).r)*0.15;}float getColorVariation(vec2 groundPosition,sampler2D colorTexture){vec2 textureUv=groundPosition.yx*0.11+0.3;float noise=texture(colorTexture,textureUv).r;noise=smoothstep(0.35,0.75,noise);return noise;}vec2 adjustRoadTexturePosition(vec2 position){float scale=0.8;return position*scale*0.5+0.5;}float getWindStrength(vec2 vect,sampler2D windTexture,float time){float windSpeed=0.2;float noise=texture(windTexture,(adjustRoadTexturePosition(vect)+time*windSpeed)).r;noise=smoothstep(0.3,0.8,noise);return noise;}float getRoadAwareGrassScale(sampler2D grassRoadTexture,vec2 position){float grassRoadScale=texture(grassRoadTexture,adjustRoadTexturePosition(position)).g;grassRoadScale=min(1.0,grassRoadScale);return grassRoadScale;}vec3 getRoadColor(vec2 colorPosition,vec3 grassColor,sampler2D roadTexture,vec3 lightColor,vec3 darkColor,sampler2D colorTexture){vec3 color=mix(lightColor,darkColor,getColorVariation(vec2(colorPosition.x+-0.35,colorPosition.y)*2.0-2.8,colorTexture));color=mix(grassColor,color,1.0-texture(roadTexture,adjustRoadTexturePosition(colorPosition)).g);return color;}vec2 displaceGrassInRadius(vec3 worldPos,vec2 mousePosition,float radius){vec2 dir=worldPos.xz-mousePosition;float dist=length(dir);vec2 normalizedDir=normalize(dir);float influence=1.0-smoothstep(0.0,radius,dist);return normalizedDir*influence;}vec3 getGrassColor(vec3 darkGreen,vec3 lightGreen,float grassColorVariation,float shadowStrength,vec3 shadowColor,float windStrength,vec3 lightColor,float lightIntensity,vec3 terrainNormal,vec3 lightPosition,vec3 grassPosition){vec3 color=mix(darkGreen,lightGreen,grassColorVariation);color=mix(color,shadowColor,shadowStrength*0.6);color=mix(color,shadowColor,smoothstep(0.0,1.0,abs(windStrength)));vec3 light=vec3(0.0);light+=directionalLight(lightColor,lightIntensity,terrainNormal,lightPosition,grassPosition,0.0);color*=light;return color;}
#include <fog_pars_fragment>
uniform vec3 lightColor;uniform vec3 darkColor;uniform vec3 uFlowersColor1;uniform vec3 uFlowersColor2;uniform float uFlowerGlowIntensity;uniform sampler2D uFlowerTexture;varying float vColorVariation;varying vec3 vPosition;varying float vRotation;varying vec2 vDeformation;varying float vAppliedWind;varying float vColorMix;vec2 transformUv(vec2 uv,float angle,vec2 scale){vec2 res=uv;res-=0.5;float cosA=cos(angle);float sinA=sin(angle);mat2 rotation=mat2(cosA,-sinA,sinA,cosA);res=rotation*res;res+=0.5;res*=scale;return clamp(res,0.0,1.0);}void main(){vec2 uv=transformUv(gl_PointCoord,vRotation+vAppliedWind,vDeformation);float alpha=texture(uFlowerTexture,vec2(uv.x,1.0-uv.y)).a;vec3 color=mix(uFlowersColor1,uFlowersColor2,vColorMix);color.r*=vColorVariation;gl_FragColor=vec4(color*uFlowerGlowIntensity,alpha);
#include <fog_fragment>
#include <tonemapping_fragment>
#include <colorspace_fragment>
}`;const kt=new as,Ol=new S,Jv=new $,Kv=new $,Yv=new $;class No{constructor(e){this.geometry=e.geometry,this.randomFunction=Math.random,this.indexAttribute=this.geometry.index,this.positionAttribute=this.geometry.getAttribute("position"),this.normalAttribute=this.geometry.getAttribute("normal"),this.colorAttribute=this.geometry.getAttribute("color"),this.uvAttribute=this.geometry.getAttribute("uv"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){const e=this.indexAttribute,t=this.positionAttribute,i=this.weightAttribute,a=e?e.count/3:t.count/3,r=new Float32Array(a);for(let l=0;l<a;l++){let h=1,c=3*l,d=3*l+1,_=3*l+2;e&&(c=e.getX(c),d=e.getX(d),_=e.getX(_)),i&&(h=i.getX(c)+i.getX(d)+i.getX(_)),kt.a.fromBufferAttribute(t,c),kt.b.fromBufferAttribute(t,d),kt.c.fromBufferAttribute(t,_),h*=kt.getArea(),r[l]=h}const n=new Float32Array(a);let o=0;for(let l=0;l<a;l++)o+=r[l],n[l]=o;return this.distribution=n,this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,i,a){const r=this._sampleFaceIndex();return this._sampleFace(r,e,t,i,a)}_sampleFaceIndex(){const e=this.distribution[this.distribution.length-1];return this._binarySearch(this.randomFunction()*e)}_binarySearch(e){const t=this.distribution;let i=0,a=t.length-1,r=-1;for(;i<=a;){const n=Math.ceil((i+a)/2);if(n===0||t[n-1]<=e&&t[n]>e){r=n;break}else e<t[n]?a=n-1:i=n+1}return r}_sampleFace(e,t,i,a,r){let n=this.randomFunction(),o=this.randomFunction();n+o>1&&(n=1-n,o=1-o);const l=this.indexAttribute;let h=e*3,c=e*3+1,d=e*3+2;return l&&(h=l.getX(h),c=l.getX(c),d=l.getX(d)),kt.a.fromBufferAttribute(this.positionAttribute,h),kt.b.fromBufferAttribute(this.positionAttribute,c),kt.c.fromBufferAttribute(this.positionAttribute,d),t.set(0,0,0).addScaledVector(kt.a,n).addScaledVector(kt.b,o).addScaledVector(kt.c,1-(n+o)),i!==void 0&&(this.normalAttribute!==void 0?(kt.a.fromBufferAttribute(this.normalAttribute,h),kt.b.fromBufferAttribute(this.normalAttribute,c),kt.c.fromBufferAttribute(this.normalAttribute,d),i.set(0,0,0).addScaledVector(kt.a,n).addScaledVector(kt.b,o).addScaledVector(kt.c,1-(n+o)).normalize()):kt.getNormal(i)),a!==void 0&&this.colorAttribute!==void 0&&(kt.a.fromBufferAttribute(this.colorAttribute,h),kt.b.fromBufferAttribute(this.colorAttribute,c),kt.c.fromBufferAttribute(this.colorAttribute,d),Ol.set(0,0,0).addScaledVector(kt.a,n).addScaledVector(kt.b,o).addScaledVector(kt.c,1-(n+o)),a.r=Ol.x,a.g=Ol.y,a.b=Ol.z),r!==void 0&&this.uvAttribute!==void 0&&(Jv.fromBufferAttribute(this.uvAttribute,h),Kv.fromBufferAttribute(this.uvAttribute,c),Yv.fromBufferAttribute(this.uvAttribute,d),r.set(0,0).addScaledVector(Jv,n).addScaledVector(Kv,o).addScaledVector(Yv,1-(n+o))),this}}class Lo{static id=1;static newId(){return Lo.id++}id;engine;group;bender;parentGeometry;resources;channelToUse;tweakValues;mesh;material;flowersGeometry;constructor({engine:e,group:t,bender:i,geometry:a,resources:r,rgbChannelToUse:n,initialTweaks:o}){this.id=Lo.newId(),this.group=t,this.engine=e,this.bender=i,this.parentGeometry=a,this.resources=r,this.channelToUse=n,this.tweakValues=o,this.init(),this.configureTweaks(),this.engine.on("global:config:changed",l=>{const h=l?.detail?.config;h&&this.configChanged(h)})}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:`GrassField.Flowers.${this.id}`,color1:{params:{type:"color"},onChange:e=>{this.ready()&&(this.material.uniforms.uFlowersColor1.value=new X(e))}},color2:{params:{type:"color"},onChange:e=>{this.ready()&&(this.material.uniforms.uFlowersColor2.value=new X(e))}},size:{params:{min:.01,max:.1,step:.01},onChange:e=>{this.ready()&&(this.material.uniforms.uSize.value=e)}},count:{params:{min:500,max:5e3,step:100},onChange:e=>{console.warn("Flowers count changed to "+e+", but count change has not been implemented yet.")}},glowIntensity:{params:{min:1,max:30,step:.5},onChange:this.updateGlowIntensity.bind(this)},bendingFactor:{params:{min:.01,max:1,step:.01},onChange:e=>{this.material&&(this.material.uniforms.uBendingFactor.value=e)}}})}configChanged(e){e.grassField.flowers.configs[this.id-1].glowIntensity&&this.updateGlowIntensity(e.grassField.flowers.configs[this.id-1].glowIntensity)}updateGlowIntensity(e){this.material&&(this.material.uniforms.uFlowerGlowIntensity.value=e)}init(){this.resources.onceAll(["loaded:flowersTexture","loaded:flowersSamplingTexture","loaded:grassFieldDisplacementMap","loaded:smoothWind"],()=>{this.addWeightsAttributeToParentGeometry(),this.createMaterial(),this.createMesh(),this.group.add(this.mesh)})}ready(){return!!this.material}get resolution(){return new $(...this.engine.sizes.resolution)}get weightAttributeName(){return`aWeight${this.channelToUse.toUpperCase()}`}createMaterial(){this.material=new Le({vertexShader:GA,fragmentShader:qA,transparent:!0,fog:!0,uniforms:{uTime:new O(0),uResolution:new O(this.resolution),uSize:new O(this.tweakValues.size),uFlowerTexture:new O(this.resources.items.flowersTexture),uDisplacementMap:new O(this.resources.items.grassFieldDisplacementMap),uBendingTexture:new O(this.bender.texture),uFlowersColor1:new O(new X(this.tweakValues.color1)),uFlowersColor2:new O(new X(this.tweakValues.color2)),uMousePosition:new O(new $(9999,9999)),uFlowerGlowIntensity:new O(this.tweakValues.glowIntensity),uBendingFactor:new O(this.tweakValues.bendingFactor),uWindTexture:new O(this.resources.items.smoothWind),...ie.fog},depthWrite:!1}),this.engine.sizes.on("resize",()=>{this.ready()&&(this.material.uniforms.uResolution.value=this.resolution)})}updatePointerPosition(e){this.material&&(this.material.uniforms.uMousePosition.value=e)}createMesh(){this.createFlowersGeometry(...this.sampleFlowersAttributes()),this.mesh=new Dn(this.flowersGeometry,this.material)}sampleFlowersAttributes(){const e=new Ne(this.parentGeometry,new Mi),t=new No(e).setWeightAttribute(this.weightAttributeName).build(),i=new S,a=new S,r=new X,n=new $,{count:o}=this.tweakValues,l=new Float32Array(o),h=new Float32Array(o),c=new Float32Array(o),d=new Float32Array(o*2),_=new Float32Array(o*3),u=new Float32Array(o*3),x=new Float32Array(o*2);for(let g=0;g<o;g++){const v=g*2,f=g*3;t.sample(a,i,r,n),l[g]=Math.min(Math.random()+.6,1),c[g]=Math.random(),h[g]=(Math.random()-.5)*Math.PI*.25,d[v]=1.15+(Math.random()-.5)*.4,d[v+1]=1.15+(Math.random()-.5)*.4,_[f]=a.x,_[f+1]=a.y,_[f+2]=a.z,u[f]=i.x,u[f+1]=i.y,u[f+2]=i.z,x[v]=n.x,x[v+1]=n.y}return e.material.dispose(),[l,h,c,d,_,u,x]}createFlowersGeometry(e,t,i,a,r,n,o){const l=new Wt,h=new Be(e,1),c=new Be(t,1),d=new Be(i,1),_=new Be(a,2),u=new Be(r,3),x=new Be(n,3),g=new Be(o,2);l.setAttribute("aSize",h),l.setAttribute("aRotation",c),l.setAttribute("aColorMix",d),l.setAttribute("aDeformation",_),l.setAttribute("aNormal",x),l.setAttribute("position",u),l.setAttribute("aUv",g),this.flowersGeometry=l}addWeightsAttributeToParentGeometry(){const t=new fo(this.resources.items.flowersSamplingTexture).createVertexWeightsFromTexture(this.parentGeometry,this.channelToUse);this.parentGeometry.setAttribute(this.weightAttributeName,t)}update(){this.ready()&&(this.material.uniforms.uTime.value=this.engine.time.elapsedSeconds)}destroy(){this.mesh&&(this.group.remove(this.mesh),this.material?.dispose(),this.flowersGeometry?.dispose())}}var ip=`#include <common>
#include <packing>
#include <lights_pars_begin>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
#if NUM_SPOT_LIGHT_COORDS > 0
varying vec4 vSpotLightCoord[NUM_SPOT_LIGHT_COORDS];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
uniform sampler2D spotLightMap[NUM_SPOT_LIGHT_MAPS];
#endif
#ifdef USE_SHADOWMAP
#if NUM_DIR_LIGHT_SHADOWS > 0
uniform sampler2D directionalShadowMap[NUM_DIR_LIGHT_SHADOWS];
#endif
#if NUM_SPOT_LIGHT_SHADOWS > 0
uniform sampler2D spotShadowMap[NUM_SPOT_LIGHT_SHADOWS];struct SpotLightShadow{float shadowIntensity;float shadowBias;float shadowNormalBias;float shadowRadius;vec2 shadowMapSize;};uniform SpotLightShadow spotLightShadows[NUM_SPOT_LIGHT_SHADOWS];
#endif
#if NUM_POINT_LIGHT_SHADOWS > 0
uniform sampler2D pointShadowMap[NUM_POINT_LIGHT_SHADOWS];
#endif
float texture2DCompare(sampler2D depths,vec2 uv,float compare){float depth=unpackRGBAToDepth(texture2D(depths,uv));
#ifdef USE_REVERSED_DEPTH_BUFFER
return step(depth,compare);
#else
return step(compare,depth);
#endif
}vec2 texture2DDistribution(sampler2D shadow,vec2 uv){return unpackRGBATo2Half(texture2D(shadow,uv));}float VSMShadow(sampler2D shadow,vec2 uv,float compare){float occlusion=1.0;vec2 distribution=texture2DDistribution(shadow,uv);
#ifdef USE_REVERSED_DEPTH_BUFFER
float hard_shadow=step(distribution.x,compare);
#else
float hard_shadow=step(compare,distribution.x);
#endif
if(hard_shadow!=1.0){float distance=compare-distribution.x;float variance=max(0.00000,distribution.y*distribution.y);float softness_probability=variance/(variance+distance*distance);softness_probability=clamp((softness_probability-0.3)/(0.95-0.3),0.0,1.0);occlusion=clamp(max(hard_shadow,softness_probability),0.0,1.0);}return occlusion;}float getShadow(sampler2D shadowMap,vec2 shadowMapSize,float shadowIntensity,float shadowBias,float shadowRadius,vec4 shadowCoord){float shadow=1.0;shadowCoord.xyz/=shadowCoord.w;shadowCoord.z+=shadowBias;bool inFrustum=shadowCoord.x>=0.0&&shadowCoord.x<=1.0&&shadowCoord.y>=0.0&&shadowCoord.y<=1.0;bool frustumTest=inFrustum&&shadowCoord.z<=1.0;if(frustumTest){
#if defined( SHADOWMAP_TYPE_PCF )
vec2 texelSize=vec2(1.0)/shadowMapSize;float dx0=-texelSize.x*shadowRadius;float dy0=-texelSize.y*shadowRadius;float dx1=+texelSize.x*shadowRadius;float dy1=+texelSize.y*shadowRadius;float dx2=dx0/2.0;float dy2=dy0/2.0;float dx3=dx1/2.0;float dy3=dy1/2.0;shadow=(texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx0,dy0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx1,dy0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx2,dy2),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy2),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx3,dy2),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx0,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx2,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy,shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx3,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx1,0.0),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx2,dy3),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy3),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx3,dy3),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx0,dy1),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(0.0,dy1),shadowCoord.z)+texture2DCompare(shadowMap,shadowCoord.xy+vec2(dx1,dy1),shadowCoord.z))*(1.0/17.0);
#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
vec2 texelSize=vec2(1.0)/shadowMapSize;float dx=texelSize.x;float dy=texelSize.y;vec2 uv=shadowCoord.xy;vec2 f=fract(uv*shadowMapSize+0.5);uv-=f*texelSize;shadow=(texture2DCompare(shadowMap,uv,shadowCoord.z)+texture2DCompare(shadowMap,uv+vec2(dx,0.0),shadowCoord.z)+texture2DCompare(shadowMap,uv+vec2(0.0,dy),shadowCoord.z)+texture2DCompare(shadowMap,uv+texelSize,shadowCoord.z)+mix(texture2DCompare(shadowMap,uv+vec2(-dx,0.0),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,0.0),shadowCoord.z),f.x)+mix(texture2DCompare(shadowMap,uv+vec2(-dx,dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,dy),shadowCoord.z),f.x)+mix(texture2DCompare(shadowMap,uv+vec2(0.0,-dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(0.0,2.0*dy),shadowCoord.z),f.y)+mix(texture2DCompare(shadowMap,uv+vec2(dx,-dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(dx,2.0*dy),shadowCoord.z),f.y)+mix(mix(texture2DCompare(shadowMap,uv+vec2(-dx,-dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,-dy),shadowCoord.z),f.x),mix(texture2DCompare(shadowMap,uv+vec2(-dx,2.0*dy),shadowCoord.z),texture2DCompare(shadowMap,uv+vec2(2.0*dx,2.0*dy),shadowCoord.z),f.x),f.y))*(1.0/9.0);
#elif defined( SHADOWMAP_TYPE_VSM )
shadow=VSMShadow(shadowMap,shadowCoord.xy,shadowCoord.z);
#else
shadow=texture2DCompare(shadowMap,shadowCoord.xy,shadowCoord.z);
#endif
}return mix(1.0,shadow,shadowIntensity);}vec2 cubeToUV(vec3 v,float texelSizeY){vec3 absV=abs(v);float scaleToCube=1.0/max(absV.x,max(absV.y,absV.z));absV*=scaleToCube;v*=scaleToCube*(1.0-2.0*texelSizeY);vec2 planar=v.xy;float almostATexel=1.5*texelSizeY;float almostOne=1.0-almostATexel;if(absV.z>=almostOne){if(v.z>0.0)planar.x=4.0-v.x;}else if(absV.x>=almostOne){float signX=sign(v.x);planar.x=v.z*signX+2.0*signX;}else if(absV.y>=almostOne){float signY=sign(v.y);planar.x=v.x+2.0*signY+2.0;planar.y=v.z*signY-2.0;}return vec2(0.125,0.25)*planar+vec2(0.375,0.75);}float getPointShadow(sampler2D shadowMap,vec2 shadowMapSize,float shadowIntensity,float shadowBias,float shadowRadius,vec4 shadowCoord,float shadowCameraNear,float shadowCameraFar){float shadow=1.0;vec3 lightToPosition=shadowCoord.xyz;float lightToPositionLength=length(lightToPosition);if(lightToPositionLength-shadowCameraFar<=0.0&&lightToPositionLength-shadowCameraNear>=0.0){float dp=(lightToPositionLength-shadowCameraNear)/(shadowCameraFar-shadowCameraNear);dp+=shadowBias;vec3 bd3D=normalize(lightToPosition);vec2 texelSize=vec2(1.0)/(shadowMapSize*vec2(4.0,2.0));
#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
vec2 offset=vec2(-1,1)*shadowRadius*texelSize.y;shadow=(texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xyy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yyy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xyx,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yyx,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xxy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yxy,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.xxx,texelSize.y),dp)+texture2DCompare(shadowMap,cubeToUV(bd3D+offset.yxx,texelSize.y),dp))*(1.0/9.0);
#else
shadow=texture2DCompare(shadowMap,cubeToUV(bd3D,texelSize.y),dp);
#endif
}return mix(1.0,shadow,shadowIntensity);}
#endif
#include <shadowmask_pars_fragment>
vec3 directionalLight(vec3 lightColor,float lightIntensity,vec3 normal,vec3 lightPosition,vec3 viewPosition,float specularPower){vec3 lightDirection=normalize(lightPosition);float shading=max(dot(normalize(normal),lightDirection),0.0);vec3 ligthReflection=reflect(-lightDirection,normal);float specular=min(dot(ligthReflection,viewPosition),0.0);specular=specularPower==0.0 ? 1.0 : pow(specular,specularPower);return lightColor*lightIntensity*(shading+specular);}vec4 SGPP_coord_prepare(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 SGPP_coord_prepare(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 SGPP_permute(vec4 x){return fract(x*((34.0/289.0)*x+(1.0/289.0)))*289.0;}vec4 SGPP_resolve(vec4 x){return fract(x*(7.0/288.0));}vec4 SGPP_hash_2D(vec2 gridcell){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));return SGPP_resolve(SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww));}void SGPP_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));hash_0=SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww);hash_1=SGPP_resolve(SGPP_permute(hash_0));hash_0=SGPP_resolve(hash_0);}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell.zzzz));highz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell_inc1.zzzz));}void SGPP_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){vec3 coords0=gridcell.xyz-floor(gridcell.xyz*(1.0/289.0))*289.0;vec3 coords3=step(coords0,vec3(287.5))*(coords0+1.0);vec3 coords1=mix(coords0,coords3,v1_mask);vec3 coords2=mix(coords0,coords3,v2_mask);hash_2=SGPP_permute(SGPP_permute(SGPP_permute(vec4(coords0.x,coords1.x,coords2.x,coords3.x))+vec4(coords0.y,coords1.y,coords2.y,coords3.y))+vec4(coords0.z,coords1.z,coords2.z,coords3.z));hash_0=SGPP_resolve(hash_2);hash_1=SGPP_resolve(hash_2=SGPP_permute(hash_2));hash_2=SGPP_resolve(SGPP_permute(hash_2));}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash_2=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash_0=SGPP_resolve(lowz_hash_2=SGPP_permute(highz_hash_2+gridcell.zzzz));highz_hash_0=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2+gridcell_inc1.zzzz));lowz_hash_1=SGPP_resolve(lowz_hash_2=SGPP_permute(lowz_hash_2));highz_hash_1=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2));lowz_hash_2=SGPP_resolve(SGPP_permute(lowz_hash_2));highz_hash_2=SGPP_resolve(SGPP_permute(highz_hash_2));}vec4 BBS_coord_prepare(vec4 x){return x-floor(x*(1.0/61.0))*61.0;}vec3 BBS_coord_prepare(vec3 x){return x-floor(x*(1.0/61.0))*61.0;}vec4 BBS_permute(vec4 x){return fract(x*x*(1.0/61.0))*61.0;}vec4 BBS_permute_and_resolve(vec4 x){return fract(x*x*(1.0/61.0));}vec4 BBS_hash_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);return BBS_permute_and_resolve(p+hash_coord.yyww);}vec4 BBS_hash_hq_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);p=BBS_permute(p+hash_coord.yyww);return BBS_permute_and_resolve(p+hash_coord.xzxz);}void BBS_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const float DOMAIN=60.0;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 p=BBS_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy);p=BBS_permute(p+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=BBS_permute_and_resolve(p+gridcell.zzzz);highz_hash=BBS_permute_and_resolve(p+gridcell_inc1.zzzz);}vec4 FAST32_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const float SOMELARGEFLOAT=951.135664;vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec2 SOMELARGEFLOATS=vec2(951.135664,642.949883);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec3 SOMELARGEFLOATS=vec3(951.135664,642.949883,803.202459);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));hash_2=fract(P*(1.0/SOMELARGEFLOATS.z));}vec4 FAST32_hash_2D_Cell(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec4 SOMELARGEFLOATS=vec4(951.135664,642.949883,803.202459,986.973274);vec2 P=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xy;P*=P;return fract((P.x*P.y)*(1.0/SOMELARGEFLOATS.xyzw));}vec4 FAST32_hash_3D_Cell(vec3 gridcell){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;gridcell.xy+=OFFSET.xy;gridcell.xy*=gridcell.xy;return fract((gridcell.x*gridcell.y)*(1.0/(SOMELARGEFLOATS+gridcell.zzzz*ZINC)));}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;highz_hash.xy=vec2(1.0/(SOMELARGEFLOAT+vec2(gridcell.z,gridcell_inc1.z)*ZINC));lowz_hash=fract(P*highz_hash.xxxx);highz_hash=fract(P*highz_hash.yyyy);}void FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec3 lowz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));v1_mask=(v1_mask.z<0.5)? lowz_mods : highz_mods;v2_mask=(v2_mask.z<0.5)? lowz_mods : highz_mods;hash_0=fract(P*vec4(lowz_mods.x,v1_mask.x,v2_mask.x,highz_mods.x));hash_1=fract(P*vec4(lowz_mods.y,v1_mask.y,v2_mask.y,highz_mods.y));hash_2=fract(P*vec4(lowz_mods.z,v1_mask.z,v2_mask.z,highz_mods.z));}vec4 FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec2 V1z_V2z=vec2(v1_mask.z<0.5 ? gridcell.z : gridcell_inc1.z,v2_mask.z<0.5 ? gridcell.z : gridcell_inc1.z);vec4 mod_vals=vec4(1.0/(SOMELARGEFLOAT+vec4(gridcell.z,V1z_V2z,gridcell_inc1.z)*ZINC));return fract(P*mod_vals);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;vec3 lowz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));lowz_hash_0=fract(P*lowz_mod.xxxx);highz_hash_0=fract(P*highz_mod.xxxx);lowz_hash_1=fract(P*lowz_mod.yyyy);highz_hash_1=fract(P*highz_mod.yyyy);lowz_hash_2=fract(P*lowz_mod.zzzz);highz_hash_2=fract(P*highz_mod.zzzz);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 lowz_hash_3,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2,out vec4 highz_hash_3){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;lowz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell.zzzz*ZINC.xyzw));highz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell_inc1.zzzz*ZINC.xyzw));lowz_hash_0=fract(P*lowz_hash_3.xxxx);highz_hash_0=fract(P*highz_hash_3.xxxx);lowz_hash_1=fract(P*lowz_hash_3.yyyy);highz_hash_1=fract(P*highz_hash_3.yyyy);lowz_hash_2=fract(P*lowz_hash_3.zzzz);highz_hash_2=fract(P*highz_hash_3.zzzz);lowz_hash_3=fract(P*lowz_hash_3.wwww);highz_hash_3=fract(P*highz_hash_3.wwww);}vec4 FAST32_2_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(403.839172,377.242706);const float DOMAIN=69.0;const float SOMELARGEFLOAT=32745.708984;const vec2 SCALE=vec2(2.009842,1.372549);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P=(P*SCALE.xyxy)+OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_3D(vec3 gridcell,out vec4 z0_hash,out vec4 z1_hash){const vec3 OFFSET=vec3(55.882355,63.167774,52.941177);const float DOMAIN=69.0;const float SOMELARGEFLOAT=69412.070313;const vec3 SCALE=vec3(0.235142,0.205890,0.216449);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);z0_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell.zzzz*(1.0/SOMELARGEFLOAT));z1_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell_inc1.zzzz*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash,out vec4 z1w0_hash,out vec4 z0w1_hash,out vec4 z1w1_hash){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const float SOMELARGEFLOAT=47165.636719;const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww)*(1.0/SOMELARGEFLOAT);z0w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx);z1w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy);z0w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz);z1w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww);}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash_0,out vec4 z0w0_hash_1,out vec4 z0w0_hash_2,out vec4 z0w0_hash_3,out vec4 z1w0_hash_0,out vec4 z1w0_hash_1,out vec4 z1w0_hash_2,out vec4 z1w0_hash_3,out vec4 z0w1_hash_0,out vec4 z0w1_hash_1,out vec4 z0w1_hash_2,out vec4 z0w1_hash_3,out vec4 z1w1_hash_0,out vec4 z1w1_hash_1,out vec4 z1w1_hash_2,out vec4 z1w1_hash_3){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(56974.746094,47165.636719,55049.667969,49901.273438);const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww);vec4 hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx;z0w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy;z1w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz;z0w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww;z1w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));}float Interpolation_C1(float x){return x*x*(3.0-2.0*x);}vec2 Interpolation_C1(vec2 x){return x*x*(3.0-2.0*x);}vec3 Interpolation_C1(vec3 x){return x*x*(3.0-2.0*x);}vec4 Interpolation_C1(vec4 x){return x*x*(3.0-2.0*x);}float Interpolation_C2(float x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec2 Interpolation_C2(vec2 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec3 Interpolation_C2(vec3 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2(vec4 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2_InterpAndDeriv(vec2 x){return x.xyxy*x.xyxy*(x.xyxy*(x.xyxy*(x.xyxy*vec2(6.0,0.0).xxyy+vec2(-15.0,30.0).xxyy)+vec2(10.0,-60.0).xxyy)+vec2(0.0,30.0).xxyy);}vec3 Interpolation_C2_Deriv(vec3 x){return x*x*(x*(x*30.0-60.0)+30.0);}float Interpolation_C2_Fast(float x){float x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec2 Interpolation_C2_Fast(vec2 x){vec2 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec3 Interpolation_C2_Fast(vec3 x){vec3 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec4 Interpolation_C2_Fast(vec4 x){vec4 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}float Interpolation_C3(float x){float xsq=x*x;float xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec2 Interpolation_C3(vec2 x){vec2 xsq=x*x;vec2 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec3 Interpolation_C3(vec3 x){vec3 xsq=x*x;vec3 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec4 Interpolation_C3(vec4 x){vec4 xsq=x*x;vec4 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}float Falloff_Xsq_C1(float xsq){xsq=1.0-xsq;return xsq*xsq;}float Falloff_Xsq_C2(float xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}vec4 Falloff_Xsq_C2(vec4 xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}float Value2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec2 blend=Interpolation_C2(Pf);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(hash,blend2.zxzx*blend2.wwyy);}float Value3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Value4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 z0w0_hash;vec4 z1w0_hash;vec4 z0w1_hash;vec4 z1w1_hash;FAST32_2_hash_4D(Pi,z0w0_hash,z1w0_hash,z0w1_hash,z1w1_hash);vec4 blend=Interpolation_C2(Pf);vec4 res0=z0w0_hash+(z0w1_hash-z0w0_hash)*blend.wwww;vec4 res1=z1w0_hash+(z1w1_hash-z1w0_hash)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0-blend.xy);return dot(res0,blend.zxzx*blend.wwyy);}float Perlin2D(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);
#if 1
vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);
#if 1
grad_results*=1.4142135623730950488016887242097;vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#else
grad_results*=2.3703703703703703703703703703704;vec4 vecs_len_sq=Pf_Pfmin1*Pf_Pfmin1;vecs_len_sq=vecs_len_sq.xzxz+vecs_len_sq.yyww;return dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq)),grad_results);
#endif
#else
vec4 hash=FAST32_hash_2D(Pi);hash-=0.5;vec4 grad_results=Pf_Pfmin1.xzxz*sign(hash)+Pf_Pfmin1.yyww*sign(abs(hash)-0.25);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#endif
}float Perlin3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;
#if 1
vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);
#if 1
vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);final*=1.1547005383792515290182975610039;return final;
#else
Pf*=Pf;Pf_min1*=Pf_min1;vec4 vecs_len_sq=vec4(Pf.x,Pf_min1.x,Pf.x,Pf_min1.x)+vec4(Pf.yy,Pf_min1.yy);float final=dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf.zzzz)),grad_results_0)+dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf_min1.zzzz)),grad_results_1);final*=2.3703703703703703703703703703704;return final;
#endif
#else
vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);hash_lowz-=0.5;vec4 grad_results_0_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_lowz);hash_lowz=abs(hash_lowz)-0.25;vec4 grad_results_0_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_lowz);vec4 grad_results_0_2=Pf.zzzz*sign(abs(hash_lowz)-0.125);vec4 grad_results_0=grad_results_0_0+grad_results_0_1+grad_results_0_2;hash_highz-=0.5;vec4 grad_results_1_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_highz);hash_highz=abs(hash_highz)-0.25;vec4 grad_results_1_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_highz);vec4 grad_results_1_2=Pf_min1.zzzz*sign(abs(hash_highz)-0.125);vec4 grad_results_1=grad_results_1_0+grad_results_1_1+grad_results_1_2;vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy)*(2.0/3.0);
#endif
}float Perlin4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 Pf_min1=Pf-1.0;vec4 lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3;vec4 highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3;vec4 lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3;vec4 highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3;FAST32_2_hash_4D(Pi,lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3,highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3,lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3,highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3);lowz_loww_hash_0-=0.49999;lowz_loww_hash_1-=0.49999;lowz_loww_hash_2-=0.49999;lowz_loww_hash_3-=0.49999;highz_loww_hash_0-=0.49999;highz_loww_hash_1-=0.49999;highz_loww_hash_2-=0.49999;highz_loww_hash_3-=0.49999;lowz_highw_hash_0-=0.49999;lowz_highw_hash_1-=0.49999;lowz_highw_hash_2-=0.49999;lowz_highw_hash_3-=0.49999;highz_highw_hash_0-=0.49999;highz_highw_hash_1-=0.49999;highz_highw_hash_2-=0.49999;highz_highw_hash_3-=0.49999;vec4 grad_results_lowz_loww=inversesqrt(lowz_loww_hash_0*lowz_loww_hash_0+lowz_loww_hash_1*lowz_loww_hash_1+lowz_loww_hash_2*lowz_loww_hash_2+lowz_loww_hash_3*lowz_loww_hash_3);grad_results_lowz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_loww_hash_1+Pf.zzzz*lowz_loww_hash_2+Pf.wwww*lowz_loww_hash_3);vec4 grad_results_highz_loww=inversesqrt(highz_loww_hash_0*highz_loww_hash_0+highz_loww_hash_1*highz_loww_hash_1+highz_loww_hash_2*highz_loww_hash_2+highz_loww_hash_3*highz_loww_hash_3);grad_results_highz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_loww_hash_1+Pf_min1.zzzz*highz_loww_hash_2+Pf.wwww*highz_loww_hash_3);vec4 grad_results_lowz_highw=inversesqrt(lowz_highw_hash_0*lowz_highw_hash_0+lowz_highw_hash_1*lowz_highw_hash_1+lowz_highw_hash_2*lowz_highw_hash_2+lowz_highw_hash_3*lowz_highw_hash_3);grad_results_lowz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_highw_hash_1+Pf.zzzz*lowz_highw_hash_2+Pf_min1.wwww*lowz_highw_hash_3);vec4 grad_results_highz_highw=inversesqrt(highz_highw_hash_0*highz_highw_hash_0+highz_highw_hash_1*highz_highw_hash_1+highz_highw_hash_2*highz_highw_hash_2+highz_highw_hash_3*highz_highw_hash_3);grad_results_highz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_highw_hash_1+Pf_min1.zzzz*highz_highw_hash_2+Pf_min1.wwww*highz_highw_hash_3);vec4 blend=Interpolation_C2(Pf);vec4 res0=grad_results_lowz_loww+(grad_results_lowz_highw-grad_results_lowz_loww)*blend.wwww;vec4 res1=grad_results_highz_loww+(grad_results_highz_highw-grad_results_highz_loww)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0)-blend.xy;return dot(res0,blend.zxzx*blend.wwyy);}float ValuePerlin2D(vec2 P,float blend_val){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_value,hash_x,hash_y;FAST32_hash_2D(Pi,hash_value,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results*=1.4142135623730950488016887242097;grad_results=mix((hash_value*2.0-1.0),grad_results,blend_val);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);}float ValuePerlin3D(vec3 P,float blend_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0*=1.1547005383792515290182975610039;grad_results_1*=1.1547005383792515290182975610039;grad_results_0=mix((hash_value0*2.0-1.0),grad_results_0,blend_val);grad_results_1=mix((hash_value1*2.0-1.0),grad_results_1,blend_val);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Cubist2D(vec2 P,vec2 range_clamp){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y,hash_value;FAST32_hash_2D(Pi,hash_x,hash_y,hash_value);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results=(hash_value-0.5)*(1.0/grad_results);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));float final=dot(grad_results,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}float Cubist3D(vec3 P,vec2 range_clamp){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0=(hash_value0-0.5)*(1.0/grad_results_0);grad_results_1=(hash_value1-0.5)*(1.0/grad_results_1);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}vec4 Cellular_weight_samples(vec4 samples){samples=samples*2.0-1.0;return(samples*samples*samples)-sign(samples);}float Cellular2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);
#if 1
const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x=hash_x*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y=hash_y*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;d.xy=min(d.xy,d.zw);return min(d.x,d.y)*(1.0/1.125);}float Cellular3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);
#if 1
const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x0=hash_x0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y0=hash_y0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_x1=hash_x1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y1=hash_y1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_z0=hash_z0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW);hash_z1=hash_z1*JITTER_WINDOW*2.0+vec4(1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;d1=min(d1,d2);d1.xy=min(d1.xy,d1.wz);return min(d1.x,d1.y)*(9.0/12.0);}/*float SparseConvolution2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;const float RADIUS=1.0-JITTER_WINDOW;d*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d,vec4(1.0))),vec4(1.0));}float SparseConvolution3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;const float RADIUS=(1.0-JITTER_WINDOW);d1*=((1.0/RADIUS)*(1.0/RADIUS));d2*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d1,vec4(1.0)))+Falloff_Xsq_C2(min(d2,vec4(1.0))),vec4(1.0));}*/float PolkaDot2D(vec2 P,float radius_low,float radius_high){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.z*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xy*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float PolkaDot3D(vec3 P,float radius_low,float radius_high){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash=FAST32_hash_3D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.w*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xyz*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float Stars2D(vec2 P,float probability_threshold,float max_dimness,float two_over_radius){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float VALUE=1.0-max_dimness*hash.z;Pf*=two_over_radius;Pf-=(two_over_radius-1.0);Pf+=hash.xy*(two_over_radius-2.0);return(hash.w<probability_threshold)?(Falloff_Xsq_C1(min(dot(Pf,Pf),1.0))*VALUE): 0.0;}float SimplexPerlin2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw));const float FINAL_NORMALIZATION=99.204334582718712976990005025589;vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);m=m*m;return dot(m*m,grad_results)*FINAL_NORMALIZATION;}float SimplexPolkaDot2D(vec2 P,float radius,float max_dimness){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.4494897427831780981972840747059;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec2 v0=(Pi-dot(Pi,vec2(UNSKEWFACTOR))-P);vec4 v0123_x=vec4(0.0,SIMPLEX_POINTS.xyz)+v0.x;vec4 v0123_y=vec4(0.0,SIMPLEX_POINTS.yxz)+v0.y;vec4 hash=FAST32_hash_2D(Pi);radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v0123_x*=radius;v0123_y*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v0123_x*v0123_x+v0123_y*v0123_y));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float SimplexCellular2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HEIGHT=1.4142135623730950488016887242097;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR)*INV_SIMPLEX_TRI_HEIGHT;P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=(0.10566243270259355887271280487451*INV_SIMPLEX_TRI_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;vec2 p0=((Pi-dot(Pi,vec2(UNSKEWFACTOR)))-P)*INV_SIMPLEX_TRI_HEIGHT;hash_x+=p0.xxxx;hash_y+=p0.yyyy;hash_x.yzw+=SIMPLEX_POINTS.xyz;hash_y.yzw+=SIMPLEX_POINTS.yxz;vec4 distsq=hash_x*hash_x+hash_y*hash_y;vec2 tmp=min(distsq.xy,distsq.zw);return min(tmp.x,tmp.y);}void Simplex3D_GetCornerVectors(vec3 P,out vec3 Pi,out vec3 Pi_1,out vec3 Pi_2,out vec4 v1234_x,out vec4 v1234_y,out vec4 v1234_z){const float SKEWFACTOR=1.0/3.0;const float UNSKEWFACTOR=1.0/6.0;const float SIMPLEX_CORNER_POS=0.5;const float SIMPLEX_PYRAMID_HEIGHT=0.70710678118654752440084436210485;P*=SIMPLEX_PYRAMID_HEIGHT;Pi=floor(P+dot(P,vec3(SKEWFACTOR)));vec3 x0=P-Pi+dot(Pi,vec3(UNSKEWFACTOR));vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;Pi_1=min(g.xyz,l.zxy);Pi_2=max(g.xyz,l.zxy);vec3 x1=x0-Pi_1+UNSKEWFACTOR;vec3 x2=x0-Pi_2+SKEWFACTOR;vec3 x3=x0-SIMPLEX_CORNER_POS;v1234_x=vec4(x0.x,x1.x,x2.x,x3.x);v1234_y=vec4(x0.y,x1.y,x2.y,x3.y);v1234_z=vec4(x0.z,x1.z,x2.z,x3.z);}vec4 Simplex3D_GetSurfletWeights(vec4 v1234_x,vec4 v1234_y,vec4 v1234_z){vec4 surflet_weights=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;surflet_weights=max(0.5-surflet_weights,0.0);return surflet_weights*surflet_weights*surflet_weights;}float SimplexPerlin3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 grad_results=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2)*(hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return dot(Simplex3D_GetSurfletWeights(v1234_x,v1234_y,v1234_z),grad_results)*FINAL_NORMALIZATION;}float SimplexCellular3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_x;vec4 hash_y;vec4 hash_z;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_x,hash_y,hash_z);const float INV_SIMPLEX_PYRAMID_HEIGHT=1.4142135623730950488016887242097;const float JITTER_WINDOW=(0.0597865779345250670558198111*INV_SIMPLEX_PYRAMID_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;hash_z=Cellular_weight_samples(hash_z)*JITTER_WINDOW;v1234_x*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_y*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_z*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_x+=hash_x;v1234_y+=hash_y;v1234_z+=hash_z;vec4 distsq=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;return min(min(distsq.x,distsq.y),min(distsq.z,distsq.w));}float SimplexPolkaDot3D(vec3 P,float radius,float max_dimness){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash=FAST32_hash_3D(Pi,Pi_1,Pi_2);const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.3094010767585030580365951220078;radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v1234_x*=radius;v1234_y*=radius;v1234_z*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float QuinticHermite(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,x,0.0));}vec4 QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 egrad0,vec4 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;}vec4 QuinticHermite(float x,vec2 igrad0,vec2 igrad1,vec2 egrad0,vec2 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return vec4(egrad1,igrad0)*vec4(h123.zz,1.0,1.0)+vec4(egrad0,h123.xx)*vec4(vec2(h123.y+x),(igrad1-igrad0));}void QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}void QuinticHermite(float x,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}float QuinticHermiteDeriv(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(30.0,-15.0,-15.0);const vec3 C1=vec3(-60.0,32.0,28.0);const vec3 C2=vec3(30.0,-18.0,-12.0);vec3 h123=(((C1+C0*x)*x)+C2)*(x*x);return dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,1.0,0.0));}float Hermite2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float Hermite3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float ValueHermite2D(vec2 P,float value_scale,float gradient_scale,float normalization_val){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_value,hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_value,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999)*gradient_scale;hash_grady=(hash_grady-0.49999)*gradient_scale;hash_value=(hash_value-0.5)*value_scale;vec4 qh_results=QuinticHermite(Pf.y,vec4(hash_value.xy,hash_gradx.xy),vec4(hash_value.zw,hash_gradx.zw),vec4(hash_grady.xy,0.0,0.0),vec4(hash_grady.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}float ValueHermite3D(vec3 P,float value_scale,float gradient_scale,float normalization_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999)*gradient_scale;hash_grady0=(hash_grady0-0.49999)*gradient_scale;hash_gradz0=(hash_gradz0-0.49999)*gradient_scale;hash_gradx1=(hash_gradx1-0.49999)*gradient_scale;hash_grady1=(hash_grady1-0.49999)*gradient_scale;hash_gradz1=(hash_gradz1-0.49999)*gradient_scale;hash_value0=(hash_value0-0.5)*value_scale;hash_value1=(hash_value1-0.5)*value_scale;vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_value0,hash_value1,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}vec3 Value2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec4 blend=Interpolation_C2_InterpAndDeriv(Pf);vec4 res0=mix(hash.xyxz,hash.zwyw,blend.yyxx);return vec3(res0.x,0.0,0.0)+(res0.yyw-res0.xxz)*blend.xzw;}vec4 Value3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 res1=mix(res0.xyxz,res0.zwyw,blend.yyxx);vec4 res3=mix(vec4(hash_lowz.xy,hash_highz.xy),vec4(hash_lowz.zw,hash_highz.zw),blend.y);vec2 res4=mix(res3.xz,res3.yw,blend.x);return vec4(res1.x,0.0,0.0,0.0)+(vec4(res1.yyw,res4.y)-vec4(res1.xxz,res4.x))*vec4(blend.x,Interpolation_C2_Deriv(Pf));}vec3 Perlin2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 dotval=(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);vec3 dotval0_grad0=vec3(dotval.x,grad_x.x,grad_y.x);vec3 dotval1_grad1=vec3(dotval.y,grad_x.y,grad_y.y);vec3 dotval2_grad2=vec3(dotval.z,grad_x.z,grad_y.z);vec3 dotval3_grad3=vec3(dotval.w,grad_x.w,grad_y.w);vec3 k0_gk0=dotval1_grad1-dotval0_grad0;vec3 k1_gk1=dotval2_grad2-dotval0_grad0;vec3 k2_gk2=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 blend=Interpolation_C2_InterpAndDeriv(Pf_Pfmin1.xy);vec3 results=dotval0_grad0+blend.x*k0_gk0+blend.y*(k1_gk1+blend.x*k2_gk2);results.yz+=blend.zw*(vec2(k0_gk0.x,k1_gk1.x)+blend.yx*k2_gk2.xx);return results*1.4142135623730950488016887242097;}vec4 Perlin3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 dotval_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 dotval_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec4 dotval0_grad0=vec4(dotval_0.x,grad_x0.x,grad_y0.x,grad_z0.x);vec4 dotval1_grad1=vec4(dotval_0.y,grad_x0.y,grad_y0.y,grad_z0.y);vec4 dotval2_grad2=vec4(dotval_0.z,grad_x0.z,grad_y0.z,grad_z0.z);vec4 dotval3_grad3=vec4(dotval_0.w,grad_x0.w,grad_y0.w,grad_z0.w);vec4 dotval4_grad4=vec4(dotval_1.x,grad_x1.x,grad_y1.x,grad_z1.x);vec4 dotval5_grad5=vec4(dotval_1.y,grad_x1.y,grad_y1.y,grad_z1.y);vec4 dotval6_grad6=vec4(dotval_1.z,grad_x1.z,grad_y1.z,grad_z1.z);vec4 dotval7_grad7=vec4(dotval_1.w,grad_x1.w,grad_y1.w,grad_z1.w);vec4 k0_gk0=dotval1_grad1-dotval0_grad0;vec4 k1_gk1=dotval2_grad2-dotval0_grad0;vec4 k2_gk2=dotval4_grad4-dotval0_grad0;vec4 k3_gk3=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 k4_gk4=dotval5_grad5-dotval4_grad4-k0_gk0;vec4 k5_gk5=dotval6_grad6-dotval4_grad4-k1_gk1;vec4 k6_gk6=(dotval7_grad7-dotval6_grad6)-(dotval5_grad5-dotval4_grad4)-k3_gk3;vec3 blend=Interpolation_C2(Pf);vec3 blendDeriv=Interpolation_C2_Deriv(Pf);float u=blend.x;float v=blend.y;float w=blend.z;vec4 result=dotval0_grad0+u*(k0_gk0+v*k3_gk3)+v*(k1_gk1+w*k5_gk5)+w*(k2_gk2+u*(k4_gk4+v*k6_gk6));result.y+=dot(vec4(k0_gk0.x,k3_gk3.x*v,vec2(k4_gk4.x,k6_gk6.x*v)*w),vec4(blendDeriv.x));result.z+=dot(vec4(k1_gk1.x,k3_gk3.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*w),vec4(blendDeriv.y));result.w+=dot(vec4(k2_gk2.x,k4_gk4.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*v),vec4(blendDeriv.z));result*=1.1547005383792515290182975610039;return result;}vec3 PerlinSurflet2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 grad_results=grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww;vec4 m=Pf_Pfmin1*Pf_Pfmin1;m=m.xzxz+m.yyww;m=max(1.0-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,Pf_Pfmin1.xzxz)+dot(m3,grad_x);float yderiv=dot(temp,Pf_Pfmin1.yyww)+dot(m3,grad_y);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec3(dot(m3,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 PerlinSurflet3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 grad_results_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 grad_results_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec3 Pf_sq=Pf*Pf;vec3 Pf_min1_sq=Pf_min1*Pf_min1;vec4 vecs_len_sq=vec2(Pf_sq.x,Pf_min1_sq.x).xyxy+vec2(Pf_sq.y,Pf_min1_sq.y).xxyy;vec4 m_0=vecs_len_sq+Pf_sq.zzzz;m_0=max(1.0-m_0,0.0);vec4 m2_0=m_0*m_0;vec4 m3_0=m_0*m2_0;vec4 m_1=vecs_len_sq+Pf_min1_sq.zzzz;m_1=max(1.0-m_1,0.0);vec4 m2_1=m_1*m_1;vec4 m3_1=m_1*m2_1;vec4 temp_0=-6.0*m2_0*grad_results_0;float xderiv_0=dot(temp_0,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_0,grad_x0);float yderiv_0=dot(temp_0,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_0,grad_y0);float zderiv_0=dot(temp_0,Pf.zzzz)+dot(m3_0,grad_z0);vec4 temp_1=-6.0*m2_1*grad_results_1;float xderiv_1=dot(temp_1,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_1,grad_x1);float yderiv_1=dot(temp_1,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_1,grad_y1);float zderiv_1=dot(temp_1,Pf_min1.zzzz)+dot(m3_1,grad_z1);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec4(dot(m3_0,grad_results_0)+dot(m3_1,grad_results_1),vec3(xderiv_0,yderiv_0,zderiv_0)+vec3(xderiv_1,yderiv_1,zderiv_1))*FINAL_NORMALIZATION;}vec3 Cellular2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;vec3 t1=d.x<d.y ? vec3(d.x,dx.x,dy.x): vec3(d.y,dx.y,dy.y);vec3 t2=d.z<d.w ? vec3(d.z,dx.z,dy.z): vec3(d.w,dx.w,dy.w);return(t1.x<t2.x ? t1 : t2)*vec3(1.0,2.0,2.0)*(1.0/1.125);}vec4 Cellular3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;vec4 r1=d1.x<d1.y ? vec4(d1.x,dx1.x,dy1.x,dz1.x): vec4(d1.y,dx1.y,dy1.y,dz1.y);vec4 r2=d1.z<d1.w ? vec4(d1.z,dx1.z,dy1.z,dz1.z): vec4(d1.w,dx1.w,dy1.w,dz1.w);vec4 r3=d2.x<d2.y ? vec4(d2.x,dx2.x,dy2.x,dz2.x): vec4(d2.y,dx2.y,dy2.y,dz2.y);vec4 r4=d2.z<d2.w ? vec4(d2.z,dx2.z,dy2.z,dz2.z): vec4(d2.w,dx2.w,dy2.w,dz2.w);vec4 t1=r1.x<r2.x ? r1 : r2;vec4 t2=r3.x<r4.x ? r3 : r4;return(t1.x<t2.x ? t1 : t2)*vec4(1.0,vec3(2.0))*(9.0/12.0);}vec3 SimplexPerlin2D_Deriv(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec3 grad_results=grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw);vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);vec3 m2=m*m;vec3 m4=m2*m2;vec3 temp=8.0*m2*m*grad_results;float xderiv=dot(temp,vec3(v0.x,v12.xz))-dot(m4,grad_x);float yderiv=dot(temp,vec3(v0.y,v12.yw))-dot(m4,grad_y);const float FINAL_NORMALIZATION=99.204334582718712976990005025589;return vec3(dot(m4,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 SimplexPerlin3D_Deriv(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 norm=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2);hash_0*=norm;hash_1*=norm;hash_2*=norm;vec4 grad_results=hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z;vec4 m=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;m=max(0.5-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,v1234_x)+dot(m3,hash_0);float yderiv=dot(temp,v1234_y)+dot(m3,hash_1);float zderiv=dot(temp,v1234_z)+dot(m3,hash_2);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return vec4(dot(m3,grad_results),xderiv,yderiv,zderiv)*FINAL_NORMALIZATION;}vec3 Hermite2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results_x=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);vec4 qh_results_y=QuinticHermite(Pf.x,hash_grady.xz,hash_grady.yw,hash_gradx.xz,hash_gradx.yw);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);return vec3(finalpos,deriv_x,deriv_y)*FINAL_NORM_VAL;}vec4 Hermite3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results_z,igrad_results_x_z,igrad_results_y_z;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results_z,igrad_results_x_z,igrad_results_y_z);vec4 ival_results_y,igrad_results_x_y,igrad_results_z_y;QuinticHermite(Pf.y,vec4(hash_gradx0.xy,hash_gradx1.xy),vec4(hash_gradx0.zw,hash_gradx1.zw),vec4(hash_gradz0.xy,hash_gradz1.xy),vec4(hash_gradz0.zw,hash_gradz1.zw),vec4(hash_grady0.xy,hash_grady1.xy),vec4(hash_grady0.zw,hash_grady1.zw),ival_results_y,igrad_results_x_y,igrad_results_z_y);vec4 qh_results_x=QuinticHermite(Pf.y,vec4(ival_results_z.xy,igrad_results_x_z.xy),vec4(ival_results_z.zw,igrad_results_x_z.zw),vec4(igrad_results_y_z.xy,0.0,0.0),vec4(igrad_results_y_z.zw,0.0,0.0));vec4 qh_results_y=QuinticHermite(Pf.x,vec4(ival_results_z.xz,igrad_results_y_z.xz),vec4(ival_results_z.yw,igrad_results_y_z.yw),vec4(igrad_results_x_z.xz,0.0,0.0),vec4(igrad_results_x_z.yw,0.0,0.0));vec4 qh_results_z=QuinticHermite(Pf.x,vec4(ival_results_y.xz,igrad_results_z_y.xz),vec4(ival_results_y.yw,igrad_results_z_y.yw),vec4(igrad_results_x_y.xz,0.0,0.0),vec4(igrad_results_x_y.yw,0.0,0.0));float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);float deriv_z=QuinticHermiteDeriv(Pf.z,qh_results_z.x,qh_results_z.y,qh_results_z.z,qh_results_z.w);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);return vec4(finalpos,deriv_x,deriv_y,deriv_z)*FINAL_NORM_VAL;}vec3 inclineVectorTowardSlerp(vec3 sourceVector,vec3 targetVector,float percentage){vec3 source=normalize(sourceVector);vec3 target=normalize(targetVector);float dotProduct=clamp(dot(source,target),-1.0,1.0);float angle=acos(dotProduct);if(abs(dotProduct+1.0)<0.001){return normalize(cross(source,vec3(1.0,0.0,0.0)));}if(angle<0.001)return sourceVector;vec3 result=(sin((1.0-percentage)*angle)*source+sin(percentage*angle)*target)/sin(angle);return result;}mat3 createAlignmentMatrix(vec3 from,vec3 to){vec3 a=normalize(from);vec3 b=normalize(to);if(dot(a,vec3(0.0,1.0,0.0))<0.0){b.y*=-1.0;}float cosAngle=dot(a,b);if(cosAngle>0.9999){return mat3(1.0);}if(cosAngle<-0.9999){vec3 perp=abs(a.x)<0.9 ? vec3(1.0,0.0,0.0): vec3(0.0,1.0,0.0);vec3 axis=normalize(cross(a,perp));return mat3(1.0-2.0*(axis.y*axis.y+axis.z*axis.z),2.0*(axis.x*axis.y),2.0*(axis.x*axis.z),2.0*(axis.x*axis.y),1.0-2.0*(axis.x*axis.x+axis.z*axis.z),2.0*(axis.y*axis.z),2.0*(axis.x*axis.z),2.0*(axis.y*axis.z),1.0-2.0*(axis.x*axis.x+axis.y*axis.y));}vec3 v=cross(a,b);float s=length(v);float c=cosAngle;mat3 vx=mat3(0.0,-v.z,v.y,v.z,0.0,-v.x,-v.y,v.x,0.0);mat3 identity=mat3(1.0);return identity+vx+(vx*vx)*((1.0-c)/(s*s));}float computeShadow(vec3 lightPosition,vec3 terrainNormal){return 1.0-max(dot(normalize(terrainNormal),normalize(lightPosition)),0.0);}float getElevation(vec2 vect,sampler2D displacementMap){return(texture(displacementMap,vec2(vect.x,vect.y)*0.3).r)*0.15;}float getColorVariation(vec2 groundPosition,sampler2D colorTexture){vec2 textureUv=groundPosition.yx*0.11+0.3;float noise=texture(colorTexture,textureUv).r;noise=smoothstep(0.35,0.75,noise);return noise;}vec2 adjustRoadTexturePosition(vec2 position){float scale=0.8;return position*scale*0.5+0.5;}float getWindStrength(vec2 vect,sampler2D windTexture,float time){float windSpeed=0.2;float noise=texture(windTexture,(adjustRoadTexturePosition(vect)+time*windSpeed)).r;noise=smoothstep(0.3,0.8,noise);return noise;}float getRoadAwareGrassScale(sampler2D grassRoadTexture,vec2 position){float grassRoadScale=texture(grassRoadTexture,adjustRoadTexturePosition(position)).g;grassRoadScale=min(1.0,grassRoadScale);return grassRoadScale;}vec3 getRoadColor(vec2 colorPosition,vec3 grassColor,sampler2D roadTexture,vec3 lightColor,vec3 darkColor,sampler2D colorTexture){vec3 color=mix(lightColor,darkColor,getColorVariation(vec2(colorPosition.x+-0.35,colorPosition.y)*2.0-2.8,colorTexture));color=mix(grassColor,color,1.0-texture(roadTexture,adjustRoadTexturePosition(colorPosition)).g);return color;}vec2 displaceGrassInRadius(vec3 worldPos,vec2 mousePosition,float radius){vec2 dir=worldPos.xz-mousePosition;float dist=length(dir);vec2 normalizedDir=normalize(dir);float influence=1.0-smoothstep(0.0,radius,dist);return normalizedDir*influence;}vec3 getGrassColor(vec3 darkGreen,vec3 lightGreen,float grassColorVariation,float shadowStrength,vec3 shadowColor,float windStrength,vec3 lightColor,float lightIntensity,vec3 terrainNormal,vec3 lightPosition,vec3 grassPosition){vec3 color=mix(darkGreen,lightGreen,grassColorVariation);color=mix(color,shadowColor,shadowStrength*0.6);color=mix(color,shadowColor,smoothstep(0.0,1.0,abs(windStrength)));vec3 light=vec3(0.0);light+=directionalLight(lightColor,lightIntensity,terrainNormal,lightPosition,grassPosition,0.0);color*=light;return color;}uniform float uTime;uniform float uHeightFactor;uniform vec3 uDarkGreen;uniform vec3 uLightGreen;uniform vec3 uLightDirt;uniform vec3 uDarkDirt;uniform sampler2D uBendingTexture;uniform sampler2D uColorTexture;uniform sampler2D uDisplacementMap;uniform sampler2D uWindTexture;uniform float uBendingFactor;uniform float uBendingColorIntensity;uniform vec3 uShadowColor;uniform vec3 uLightDirection;uniform vec3 diffuse;attribute vec3 aNormal;attribute vec2 aUv;attribute float aRandomYRotation;attribute mat3 aNormalMatrix;varying vec3 vGrassColor;mat4 getYRotationMatrix(float angle){float c=cos(angle);float s=sin(angle);return mat4(vec4(c,0.0,-s,0.0),vec4(0.0,1.0,0.0,0.0),vec4(s,0.0,c,0.0),vec4(0.0,0.0,0.0,1.0));}void main(){
#include <beginnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <worldpos_vertex>
#include <shadowmap_vertex>
mat3 normalMat=aNormalMatrix;vec3 grassOrigin=instanceMatrix[3].xyz;vec3 grassNormal=normalize(normalMat*aNormal);vec3 grassScale=vec3(length(instanceMatrix[0].xyz),length(instanceMatrix[1].xyz),length(instanceMatrix[2].xyz));mat3 instanceRotation=mat3(normalize(instanceMatrix[0].xyz),normalize(instanceMatrix[1].xyz),normalize(instanceMatrix[2].xyz));mat3 instanceRotationInverse=transpose(instanceRotation);float elevation=getElevation(grassOrigin.xz,uDisplacementMap);vec3 virtualyDisplacedGrassPosition=grassOrigin+elevation*grassNormal;float virtualTerrainSampling=0.1;vec3 positionA=grassOrigin+vec3(virtualTerrainSampling,0.0,0.0);vec3 positionB=grassOrigin+vec3(0.0,0.0,virtualTerrainSampling);positionA+=getElevation(positionA.xz,uDisplacementMap)*grassNormal;positionB+=getElevation(positionB.xz,uDisplacementMap)*grassNormal;vec3 toA=normalize(positionA-virtualyDisplacedGrassPosition);vec3 toB=normalize(positionB-virtualyDisplacedGrassPosition);vec3 crossProduct=cross(toB,toA);vec3 virtualTerrainNormal=normalize(crossProduct);float terrainInfluence=1.0;vec3 terrainAdjustedNormal=inclineVectorTowardSlerp(grassNormal,virtualTerrainNormal,terrainInfluence);vec3 finalGrassInclination=terrainAdjustedNormal;float windNoise=getWindStrength(grassOrigin.xz,uWindTexture,uTime);vec3 worldUp=vec3(0.0,1.0,0.0);vec3 windDirection=cross(grassNormal,worldUp);float parallelFactor=step(0.01,length(windDirection));windDirection=mix(cross(grassNormal,vec3(1.0,0.0,0.0)),windDirection,parallelFactor);windDirection=normalize(windDirection);windDirection=windDirection-dot(windDirection,grassNormal)*grassNormal;windDirection=normalize(windDirection);float windStrength=0.4;windStrength*=windNoise;finalGrassInclination=inclineVectorTowardSlerp(finalGrassInclination,windDirection,windStrength);vec2 bendUv=aUv;vec4 bendData=texture(uBendingTexture,bendUv).rgba;float bendingIntensity=bendData.r*uBendingFactor;vec3 bendingDirection=bendData.gba*2.0-1.0;bendingDirection=-bendingDirection;vec3 localBendingDirection=instanceRotationInverse*bendingDirection;finalGrassInclination=inclineVectorTowardSlerp(finalGrassInclination,normalize(localBendingDirection),bendingIntensity);float grassScaleBasedOnElevation=elevation*7.0+0.6;grassScale*=grassScaleBasedOnElevation;mat3 alignmentMatrix=createAlignmentMatrix(grassNormal,normalize(finalGrassInclination));mat4 yRotation=getYRotationMatrix(aRandomYRotation);vec3 randomlyRotatedPosition=(yRotation*vec4(position,1.0)).xyz;vec3 alignedPosition=alignmentMatrix*randomlyRotatedPosition;vec3 rotatedPosition=instanceRotation*alignedPosition;vec3 scaledPosition=rotatedPosition*grassScale;vec3 myWorldPosition=scaledPosition+grassOrigin;vec4 mvPosition=modelViewMatrix*vec4(myWorldPosition,1.0);gl_Position=projectionMatrix*mvPosition;float grassColorVariation=getColorVariation(grassOrigin.xz,uColorTexture);float shadowStrength=computeShadow(uLightDirection,terrainAdjustedNormal);float bendingColorInfluence=abs(bendingIntensity*uBendingColorIntensity);vec3 color=getGrassColor(uDarkGreen,uLightGreen,grassColorVariation,shadowStrength,uShadowColor,windStrength+bendingColorInfluence,vec3(1.0),1.0,terrainAdjustedNormal,uLightDirection,grassOrigin.xyz);DirectionalLightShadow directionalShadow=directionalLightShadows[0];float shadow=getShadow(directionalShadowMap[0],directionalShadow.shadowMapSize,directionalShadow.shadowIntensity,directionalShadow.shadowBias,directionalShadow.shadowRadius,vDirectionalShadowCoord[0]);vec3 totalLight=vec3(0.8)*color;vec3 lightNormal=normalize(virtualTerrainNormal);
#if NUM_POINT_LIGHTS > 0
for(int i=0;i<NUM_POINT_LIGHTS;i++){vec3 L=normalize(pointLights[i].position-mvPosition.xyz);float dist=length(pointLights[i].position-mvPosition.xyz);float attenuation=1.0;if(pointLights[i].distance>0.0&&pointLights[i].decay>0.0){attenuation=pow(clamp(1.0-dist/pointLights[i].distance,0.0,1.0),pointLights[i].decay);}else{attenuation=1.0/(dist*dist);}float NdotL=max(dot(lightNormal,L),0.0);totalLight+=pointLights[i].color*attenuation*0.04;}
#endif
#if NUM_DIR_LIGHTS > 0
for(int i=0;i<NUM_DIR_LIGHTS;i++){vec3 L=normalize(directionalLights[i].direction);float NdotL=max(dot(lightNormal,L),0.0);float diffuseScale=2.5;totalLight+=(color/PI)*directionalLights[i].color*NdotL*diffuseScale*shadow;}
#endif
vGrassColor=totalLight;
#include <fog_vertex>
}`,sp=`varying vec3 vGrassColor;
#include <fog_pars_fragment>
void main(){gl_FragColor=vec4(vGrassColor,1.0);
#include <fog_fragment>
#include <tonemapping_fragment>
#include <colorspace_fragment>
}`;class Eh{levels;clonable;constructor(e){this.levels=[],this.clonable=!0,e&&this.addLevel(0,e)}divideCountsBy(e){this.levels.forEach(({features:t})=>{t.count!==void 0?t.count/=e:t.count=1/e})}addLevel(e,t){if(Object.keys(t).length===0)throw new Error("A LOD level must at least define a feature (count or geometry)");this.levels.push({distance:e,features:t}),this.levels.sort((i,a)=>a.distance-i.distance)}getLod(e,t){const i=e.distanceTo(t);return this.levels.find(a=>i>=a.distance).features}getDefaultGeometry(){return this.levels[this.levels.length-1].features.geometry}cloneWithAttributes(e){if(!this.clonable)throw new Error("Can't clone this instance with different attributes : it could mess up the geometries. Please use the parent LoD instance to configure a new chunk.");const t=new Eh;return t.levels=this.levels.slice(0).map(({distance:i,features:a})=>{let r;return a.geometry&&(r=a.geometry.clone(),Object.entries(e).forEach(([n,o])=>{r.setAttribute(n,o)})),{distance:i,features:{...a,geometry:r??a.geometry}}}),t.clonable=!1,t}dispose(){this.levels.map(({features:e})=>e.geometry).filter(Boolean).forEach(e=>e.dispose())}}class HA{chunkMap=new Map;size;constructor({size:e=new S(1,1,1)}={}){this.size=e}positionToChunkIndex(e){return new S(Math.round(e.x/this.size.x),Math.round(e.y/this.size.y),Math.round(e.z/this.size.z))}coordToKey(e){return`${e.x};${e.y};${e.z}`}keyToCoord(e){const[t,i,a]=e.split(";").map(Number);return new S(t,i,a)}set(e,t){this.chunkMap.set(this.coordToKey(e),t)}setByPosition(e,t){this.set(this.positionToChunkIndex(e),t)}get(e){return this.chunkMap.get(this.coordToKey(e))}getByPosition(e){return this.get(this.positionToChunkIndex(e))}exists(e){return!!this.get(e)}existsByPosition(e){return this.exists(this.positionToChunkIndex(e))}entries(){return Array.from(this.chunkMap.entries()).map(([e,t])=>({key:this.keyToCoord(e),value:t}))}}class XA{chunks;total;upVector;material;cameraMoveThreshold;cameraToObject;cameraWorldPosition;boundingBox;lastCameraPosition;accumulatedCameraDistance=0;dummy;normal;position;color;uv;quaternion;instancedMeshes;lod;constructor({total:e,chunkSize:t,material:i,lod:a,cameraMoveThreshold:r}){this.material=i,this.total=e,this.chunks=new HA({size:t}),this.quaternion=new ji,this.dummy=new ut,this.normal=new S,this.position=new S,this.uv=new $,this.color=new X,this.upVector=new S(0,1,0),this.lod=a,this.cameraToObject=new S,this.boundingBox=new ki,this.cameraMoveThreshold=r??.1,this.cameraWorldPosition=new S,this.lastCameraPosition=new S,this.instancedMeshes={},this.accumulatedCameraDistance=0}updateChunk(e,t){}sample(){const e=this.getSampler();for(let t=0;t<this.total;t++){e.sample(this.position,this.normal,this.color,this.uv),this.dummy.position.copy(this.position),this.quaternion.setFromUnitVectors(this.upVector,this.normal),this.dummy.setRotationFromQuaternion(this.quaternion);const i=this.sampleAttributes();this.chunks.existsByPosition(this.position)||this.chunks.setByPosition(this.position,[]),this.chunks.getByPosition(this.position).push({matrix:this.dummy.matrix.clone(),attributes:i})}this.postSample(),this.chunks.entries().forEach(this.createChunk.bind(this))}createChunk({key:e,value:t}){const i=this.generateInstancedBufferAttributes(t),a=this.lod.cloneWithAttributes(i),r=a.getDefaultGeometry(),n=new f_(r,this.material,t.length);t.forEach(({matrix:l},h)=>{n.setMatrixAt(h,l)}),n.instanceMatrix.needsUpdate=!0,n.computeBoundingBox(),n.computeBoundingSphere();const o=new S;n.boundingBox.getCenter(o),this.instancedMeshes[this.indexToKey(e)]={mesh:n,lod:a,objectCenter:o,attributes:i}}generateInstancedBufferAttributes(e){const t={};return e.forEach(({attributes:i},a)=>{Object.entries(i).forEach(([r,n])=>{r in t||(t[r]=new Float32Array(e.length*n.length)),t[r].set(n,a*n.length)})}),Object.fromEntries(Object.entries(t).map(([i,a])=>[i,new xs(a,a.length/e.length)]))}entries(){return Object.entries(this.instancedMeshes).map(([e,t])=>[this.keyToIndex(e),t.mesh])}indexToKey(e){return`${e.x};${e.y};${e.z}`}keyToIndex(e){return new S(...e.split(";").map(Number))}frustumCull(e,{bottomCullAngleFarThreshold:t=5,bottomCullAngleNearThreshold:i=25,interpolationDistance:a=7.5}={}){const r=this.lastCameraPosition.distanceTo(e.instance.getWorldPosition(this.cameraWorldPosition));if(this.accumulatedCameraDistance+=r,this.lastCameraPosition.copy(this.cameraWorldPosition),this.accumulatedCameraDistance<this.cameraMoveThreshold)return;this.accumulatedCameraDistance=0;const n=sa.degToRad(t),o=sa.degToRad(i);Object.values(this.instancedMeshes).forEach(({mesh:l,lod:h,objectCenter:c})=>{if(l.updateMatrixWorld(!0),this.boundingBox.setFromObject(l),!e.frustum.intersectsBox(this.boundingBox)){l.visible=!1;return}if(this.cameraWorldPosition.y<this.boundingBox.min.y){this.cameraToObject.subVectors(c,this.cameraWorldPosition);const d=this.cameraToObject.length();if(d!==0){const _=sa.lerp(o,n,d/a),u=Math.asin(this.cameraToObject.y/d);l.visible=u<_}}else l.visible=!0;l.visible&&this.applyLod(l,h)})}divideLodCountBy(e){Object.values(this.instancedMeshes).forEach(({lod:t})=>{t.divideCountsBy(e)})}applyLod(e,t){this.boundingBox.getCenter(this.position);const i=t.getLod(this.position,this.cameraWorldPosition);e.count=e.instanceMatrix.count,i.count!==void 0&&(e.count=Math.round(e.count*i.count),e.visible=i.count>0),i.geometry&&(e.geometry=i.geometry)}updateLod(){Object.values(this.instancedMeshes).forEach(e=>{this.applyLod(e.mesh,e.lod)})}update(){Object.entries(this.instancedMeshes).forEach(([e,t])=>{this.updateChunk(t.mesh,this.keyToIndex(e))})}dispose(){Object.entries(this.instancedMeshes).forEach(([e,t])=>{t.mesh.dispose(),t.lod.dispose(),delete this.instancedMeshes[e]})}}class ap extends XA{sampledGeometry;sampledMesh;constructor(e){super(e),this.sampledGeometry=e.sampledGeometry,this.init()}init(){this.sampledMesh=new Ne(this.sampledGeometry,new Mi)}sampleAttributes(){const e=Math.random()*.5+1;this.dummy.scale.set(e,e,e),this.dummy.updateMatrix();const t=new Ve;return t.getNormalMatrix(this.dummy.matrix),{aRandomYRotation:new Float32Array([Math.random()*Math.PI*2]),aNormal:new Float32Array([-this.normal.x,this.normal.y,-this.normal.z]),aUv:new Float32Array(this.uv.toArray()),aNormalMatrix:new Float32Array(t.elements)}}getSampler(){return new No(this.sampledMesh).build()}postSample(){this.sampledMesh.material.dispose()}}class jA{engine;group;resources;tweakValues;parentGeometry;bender;pampaGeometries;material;mesh;chunks;constructor({engine:e,group:t,resources:i,parentGeometry:a,initialTweaks:r,dirt:n,bender:o}){this.engine=e,this.group=t,this.resources=i,this.parentGeometry=a,this.tweakValues=r,this.bender=o,this.pampaGeometries={},this.init({dirt:n}),this.configureTweaks()}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:"GrassField.Pampa",bendingFactor:{params:{min:.01,max:1,step:.01},onChange:e=>{this.material&&(this.material.uniforms.uHeightFactor.value=e)}},bendingColor:{onChange:e=>{this.material&&(this.material.uniforms.uBendingColor.value=new X(e))}},bendingColorIntensity:{params:{min:.01,max:1,step:.01},onChange:e=>{this.material&&(this.material.uniforms.uBendingColorIntensity.value=e)}},lightColor:{onChange:e=>{this.material&&(this.material.uniforms.uDarkGreen.value=new X(e))}},darkColor:{onChange:e=>{this.material&&(this.material.uniforms.uLightGreen.value=new X(e))}},count:{params:{min:10,max:200,step:5},onChange:e=>{console.warn(`Pampa grass count changed to ${e}, but count change has not been implemented yet.`)}}})}init({dirt:e}){this.resources.onceAll(["loaded:pampaGrassModel","loaded:grassFieldDisplacementMap","loaded:grassFieldWindNoiseTexture","loaded:smoothWind"],()=>{this.initPampaGeometryFromModel(),this.createMaterial({dirt:e}),this.createChunks(),this.engine.monitor.on("decline",t=>{const i=t?.detail?.declineLevel;if(i)switch(i){case 3:console.warn("Grassfield.Pampa: Low fps detected. Disabling grassfield pampa."),this.destroy();break}})})}initPampaGeometryFromModel(){this.resources.items.pampaGrassModel.scene.traverse(e=>{if(e instanceof Ne){const t=e.geometry.clone();t.scale(.12,.1,.12),this.pampaGeometries[e.name]=t}})}createMaterial({dirt:e}){this.material=new Le({vertexShader:ip,fragmentShader:sp,fog:!0,lights:!0,uniforms:{uTime:new O(0),uDarkGreen:new O(new X(this.tweakValues.darkColor)),uLightGreen:new O(new X(this.tweakValues.lightColor)),uLightDirt:new O(new X(e.lightColor)),uDarkDirt:new O(new X(e.darkColor)),uBendingFactor:new O(this.tweakValues.bendingFactor),uBendingColor:new O(new X(this.tweakValues.bendingColor)),uBendingColorIntensity:new O(this.tweakValues.bendingColorIntensity),uColorTexture:new O(this.resources.items.grassFieldWindNoiseTexture),uDisplacementMap:new O(this.resources.items.grassFieldDisplacementMap),uBendingTexture:new O(this.bender.texture),uWindTexture:new O(this.resources.items.smoothWind),...ie.fog,...ie.lights},side:si})}createChunks(){const e=new Eh;e.addLevel(0,{geometry:this.pampaGeometries.high}),e.addLevel(7.5,{geometry:this.pampaGeometries.medium,count:.25}),e.addLevel(15,{geometry:this.pampaGeometries.low,count:0}),this.chunks=new ap({chunkSize:new S(20,20,20),sampledGeometry:this.parentGeometry,total:this.tweakValues.count,geometry:this.pampaGeometries.high,material:this.material,lod:e}),this.chunks.sample(),this.chunks.entries().forEach(([,t])=>{t.frustumCulled=!0,t.receiveShadow=!0,this.group.add(t)})}updateDirtLightColor(e){this.material&&(this.material.uniforms.uLightDirt.value=new X(e))}updateDirtDarkColor(e){this.material&&(this.material.uniforms.uDarkDirt.value=new X(e))}update(){this.material&&(this.material.uniforms.uTime.value=this.engine.time.elapsedSeconds,this.chunks.frustumCull(this.engine.camera))}destroy(){this.group.remove(this.mesh),Object.values(this.pampaGeometries).forEach(e=>{e.dispose()}),this.mesh?.geometry.dispose(),this.material.dispose(),this.chunks.dispose()}}var ZA=`vec3 directionalLight(vec3 lightColor,float lightIntensity,vec3 normal,vec3 lightPosition,vec3 viewPosition,float specularPower){vec3 lightDirection=normalize(lightPosition);float shading=max(dot(normalize(normal),lightDirection),0.0);vec3 ligthReflection=reflect(-lightDirection,normal);float specular=min(dot(ligthReflection,viewPosition),0.0);specular=specularPower==0.0 ? 1.0 : pow(specular,specularPower);return lightColor*lightIntensity*(shading+specular);}vec4 SGPP_coord_prepare(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 SGPP_coord_prepare(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 SGPP_permute(vec4 x){return fract(x*((34.0/289.0)*x+(1.0/289.0)))*289.0;}vec4 SGPP_resolve(vec4 x){return fract(x*(7.0/288.0));}vec4 SGPP_hash_2D(vec2 gridcell){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));return SGPP_resolve(SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww));}void SGPP_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));hash_0=SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww);hash_1=SGPP_resolve(SGPP_permute(hash_0));hash_0=SGPP_resolve(hash_0);}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell.zzzz));highz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell_inc1.zzzz));}void SGPP_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){vec3 coords0=gridcell.xyz-floor(gridcell.xyz*(1.0/289.0))*289.0;vec3 coords3=step(coords0,vec3(287.5))*(coords0+1.0);vec3 coords1=mix(coords0,coords3,v1_mask);vec3 coords2=mix(coords0,coords3,v2_mask);hash_2=SGPP_permute(SGPP_permute(SGPP_permute(vec4(coords0.x,coords1.x,coords2.x,coords3.x))+vec4(coords0.y,coords1.y,coords2.y,coords3.y))+vec4(coords0.z,coords1.z,coords2.z,coords3.z));hash_0=SGPP_resolve(hash_2);hash_1=SGPP_resolve(hash_2=SGPP_permute(hash_2));hash_2=SGPP_resolve(SGPP_permute(hash_2));}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash_2=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash_0=SGPP_resolve(lowz_hash_2=SGPP_permute(highz_hash_2+gridcell.zzzz));highz_hash_0=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2+gridcell_inc1.zzzz));lowz_hash_1=SGPP_resolve(lowz_hash_2=SGPP_permute(lowz_hash_2));highz_hash_1=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2));lowz_hash_2=SGPP_resolve(SGPP_permute(lowz_hash_2));highz_hash_2=SGPP_resolve(SGPP_permute(highz_hash_2));}vec4 BBS_coord_prepare(vec4 x){return x-floor(x*(1.0/61.0))*61.0;}vec3 BBS_coord_prepare(vec3 x){return x-floor(x*(1.0/61.0))*61.0;}vec4 BBS_permute(vec4 x){return fract(x*x*(1.0/61.0))*61.0;}vec4 BBS_permute_and_resolve(vec4 x){return fract(x*x*(1.0/61.0));}vec4 BBS_hash_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);return BBS_permute_and_resolve(p+hash_coord.yyww);}vec4 BBS_hash_hq_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);p=BBS_permute(p+hash_coord.yyww);return BBS_permute_and_resolve(p+hash_coord.xzxz);}void BBS_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const float DOMAIN=60.0;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 p=BBS_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy);p=BBS_permute(p+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=BBS_permute_and_resolve(p+gridcell.zzzz);highz_hash=BBS_permute_and_resolve(p+gridcell_inc1.zzzz);}vec4 FAST32_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const float SOMELARGEFLOAT=951.135664;vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec2 SOMELARGEFLOATS=vec2(951.135664,642.949883);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec3 SOMELARGEFLOATS=vec3(951.135664,642.949883,803.202459);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));hash_2=fract(P*(1.0/SOMELARGEFLOATS.z));}vec4 FAST32_hash_2D_Cell(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec4 SOMELARGEFLOATS=vec4(951.135664,642.949883,803.202459,986.973274);vec2 P=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xy;P*=P;return fract((P.x*P.y)*(1.0/SOMELARGEFLOATS.xyzw));}vec4 FAST32_hash_3D_Cell(vec3 gridcell){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;gridcell.xy+=OFFSET.xy;gridcell.xy*=gridcell.xy;return fract((gridcell.x*gridcell.y)*(1.0/(SOMELARGEFLOATS+gridcell.zzzz*ZINC)));}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;highz_hash.xy=vec2(1.0/(SOMELARGEFLOAT+vec2(gridcell.z,gridcell_inc1.z)*ZINC));lowz_hash=fract(P*highz_hash.xxxx);highz_hash=fract(P*highz_hash.yyyy);}void FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec3 lowz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));v1_mask=(v1_mask.z<0.5)? lowz_mods : highz_mods;v2_mask=(v2_mask.z<0.5)? lowz_mods : highz_mods;hash_0=fract(P*vec4(lowz_mods.x,v1_mask.x,v2_mask.x,highz_mods.x));hash_1=fract(P*vec4(lowz_mods.y,v1_mask.y,v2_mask.y,highz_mods.y));hash_2=fract(P*vec4(lowz_mods.z,v1_mask.z,v2_mask.z,highz_mods.z));}vec4 FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec2 V1z_V2z=vec2(v1_mask.z<0.5 ? gridcell.z : gridcell_inc1.z,v2_mask.z<0.5 ? gridcell.z : gridcell_inc1.z);vec4 mod_vals=vec4(1.0/(SOMELARGEFLOAT+vec4(gridcell.z,V1z_V2z,gridcell_inc1.z)*ZINC));return fract(P*mod_vals);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;vec3 lowz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));lowz_hash_0=fract(P*lowz_mod.xxxx);highz_hash_0=fract(P*highz_mod.xxxx);lowz_hash_1=fract(P*lowz_mod.yyyy);highz_hash_1=fract(P*highz_mod.yyyy);lowz_hash_2=fract(P*lowz_mod.zzzz);highz_hash_2=fract(P*highz_mod.zzzz);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 lowz_hash_3,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2,out vec4 highz_hash_3){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;lowz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell.zzzz*ZINC.xyzw));highz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell_inc1.zzzz*ZINC.xyzw));lowz_hash_0=fract(P*lowz_hash_3.xxxx);highz_hash_0=fract(P*highz_hash_3.xxxx);lowz_hash_1=fract(P*lowz_hash_3.yyyy);highz_hash_1=fract(P*highz_hash_3.yyyy);lowz_hash_2=fract(P*lowz_hash_3.zzzz);highz_hash_2=fract(P*highz_hash_3.zzzz);lowz_hash_3=fract(P*lowz_hash_3.wwww);highz_hash_3=fract(P*highz_hash_3.wwww);}vec4 FAST32_2_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(403.839172,377.242706);const float DOMAIN=69.0;const float SOMELARGEFLOAT=32745.708984;const vec2 SCALE=vec2(2.009842,1.372549);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P=(P*SCALE.xyxy)+OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_3D(vec3 gridcell,out vec4 z0_hash,out vec4 z1_hash){const vec3 OFFSET=vec3(55.882355,63.167774,52.941177);const float DOMAIN=69.0;const float SOMELARGEFLOAT=69412.070313;const vec3 SCALE=vec3(0.235142,0.205890,0.216449);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);z0_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell.zzzz*(1.0/SOMELARGEFLOAT));z1_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell_inc1.zzzz*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash,out vec4 z1w0_hash,out vec4 z0w1_hash,out vec4 z1w1_hash){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const float SOMELARGEFLOAT=47165.636719;const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww)*(1.0/SOMELARGEFLOAT);z0w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx);z1w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy);z0w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz);z1w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww);}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash_0,out vec4 z0w0_hash_1,out vec4 z0w0_hash_2,out vec4 z0w0_hash_3,out vec4 z1w0_hash_0,out vec4 z1w0_hash_1,out vec4 z1w0_hash_2,out vec4 z1w0_hash_3,out vec4 z0w1_hash_0,out vec4 z0w1_hash_1,out vec4 z0w1_hash_2,out vec4 z0w1_hash_3,out vec4 z1w1_hash_0,out vec4 z1w1_hash_1,out vec4 z1w1_hash_2,out vec4 z1w1_hash_3){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(56974.746094,47165.636719,55049.667969,49901.273438);const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww);vec4 hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx;z0w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy;z1w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz;z0w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww;z1w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));}float Interpolation_C1(float x){return x*x*(3.0-2.0*x);}vec2 Interpolation_C1(vec2 x){return x*x*(3.0-2.0*x);}vec3 Interpolation_C1(vec3 x){return x*x*(3.0-2.0*x);}vec4 Interpolation_C1(vec4 x){return x*x*(3.0-2.0*x);}float Interpolation_C2(float x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec2 Interpolation_C2(vec2 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec3 Interpolation_C2(vec3 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2(vec4 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2_InterpAndDeriv(vec2 x){return x.xyxy*x.xyxy*(x.xyxy*(x.xyxy*(x.xyxy*vec2(6.0,0.0).xxyy+vec2(-15.0,30.0).xxyy)+vec2(10.0,-60.0).xxyy)+vec2(0.0,30.0).xxyy);}vec3 Interpolation_C2_Deriv(vec3 x){return x*x*(x*(x*30.0-60.0)+30.0);}float Interpolation_C2_Fast(float x){float x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec2 Interpolation_C2_Fast(vec2 x){vec2 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec3 Interpolation_C2_Fast(vec3 x){vec3 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec4 Interpolation_C2_Fast(vec4 x){vec4 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}float Interpolation_C3(float x){float xsq=x*x;float xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec2 Interpolation_C3(vec2 x){vec2 xsq=x*x;vec2 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec3 Interpolation_C3(vec3 x){vec3 xsq=x*x;vec3 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec4 Interpolation_C3(vec4 x){vec4 xsq=x*x;vec4 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}float Falloff_Xsq_C1(float xsq){xsq=1.0-xsq;return xsq*xsq;}float Falloff_Xsq_C2(float xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}vec4 Falloff_Xsq_C2(vec4 xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}float Value2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec2 blend=Interpolation_C2(Pf);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(hash,blend2.zxzx*blend2.wwyy);}float Value3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Value4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 z0w0_hash;vec4 z1w0_hash;vec4 z0w1_hash;vec4 z1w1_hash;FAST32_2_hash_4D(Pi,z0w0_hash,z1w0_hash,z0w1_hash,z1w1_hash);vec4 blend=Interpolation_C2(Pf);vec4 res0=z0w0_hash+(z0w1_hash-z0w0_hash)*blend.wwww;vec4 res1=z1w0_hash+(z1w1_hash-z1w0_hash)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0-blend.xy);return dot(res0,blend.zxzx*blend.wwyy);}float Perlin2D(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);
#if 1
vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);
#if 1
grad_results*=1.4142135623730950488016887242097;vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#else
grad_results*=2.3703703703703703703703703703704;vec4 vecs_len_sq=Pf_Pfmin1*Pf_Pfmin1;vecs_len_sq=vecs_len_sq.xzxz+vecs_len_sq.yyww;return dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq)),grad_results);
#endif
#else
vec4 hash=FAST32_hash_2D(Pi);hash-=0.5;vec4 grad_results=Pf_Pfmin1.xzxz*sign(hash)+Pf_Pfmin1.yyww*sign(abs(hash)-0.25);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#endif
}float Perlin3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;
#if 1
vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);
#if 1
vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);final*=1.1547005383792515290182975610039;return final;
#else
Pf*=Pf;Pf_min1*=Pf_min1;vec4 vecs_len_sq=vec4(Pf.x,Pf_min1.x,Pf.x,Pf_min1.x)+vec4(Pf.yy,Pf_min1.yy);float final=dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf.zzzz)),grad_results_0)+dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf_min1.zzzz)),grad_results_1);final*=2.3703703703703703703703703703704;return final;
#endif
#else
vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);hash_lowz-=0.5;vec4 grad_results_0_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_lowz);hash_lowz=abs(hash_lowz)-0.25;vec4 grad_results_0_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_lowz);vec4 grad_results_0_2=Pf.zzzz*sign(abs(hash_lowz)-0.125);vec4 grad_results_0=grad_results_0_0+grad_results_0_1+grad_results_0_2;hash_highz-=0.5;vec4 grad_results_1_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_highz);hash_highz=abs(hash_highz)-0.25;vec4 grad_results_1_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_highz);vec4 grad_results_1_2=Pf_min1.zzzz*sign(abs(hash_highz)-0.125);vec4 grad_results_1=grad_results_1_0+grad_results_1_1+grad_results_1_2;vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy)*(2.0/3.0);
#endif
}float Perlin4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 Pf_min1=Pf-1.0;vec4 lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3;vec4 highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3;vec4 lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3;vec4 highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3;FAST32_2_hash_4D(Pi,lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3,highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3,lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3,highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3);lowz_loww_hash_0-=0.49999;lowz_loww_hash_1-=0.49999;lowz_loww_hash_2-=0.49999;lowz_loww_hash_3-=0.49999;highz_loww_hash_0-=0.49999;highz_loww_hash_1-=0.49999;highz_loww_hash_2-=0.49999;highz_loww_hash_3-=0.49999;lowz_highw_hash_0-=0.49999;lowz_highw_hash_1-=0.49999;lowz_highw_hash_2-=0.49999;lowz_highw_hash_3-=0.49999;highz_highw_hash_0-=0.49999;highz_highw_hash_1-=0.49999;highz_highw_hash_2-=0.49999;highz_highw_hash_3-=0.49999;vec4 grad_results_lowz_loww=inversesqrt(lowz_loww_hash_0*lowz_loww_hash_0+lowz_loww_hash_1*lowz_loww_hash_1+lowz_loww_hash_2*lowz_loww_hash_2+lowz_loww_hash_3*lowz_loww_hash_3);grad_results_lowz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_loww_hash_1+Pf.zzzz*lowz_loww_hash_2+Pf.wwww*lowz_loww_hash_3);vec4 grad_results_highz_loww=inversesqrt(highz_loww_hash_0*highz_loww_hash_0+highz_loww_hash_1*highz_loww_hash_1+highz_loww_hash_2*highz_loww_hash_2+highz_loww_hash_3*highz_loww_hash_3);grad_results_highz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_loww_hash_1+Pf_min1.zzzz*highz_loww_hash_2+Pf.wwww*highz_loww_hash_3);vec4 grad_results_lowz_highw=inversesqrt(lowz_highw_hash_0*lowz_highw_hash_0+lowz_highw_hash_1*lowz_highw_hash_1+lowz_highw_hash_2*lowz_highw_hash_2+lowz_highw_hash_3*lowz_highw_hash_3);grad_results_lowz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_highw_hash_1+Pf.zzzz*lowz_highw_hash_2+Pf_min1.wwww*lowz_highw_hash_3);vec4 grad_results_highz_highw=inversesqrt(highz_highw_hash_0*highz_highw_hash_0+highz_highw_hash_1*highz_highw_hash_1+highz_highw_hash_2*highz_highw_hash_2+highz_highw_hash_3*highz_highw_hash_3);grad_results_highz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_highw_hash_1+Pf_min1.zzzz*highz_highw_hash_2+Pf_min1.wwww*highz_highw_hash_3);vec4 blend=Interpolation_C2(Pf);vec4 res0=grad_results_lowz_loww+(grad_results_lowz_highw-grad_results_lowz_loww)*blend.wwww;vec4 res1=grad_results_highz_loww+(grad_results_highz_highw-grad_results_highz_loww)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0)-blend.xy;return dot(res0,blend.zxzx*blend.wwyy);}float ValuePerlin2D(vec2 P,float blend_val){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_value,hash_x,hash_y;FAST32_hash_2D(Pi,hash_value,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results*=1.4142135623730950488016887242097;grad_results=mix((hash_value*2.0-1.0),grad_results,blend_val);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);}float ValuePerlin3D(vec3 P,float blend_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0*=1.1547005383792515290182975610039;grad_results_1*=1.1547005383792515290182975610039;grad_results_0=mix((hash_value0*2.0-1.0),grad_results_0,blend_val);grad_results_1=mix((hash_value1*2.0-1.0),grad_results_1,blend_val);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Cubist2D(vec2 P,vec2 range_clamp){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y,hash_value;FAST32_hash_2D(Pi,hash_x,hash_y,hash_value);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results=(hash_value-0.5)*(1.0/grad_results);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));float final=dot(grad_results,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}float Cubist3D(vec3 P,vec2 range_clamp){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0=(hash_value0-0.5)*(1.0/grad_results_0);grad_results_1=(hash_value1-0.5)*(1.0/grad_results_1);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}vec4 Cellular_weight_samples(vec4 samples){samples=samples*2.0-1.0;return(samples*samples*samples)-sign(samples);}float Cellular2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);
#if 1
const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x=hash_x*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y=hash_y*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;d.xy=min(d.xy,d.zw);return min(d.x,d.y)*(1.0/1.125);}float Cellular3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);
#if 1
const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x0=hash_x0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y0=hash_y0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_x1=hash_x1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y1=hash_y1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_z0=hash_z0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW);hash_z1=hash_z1*JITTER_WINDOW*2.0+vec4(1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;d1=min(d1,d2);d1.xy=min(d1.xy,d1.wz);return min(d1.x,d1.y)*(9.0/12.0);}/*float SparseConvolution2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;const float RADIUS=1.0-JITTER_WINDOW;d*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d,vec4(1.0))),vec4(1.0));}float SparseConvolution3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;const float RADIUS=(1.0-JITTER_WINDOW);d1*=((1.0/RADIUS)*(1.0/RADIUS));d2*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d1,vec4(1.0)))+Falloff_Xsq_C2(min(d2,vec4(1.0))),vec4(1.0));}*/float PolkaDot2D(vec2 P,float radius_low,float radius_high){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.z*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xy*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float PolkaDot3D(vec3 P,float radius_low,float radius_high){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash=FAST32_hash_3D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.w*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xyz*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float Stars2D(vec2 P,float probability_threshold,float max_dimness,float two_over_radius){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float VALUE=1.0-max_dimness*hash.z;Pf*=two_over_radius;Pf-=(two_over_radius-1.0);Pf+=hash.xy*(two_over_radius-2.0);return(hash.w<probability_threshold)?(Falloff_Xsq_C1(min(dot(Pf,Pf),1.0))*VALUE): 0.0;}float SimplexPerlin2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw));const float FINAL_NORMALIZATION=99.204334582718712976990005025589;vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);m=m*m;return dot(m*m,grad_results)*FINAL_NORMALIZATION;}float SimplexPolkaDot2D(vec2 P,float radius,float max_dimness){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.4494897427831780981972840747059;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec2 v0=(Pi-dot(Pi,vec2(UNSKEWFACTOR))-P);vec4 v0123_x=vec4(0.0,SIMPLEX_POINTS.xyz)+v0.x;vec4 v0123_y=vec4(0.0,SIMPLEX_POINTS.yxz)+v0.y;vec4 hash=FAST32_hash_2D(Pi);radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v0123_x*=radius;v0123_y*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v0123_x*v0123_x+v0123_y*v0123_y));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float SimplexCellular2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HEIGHT=1.4142135623730950488016887242097;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR)*INV_SIMPLEX_TRI_HEIGHT;P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=(0.10566243270259355887271280487451*INV_SIMPLEX_TRI_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;vec2 p0=((Pi-dot(Pi,vec2(UNSKEWFACTOR)))-P)*INV_SIMPLEX_TRI_HEIGHT;hash_x+=p0.xxxx;hash_y+=p0.yyyy;hash_x.yzw+=SIMPLEX_POINTS.xyz;hash_y.yzw+=SIMPLEX_POINTS.yxz;vec4 distsq=hash_x*hash_x+hash_y*hash_y;vec2 tmp=min(distsq.xy,distsq.zw);return min(tmp.x,tmp.y);}void Simplex3D_GetCornerVectors(vec3 P,out vec3 Pi,out vec3 Pi_1,out vec3 Pi_2,out vec4 v1234_x,out vec4 v1234_y,out vec4 v1234_z){const float SKEWFACTOR=1.0/3.0;const float UNSKEWFACTOR=1.0/6.0;const float SIMPLEX_CORNER_POS=0.5;const float SIMPLEX_PYRAMID_HEIGHT=0.70710678118654752440084436210485;P*=SIMPLEX_PYRAMID_HEIGHT;Pi=floor(P+dot(P,vec3(SKEWFACTOR)));vec3 x0=P-Pi+dot(Pi,vec3(UNSKEWFACTOR));vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;Pi_1=min(g.xyz,l.zxy);Pi_2=max(g.xyz,l.zxy);vec3 x1=x0-Pi_1+UNSKEWFACTOR;vec3 x2=x0-Pi_2+SKEWFACTOR;vec3 x3=x0-SIMPLEX_CORNER_POS;v1234_x=vec4(x0.x,x1.x,x2.x,x3.x);v1234_y=vec4(x0.y,x1.y,x2.y,x3.y);v1234_z=vec4(x0.z,x1.z,x2.z,x3.z);}vec4 Simplex3D_GetSurfletWeights(vec4 v1234_x,vec4 v1234_y,vec4 v1234_z){vec4 surflet_weights=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;surflet_weights=max(0.5-surflet_weights,0.0);return surflet_weights*surflet_weights*surflet_weights;}float SimplexPerlin3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 grad_results=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2)*(hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return dot(Simplex3D_GetSurfletWeights(v1234_x,v1234_y,v1234_z),grad_results)*FINAL_NORMALIZATION;}float SimplexCellular3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_x;vec4 hash_y;vec4 hash_z;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_x,hash_y,hash_z);const float INV_SIMPLEX_PYRAMID_HEIGHT=1.4142135623730950488016887242097;const float JITTER_WINDOW=(0.0597865779345250670558198111*INV_SIMPLEX_PYRAMID_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;hash_z=Cellular_weight_samples(hash_z)*JITTER_WINDOW;v1234_x*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_y*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_z*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_x+=hash_x;v1234_y+=hash_y;v1234_z+=hash_z;vec4 distsq=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;return min(min(distsq.x,distsq.y),min(distsq.z,distsq.w));}float SimplexPolkaDot3D(vec3 P,float radius,float max_dimness){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash=FAST32_hash_3D(Pi,Pi_1,Pi_2);const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.3094010767585030580365951220078;radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v1234_x*=radius;v1234_y*=radius;v1234_z*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float QuinticHermite(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,x,0.0));}vec4 QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 egrad0,vec4 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;}vec4 QuinticHermite(float x,vec2 igrad0,vec2 igrad1,vec2 egrad0,vec2 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return vec4(egrad1,igrad0)*vec4(h123.zz,1.0,1.0)+vec4(egrad0,h123.xx)*vec4(vec2(h123.y+x),(igrad1-igrad0));}void QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}void QuinticHermite(float x,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}float QuinticHermiteDeriv(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(30.0,-15.0,-15.0);const vec3 C1=vec3(-60.0,32.0,28.0);const vec3 C2=vec3(30.0,-18.0,-12.0);vec3 h123=(((C1+C0*x)*x)+C2)*(x*x);return dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,1.0,0.0));}float Hermite2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float Hermite3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float ValueHermite2D(vec2 P,float value_scale,float gradient_scale,float normalization_val){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_value,hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_value,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999)*gradient_scale;hash_grady=(hash_grady-0.49999)*gradient_scale;hash_value=(hash_value-0.5)*value_scale;vec4 qh_results=QuinticHermite(Pf.y,vec4(hash_value.xy,hash_gradx.xy),vec4(hash_value.zw,hash_gradx.zw),vec4(hash_grady.xy,0.0,0.0),vec4(hash_grady.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}float ValueHermite3D(vec3 P,float value_scale,float gradient_scale,float normalization_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999)*gradient_scale;hash_grady0=(hash_grady0-0.49999)*gradient_scale;hash_gradz0=(hash_gradz0-0.49999)*gradient_scale;hash_gradx1=(hash_gradx1-0.49999)*gradient_scale;hash_grady1=(hash_grady1-0.49999)*gradient_scale;hash_gradz1=(hash_gradz1-0.49999)*gradient_scale;hash_value0=(hash_value0-0.5)*value_scale;hash_value1=(hash_value1-0.5)*value_scale;vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_value0,hash_value1,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}vec3 Value2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec4 blend=Interpolation_C2_InterpAndDeriv(Pf);vec4 res0=mix(hash.xyxz,hash.zwyw,blend.yyxx);return vec3(res0.x,0.0,0.0)+(res0.yyw-res0.xxz)*blend.xzw;}vec4 Value3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 res1=mix(res0.xyxz,res0.zwyw,blend.yyxx);vec4 res3=mix(vec4(hash_lowz.xy,hash_highz.xy),vec4(hash_lowz.zw,hash_highz.zw),blend.y);vec2 res4=mix(res3.xz,res3.yw,blend.x);return vec4(res1.x,0.0,0.0,0.0)+(vec4(res1.yyw,res4.y)-vec4(res1.xxz,res4.x))*vec4(blend.x,Interpolation_C2_Deriv(Pf));}vec3 Perlin2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 dotval=(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);vec3 dotval0_grad0=vec3(dotval.x,grad_x.x,grad_y.x);vec3 dotval1_grad1=vec3(dotval.y,grad_x.y,grad_y.y);vec3 dotval2_grad2=vec3(dotval.z,grad_x.z,grad_y.z);vec3 dotval3_grad3=vec3(dotval.w,grad_x.w,grad_y.w);vec3 k0_gk0=dotval1_grad1-dotval0_grad0;vec3 k1_gk1=dotval2_grad2-dotval0_grad0;vec3 k2_gk2=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 blend=Interpolation_C2_InterpAndDeriv(Pf_Pfmin1.xy);vec3 results=dotval0_grad0+blend.x*k0_gk0+blend.y*(k1_gk1+blend.x*k2_gk2);results.yz+=blend.zw*(vec2(k0_gk0.x,k1_gk1.x)+blend.yx*k2_gk2.xx);return results*1.4142135623730950488016887242097;}vec4 Perlin3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 dotval_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 dotval_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec4 dotval0_grad0=vec4(dotval_0.x,grad_x0.x,grad_y0.x,grad_z0.x);vec4 dotval1_grad1=vec4(dotval_0.y,grad_x0.y,grad_y0.y,grad_z0.y);vec4 dotval2_grad2=vec4(dotval_0.z,grad_x0.z,grad_y0.z,grad_z0.z);vec4 dotval3_grad3=vec4(dotval_0.w,grad_x0.w,grad_y0.w,grad_z0.w);vec4 dotval4_grad4=vec4(dotval_1.x,grad_x1.x,grad_y1.x,grad_z1.x);vec4 dotval5_grad5=vec4(dotval_1.y,grad_x1.y,grad_y1.y,grad_z1.y);vec4 dotval6_grad6=vec4(dotval_1.z,grad_x1.z,grad_y1.z,grad_z1.z);vec4 dotval7_grad7=vec4(dotval_1.w,grad_x1.w,grad_y1.w,grad_z1.w);vec4 k0_gk0=dotval1_grad1-dotval0_grad0;vec4 k1_gk1=dotval2_grad2-dotval0_grad0;vec4 k2_gk2=dotval4_grad4-dotval0_grad0;vec4 k3_gk3=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 k4_gk4=dotval5_grad5-dotval4_grad4-k0_gk0;vec4 k5_gk5=dotval6_grad6-dotval4_grad4-k1_gk1;vec4 k6_gk6=(dotval7_grad7-dotval6_grad6)-(dotval5_grad5-dotval4_grad4)-k3_gk3;vec3 blend=Interpolation_C2(Pf);vec3 blendDeriv=Interpolation_C2_Deriv(Pf);float u=blend.x;float v=blend.y;float w=blend.z;vec4 result=dotval0_grad0+u*(k0_gk0+v*k3_gk3)+v*(k1_gk1+w*k5_gk5)+w*(k2_gk2+u*(k4_gk4+v*k6_gk6));result.y+=dot(vec4(k0_gk0.x,k3_gk3.x*v,vec2(k4_gk4.x,k6_gk6.x*v)*w),vec4(blendDeriv.x));result.z+=dot(vec4(k1_gk1.x,k3_gk3.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*w),vec4(blendDeriv.y));result.w+=dot(vec4(k2_gk2.x,k4_gk4.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*v),vec4(blendDeriv.z));result*=1.1547005383792515290182975610039;return result;}vec3 PerlinSurflet2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 grad_results=grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww;vec4 m=Pf_Pfmin1*Pf_Pfmin1;m=m.xzxz+m.yyww;m=max(1.0-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,Pf_Pfmin1.xzxz)+dot(m3,grad_x);float yderiv=dot(temp,Pf_Pfmin1.yyww)+dot(m3,grad_y);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec3(dot(m3,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 PerlinSurflet3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 grad_results_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 grad_results_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec3 Pf_sq=Pf*Pf;vec3 Pf_min1_sq=Pf_min1*Pf_min1;vec4 vecs_len_sq=vec2(Pf_sq.x,Pf_min1_sq.x).xyxy+vec2(Pf_sq.y,Pf_min1_sq.y).xxyy;vec4 m_0=vecs_len_sq+Pf_sq.zzzz;m_0=max(1.0-m_0,0.0);vec4 m2_0=m_0*m_0;vec4 m3_0=m_0*m2_0;vec4 m_1=vecs_len_sq+Pf_min1_sq.zzzz;m_1=max(1.0-m_1,0.0);vec4 m2_1=m_1*m_1;vec4 m3_1=m_1*m2_1;vec4 temp_0=-6.0*m2_0*grad_results_0;float xderiv_0=dot(temp_0,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_0,grad_x0);float yderiv_0=dot(temp_0,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_0,grad_y0);float zderiv_0=dot(temp_0,Pf.zzzz)+dot(m3_0,grad_z0);vec4 temp_1=-6.0*m2_1*grad_results_1;float xderiv_1=dot(temp_1,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_1,grad_x1);float yderiv_1=dot(temp_1,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_1,grad_y1);float zderiv_1=dot(temp_1,Pf_min1.zzzz)+dot(m3_1,grad_z1);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec4(dot(m3_0,grad_results_0)+dot(m3_1,grad_results_1),vec3(xderiv_0,yderiv_0,zderiv_0)+vec3(xderiv_1,yderiv_1,zderiv_1))*FINAL_NORMALIZATION;}vec3 Cellular2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;vec3 t1=d.x<d.y ? vec3(d.x,dx.x,dy.x): vec3(d.y,dx.y,dy.y);vec3 t2=d.z<d.w ? vec3(d.z,dx.z,dy.z): vec3(d.w,dx.w,dy.w);return(t1.x<t2.x ? t1 : t2)*vec3(1.0,2.0,2.0)*(1.0/1.125);}vec4 Cellular3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;vec4 r1=d1.x<d1.y ? vec4(d1.x,dx1.x,dy1.x,dz1.x): vec4(d1.y,dx1.y,dy1.y,dz1.y);vec4 r2=d1.z<d1.w ? vec4(d1.z,dx1.z,dy1.z,dz1.z): vec4(d1.w,dx1.w,dy1.w,dz1.w);vec4 r3=d2.x<d2.y ? vec4(d2.x,dx2.x,dy2.x,dz2.x): vec4(d2.y,dx2.y,dy2.y,dz2.y);vec4 r4=d2.z<d2.w ? vec4(d2.z,dx2.z,dy2.z,dz2.z): vec4(d2.w,dx2.w,dy2.w,dz2.w);vec4 t1=r1.x<r2.x ? r1 : r2;vec4 t2=r3.x<r4.x ? r3 : r4;return(t1.x<t2.x ? t1 : t2)*vec4(1.0,vec3(2.0))*(9.0/12.0);}vec3 SimplexPerlin2D_Deriv(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec3 grad_results=grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw);vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);vec3 m2=m*m;vec3 m4=m2*m2;vec3 temp=8.0*m2*m*grad_results;float xderiv=dot(temp,vec3(v0.x,v12.xz))-dot(m4,grad_x);float yderiv=dot(temp,vec3(v0.y,v12.yw))-dot(m4,grad_y);const float FINAL_NORMALIZATION=99.204334582718712976990005025589;return vec3(dot(m4,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 SimplexPerlin3D_Deriv(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 norm=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2);hash_0*=norm;hash_1*=norm;hash_2*=norm;vec4 grad_results=hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z;vec4 m=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;m=max(0.5-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,v1234_x)+dot(m3,hash_0);float yderiv=dot(temp,v1234_y)+dot(m3,hash_1);float zderiv=dot(temp,v1234_z)+dot(m3,hash_2);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return vec4(dot(m3,grad_results),xderiv,yderiv,zderiv)*FINAL_NORMALIZATION;}vec3 Hermite2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results_x=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);vec4 qh_results_y=QuinticHermite(Pf.x,hash_grady.xz,hash_grady.yw,hash_gradx.xz,hash_gradx.yw);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);return vec3(finalpos,deriv_x,deriv_y)*FINAL_NORM_VAL;}vec4 Hermite3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results_z,igrad_results_x_z,igrad_results_y_z;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results_z,igrad_results_x_z,igrad_results_y_z);vec4 ival_results_y,igrad_results_x_y,igrad_results_z_y;QuinticHermite(Pf.y,vec4(hash_gradx0.xy,hash_gradx1.xy),vec4(hash_gradx0.zw,hash_gradx1.zw),vec4(hash_gradz0.xy,hash_gradz1.xy),vec4(hash_gradz0.zw,hash_gradz1.zw),vec4(hash_grady0.xy,hash_grady1.xy),vec4(hash_grady0.zw,hash_grady1.zw),ival_results_y,igrad_results_x_y,igrad_results_z_y);vec4 qh_results_x=QuinticHermite(Pf.y,vec4(ival_results_z.xy,igrad_results_x_z.xy),vec4(ival_results_z.zw,igrad_results_x_z.zw),vec4(igrad_results_y_z.xy,0.0,0.0),vec4(igrad_results_y_z.zw,0.0,0.0));vec4 qh_results_y=QuinticHermite(Pf.x,vec4(ival_results_z.xz,igrad_results_y_z.xz),vec4(ival_results_z.yw,igrad_results_y_z.yw),vec4(igrad_results_x_z.xz,0.0,0.0),vec4(igrad_results_x_z.yw,0.0,0.0));vec4 qh_results_z=QuinticHermite(Pf.x,vec4(ival_results_y.xz,igrad_results_z_y.xz),vec4(ival_results_y.yw,igrad_results_z_y.yw),vec4(igrad_results_x_y.xz,0.0,0.0),vec4(igrad_results_x_y.yw,0.0,0.0));float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);float deriv_z=QuinticHermiteDeriv(Pf.z,qh_results_z.x,qh_results_z.y,qh_results_z.z,qh_results_z.w);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);return vec4(finalpos,deriv_x,deriv_y,deriv_z)*FINAL_NORM_VAL;}vec3 inclineVectorTowardSlerp(vec3 sourceVector,vec3 targetVector,float percentage){vec3 source=normalize(sourceVector);vec3 target=normalize(targetVector);float dotProduct=clamp(dot(source,target),-1.0,1.0);float angle=acos(dotProduct);if(abs(dotProduct+1.0)<0.001){return normalize(cross(source,vec3(1.0,0.0,0.0)));}if(angle<0.001)return sourceVector;vec3 result=(sin((1.0-percentage)*angle)*source+sin(percentage*angle)*target)/sin(angle);return result;}mat3 createAlignmentMatrix(vec3 from,vec3 to){vec3 a=normalize(from);vec3 b=normalize(to);if(dot(a,vec3(0.0,1.0,0.0))<0.0){b.y*=-1.0;}float cosAngle=dot(a,b);if(cosAngle>0.9999){return mat3(1.0);}if(cosAngle<-0.9999){vec3 perp=abs(a.x)<0.9 ? vec3(1.0,0.0,0.0): vec3(0.0,1.0,0.0);vec3 axis=normalize(cross(a,perp));return mat3(1.0-2.0*(axis.y*axis.y+axis.z*axis.z),2.0*(axis.x*axis.y),2.0*(axis.x*axis.z),2.0*(axis.x*axis.y),1.0-2.0*(axis.x*axis.x+axis.z*axis.z),2.0*(axis.y*axis.z),2.0*(axis.x*axis.z),2.0*(axis.y*axis.z),1.0-2.0*(axis.x*axis.x+axis.y*axis.y));}vec3 v=cross(a,b);float s=length(v);float c=cosAngle;mat3 vx=mat3(0.0,-v.z,v.y,v.z,0.0,-v.x,-v.y,v.x,0.0);mat3 identity=mat3(1.0);return identity+vx+(vx*vx)*((1.0-c)/(s*s));}float computeShadow(vec3 lightPosition,vec3 terrainNormal){return 1.0-max(dot(normalize(terrainNormal),normalize(lightPosition)),0.0);}float getElevation(vec2 vect,sampler2D displacementMap){return(texture(displacementMap,vec2(vect.x,vect.y)*0.3).r)*0.15;}float getColorVariation(vec2 groundPosition,sampler2D colorTexture){vec2 textureUv=groundPosition.yx*0.11+0.3;float noise=texture(colorTexture,textureUv).r;noise=smoothstep(0.35,0.75,noise);return noise;}vec2 adjustRoadTexturePosition(vec2 position){float scale=0.8;return position*scale*0.5+0.5;}float getWindStrength(vec2 vect,sampler2D windTexture,float time){float windSpeed=0.2;float noise=texture(windTexture,(adjustRoadTexturePosition(vect)+time*windSpeed)).r;noise=smoothstep(0.3,0.8,noise);return noise;}float getRoadAwareGrassScale(sampler2D grassRoadTexture,vec2 position){float grassRoadScale=texture(grassRoadTexture,adjustRoadTexturePosition(position)).g;grassRoadScale=min(1.0,grassRoadScale);return grassRoadScale;}vec3 getRoadColor(vec2 colorPosition,vec3 grassColor,sampler2D roadTexture,vec3 lightColor,vec3 darkColor,sampler2D colorTexture){vec3 color=mix(lightColor,darkColor,getColorVariation(vec2(colorPosition.x+-0.35,colorPosition.y)*2.0-2.8,colorTexture));color=mix(grassColor,color,1.0-texture(roadTexture,adjustRoadTexturePosition(colorPosition)).g);return color;}vec2 displaceGrassInRadius(vec3 worldPos,vec2 mousePosition,float radius){vec2 dir=worldPos.xz-mousePosition;float dist=length(dir);vec2 normalizedDir=normalize(dir);float influence=1.0-smoothstep(0.0,radius,dist);return normalizedDir*influence;}vec3 getGrassColor(vec3 darkGreen,vec3 lightGreen,float grassColorVariation,float shadowStrength,vec3 shadowColor,float windStrength,vec3 lightColor,float lightIntensity,vec3 terrainNormal,vec3 lightPosition,vec3 grassPosition){vec3 color=mix(darkGreen,lightGreen,grassColorVariation);color=mix(color,shadowColor,shadowStrength*0.6);color=mix(color,shadowColor,smoothstep(0.0,1.0,abs(windStrength)));vec3 light=vec3(0.0);light+=directionalLight(lightColor,lightIntensity,terrainNormal,lightPosition,grassPosition,0.0);color*=light;return color;}
#include <common>
#include <lights_pars_begin>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
uniform float uTime;uniform vec3 uDarkGreen;uniform vec3 uLightGreen;uniform vec3 uLightDirt;uniform vec3 uDarkDirt;uniform vec3 uLightDirection;uniform float uBendingFactor;uniform float uBendingColorIntensity;uniform sampler2D uDisplacementMap;uniform sampler2D uColorTexture;uniform sampler2D uBendingTexture;uniform sampler2D uWindTexture;attribute vec3 tangent;varying float vShadowStrength;varying float vWindStrength;varying float vGrassColorVariation;varying vec2 vUv;varying vec2 vWorldUv;varying vec3 vNormal;varying vec3 vVirtualPosition;varying vec3 vWorldPosition;varying vec3 vWorldNormal;varying vec3 vWorldTangent;varying vec3 vWorldBitangent;varying vec4 vMvPosition;void main(){
#include <beginnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <worldpos_vertex>
#include <shadowmap_vertex>
vec4 myWorldPosition=modelMatrix*vec4(position,1.0);vec3 groundOrigin=myWorldPosition.xyz;vec2 newUv=myWorldPosition.xz;vWorldUv=newUv;vUv=uv;float elevation=getElevation(groundOrigin.xz,uDisplacementMap);vec3 groundNormal=normalize(normal);vec3 virtualyDisplacedGroundPosition=groundOrigin+elevation*groundNormal;float virtualTerrainSampling=0.1;vec3 positionA=groundOrigin+vec3(virtualTerrainSampling,0.0,0.0);vec3 positionB=groundOrigin+vec3(0.0,0.0,virtualTerrainSampling);positionA+=getElevation(positionA.xz,uDisplacementMap)*groundNormal;positionB+=getElevation(positionB.xz,uDisplacementMap)*groundNormal;vec3 toA=normalize(positionA-virtualyDisplacedGroundPosition);vec3 toB=normalize(positionB-virtualyDisplacedGroundPosition);vec3 crossProduct=cross(toB,toA);vec3 virtualTerrainNormal=normalize(crossProduct);float terrainInfluence=1.0;vec3 terrainAdjustedNormal=inclineVectorTowardSlerp(groundNormal,virtualTerrainNormal,terrainInfluence);vec4 bendData=texture(uBendingTexture,uv).rgba;float bendingIntensity=bendData.r*uBendingFactor;bendingIntensity=abs(bendingIntensity*uBendingColorIntensity);float windStrength=getWindStrength(myWorldPosition.xz,uWindTexture,uTime)*0.4;vVirtualPosition=virtualyDisplacedGroundPosition;vNormal=normal;vShadowStrength=computeShadow(uLightDirection,terrainAdjustedNormal);vWindStrength=windStrength+bendingIntensity;vGrassColorVariation=getColorVariation(newUv,uColorTexture);vWorldPosition=groundOrigin;vWorldNormal=normalize(normalMatrix*normal);vWorldTangent=normalize(normalMatrix*tangent);vWorldBitangent=normalize(cross(vWorldNormal,vWorldTangent));vec4 mvPosition=modelViewMatrix*myWorldPosition;vMvPosition=mvPosition;gl_Position=projectionMatrix*mvPosition;
#include <fog_vertex>
}`,JA=`vec3 directionalLight(vec3 lightColor,float lightIntensity,vec3 normal,vec3 lightPosition,vec3 viewPosition,float specularPower){vec3 lightDirection=normalize(lightPosition);float shading=max(dot(normalize(normal),lightDirection),0.0);vec3 ligthReflection=reflect(-lightDirection,normal);float specular=min(dot(ligthReflection,viewPosition),0.0);specular=specularPower==0.0 ? 1.0 : pow(specular,specularPower);return lightColor*lightIntensity*(shading+specular);}vec4 SGPP_coord_prepare(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 SGPP_coord_prepare(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 SGPP_permute(vec4 x){return fract(x*((34.0/289.0)*x+(1.0/289.0)))*289.0;}vec4 SGPP_resolve(vec4 x){return fract(x*(7.0/288.0));}vec4 SGPP_hash_2D(vec2 gridcell){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));return SGPP_resolve(SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww));}void SGPP_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));hash_0=SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww);hash_1=SGPP_resolve(SGPP_permute(hash_0));hash_0=SGPP_resolve(hash_0);}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell.zzzz));highz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell_inc1.zzzz));}void SGPP_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){vec3 coords0=gridcell.xyz-floor(gridcell.xyz*(1.0/289.0))*289.0;vec3 coords3=step(coords0,vec3(287.5))*(coords0+1.0);vec3 coords1=mix(coords0,coords3,v1_mask);vec3 coords2=mix(coords0,coords3,v2_mask);hash_2=SGPP_permute(SGPP_permute(SGPP_permute(vec4(coords0.x,coords1.x,coords2.x,coords3.x))+vec4(coords0.y,coords1.y,coords2.y,coords3.y))+vec4(coords0.z,coords1.z,coords2.z,coords3.z));hash_0=SGPP_resolve(hash_2);hash_1=SGPP_resolve(hash_2=SGPP_permute(hash_2));hash_2=SGPP_resolve(SGPP_permute(hash_2));}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash_2=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash_0=SGPP_resolve(lowz_hash_2=SGPP_permute(highz_hash_2+gridcell.zzzz));highz_hash_0=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2+gridcell_inc1.zzzz));lowz_hash_1=SGPP_resolve(lowz_hash_2=SGPP_permute(lowz_hash_2));highz_hash_1=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2));lowz_hash_2=SGPP_resolve(SGPP_permute(lowz_hash_2));highz_hash_2=SGPP_resolve(SGPP_permute(highz_hash_2));}vec4 BBS_coord_prepare(vec4 x){return x-floor(x*(1.0/61.0))*61.0;}vec3 BBS_coord_prepare(vec3 x){return x-floor(x*(1.0/61.0))*61.0;}vec4 BBS_permute(vec4 x){return fract(x*x*(1.0/61.0))*61.0;}vec4 BBS_permute_and_resolve(vec4 x){return fract(x*x*(1.0/61.0));}vec4 BBS_hash_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);return BBS_permute_and_resolve(p+hash_coord.yyww);}vec4 BBS_hash_hq_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);p=BBS_permute(p+hash_coord.yyww);return BBS_permute_and_resolve(p+hash_coord.xzxz);}void BBS_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const float DOMAIN=60.0;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 p=BBS_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy);p=BBS_permute(p+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=BBS_permute_and_resolve(p+gridcell.zzzz);highz_hash=BBS_permute_and_resolve(p+gridcell_inc1.zzzz);}vec4 FAST32_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const float SOMELARGEFLOAT=951.135664;vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec2 SOMELARGEFLOATS=vec2(951.135664,642.949883);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec3 SOMELARGEFLOATS=vec3(951.135664,642.949883,803.202459);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));hash_2=fract(P*(1.0/SOMELARGEFLOATS.z));}vec4 FAST32_hash_2D_Cell(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec4 SOMELARGEFLOATS=vec4(951.135664,642.949883,803.202459,986.973274);vec2 P=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xy;P*=P;return fract((P.x*P.y)*(1.0/SOMELARGEFLOATS.xyzw));}vec4 FAST32_hash_3D_Cell(vec3 gridcell){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;gridcell.xy+=OFFSET.xy;gridcell.xy*=gridcell.xy;return fract((gridcell.x*gridcell.y)*(1.0/(SOMELARGEFLOATS+gridcell.zzzz*ZINC)));}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;highz_hash.xy=vec2(1.0/(SOMELARGEFLOAT+vec2(gridcell.z,gridcell_inc1.z)*ZINC));lowz_hash=fract(P*highz_hash.xxxx);highz_hash=fract(P*highz_hash.yyyy);}void FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec3 lowz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));v1_mask=(v1_mask.z<0.5)? lowz_mods : highz_mods;v2_mask=(v2_mask.z<0.5)? lowz_mods : highz_mods;hash_0=fract(P*vec4(lowz_mods.x,v1_mask.x,v2_mask.x,highz_mods.x));hash_1=fract(P*vec4(lowz_mods.y,v1_mask.y,v2_mask.y,highz_mods.y));hash_2=fract(P*vec4(lowz_mods.z,v1_mask.z,v2_mask.z,highz_mods.z));}vec4 FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec2 V1z_V2z=vec2(v1_mask.z<0.5 ? gridcell.z : gridcell_inc1.z,v2_mask.z<0.5 ? gridcell.z : gridcell_inc1.z);vec4 mod_vals=vec4(1.0/(SOMELARGEFLOAT+vec4(gridcell.z,V1z_V2z,gridcell_inc1.z)*ZINC));return fract(P*mod_vals);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;vec3 lowz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));lowz_hash_0=fract(P*lowz_mod.xxxx);highz_hash_0=fract(P*highz_mod.xxxx);lowz_hash_1=fract(P*lowz_mod.yyyy);highz_hash_1=fract(P*highz_mod.yyyy);lowz_hash_2=fract(P*lowz_mod.zzzz);highz_hash_2=fract(P*highz_mod.zzzz);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 lowz_hash_3,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2,out vec4 highz_hash_3){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;lowz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell.zzzz*ZINC.xyzw));highz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell_inc1.zzzz*ZINC.xyzw));lowz_hash_0=fract(P*lowz_hash_3.xxxx);highz_hash_0=fract(P*highz_hash_3.xxxx);lowz_hash_1=fract(P*lowz_hash_3.yyyy);highz_hash_1=fract(P*highz_hash_3.yyyy);lowz_hash_2=fract(P*lowz_hash_3.zzzz);highz_hash_2=fract(P*highz_hash_3.zzzz);lowz_hash_3=fract(P*lowz_hash_3.wwww);highz_hash_3=fract(P*highz_hash_3.wwww);}vec4 FAST32_2_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(403.839172,377.242706);const float DOMAIN=69.0;const float SOMELARGEFLOAT=32745.708984;const vec2 SCALE=vec2(2.009842,1.372549);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P=(P*SCALE.xyxy)+OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_3D(vec3 gridcell,out vec4 z0_hash,out vec4 z1_hash){const vec3 OFFSET=vec3(55.882355,63.167774,52.941177);const float DOMAIN=69.0;const float SOMELARGEFLOAT=69412.070313;const vec3 SCALE=vec3(0.235142,0.205890,0.216449);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);z0_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell.zzzz*(1.0/SOMELARGEFLOAT));z1_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell_inc1.zzzz*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash,out vec4 z1w0_hash,out vec4 z0w1_hash,out vec4 z1w1_hash){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const float SOMELARGEFLOAT=47165.636719;const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww)*(1.0/SOMELARGEFLOAT);z0w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx);z1w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy);z0w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz);z1w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww);}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash_0,out vec4 z0w0_hash_1,out vec4 z0w0_hash_2,out vec4 z0w0_hash_3,out vec4 z1w0_hash_0,out vec4 z1w0_hash_1,out vec4 z1w0_hash_2,out vec4 z1w0_hash_3,out vec4 z0w1_hash_0,out vec4 z0w1_hash_1,out vec4 z0w1_hash_2,out vec4 z0w1_hash_3,out vec4 z1w1_hash_0,out vec4 z1w1_hash_1,out vec4 z1w1_hash_2,out vec4 z1w1_hash_3){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(56974.746094,47165.636719,55049.667969,49901.273438);const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww);vec4 hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx;z0w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy;z1w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz;z0w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww;z1w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));}float Interpolation_C1(float x){return x*x*(3.0-2.0*x);}vec2 Interpolation_C1(vec2 x){return x*x*(3.0-2.0*x);}vec3 Interpolation_C1(vec3 x){return x*x*(3.0-2.0*x);}vec4 Interpolation_C1(vec4 x){return x*x*(3.0-2.0*x);}float Interpolation_C2(float x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec2 Interpolation_C2(vec2 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec3 Interpolation_C2(vec3 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2(vec4 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2_InterpAndDeriv(vec2 x){return x.xyxy*x.xyxy*(x.xyxy*(x.xyxy*(x.xyxy*vec2(6.0,0.0).xxyy+vec2(-15.0,30.0).xxyy)+vec2(10.0,-60.0).xxyy)+vec2(0.0,30.0).xxyy);}vec3 Interpolation_C2_Deriv(vec3 x){return x*x*(x*(x*30.0-60.0)+30.0);}float Interpolation_C2_Fast(float x){float x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec2 Interpolation_C2_Fast(vec2 x){vec2 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec3 Interpolation_C2_Fast(vec3 x){vec3 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec4 Interpolation_C2_Fast(vec4 x){vec4 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}float Interpolation_C3(float x){float xsq=x*x;float xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec2 Interpolation_C3(vec2 x){vec2 xsq=x*x;vec2 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec3 Interpolation_C3(vec3 x){vec3 xsq=x*x;vec3 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec4 Interpolation_C3(vec4 x){vec4 xsq=x*x;vec4 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}float Falloff_Xsq_C1(float xsq){xsq=1.0-xsq;return xsq*xsq;}float Falloff_Xsq_C2(float xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}vec4 Falloff_Xsq_C2(vec4 xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}float Value2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec2 blend=Interpolation_C2(Pf);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(hash,blend2.zxzx*blend2.wwyy);}float Value3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Value4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 z0w0_hash;vec4 z1w0_hash;vec4 z0w1_hash;vec4 z1w1_hash;FAST32_2_hash_4D(Pi,z0w0_hash,z1w0_hash,z0w1_hash,z1w1_hash);vec4 blend=Interpolation_C2(Pf);vec4 res0=z0w0_hash+(z0w1_hash-z0w0_hash)*blend.wwww;vec4 res1=z1w0_hash+(z1w1_hash-z1w0_hash)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0-blend.xy);return dot(res0,blend.zxzx*blend.wwyy);}float Perlin2D(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);
#if 1
vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);
#if 1
grad_results*=1.4142135623730950488016887242097;vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#else
grad_results*=2.3703703703703703703703703703704;vec4 vecs_len_sq=Pf_Pfmin1*Pf_Pfmin1;vecs_len_sq=vecs_len_sq.xzxz+vecs_len_sq.yyww;return dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq)),grad_results);
#endif
#else
vec4 hash=FAST32_hash_2D(Pi);hash-=0.5;vec4 grad_results=Pf_Pfmin1.xzxz*sign(hash)+Pf_Pfmin1.yyww*sign(abs(hash)-0.25);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#endif
}float Perlin3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;
#if 1
vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);
#if 1
vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);final*=1.1547005383792515290182975610039;return final;
#else
Pf*=Pf;Pf_min1*=Pf_min1;vec4 vecs_len_sq=vec4(Pf.x,Pf_min1.x,Pf.x,Pf_min1.x)+vec4(Pf.yy,Pf_min1.yy);float final=dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf.zzzz)),grad_results_0)+dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf_min1.zzzz)),grad_results_1);final*=2.3703703703703703703703703703704;return final;
#endif
#else
vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);hash_lowz-=0.5;vec4 grad_results_0_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_lowz);hash_lowz=abs(hash_lowz)-0.25;vec4 grad_results_0_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_lowz);vec4 grad_results_0_2=Pf.zzzz*sign(abs(hash_lowz)-0.125);vec4 grad_results_0=grad_results_0_0+grad_results_0_1+grad_results_0_2;hash_highz-=0.5;vec4 grad_results_1_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_highz);hash_highz=abs(hash_highz)-0.25;vec4 grad_results_1_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_highz);vec4 grad_results_1_2=Pf_min1.zzzz*sign(abs(hash_highz)-0.125);vec4 grad_results_1=grad_results_1_0+grad_results_1_1+grad_results_1_2;vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy)*(2.0/3.0);
#endif
}float Perlin4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 Pf_min1=Pf-1.0;vec4 lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3;vec4 highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3;vec4 lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3;vec4 highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3;FAST32_2_hash_4D(Pi,lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3,highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3,lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3,highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3);lowz_loww_hash_0-=0.49999;lowz_loww_hash_1-=0.49999;lowz_loww_hash_2-=0.49999;lowz_loww_hash_3-=0.49999;highz_loww_hash_0-=0.49999;highz_loww_hash_1-=0.49999;highz_loww_hash_2-=0.49999;highz_loww_hash_3-=0.49999;lowz_highw_hash_0-=0.49999;lowz_highw_hash_1-=0.49999;lowz_highw_hash_2-=0.49999;lowz_highw_hash_3-=0.49999;highz_highw_hash_0-=0.49999;highz_highw_hash_1-=0.49999;highz_highw_hash_2-=0.49999;highz_highw_hash_3-=0.49999;vec4 grad_results_lowz_loww=inversesqrt(lowz_loww_hash_0*lowz_loww_hash_0+lowz_loww_hash_1*lowz_loww_hash_1+lowz_loww_hash_2*lowz_loww_hash_2+lowz_loww_hash_3*lowz_loww_hash_3);grad_results_lowz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_loww_hash_1+Pf.zzzz*lowz_loww_hash_2+Pf.wwww*lowz_loww_hash_3);vec4 grad_results_highz_loww=inversesqrt(highz_loww_hash_0*highz_loww_hash_0+highz_loww_hash_1*highz_loww_hash_1+highz_loww_hash_2*highz_loww_hash_2+highz_loww_hash_3*highz_loww_hash_3);grad_results_highz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_loww_hash_1+Pf_min1.zzzz*highz_loww_hash_2+Pf.wwww*highz_loww_hash_3);vec4 grad_results_lowz_highw=inversesqrt(lowz_highw_hash_0*lowz_highw_hash_0+lowz_highw_hash_1*lowz_highw_hash_1+lowz_highw_hash_2*lowz_highw_hash_2+lowz_highw_hash_3*lowz_highw_hash_3);grad_results_lowz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_highw_hash_1+Pf.zzzz*lowz_highw_hash_2+Pf_min1.wwww*lowz_highw_hash_3);vec4 grad_results_highz_highw=inversesqrt(highz_highw_hash_0*highz_highw_hash_0+highz_highw_hash_1*highz_highw_hash_1+highz_highw_hash_2*highz_highw_hash_2+highz_highw_hash_3*highz_highw_hash_3);grad_results_highz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_highw_hash_1+Pf_min1.zzzz*highz_highw_hash_2+Pf_min1.wwww*highz_highw_hash_3);vec4 blend=Interpolation_C2(Pf);vec4 res0=grad_results_lowz_loww+(grad_results_lowz_highw-grad_results_lowz_loww)*blend.wwww;vec4 res1=grad_results_highz_loww+(grad_results_highz_highw-grad_results_highz_loww)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0)-blend.xy;return dot(res0,blend.zxzx*blend.wwyy);}float ValuePerlin2D(vec2 P,float blend_val){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_value,hash_x,hash_y;FAST32_hash_2D(Pi,hash_value,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results*=1.4142135623730950488016887242097;grad_results=mix((hash_value*2.0-1.0),grad_results,blend_val);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);}float ValuePerlin3D(vec3 P,float blend_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0*=1.1547005383792515290182975610039;grad_results_1*=1.1547005383792515290182975610039;grad_results_0=mix((hash_value0*2.0-1.0),grad_results_0,blend_val);grad_results_1=mix((hash_value1*2.0-1.0),grad_results_1,blend_val);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Cubist2D(vec2 P,vec2 range_clamp){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y,hash_value;FAST32_hash_2D(Pi,hash_x,hash_y,hash_value);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results=(hash_value-0.5)*(1.0/grad_results);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));float final=dot(grad_results,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}float Cubist3D(vec3 P,vec2 range_clamp){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0=(hash_value0-0.5)*(1.0/grad_results_0);grad_results_1=(hash_value1-0.5)*(1.0/grad_results_1);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}vec4 Cellular_weight_samples(vec4 samples){samples=samples*2.0-1.0;return(samples*samples*samples)-sign(samples);}float Cellular2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);
#if 1
const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x=hash_x*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y=hash_y*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;d.xy=min(d.xy,d.zw);return min(d.x,d.y)*(1.0/1.125);}float Cellular3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);
#if 1
const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x0=hash_x0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y0=hash_y0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_x1=hash_x1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y1=hash_y1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_z0=hash_z0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW);hash_z1=hash_z1*JITTER_WINDOW*2.0+vec4(1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;d1=min(d1,d2);d1.xy=min(d1.xy,d1.wz);return min(d1.x,d1.y)*(9.0/12.0);}/*float SparseConvolution2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;const float RADIUS=1.0-JITTER_WINDOW;d*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d,vec4(1.0))),vec4(1.0));}float SparseConvolution3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;const float RADIUS=(1.0-JITTER_WINDOW);d1*=((1.0/RADIUS)*(1.0/RADIUS));d2*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d1,vec4(1.0)))+Falloff_Xsq_C2(min(d2,vec4(1.0))),vec4(1.0));}*/float PolkaDot2D(vec2 P,float radius_low,float radius_high){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.z*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xy*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float PolkaDot3D(vec3 P,float radius_low,float radius_high){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash=FAST32_hash_3D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.w*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xyz*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float Stars2D(vec2 P,float probability_threshold,float max_dimness,float two_over_radius){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float VALUE=1.0-max_dimness*hash.z;Pf*=two_over_radius;Pf-=(two_over_radius-1.0);Pf+=hash.xy*(two_over_radius-2.0);return(hash.w<probability_threshold)?(Falloff_Xsq_C1(min(dot(Pf,Pf),1.0))*VALUE): 0.0;}float SimplexPerlin2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw));const float FINAL_NORMALIZATION=99.204334582718712976990005025589;vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);m=m*m;return dot(m*m,grad_results)*FINAL_NORMALIZATION;}float SimplexPolkaDot2D(vec2 P,float radius,float max_dimness){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.4494897427831780981972840747059;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec2 v0=(Pi-dot(Pi,vec2(UNSKEWFACTOR))-P);vec4 v0123_x=vec4(0.0,SIMPLEX_POINTS.xyz)+v0.x;vec4 v0123_y=vec4(0.0,SIMPLEX_POINTS.yxz)+v0.y;vec4 hash=FAST32_hash_2D(Pi);radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v0123_x*=radius;v0123_y*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v0123_x*v0123_x+v0123_y*v0123_y));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float SimplexCellular2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HEIGHT=1.4142135623730950488016887242097;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR)*INV_SIMPLEX_TRI_HEIGHT;P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=(0.10566243270259355887271280487451*INV_SIMPLEX_TRI_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;vec2 p0=((Pi-dot(Pi,vec2(UNSKEWFACTOR)))-P)*INV_SIMPLEX_TRI_HEIGHT;hash_x+=p0.xxxx;hash_y+=p0.yyyy;hash_x.yzw+=SIMPLEX_POINTS.xyz;hash_y.yzw+=SIMPLEX_POINTS.yxz;vec4 distsq=hash_x*hash_x+hash_y*hash_y;vec2 tmp=min(distsq.xy,distsq.zw);return min(tmp.x,tmp.y);}void Simplex3D_GetCornerVectors(vec3 P,out vec3 Pi,out vec3 Pi_1,out vec3 Pi_2,out vec4 v1234_x,out vec4 v1234_y,out vec4 v1234_z){const float SKEWFACTOR=1.0/3.0;const float UNSKEWFACTOR=1.0/6.0;const float SIMPLEX_CORNER_POS=0.5;const float SIMPLEX_PYRAMID_HEIGHT=0.70710678118654752440084436210485;P*=SIMPLEX_PYRAMID_HEIGHT;Pi=floor(P+dot(P,vec3(SKEWFACTOR)));vec3 x0=P-Pi+dot(Pi,vec3(UNSKEWFACTOR));vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;Pi_1=min(g.xyz,l.zxy);Pi_2=max(g.xyz,l.zxy);vec3 x1=x0-Pi_1+UNSKEWFACTOR;vec3 x2=x0-Pi_2+SKEWFACTOR;vec3 x3=x0-SIMPLEX_CORNER_POS;v1234_x=vec4(x0.x,x1.x,x2.x,x3.x);v1234_y=vec4(x0.y,x1.y,x2.y,x3.y);v1234_z=vec4(x0.z,x1.z,x2.z,x3.z);}vec4 Simplex3D_GetSurfletWeights(vec4 v1234_x,vec4 v1234_y,vec4 v1234_z){vec4 surflet_weights=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;surflet_weights=max(0.5-surflet_weights,0.0);return surflet_weights*surflet_weights*surflet_weights;}float SimplexPerlin3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 grad_results=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2)*(hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return dot(Simplex3D_GetSurfletWeights(v1234_x,v1234_y,v1234_z),grad_results)*FINAL_NORMALIZATION;}float SimplexCellular3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_x;vec4 hash_y;vec4 hash_z;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_x,hash_y,hash_z);const float INV_SIMPLEX_PYRAMID_HEIGHT=1.4142135623730950488016887242097;const float JITTER_WINDOW=(0.0597865779345250670558198111*INV_SIMPLEX_PYRAMID_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;hash_z=Cellular_weight_samples(hash_z)*JITTER_WINDOW;v1234_x*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_y*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_z*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_x+=hash_x;v1234_y+=hash_y;v1234_z+=hash_z;vec4 distsq=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;return min(min(distsq.x,distsq.y),min(distsq.z,distsq.w));}float SimplexPolkaDot3D(vec3 P,float radius,float max_dimness){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash=FAST32_hash_3D(Pi,Pi_1,Pi_2);const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.3094010767585030580365951220078;radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v1234_x*=radius;v1234_y*=radius;v1234_z*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float QuinticHermite(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,x,0.0));}vec4 QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 egrad0,vec4 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;}vec4 QuinticHermite(float x,vec2 igrad0,vec2 igrad1,vec2 egrad0,vec2 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return vec4(egrad1,igrad0)*vec4(h123.zz,1.0,1.0)+vec4(egrad0,h123.xx)*vec4(vec2(h123.y+x),(igrad1-igrad0));}void QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}void QuinticHermite(float x,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}float QuinticHermiteDeriv(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(30.0,-15.0,-15.0);const vec3 C1=vec3(-60.0,32.0,28.0);const vec3 C2=vec3(30.0,-18.0,-12.0);vec3 h123=(((C1+C0*x)*x)+C2)*(x*x);return dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,1.0,0.0));}float Hermite2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float Hermite3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float ValueHermite2D(vec2 P,float value_scale,float gradient_scale,float normalization_val){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_value,hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_value,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999)*gradient_scale;hash_grady=(hash_grady-0.49999)*gradient_scale;hash_value=(hash_value-0.5)*value_scale;vec4 qh_results=QuinticHermite(Pf.y,vec4(hash_value.xy,hash_gradx.xy),vec4(hash_value.zw,hash_gradx.zw),vec4(hash_grady.xy,0.0,0.0),vec4(hash_grady.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}float ValueHermite3D(vec3 P,float value_scale,float gradient_scale,float normalization_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999)*gradient_scale;hash_grady0=(hash_grady0-0.49999)*gradient_scale;hash_gradz0=(hash_gradz0-0.49999)*gradient_scale;hash_gradx1=(hash_gradx1-0.49999)*gradient_scale;hash_grady1=(hash_grady1-0.49999)*gradient_scale;hash_gradz1=(hash_gradz1-0.49999)*gradient_scale;hash_value0=(hash_value0-0.5)*value_scale;hash_value1=(hash_value1-0.5)*value_scale;vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_value0,hash_value1,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}vec3 Value2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec4 blend=Interpolation_C2_InterpAndDeriv(Pf);vec4 res0=mix(hash.xyxz,hash.zwyw,blend.yyxx);return vec3(res0.x,0.0,0.0)+(res0.yyw-res0.xxz)*blend.xzw;}vec4 Value3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 res1=mix(res0.xyxz,res0.zwyw,blend.yyxx);vec4 res3=mix(vec4(hash_lowz.xy,hash_highz.xy),vec4(hash_lowz.zw,hash_highz.zw),blend.y);vec2 res4=mix(res3.xz,res3.yw,blend.x);return vec4(res1.x,0.0,0.0,0.0)+(vec4(res1.yyw,res4.y)-vec4(res1.xxz,res4.x))*vec4(blend.x,Interpolation_C2_Deriv(Pf));}vec3 Perlin2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 dotval=(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);vec3 dotval0_grad0=vec3(dotval.x,grad_x.x,grad_y.x);vec3 dotval1_grad1=vec3(dotval.y,grad_x.y,grad_y.y);vec3 dotval2_grad2=vec3(dotval.z,grad_x.z,grad_y.z);vec3 dotval3_grad3=vec3(dotval.w,grad_x.w,grad_y.w);vec3 k0_gk0=dotval1_grad1-dotval0_grad0;vec3 k1_gk1=dotval2_grad2-dotval0_grad0;vec3 k2_gk2=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 blend=Interpolation_C2_InterpAndDeriv(Pf_Pfmin1.xy);vec3 results=dotval0_grad0+blend.x*k0_gk0+blend.y*(k1_gk1+blend.x*k2_gk2);results.yz+=blend.zw*(vec2(k0_gk0.x,k1_gk1.x)+blend.yx*k2_gk2.xx);return results*1.4142135623730950488016887242097;}vec4 Perlin3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 dotval_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 dotval_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec4 dotval0_grad0=vec4(dotval_0.x,grad_x0.x,grad_y0.x,grad_z0.x);vec4 dotval1_grad1=vec4(dotval_0.y,grad_x0.y,grad_y0.y,grad_z0.y);vec4 dotval2_grad2=vec4(dotval_0.z,grad_x0.z,grad_y0.z,grad_z0.z);vec4 dotval3_grad3=vec4(dotval_0.w,grad_x0.w,grad_y0.w,grad_z0.w);vec4 dotval4_grad4=vec4(dotval_1.x,grad_x1.x,grad_y1.x,grad_z1.x);vec4 dotval5_grad5=vec4(dotval_1.y,grad_x1.y,grad_y1.y,grad_z1.y);vec4 dotval6_grad6=vec4(dotval_1.z,grad_x1.z,grad_y1.z,grad_z1.z);vec4 dotval7_grad7=vec4(dotval_1.w,grad_x1.w,grad_y1.w,grad_z1.w);vec4 k0_gk0=dotval1_grad1-dotval0_grad0;vec4 k1_gk1=dotval2_grad2-dotval0_grad0;vec4 k2_gk2=dotval4_grad4-dotval0_grad0;vec4 k3_gk3=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 k4_gk4=dotval5_grad5-dotval4_grad4-k0_gk0;vec4 k5_gk5=dotval6_grad6-dotval4_grad4-k1_gk1;vec4 k6_gk6=(dotval7_grad7-dotval6_grad6)-(dotval5_grad5-dotval4_grad4)-k3_gk3;vec3 blend=Interpolation_C2(Pf);vec3 blendDeriv=Interpolation_C2_Deriv(Pf);float u=blend.x;float v=blend.y;float w=blend.z;vec4 result=dotval0_grad0+u*(k0_gk0+v*k3_gk3)+v*(k1_gk1+w*k5_gk5)+w*(k2_gk2+u*(k4_gk4+v*k6_gk6));result.y+=dot(vec4(k0_gk0.x,k3_gk3.x*v,vec2(k4_gk4.x,k6_gk6.x*v)*w),vec4(blendDeriv.x));result.z+=dot(vec4(k1_gk1.x,k3_gk3.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*w),vec4(blendDeriv.y));result.w+=dot(vec4(k2_gk2.x,k4_gk4.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*v),vec4(blendDeriv.z));result*=1.1547005383792515290182975610039;return result;}vec3 PerlinSurflet2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 grad_results=grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww;vec4 m=Pf_Pfmin1*Pf_Pfmin1;m=m.xzxz+m.yyww;m=max(1.0-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,Pf_Pfmin1.xzxz)+dot(m3,grad_x);float yderiv=dot(temp,Pf_Pfmin1.yyww)+dot(m3,grad_y);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec3(dot(m3,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 PerlinSurflet3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 grad_results_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 grad_results_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec3 Pf_sq=Pf*Pf;vec3 Pf_min1_sq=Pf_min1*Pf_min1;vec4 vecs_len_sq=vec2(Pf_sq.x,Pf_min1_sq.x).xyxy+vec2(Pf_sq.y,Pf_min1_sq.y).xxyy;vec4 m_0=vecs_len_sq+Pf_sq.zzzz;m_0=max(1.0-m_0,0.0);vec4 m2_0=m_0*m_0;vec4 m3_0=m_0*m2_0;vec4 m_1=vecs_len_sq+Pf_min1_sq.zzzz;m_1=max(1.0-m_1,0.0);vec4 m2_1=m_1*m_1;vec4 m3_1=m_1*m2_1;vec4 temp_0=-6.0*m2_0*grad_results_0;float xderiv_0=dot(temp_0,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_0,grad_x0);float yderiv_0=dot(temp_0,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_0,grad_y0);float zderiv_0=dot(temp_0,Pf.zzzz)+dot(m3_0,grad_z0);vec4 temp_1=-6.0*m2_1*grad_results_1;float xderiv_1=dot(temp_1,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_1,grad_x1);float yderiv_1=dot(temp_1,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_1,grad_y1);float zderiv_1=dot(temp_1,Pf_min1.zzzz)+dot(m3_1,grad_z1);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec4(dot(m3_0,grad_results_0)+dot(m3_1,grad_results_1),vec3(xderiv_0,yderiv_0,zderiv_0)+vec3(xderiv_1,yderiv_1,zderiv_1))*FINAL_NORMALIZATION;}vec3 Cellular2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;vec3 t1=d.x<d.y ? vec3(d.x,dx.x,dy.x): vec3(d.y,dx.y,dy.y);vec3 t2=d.z<d.w ? vec3(d.z,dx.z,dy.z): vec3(d.w,dx.w,dy.w);return(t1.x<t2.x ? t1 : t2)*vec3(1.0,2.0,2.0)*(1.0/1.125);}vec4 Cellular3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;vec4 r1=d1.x<d1.y ? vec4(d1.x,dx1.x,dy1.x,dz1.x): vec4(d1.y,dx1.y,dy1.y,dz1.y);vec4 r2=d1.z<d1.w ? vec4(d1.z,dx1.z,dy1.z,dz1.z): vec4(d1.w,dx1.w,dy1.w,dz1.w);vec4 r3=d2.x<d2.y ? vec4(d2.x,dx2.x,dy2.x,dz2.x): vec4(d2.y,dx2.y,dy2.y,dz2.y);vec4 r4=d2.z<d2.w ? vec4(d2.z,dx2.z,dy2.z,dz2.z): vec4(d2.w,dx2.w,dy2.w,dz2.w);vec4 t1=r1.x<r2.x ? r1 : r2;vec4 t2=r3.x<r4.x ? r3 : r4;return(t1.x<t2.x ? t1 : t2)*vec4(1.0,vec3(2.0))*(9.0/12.0);}vec3 SimplexPerlin2D_Deriv(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec3 grad_results=grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw);vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);vec3 m2=m*m;vec3 m4=m2*m2;vec3 temp=8.0*m2*m*grad_results;float xderiv=dot(temp,vec3(v0.x,v12.xz))-dot(m4,grad_x);float yderiv=dot(temp,vec3(v0.y,v12.yw))-dot(m4,grad_y);const float FINAL_NORMALIZATION=99.204334582718712976990005025589;return vec3(dot(m4,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 SimplexPerlin3D_Deriv(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 norm=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2);hash_0*=norm;hash_1*=norm;hash_2*=norm;vec4 grad_results=hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z;vec4 m=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;m=max(0.5-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,v1234_x)+dot(m3,hash_0);float yderiv=dot(temp,v1234_y)+dot(m3,hash_1);float zderiv=dot(temp,v1234_z)+dot(m3,hash_2);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return vec4(dot(m3,grad_results),xderiv,yderiv,zderiv)*FINAL_NORMALIZATION;}vec3 Hermite2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results_x=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);vec4 qh_results_y=QuinticHermite(Pf.x,hash_grady.xz,hash_grady.yw,hash_gradx.xz,hash_gradx.yw);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);return vec3(finalpos,deriv_x,deriv_y)*FINAL_NORM_VAL;}vec4 Hermite3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results_z,igrad_results_x_z,igrad_results_y_z;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results_z,igrad_results_x_z,igrad_results_y_z);vec4 ival_results_y,igrad_results_x_y,igrad_results_z_y;QuinticHermite(Pf.y,vec4(hash_gradx0.xy,hash_gradx1.xy),vec4(hash_gradx0.zw,hash_gradx1.zw),vec4(hash_gradz0.xy,hash_gradz1.xy),vec4(hash_gradz0.zw,hash_gradz1.zw),vec4(hash_grady0.xy,hash_grady1.xy),vec4(hash_grady0.zw,hash_grady1.zw),ival_results_y,igrad_results_x_y,igrad_results_z_y);vec4 qh_results_x=QuinticHermite(Pf.y,vec4(ival_results_z.xy,igrad_results_x_z.xy),vec4(ival_results_z.zw,igrad_results_x_z.zw),vec4(igrad_results_y_z.xy,0.0,0.0),vec4(igrad_results_y_z.zw,0.0,0.0));vec4 qh_results_y=QuinticHermite(Pf.x,vec4(ival_results_z.xz,igrad_results_y_z.xz),vec4(ival_results_z.yw,igrad_results_y_z.yw),vec4(igrad_results_x_z.xz,0.0,0.0),vec4(igrad_results_x_z.yw,0.0,0.0));vec4 qh_results_z=QuinticHermite(Pf.x,vec4(ival_results_y.xz,igrad_results_z_y.xz),vec4(ival_results_y.yw,igrad_results_z_y.yw),vec4(igrad_results_x_y.xz,0.0,0.0),vec4(igrad_results_x_y.yw,0.0,0.0));float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);float deriv_z=QuinticHermiteDeriv(Pf.z,qh_results_z.x,qh_results_z.y,qh_results_z.z,qh_results_z.w);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);return vec4(finalpos,deriv_x,deriv_y,deriv_z)*FINAL_NORM_VAL;}vec3 inclineVectorTowardSlerp(vec3 sourceVector,vec3 targetVector,float percentage){vec3 source=normalize(sourceVector);vec3 target=normalize(targetVector);float dotProduct=clamp(dot(source,target),-1.0,1.0);float angle=acos(dotProduct);if(abs(dotProduct+1.0)<0.001){return normalize(cross(source,vec3(1.0,0.0,0.0)));}if(angle<0.001)return sourceVector;vec3 result=(sin((1.0-percentage)*angle)*source+sin(percentage*angle)*target)/sin(angle);return result;}mat3 createAlignmentMatrix(vec3 from,vec3 to){vec3 a=normalize(from);vec3 b=normalize(to);if(dot(a,vec3(0.0,1.0,0.0))<0.0){b.y*=-1.0;}float cosAngle=dot(a,b);if(cosAngle>0.9999){return mat3(1.0);}if(cosAngle<-0.9999){vec3 perp=abs(a.x)<0.9 ? vec3(1.0,0.0,0.0): vec3(0.0,1.0,0.0);vec3 axis=normalize(cross(a,perp));return mat3(1.0-2.0*(axis.y*axis.y+axis.z*axis.z),2.0*(axis.x*axis.y),2.0*(axis.x*axis.z),2.0*(axis.x*axis.y),1.0-2.0*(axis.x*axis.x+axis.z*axis.z),2.0*(axis.y*axis.z),2.0*(axis.x*axis.z),2.0*(axis.y*axis.z),1.0-2.0*(axis.x*axis.x+axis.y*axis.y));}vec3 v=cross(a,b);float s=length(v);float c=cosAngle;mat3 vx=mat3(0.0,-v.z,v.y,v.z,0.0,-v.x,-v.y,v.x,0.0);mat3 identity=mat3(1.0);return identity+vx+(vx*vx)*((1.0-c)/(s*s));}float computeShadow(vec3 lightPosition,vec3 terrainNormal){return 1.0-max(dot(normalize(terrainNormal),normalize(lightPosition)),0.0);}float getElevation(vec2 vect,sampler2D displacementMap){return(texture(displacementMap,vec2(vect.x,vect.y)*0.3).r)*0.15;}float getColorVariation(vec2 groundPosition,sampler2D colorTexture){vec2 textureUv=groundPosition.yx*0.11+0.3;float noise=texture(colorTexture,textureUv).r;noise=smoothstep(0.35,0.75,noise);return noise;}vec2 adjustRoadTexturePosition(vec2 position){float scale=0.8;return position*scale*0.5+0.5;}float getWindStrength(vec2 vect,sampler2D windTexture,float time){float windSpeed=0.2;float noise=texture(windTexture,(adjustRoadTexturePosition(vect)+time*windSpeed)).r;noise=smoothstep(0.3,0.8,noise);return noise;}float getRoadAwareGrassScale(sampler2D grassRoadTexture,vec2 position){float grassRoadScale=texture(grassRoadTexture,adjustRoadTexturePosition(position)).g;grassRoadScale=min(1.0,grassRoadScale);return grassRoadScale;}vec3 getRoadColor(vec2 colorPosition,vec3 grassColor,sampler2D roadTexture,vec3 lightColor,vec3 darkColor,sampler2D colorTexture){vec3 color=mix(lightColor,darkColor,getColorVariation(vec2(colorPosition.x+-0.35,colorPosition.y)*2.0-2.8,colorTexture));color=mix(grassColor,color,1.0-texture(roadTexture,adjustRoadTexturePosition(colorPosition)).g);return color;}vec2 displaceGrassInRadius(vec3 worldPos,vec2 mousePosition,float radius){vec2 dir=worldPos.xz-mousePosition;float dist=length(dir);vec2 normalizedDir=normalize(dir);float influence=1.0-smoothstep(0.0,radius,dist);return normalizedDir*influence;}vec3 getGrassColor(vec3 darkGreen,vec3 lightGreen,float grassColorVariation,float shadowStrength,vec3 shadowColor,float windStrength,vec3 lightColor,float lightIntensity,vec3 terrainNormal,vec3 lightPosition,vec3 grassPosition){vec3 color=mix(darkGreen,lightGreen,grassColorVariation);color=mix(color,shadowColor,shadowStrength*0.6);color=mix(color,shadowColor,smoothstep(0.0,1.0,abs(windStrength)));vec3 light=vec3(0.0);light+=directionalLight(lightColor,lightIntensity,terrainNormal,lightPosition,grassPosition,0.0);color*=light;return color;}
#include <common>
#include <packing>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <fog_pars_fragment>
uniform float uTime;uniform vec3 uDarkGreen;uniform vec3 uLightGreen;uniform vec3 uLightDirt;uniform vec3 uDarkDirt;uniform vec3 uShadowColor;uniform vec3 uLightDirection;uniform vec2 uTextureScale;uniform sampler2D uBendingTexture;uniform float uBendingFactor;uniform float uBendingColorIntensity;uniform sampler2D uColorTexture;uniform sampler2D uDisplacementMap;uniform sampler2D uWindTexture;varying float vGrassElevation;varying vec2 vUv;varying vec2 vWorldUv;varying vec3 vNormal;varying vec3 vVirtualPosition;varying float vShadowStrength;varying float vGrassColorVariation;varying vec3 vGrassColor;varying float vWindStrength;varying vec3 vWorldPosition;varying vec3 vWorldNormal;varying vec3 vWorldTangent;varying vec3 vWorldBitangent;varying vec4 vMvPosition;vec3 uvToWorldPosition(vec2 targetUv){vec2 uvOffset=targetUv-vUv;vec3 worldOffset=uvOffset.x*vWorldTangent*uTextureScale.x+uvOffset.y*vWorldBitangent*uTextureScale.y;return vWorldPosition+worldOffset;}void main(){vec3 uvWorldPosition=uvToWorldPosition(vUv);float colorVariation=getColorVariation(uvWorldPosition.xz,uColorTexture);float elevation=getElevation(uvWorldPosition.xz,uDisplacementMap);vec3 groundNormal=normalize(vNormal);vec3 virtualyDisplacedGroundPosition=uvWorldPosition+elevation*groundNormal;float virtualTerrainSampling=0.1;vec3 positionA=uvWorldPosition+vec3(virtualTerrainSampling,0.0,0.0);vec3 positionB=uvWorldPosition+vec3(0.0,0.0,virtualTerrainSampling);positionA+=getElevation(positionA.xz,uDisplacementMap)*groundNormal;positionB+=getElevation(positionB.xz,uDisplacementMap)*groundNormal;vec3 toA=normalize(positionA-virtualyDisplacedGroundPosition);vec3 toB=normalize(positionB-virtualyDisplacedGroundPosition);vec3 crossProduct=cross(toB,toA);vec3 virtualTerrainNormal=normalize(crossProduct);float terrainInfluence=1.0;vec3 terrainAdjustedNormal=inclineVectorTowardSlerp(groundNormal,virtualTerrainNormal,terrainInfluence);vec4 bendData=texture(uBendingTexture,vUv).rgba;float bendingIntensity=bendData.r*uBendingFactor;bendingIntensity=abs(bendingIntensity*uBendingColorIntensity);float windStrength=getWindStrength(uvWorldPosition.xz,uWindTexture,uTime)*0.4;windStrength+=bendingIntensity;float shadowStrength=computeShadow(uLightDirection,normalize(terrainAdjustedNormal));vec3 color=getGrassColor(uDarkGreen,uLightGreen,colorVariation,shadowStrength,uShadowColor,windStrength,vec3(1.0),1.0,terrainAdjustedNormal,uLightDirection,vVirtualPosition);DirectionalLightShadow directionalShadow=directionalLightShadows[0];float shadow=getShadow(directionalShadowMap[0],directionalShadow.shadowMapSize,directionalShadow.shadowIntensity,directionalShadow.shadowBias,directionalShadow.shadowRadius,vDirectionalShadowCoord[0]);vec3 totalLight=vec3(0.8)*color;vec3 normal=normalize(virtualTerrainNormal);
#if NUM_POINT_LIGHTS > 0
for(int i=0;i<NUM_POINT_LIGHTS;i++){vec3 L=normalize(pointLights[i].position-vMvPosition.xyz);float dist=length(pointLights[i].position-vMvPosition.xyz);float attenuation=1.0;if(pointLights[i].distance>0.0&&pointLights[i].decay>0.0){attenuation=pow(clamp(1.0-dist/pointLights[i].distance,0.0,1.0),pointLights[i].decay);}else{attenuation=1.0/(dist*dist);}float NdotL=max(dot(normal,L),0.0);totalLight+=pointLights[i].color*attenuation*0.04;}
#endif
#if NUM_DIR_LIGHTS > 0
for(int i=0;i<NUM_DIR_LIGHTS;i++){vec3 L=normalize(directionalLights[i].direction);float NdotL=max(dot(normal,L),0.0);float diffuseScale=3.0;totalLight+=(color/PI)*directionalLights[i].color*NdotL*diffuseScale*shadow;}
#endif
color=totalLight;gl_FragColor=vec4(color,1.0);
#include <fog_fragment>
#include <tonemapping_fragment>
#include <colorspace_fragment>
}`;class KA extends ui{engine;resources;parentGeometry;group;tweakValues;grasslessGrounds;bender;material;lastFrame;#e;constructor({engine:e,resources:t,parentGeometry:i,dirt:a,grass:r,shadowColor:n,lightDirection:o,group:l,initialTweaks:h}){super(),this.group=l,this.lastFrame=-1,this.engine=e,this.resources=t,this.parentGeometry=i,this.tweakValues=h,this.grasslessGrounds=[],this.init({dirt:a,grass:r,shadowColor:n,lightDirection:o})}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{bendingFactor:{params:{min:.01,max:1,step:.01},onChange:e=>{this.material&&(this.material.uniforms.uBendingFactor.value=e)}},bendingColorIntensity:{params:{min:.01,max:1,step:.01},onChange:e=>{this.material&&(this.material.uniforms.uBendingColorIntensity.value=e)}}})}get geometry(){return this.parentGeometry}get mesh(){return this.#e}configureBender(e){this.bender=e,this.material&&(this.material.uniforms.uBendingTexture.value=this.bender.texture)}init({dirt:e,grass:t,lightDirection:i,shadowColor:a}){this.resources.onceAll(["loaded:testIsland","loaded:grassFieldDisplacementMap","loaded:grassFieldWindNoiseTexture","loaded:smoothWind"],()=>{this.createMaterial({dirt:e,grass:t,lightDirection:i,shadowColor:a}),this.createMesh(),this.applyMaterialToTopIslandSurfaces()})}createMaterial({dirt:e,grass:t,lightDirection:i,shadowColor:a}){this.material=new Le({vertexShader:ZA,fragmentShader:JA,fog:!0,lights:!0,defines:{USE_SHADOWMAP:""},uniforms:{uTime:new O(0),uTextureScale:new O(new $),uLightGreen:new O(new X(t.lightColor)),uDarkGreen:new O(new X(t.darkColor)),uLightDirt:new O(new X(e.lightColor)),uDarkDirt:new O(new X(e.darkColor)),uLightDirection:new O(i),uShadowColor:new O(new X(a)),uBendingFactor:new O(this.tweakValues.bendingFactor),uBendingColorIntensity:new O(this.tweakValues.bendingColorIntensity),uDisplacementMap:new O(this.resources.items.grassFieldDisplacementMap),uColorTexture:new O(this.resources.items.grassFieldWindNoiseTexture),uWindTexture:new O(this.resources.items.smoothWind),uBendingTexture:new O(this.bender?this.bender.texture:new Ct),...ie.fog,...ie.lights}})}alreadyCaughtOnceThisFrame(){return this.engine.renderer.instance.info.render.frame===this.lastFrame}updateFrameNumber(){this.lastFrame=this.engine.renderer.instance.info.render.frame}createMesh(){this.#e=new Ne(this.parentGeometry,this.material),this.#e.castShadow=!0,this.#e.receiveShadow=!0;const t=new ki().setFromObject(this.#e).getSize(new S);this.material.uniforms.uTextureScale.value.set(t.x,t.y),this.engine.raycaster.on(on.POINTER_MOVE,this.#e,i=>{this.alreadyCaughtOnceThisFrame()||(this.emit("pointerMove",i),this.updateFrameNumber())}),this.engine.raycaster.on(on.POINTER_OUT,this.#e,i=>{this.alreadyCaughtOnceThisFrame()||(this.emit("pointerOut",i),this.updateFrameNumber())}),this.group.add(this.#e)}applyMaterialToTopIslandSurfaces(){let e=[];this.resources.items.testIsland.scene.traverse(t=>{if(t instanceof Ne&&["top-island-grass-surface","top-island-south-grass-surface","top-island-north-grass-surface"].includes(t.name)){t.geometry.computeTangents(),t.geometry.scale(this.tweakValues.scale,this.tweakValues.scale,this.tweakValues.scale);const i=new Ne(t.geometry,this.material);t.material.dispose(),e.push(t),this.grasslessGrounds.push(i),this.group.add(i)}}),e.forEach(t=>t.removeFromParent())}updateLightDirection(e){this.material&&(this.material.uniforms.uLightDirection.value=e)}updateShadowColor(e){this.material&&(this.material.uniforms.uShadowColor.value=new X(e))}updateDirtLightColor(e){this.material&&(this.material.uniforms.uLightDirt.value=new X(e))}updateDirtDarkColor(e){this.material&&(this.material.uniforms.uDarkDirt.value=new X(e))}updateGrassLightColor(e){this.material&&(this.material.uniforms.uLightGreen.value=new X(e))}updateGrassDarkColor(e){this.material&&(this.material.uniforms.uDarkGreen.value=new X(e))}update(){this.material&&(this.material.uniforms.uTime.value=this.engine.time.elapsedSeconds)}destroy(){this.grasslessGrounds.forEach(e=>{this.group.remove(e)}),this.group.remove(this.#e),this.material.dispose()}}class YA{engine;group;resources;parentGeometry;tweakValues;bender;initParams;grassGeometries;material;mesh;chunks;constructor({engine:e,group:t,bender:i,resources:a,parentGeometry:r,dirt:n,grass:o,shadowColor:l,lightDirection:h,initialTweaks:c}){this.engine=e,this.group=t,this.bender=i,this.resources=a,this.parentGeometry=r,this.tweakValues=c,this.grassGeometries={},this.initParams={dirt:n,grass:o,shadowColor:l,lightDirection:h},this.init(),this.configureTweaks()}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:"GrassField.Grass",height:{params:{min:2,max:15,step:.5},onChange:()=>{this.material&&this.rebuild()}},bendingFactor:{params:{min:.01,max:1,step:.01},onChange:e=>{this.material&&(this.material.uniforms.uBendingFactor.value=e)}},bendingColorIntensity:{params:{min:.01,max:1,step:.01},onChange:e=>{this.material&&(this.material.uniforms.uBendingColorIntensity.value=e)}},count:{params:{min:3e3,max:25e4,step:1e3},onChange:()=>{this.rebuild()}}})}init(){this.resources.onceAll(["loaded:grassModel","loaded:grassFieldDisplacementMap","loaded:grassFieldWindNoiseTexture","loaded:smoothWind"],()=>{this.initGrassGeometryFromModel(),this.createMaterial(),this.createChunks(),this.engine.monitor.on("decline",e=>{const t=e?.detail?.declineLevel;if(t)switch(t){case 2:console.warn("Grassfield.Grass: Low fps detected. Reducing grass count by 50%."),this.divideCountBy(1.5);break;case 3:console.warn("Grassfield.Grass: Low fps detected. Dividing grass count by 2."),this.divideCountBy(2);break}})})}divideCountBy(e){this.chunks.divideLodCountBy(e)}createMaterial(){const{dirt:e,grass:t,lightDirection:i,shadowColor:a}=this.initParams;this.material=new Le({vertexShader:ip,fragmentShader:sp,fog:!0,lights:!0,defines:{USE_SHADOWMAP:""},uniforms:{uTime:new O(0),uLightGreen:new O(new X(t.lightColor)),uDarkGreen:new O(new X(t.darkColor)),uLightDirt:new O(new X(e.lightColor)),uDarkDirt:new O(new X(e.darkColor)),uBendingFactor:new O(this.tweakValues.bendingFactor),uShadowColor:new O(new X(a)),uLightDirection:new O(i),uBendingColorIntensity:new O(this.tweakValues.bendingColorIntensity),uColorTexture:new O(this.resources.items.grassFieldWindNoiseTexture),uDisplacementMap:new O(this.resources.items.grassFieldDisplacementMap),uBendingTexture:new O(this.bender.texture),uWindTexture:new O(this.resources.items.smoothWind),...ie.fog,...ie.lights},side:ds}),setTimeout(()=>{this.material.side=si},0)}createChunks(){const e=new Eh;e.addLevel(0,{geometry:this.grassGeometries.medium}),e.addLevel(7.5,{geometry:this.grassGeometries.low,count:.2}),e.addLevel(12.5,{geometry:this.grassGeometries.low,count:.1}),e.addLevel(17,{geometry:this.grassGeometries.low,count:0}),this.chunks=new ap({chunkSize:new S(1,2,1),sampledGeometry:this.parentGeometry,total:this.tweakValues.count,geometry:this.grassGeometries.high,material:this.material,lod:e}),this.chunks.sample(),this.chunks.entries().forEach(([,t])=>{t.frustumCulled=!0,t.receiveShadow=!0,this.group.add(t)})}initGrassGeometryFromModel(){this.resources.items.grassModel.scene.traverse(e=>{if(e instanceof Ne){const t=e.geometry.clone();t.scale(this.tweakValues.width/1e3,this.tweakValues.height/1e3,this.tweakValues.width/1e3),this.grassGeometries[e.name]=t}})}updateShadowColor(e){this.material&&(this.material.uniforms.uShadowColor.value=new X(e))}updateLightDirection(e){this.material&&(this.material.uniforms.uLightDirection.value=e)}updateGrassLightColor(e){this.material&&(this.material.uniforms.uLightGreen.value=new X(e))}updateGrassDarkColor(e){this.material&&(this.material.uniforms.uDarkGreen.value=new X(e))}updateDirtLightColor(e){this.material&&(this.material.uniforms.uLightDirt.value=new X(e))}updateDirtDarkColor(e){this.material&&(this.material.uniforms.uDarkDirt.value=new X(e))}update(){this.material&&(this.chunks.frustumCull(this.engine.camera),this.material.uniforms.uTime.value=this.engine.time.elapsedSeconds)}rebuild(){this.destroy(),this.init()}destroy(){this.chunks.entries().forEach(([,e])=>this.group.remove(e)),this.chunks.dispose(),this.material.dispose(),Object.values(this.grassGeometries).forEach(e=>{e.dispose()}),this.mesh?.geometry.dispose()}}var QA=`#include <fog_pars_vertex>
uniform float uTime;uniform float uSize;varying vec2 vUv;void main(){vUv=uv;float index=1.0;float size=uSize;float time=uTime*2.0;float flapTime=radians(sin(time*4.0-length(position.xy)/size*2.0+index*2.0)*45.0+30.0);float hovering=cos(uTime*2.0+index*3.0)*size/16.0;vec3 updatePosition=vec3(cos(flapTime)*position.x,position.y+hovering,sin(flapTime)*abs(position.x)+hovering);vec4 mvPosition=modelViewMatrix*vec4(updatePosition,1.0);gl_Position=projectionMatrix*mvPosition;
#include <fog_vertex>
}`,$A=`#include <fog_pars_fragment>
uniform sampler2D uTexture;uniform vec3 uColor;varying vec2 vUv;void main(){vec4 color=texture(uTexture,vUv);float alpha=smoothstep(1.0,0.0,color.r)*color.a;alpha+=color.r;if(alpha<=0.0){discard;}vec4 finalColor=vec4(color.rgb*uColor*50.0,alpha);gl_FragColor=finalColor;
#include <fog_fragment>
}`;class eM{speed;nbOfPoints;arcSamples;uniformPoints;uniformTangents;totalCurveLength;index=0;curve;constructor({speed:e,nbOfPoints:t,arcSamples:i,points:a}){this.speed=e??.125,this.nbOfPoints=t??1e3,this.arcSamples=i??5e3,this.uniformPoints=[],this.uniformTangents=[],this.curve=new k0(a),this.curve.closed=!0,this.totalCurveLength=this.curve.getLength(),this.buildUniformPoints()}getUniformPoint(e){const t=Math.floor(e)%this.uniformPoints.length,i=(t+1)%this.uniformPoints.length,a=e-Math.floor(e);return new S().lerpVectors(this.uniformPoints[t],this.uniformPoints[i],a)}getUniformTangent(e){const t=Math.floor(e)%this.uniformTangents.length,i=(t+1)%this.uniformTangents.length,a=e-Math.floor(e);return new S().lerpVectors(this.uniformTangents[t],this.uniformTangents[i],a).normalize()}getPositionAndTangent(e){return this.index+=this.speed*e/this.totalCurveLength*this.nbOfPoints,{position:this.getUniformPoint(this.index),tangent:this.getUniformTangent(this.index)}}buildUniformPoints(){this.uniformPoints.splice(0),this.uniformTangents.splice(0);const e=[],t=[];for(let r=0;r<=this.arcSamples;r++){const n=r/this.arcSamples;e.push(this.curve.getPoint(n)),t.push(this.curve.getTangent(n).normalize())}const i=[0];for(let r=1;r<e.length;r++){const n=e[r-1].distanceTo(e[r]);i.push(i[i.length-1]+n)}const a=i[i.length-1];for(let r=0;r<this.nbOfPoints;r++){const n=r/this.nbOfPoints*a;let o=0;for(let u=1;u<i.length;u++)if(i[u]>=n){o=u-1;break}const l=i[o],h=i[o+1],c=(n-l)/(h-l),d=new S().lerpVectors(e[o],e[o+1],c),_=new S().lerpVectors(t[o],t[o+1],c).normalize();this.uniformPoints.push(d),this.uniformTangents.push(_)}}}class St{static sign(){return Math.random()>.5?1:-1}static between(e,t){return Math.random()*(t-e)+e}static betweenInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}static color(){return new X(Math.random(),Math.random(),Math.random())}static colorBetween(e,t,i=1){return e.clone().lerp(t,Math.random()*i)}static pointInBox(e){if(e.isEmpty())throw new Error("Cannot pick random point from empty Box3");const t=e.min,i=e.max,a=Math.random()*(i.x-t.x)+t.x,r=Math.random()*(i.y-t.y)+t.y,n=Math.random()*(i.z-t.z)+t.z;return new S(a,r,n)}static inArray(e){return e[St.betweenInt(0,e.length-1)]}}class fh{static id=0;static getNewId(){return fh.id++}id;group;engine;resources;tweakValues;geometry;wrapper;boundingBox;material;mesh;path;constructor({group:e,engine:t,resources:i,geometry:a,initialTweaks:r,boundingBox:n}){this.id=fh.getNewId(),this.engine=t,this.group=e,this.resources=i,this.tweakValues=r,this.geometry=a,this.boundingBox=n,this.wrapper=new ys,this.init(),this.configureTweaks()}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:`GrassField.Butterflies.Butterfly.${this.id+1}`,color:{onChange:e=>{this.material&&(this.material.uniforms.uColor.value=new X(e))}},size:{params:{min:1.5,max:4.5,step:.05},onChange:e=>{this.mesh&&this.mesh.scale.set(e,e,e)}}})}init(){this.resources.on("loaded:butterflyTexture",()=>{this.createMaterial(),this.createMesh(),this.generateRandomPath()})}createMaterial(){this.material=new Le({transparent:!0,side:si,vertexShader:QA,fragmentShader:$A,fog:!0,depthWrite:!1,uniforms:{uTime:new O(0),uSize:new O(.04),uTexture:new O(this.resources.items.butterflyTexture),uColor:new O(new X(this.tweakValues.color)),...ie.fog}})}createMesh(){this.mesh=new Ne(this.geometry,this.material),this.mesh.rotation.x=-Math.PI*.5,this.mesh.rotation.z=Math.PI,this.mesh.scale.set(this.tweakValues.size,this.tweakValues.size,this.tweakValues.size),this.wrapper.add(this.mesh),this.engine.scene.add(this.wrapper)}createRandomCurvePoint(){return St.pointInBox(this.boundingBox)}generateRandomPath(){const e=Array(5).fill(0).map(this.createRandomCurvePoint.bind(this));this.path=new eM({points:e})}update(){this.material&&(this.material.uniforms.uTime.value=this.engine.time.elapsedSeconds+this.id*10,this.updatePositionOnPath())}updatePositionOnPath(){const{position:e,tangent:t}=this.path.getPositionAndTangent(this.engine.time.deltaSeconds);this.wrapper.position.copy(e),this.wrapper.lookAt(e.clone().add(t))}destroy(){this.group.remove(this.mesh),this.material?.dispose()}}class Vc{static extractZones(e){const t={};e.traverse(a=>{a instanceof Ne&&a.name.startsWith("butterfly-zone")&&(a.name.includes("main")&&(t.main=a),t.top=a)}),t.main.geometry.computeBoundingBox(),t.top.geometry.computeBoundingBox();const i={main:t.main.geometry.boundingBox,top:t.top.geometry.boundingBox};return t.main.removeFromParent(),t.top.removeFromParent(),t.main.geometry.dispose(),t.top.geometry.dispose(),[i.main,i.top].forEach(a=>{a.min.multiplyScalar(e.scale.x),a.max.multiplyScalar(e.scale.x)}),i}engine;group;resources;butterflies;geometry;constructor({group:e,engine:t,resources:i,butterflies:a,boundingBox:r}){this.group=e,this.engine=t,this.resources=i,this.butterflies=[],this.init({butterflies:a,boundingBox:r})}init({butterflies:e,boundingBox:t}){this.createGeometry(),e.forEach(i=>{this.butterflies.push(this.createButterfly(i,t))})}createGeometry(){this.geometry=new Vs(.04,.04,10,10)}createButterfly(e,t){return new fh({engine:this.engine,group:this.group,resources:this.resources,geometry:this.geometry,boundingBox:t,initialTweaks:e})}update(){this.butterflies.forEach(e=>e.update())}destroy(){this.butterflies.forEach(e=>e.destroy()),this.geometry.dispose()}}const tM=new wr(-1,1,1,-1,0,1);class iM extends Wt{constructor(){super(),this.setAttribute("position",new Bt([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Bt([0,2,0,0,2,0],2))}}const sM=new iM;class aM{constructor(e){this._mesh=new Ne(sM,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,tM)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class rM{constructor(e,t,i){this.variables=[],this.currentTextureIndex=0;let a=Et;const r={passThruTexture:{value:null}},n=h(d(),r),o=new aM(n);this.setDataType=function(_){return a=_,this},this.addVariable=function(_,u,x){const g=this.createShaderMaterial(u),v={name:_,initialValueTexture:x,material:g,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:it,magFilter:it};return this.variables.push(v),v},this.setVariableDependencies=function(_,u){_.dependencies=u},this.init=function(){if(i.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let _=0;_<this.variables.length;_++){const u=this.variables[_];u.renderTargets[0]=this.createRenderTarget(e,t,u.wrapS,u.wrapT,u.minFilter,u.magFilter),u.renderTargets[1]=this.createRenderTarget(e,t,u.wrapS,u.wrapT,u.minFilter,u.magFilter),this.renderTexture(u.initialValueTexture,u.renderTargets[0]),this.renderTexture(u.initialValueTexture,u.renderTargets[1]);const x=u.material,g=x.uniforms;if(u.dependencies!==null)for(let v=0;v<u.dependencies.length;v++){const f=u.dependencies[v];if(f.name!==u.name){let y=!1;for(let w=0;w<this.variables.length;w++)if(f.name===this.variables[w].name){y=!0;break}if(!y)return"Variable dependency not found. Variable="+u.name+", dependency="+f.name}g[f.name]={value:null},x.fragmentShader=`
uniform sampler2D `+f.name+`;
`+x.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){const _=this.currentTextureIndex,u=this.currentTextureIndex===0?1:0;for(let x=0,g=this.variables.length;x<g;x++){const v=this.variables[x];if(v.dependencies!==null){const f=v.material.uniforms;for(let y=0,w=v.dependencies.length;y<w;y++){const p=v.dependencies[y];f[p.name].value=p.renderTargets[_].texture}}this.doRenderTarget(v.material,v.renderTargets[u])}this.currentTextureIndex=u},this.getCurrentRenderTarget=function(_){return _.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(_){return _.renderTargets[this.currentTextureIndex===0?1:0]},this.dispose=function(){o.dispose();const _=this.variables;for(let u=0;u<_.length;u++){const x=_[u];x.initialValueTexture&&x.initialValueTexture.dispose();const g=x.renderTargets;for(let v=0;v<g.length;v++)g[v].dispose()}};function l(_){_.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}this.addResolutionDefine=l;function h(_,u){u=u||{};const x=new Le({name:"GPUComputationShader",uniforms:u,vertexShader:c(),fragmentShader:_});return l(x),x}this.createShaderMaterial=h,this.createRenderTarget=function(_,u,x,g,v,f){return _=_||e,u=u||t,x=x||rs,g=g||rs,v=v||it,f=f||it,new gt(_,u,{wrapS:x,wrapT:g,minFilter:v,magFilter:f,format:At,type:a,depthBuffer:!1})},this.createTexture=function(){const _=new Float32Array(e*t*4),u=new ws(_,e,t,At,Et);return u.needsUpdate=!0,u},this.renderTexture=function(_,u){r.passThruTexture.value=_,this.doRenderTarget(n,u),r.passThruTexture.value=null},this.doRenderTarget=function(_,u){const x=i.getRenderTarget(),g=i.xr.enabled,v=i.shadowMap.autoUpdate;i.xr.enabled=!1,i.shadowMap.autoUpdate=!1,o.material=_,i.setRenderTarget(u),o.render(i),o.material=n,i.xr.enabled=g,i.shadowMap.autoUpdate=v,i.setRenderTarget(x)};function c(){return`void main()	{

	gl_Position = vec4( position, 1.0 );

}
`}function d(){return`uniform sampler2D passThruTexture;

void main() {

	vec2 uv = gl_FragCoord.xy / resolution.xy;

	gl_FragColor = texture2D( passThruTexture, uv );

}
`}}}var nM="uniform vec2 uMouseUv;uniform vec3 uDirection;uniform float uBrushRadius;uniform float uDelta;uniform float uFadingFactor;varying vec2 vUv;void main(){vec2 uv=vUv;vec4 texel=texture2D(uTextureBending,uv);float fading=uDelta*uFadingFactor;texel.r=mix(texel.r,0.0,fading);texel.g=mix(texel.g,0.5,fading);texel.b=mix(texel.b,0.5,fading);texel.a=mix(texel.a,0.5,fading);float distToMouse=distance(uv,uMouseUv);if(distToMouse<uBrushRadius){float strength=1.0-smoothstep(0.0,uBrushRadius,distToMouse);texel.r=mix(texel.r,1.0,strength);texel.g=mix(texel.g,uDirection.x*0.5+0.5,strength);texel.b=mix(texel.b,uDirection.y*0.5+0.5,strength);texel.a=mix(texel.a,uDirection.z*0.5+0.5,strength);}gl_FragColor=texel;}",oM="varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}";const lM=10;class hM{engine;ground;gpuCompute;textureSize;tweakValues;lastMouseWorldPosition;bendingVariable;texture;constructor({ground:e,engine:t,initialTweaks:i}){this.ground=e,this.engine=t,this.textureSize=256,this.tweakValues=i,this.lastMouseWorldPosition=new S(0,0,0),this.gpuCompute=new rM(this.textureSize,this.textureSize,this.engine.renderer.instance);const a=this.gpuCompute.createTexture();this.fillInitialTexture(a),this.bendingVariable=this.gpuCompute.addVariable("uTextureBending",nM,a),this.bendingVariable.material.vertexShader=oM,this.gpuCompute.setVariableDependencies(this.bendingVariable,[this.bendingVariable]);const r=this.bendingVariable.material;r.uniforms.uMouseUv=new O(new $(9999,9999)),r.uniforms.uDirection=new O(new S(0,0,0)),r.uniforms.uBrushRadius=new O(this.tweakValues.brushRadius),r.uniforms.uDelta=new O(0),r.uniforms.uFadingFactor=new O(1);const n=this.gpuCompute.init();if(n)throw new Error(n);this.texture=this.gpuCompute.getCurrentRenderTarget(this.bendingVariable).texture,this.init(),this.configureTweaks()}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:"GrassField.Bender",brushRadius:{params:{min:.001,max:.2,step:.001},onChange:e=>{this.bendingVariable.material.uniforms.uBrushRadius.value=e}},fadingFactor:{params:{min:0,max:4,step:.25},onChange:e=>{this.bendingVariable.material.uniforms.uFadingFactor.value=e}}})}addDebugPlane(){const e=new K1(5);this.engine.scene.add(e);const t=new Mi({map:this.texture,side:si,transparent:!0}),i=new Ne(this.ground.geometry,t);i.position.set(.8,.8,-1),this.engine.scene.add(i)}fillInitialTexture(e){const t=e.image.data;if(t instanceof Float32Array)for(let i=0;i<t.length;i+=4)t[i]=0,t[i+1]=.51,t[i+2]=.51,t[i+3]=.51;else if(t instanceof Uint8Array)for(let i=0;i<t.length;i+=4)t[i]=0,t[i+1]=129,t[i+2]=129,t[i+3]=129;else{for(let i=0;i<t.byteLength;i+=4)t[i]=0,t[i+1]=.51,t[i+2]=.51,t[i+3]=.51;console.warn("Unknown texture data type; fallback write performed.")}e.needsUpdate=!0}init(){this.ground.on("pointerMove",e=>{if(!e)return;const t=e.detail.intersect.uv,i=e.detail.intersect.point,a=new S().subVectors(i,this.lastMouseWorldPosition).normalize();this.bendingVariable.material.uniforms.uMouseUv.value.copy(t),this.bendingVariable.material.uniforms.uDirection.value.copy(a),this.lastMouseWorldPosition.copy(i)}),this.ground.on("pointerOut",()=>{this.bendingVariable.material.uniforms.uMouseUv.value.set(9999,9999),this.bendingVariable.material.uniforms.uDirection.value.set(0,0,0),this.lastMouseWorldPosition.copy(new S(0,0,0))})}update(){this.engine.time.deltaSeconds>lM||(this.bendingVariable.material.uniforms.uDelta.value=this.engine.time.deltaSeconds,this.gpuCompute.compute())}destroy(){this.texture.dispose(),this.gpuCompute.dispose()}}class cM extends Wt{constructor({samplePoints:e=51,...t}={}){super();const i=this.createCurve(t),a=i.getPoints(e%2===0?e+1:e);this.createPairOfVertices(i,a),this.generateGeometryIndexes(a.length),this.computeVertexNormals()}createPairOfVertices(e,t){const i=t.length,a=new Float32Array(i*2*3),r=new Float32Array(i*2*3),n=new Float32Array(i*2),o=new Uint16Array(i*2);for(let l=0;l<i;l++){const h=t[l],c=l/(i-1),d=e.getTangent(c).normalize(),_=l*2;o[_]=0,n[_]=l/t.length,a.set(h.toArray(),_*3),r.set(d.toArray(),_*3);const u=l*2+1;o[u]=1,n[u]=l/t.length,a.set(h.toArray(),u*3),r.set(d.toArray(),u*3)}this.setAttribute("position",new Be(a,3)),this.setAttribute("aVertexId",new Be(o,1)),this.setAttribute("aTangent",new Be(r,3)),this.setAttribute("aCurveProgression",new Be(n,1))}generateGeometryIndexes(e){const t=new Uint16Array((e-1)*6);for(let i=0;i<e-1;i++){const a=i*2,r=i*2+1,n=(i+1)*2,o=(i+1)*2+1;t[i*6+0]=a,t[i*6+1]=r,t[i*6+2]=n,t[i*6+3]=r,t[i*6+4]=o,t[i*6+5]=n}this.setIndex(new Be(t,1))}createCurve(e){const t=new k0(this.extractOrGeneratePoints(e));return t.curveType="centripetal",t.closed=!1,t}extractOrGeneratePoints({points:e,...t}={}){return Array.isArray(e)&&e.length>0?e:this.generateRandomPoints(t)}generateRandomPoints({length:e=2,amplitude:t=.25,directorPointsCount:i=4}){const a=e/2,r=e/(i-1),n=[];for(let o=0;o<i;o++)n.push(new S(0,(o%2-.5)*t,-a+o*r));return n}}var dM="uniform float uThickness;uniform vec3 uCameraPosition;uniform float uProgress;attribute float aVertexId;attribute vec3 aTangent;attribute float aCurveProgression;varying float vThicknessFactor;varying float vThicknessVariation;void main(){float thicknessMove=smoothstep(0.2,0.0,0.2)+smoothstep(0.8,0.3,uProgress)+smoothstep(0.8,1.0,0.2);float shape=smoothstep(0.0,0.5,aCurveProgression)-smoothstep(0.5,1.0,aCurveProgression);float thicknessFactor=smoothstep(0.0,thicknessMove,aCurveProgression)-smoothstep(thicknessMove,1.0,aCurveProgression);thicknessFactor*=shape;float globalThicknessAnimation=smoothstep(0.0,0.5,uProgress)-smoothstep(0.5,1.0,uProgress);float thicknessInfluence=globalThicknessAnimation*thicknessFactor;thicknessInfluence=clamp(thicknessInfluence,0.2,0.8);float thickness=uThickness*thicknessInfluence;float halfThickness=thickness*0.5;vec3 cameraDirection=normalize(position-uCameraPosition);vec3 billboardDirection=normalize(cross(aTangent,cameraDirection));vec3 offset=billboardDirection*halfThickness;vec3 newPosition=position;if(aVertexId==0.0){newPosition+=offset;}else{newPosition-=offset;}newPosition.z-=uProgress*0.5;gl_Position=projectionMatrix*modelViewMatrix*vec4(newPosition,1.0);vThicknessFactor=thicknessFactor;vThicknessVariation=globalThicknessAnimation;}",_M="uniform vec3 uColor;varying float vThicknessFactor;varying float vThicknessVariation;void main(){float alpha=vThicknessFactor*vThicknessVariation;if(alpha<0.1){discard;}gl_FragColor=vec4(uColor,alpha);}",jl=(s=>(s.START="start",s.RESET="reset",s.COMPLETE="complete",s))(jl||{});class pu extends ui{static id=0;id;engine;group;points;tweakValues;geometry;material;mesh;twean;constructor({engine:e,group:t,points:i,initialTweaks:a}){super(),this.id=pu.id++,this.engine=e,this.group=t,this.tweakValues={color:"white",length:2,duration:6,amplitude:.25,thickness:.02,sampledPoints:51,progress:0,directorPointsCount:4,...a},this.points=i??[],this.init(),this.configureTweaks()}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:`GrassField.Wind.WindLines.${this.id}`,duration:{params:{min:1,max:10,step:.5}},length:{params:{min:.1,max:1,step:.01},onChange:e=>{this.geometry&&console.warn(`WindLine length changed to ${e}, but length change is not implemented yet.`)}},amplitude:{params:{min:.01,max:.5,step:.01},onChange:e=>{this.geometry&&console.warn(`WindLine amplitude changed to ${e}, but amplitude change is not implemented yet.`)}},sampledPoints:{params:{min:5,max:200,step:1},onChange:e=>{this.geometry&&console.warn(`WindLine sampledPoints changed to ${e}, but sampledPoints change is not implemented yet.`)}},color:{onChange:e=>{this.material&&(this.material.uniforms.uColor.value=new X(e))}},thickness:{params:{min:.001,max:.06,step:.001},onChange:e=>{this.material&&(this.material.uniforms.uThickness.value=e)}},progress:{params:{min:0,max:1,step:.01},onChange:e=>{this.material&&(this.material.uniforms.uProgress.value=e)}}})}init(){this.createGeometry(),this.createMaterial(),this.createMesh(),this.group.add(this.mesh)}createGeometry(){this.geometry=new cM({points:this.points,...this.tweakValues})}createMaterial(){this.material=new Le({vertexShader:dM,fragmentShader:_M,transparent:!0,depthWrite:!1,uniforms:{uColor:new O(new X(this.tweakValues.color)),uProgress:new O(0),uThickness:new O(this.tweakValues.thickness),uCameraPosition:new O(this.cameraPosition.clone())}})}get cameraPosition(){return this.engine.camera.instance.position}createMesh(){this.mesh=new Ne(this.geometry,this.material)}getMesh(){return this.mesh}start(){this.emit("start"),this.twean=ka.fromTo(this.material.uniforms.uProgress,{value:0},{value:1,duration:this.tweakValues.duration,ease:"expo.out",onComplete:()=>{this.emit("complete")}})}reset(){this.material&&(this.emit("reset"),this.material.uniforms.uProgress.value=0)}update(){this.material&&this.material.uniforms.uCameraPosition.value.copy(this.cameraPosition)}destroy(){this.twean?.kill(),this.group.remove(this.mesh),this.material?.dispose(),this.geometry?.dispose()}}const uM=25,fM=1e3,vM=[3,5],gM=[0,30*1e3],xM=[4,10],pM=[.1,.25],mM=[1,2.5],yM=[.02,.04],wM=[20,24],zM=[.6,1.6];class PM{engine;group;lines;idleTimeThreshold;delayRange;durationRange;amplitudeRange;lengthRange;thicknessRange;rotationRange;scaleRange;boundingBox;directorPointsCountRange;constructor({count:e=uM,delayRange:t=gM,idleTimeThreshold:i=fM,durationRange:a=xM,amplitudeRange:r=pM,lengthRange:n=mM,thicknessRange:o=yM,rotationRange:l=wM,scaleRange:h=zM,directorPointsCountRange:c=vM,boundingBox:d,engine:_,group:u}){this.engine=_,this.group=u,this.lines=new Map,this.delayRange=t,this.idleTimeThreshold=i,this.durationRange=a,this.amplitudeRange=r,this.lengthRange=n,this.thicknessRange=o,this.rotationRange=l,this.scaleRange=h,this.boundingBox=d,this.directorPointsCountRange=c,this.init(e)}init(e){for(let t=0;t<e;t++){const i=this.randomizeWindLine();this.lines.set(i,{state:1,canStartFrom:this.randomNextStart()})}}randomNextStart(){return this.engine.time.elapsedMs+St.between(...this.delayRange)}randomizeWindLine(){const e=St.between(...this.durationRange),t=new pu({engine:this.engine,group:this.group,initialTweaks:{duration:e,amplitude:St.between(...this.amplitudeRange),length:St.between(...this.lengthRange),thickness:St.between(...this.thicknessRange),directorPointsCount:St.betweenInt(...this.directorPointsCountRange)}}),i=t.getMesh();return this.setRandomPositionTo(i),this.setRandomScaleTo(i),this.setRandomRotationTo(i),this.setupLineEventListeners(t),t}setRandomPositionTo(e){e.position.copy(St.pointInBox(this.boundingBox))}setRandomScaleTo(e){const t=St.between(...this.scaleRange);e.scale.set(t,t,t)}setRandomRotationTo(e){e.rotation.set(St.sign()*Math.PI/St.between(...this.rotationRange),St.sign()*Math.PI/St.between(...this.rotationRange),St.sign()*Math.PI/St.between(...this.rotationRange))}setupLineEventListeners(e){e.on(jl.COMPLETE,()=>{e.reset()}),e.on(jl.START,()=>{const t=this.lines.get(e);t.state=0}),e.on(jl.RESET,()=>{const t=this.lines.get(e);t.canStartFrom=this.randomNextStart(),this.setRandomPositionTo(e.getMesh()),t.state=1})}update(){const e=this.engine.time.elapsedMs;this.detectedIdleTab()&&this.reschedule();for(const[t,i]of this.lines)t.update(),i.state===1&&e>=i.canStartFrom&&t.start()}detectedIdleTab(){return this.engine.time.deltaMs>this.idleTimeThreshold}reschedule(){for(let[,e]of this.lines)e.state===1&&(e.canStartFrom=this.randomNextStart())}destroy(){for(const e of this.lines.keys())e.destroy();this.lines.clear()}}class bM{group;parentGroup;lines;constructor({engine:e,group:t,boundingBox:i}){this.parentGroup=t,this.group=new ys;const a=i.clone();a.min.multiplyScalar(.5),a.max.add(new S(0,.5,0)),a.translate(new S(-2,.3,.5)),this.lines=new PM({engine:e,boundingBox:a,group:this.group}),this.init()}init(){this.group.rotateY(Math.PI*-.25),this.parentGroup.add(this.group)}update(){this.lines.update()}destroy(){this.parentGroup.remove(this.group),this.lines.destroy()}}class TM{group;parentGroup;islands;engine;resources;tweakValues;geometry;flowers1;flowers2;pampaGrass;grass;ground;butterflies;bender;windLines;constructor({group:e,engine:t,resources:i,geometry:a,islands:r,initialTweaks:n}){this.engine=t,this.resources=i,this.parentGroup=e,this.islands=r,this.group=new ys,this.butterflies=[],this.tweakValues={...n,grass:{lightColor:nt.grassField.grass.lightColor,darkColor:nt.grassField.grass.darkColor},dirt:nt.grassField.grass.dirt,misc:nt.grassField.grass.misc},this.geometry=a,this.init(),this.configureTweaks(),this.engine.on("global:config:changed",o=>this.configChanged(o?.detail?.config))}configChanged(e){if(e.grassField.grass){const t=e.grassField.grass;this.updateGrassLightColor(t.lightColor),this.updateGrassDarkColor(t.darkColor)}}configureTweaks(){this.configureGrassTweaks(),this.configureDirtTweaks(),this.configureMiscTweaks()}configureGrassTweaks(){this.engine.tweaks.configure(this.tweakValues.grass,{folder:"GrassField.Grass",lightColor:{onChange:this.updateGrassLightColor.bind(this)},darkColor:{onChange:this.updateGrassDarkColor.bind(this)}})}configureDirtTweaks(){this.engine.tweaks.configure(this.tweakValues.dirt,{folder:"GrassField.Dirt",lightColor:{onChange:this.updateDirtLightColor.bind(this)},darkColor:{onChange:this.updateDirtDarkColor.bind(this)}})}configureMiscTweaks(){this.engine.tweaks.configure(this.tweakValues.misc,{folder:"GrassField.Misc",lightDirection:{onChange:this.updateLightDirection.bind(this)},shadowColor:{onChange:this.updateShadowColor.bind(this)}})}updateLightDirection(e){this.ground.updateLightDirection(e),this.grass.updateLightDirection(e)}updateShadowColor(e){this.ground.updateShadowColor(e),this.grass.updateShadowColor(e)}updateDirtLightColor(e){this.pampaGrass.updateDirtLightColor(e),this.ground.updateDirtLightColor(e),this.grass.updateDirtLightColor(e)}updateDirtDarkColor(e){this.pampaGrass.updateDirtDarkColor(e),this.ground.updateDirtDarkColor(e),this.grass.updateDirtDarkColor(e)}updateGrassLightColor(e){this.ground.updateGrassLightColor(e),this.grass.updateGrassLightColor(e)}updateGrassDarkColor(e){this.ground.updateGrassDarkColor(e),this.grass.updateGrassDarkColor(e)}init(){this.geometry.computeTangents(),this.geometry.computeBoundingBox();const{factor:e,color:t,colorIntensity:i,brushRadius:a,fadingFactor:r}=nt.grassField.bending;this.ground=new KA({engine:this.engine,group:this.group,resources:this.resources,parentGeometry:this.geometry,dirt:this.tweakValues.dirt,grass:this.tweakValues.grass,lightDirection:this.tweakValues.misc.lightDirection,shadowColor:this.tweakValues.misc.shadowColor,initialTweaks:{scale:this.tweakValues.scale,bendingFactor:e,bendingColorIntensity:i}}),this.bender=new hM({ground:this.ground,engine:this.engine,initialTweaks:{brushRadius:a,fadingFactor:r}}),this.ground.configureBender(this.bender);const n=Vc.extractZones(this.islands);this.butterflies.push(new Vc({engine:this.engine,resources:this.resources,group:this.group,boundingBox:n.main,butterflies:[{color:"#ffad15",size:1.4},{color:"#ffad15",size:1.15},{color:"#ff0000",size:1.3},{color:"#ff0000",size:1.4},{color:"#ba17ff",size:1},{color:"#ba17ff",size:1},{color:"#13ff15",size:1.4},{color:"#13ff15",size:1.3},{color:"#00c3c3",size:1.15},{color:"#00c3c3",size:1.4}]}),new Vc({engine:this.engine,resources:this.resources,group:this.group,boundingBox:n.top,butterflies:[{color:"#ffad15",size:1.4},{color:"#ff0000",size:1.3},{color:"#ba17ff",size:1},{color:"#13ff15",size:1.4},{color:"#00c3c3",size:1.15}]}));const{count:o,size:l}=nt.grassField.flowers;this.flowers1=new Lo({engine:this.engine,bender:this.bender,geometry:this.geometry,group:this.group,resources:this.resources,rgbChannelToUse:"r",initialTweaks:{count:o,size:l,bendingFactor:e,...nt.grassField.flowers.configs[0]}}),this.flowers2=new Lo({engine:this.engine,group:this.group,bender:this.bender,geometry:this.geometry,resources:this.resources,rgbChannelToUse:"g",initialTweaks:{count:o,size:l,bendingFactor:e,...nt.grassField.flowers.configs[1]}}),this.pampaGrass=new jA({engine:this.engine,group:this.group,bender:this.bender,parentGeometry:this.geometry,resources:this.resources,dirt:this.tweakValues.dirt,initialTweaks:{bendingFactor:e,bendingColor:t,bendingColorIntensity:i,...nt.grassField.pampa}}),this.grass=new YA({engine:this.engine,group:this.group,parentGeometry:this.geometry,resources:this.resources,dirt:this.tweakValues.dirt,grass:this.tweakValues.grass,bender:this.bender,shadowColor:this.tweakValues.misc.shadowColor,lightDirection:this.tweakValues.misc.lightDirection,initialTweaks:{bendingFactor:e,bendingColorIntensity:i,count:nt.grassField.grass.count,height:nt.grassField.grass.height,width:nt.grassField.grass.width}}),this.windLines=new bM({engine:this.engine,group:this.group,boundingBox:n.main}),this.parentGroup.add(this.group),this.engine.monitor.on("decline",h=>{const c=h?.detail?.declineLevel;if(c)switch(c){case 5:console.warn("WindLines: Low FPS detected. Deleting windlines."),this.windLines.destroy();break}})}update(){this.butterflies.forEach(e=>e.update()),this.flowers1?.update(),this.flowers2?.update(),this.pampaGrass?.update(),this.grass?.update(),this.ground?.update(),this.bender?.update(),this.windLines?.update()}destroy(){this.parentGroup.remove(this.group),this.butterflies.forEach(e=>e.destroy()),this.flowers1?.destroy(),this.flowers2?.destroy(),this.pampaGrass?.destroy(),this.grass?.destroy(),this.ground?.destroy(),this.windLines?.destroy(),this.bender?.destroy(),this.geometry.dispose()}}var SM=`#include <common>
#include <packing>
#include <lights_pars_begin>
#include <shadowmap_pars_vertex>
varying vec3 vNormal;varying vec3 vWorldPos;varying vec2 vUv;varying vec3 vViewPosition;void main(){
#include <beginnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <worldpos_vertex>
vUv=uv;vNormal=normalize(normalMatrix*normal);vWorldPos=(modelMatrix*vec4(position,1.0)).xyz;vec4 mvPosition=modelViewMatrix*vec4(position,1.0);vViewPosition=-mvPosition.xyz;
#include <shadowmap_vertex>
gl_Position=projectionMatrix*mvPosition;}`,EM=`uniform sampler2D map;uniform sampler2D envMap;uniform vec3 color;varying vec3 vNormal;varying vec3 vWorldPos;varying vec2 vUv;varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
void main(){vec3 normal=normalize(vNormal);vec3 totalLight=vec3(0.0);vec3 baseColor=color;
#ifdef USE_MAP
baseColor*=texture2D(map,vUv).rgb;
#endif
#if NUM_DIR_LIGHTS > 0
#pragma unroll_loop_start
for(int i=0;i<NUM_DIR_LIGHTS;i++){vec3 L=normalize(directionalLights[i].direction);float NdotL=max(dot(normal,L),0.0);float shadow=1.0;
#ifdef USE_SHADOWMAP
DirectionalLightShadow directionalShadow=directionalLightShadows[i];shadow=getShadow(directionalShadowMap[i],directionalShadow.shadowMapSize,directionalShadow.shadowIntensity,directionalShadow.shadowBias,directionalShadow.shadowRadius,vDirectionalShadowCoord[i]);
#endif
shadow=max(shadow,0.6);float diffuseScale=2.5;totalLight+=directionalLights[i].color*NdotL*diffuseScale*shadow;}
#pragma unroll_loop_end
#endif
#if NUM_POINT_LIGHTS > 0
for(int i=0;i<NUM_POINT_LIGHTS;i++){vec3 L=normalize(pointLights[i].position-vWorldPos);float dist=length(pointLights[i].position-vWorldPos);float attenuation=1.0;if(pointLights[i].distance>0.0&&pointLights[i].decay>0.0){attenuation=pow(clamp(1.0-dist/pointLights[i].distance,0.0,1.0),pointLights[i].decay);}else{attenuation=1.0/(dist*dist);}float NdotL=max(dot(normal,L),0.0);totalLight+=pointLights[i].color*NdotL*attenuation;}
#endif
vec3 reflectVec=inverseTransformDirection(normal,viewMatrix);vec3 envColor=texture(envMap,equirectUv(normal)*0.05).rgb;gl_FragColor=vec4(totalLight*baseColor+baseColor*envColor*20.0*shadow,1.0);}`;function rp(s,e,t){return new Le({fragmentShader:EM,vertexShader:SM,uniforms:{map:new O(s),envMap:new O(e),color:new O(t??new X("#ffffff")),...ie.lights},shadowSide:ds,lights:!0,defines:{USE_SHADOWMAP:"",USE_MAP:"",ENVMAP_TYPE_CUBE_UV:""}})}class AM{group;resources;environment;engine;topIslandCliffs;mainIslandCliffs;material;constructor({engine:e,group:t,environment:i,resources:a}){this.engine=e,this.group=t,this.resources=a,this.environment=i,this.init()}init(){this.extractMeshes(),this.initTexture(),this.applyCliffsTexture()}extractMeshes(){this.topIslandCliffs=[],this.group.traverse(e=>{e instanceof Ne&&(e.name==="main-island"&&(this.mainIslandCliffs=e),["top-island-south","top-island-north","top-island"].includes(e.name)&&this.topIslandCliffs.push(e))})}initTexture(){this.material=new _a({map:this.resources.items.cliffsColor,normalMap:this.resources.items.cliffsNormal,aoMap:this.resources.items.cliffsAo,aoMapIntensity:1,roughnessMap:this.resources.items.cliffsRoughness,fog:!0,side:si}),this.engine.monitor.on("decline",e=>{switch(e?.detail?.declineLevel){case 3:this.flipStandardForShaderMaterial();break}})}flipStandardForShaderMaterial(){console.warn("Cliffs: Low fps detected. Switching to light material"),this.material.dispose(),this.material=rp(this.resources.items.cliffsColor,this.resources.items.environmentMap,new X("#c8c7c3")),this.applyCliffsTexture()}applyCliffsTexture(){this.mainIslandCliffs.material=this.material,this.mainIslandCliffs.receiveShadow=!0,this.mainIslandCliffs.castShadow=!0,this.topIslandCliffs.forEach(e=>{e.material=this.material,e.castShadow=!0,e.receiveShadow=!0}),this.environment.updateMaterials()}destroy(){this.material?.dispose(),this.mainIslandCliffs?.geometry.dispose(),this.topIslandCliffs?.forEach(e=>{e.geometry.dispose()})}}var MM=`#include <fog_pars_fragment>
uniform float uTime;uniform vec3 uMidColor;uniform vec3 uTopColor;uniform vec3 uBaseColor;varying vec2 vUv;varying vec3 vPosition;varying vec3 vWorldPosition;varying float vVerticalStripesNoise;varying float vBaseVoronoi;varying float vBubblesNoise;varying float vBubblesVoronoi;varying float vFoamNoise;varying float vFoamVoronoi;varying float vSmoothFoamVoronoi;float mapRangeClamped(float value,float fromMin,float fromMax,float toMin,float toMax){float t=clamp((value-fromMin)/(fromMax-fromMin),0.0,1.0);return mix(toMin,toMax,t);}void main(){float brightnessStrength=10.0;vec2 uv=vec2(vUv.x*2.5,vUv.y);float baseVoronoi=vBaseVoronoi;float topWaterPatternDisplacement=smoothstep(0.0,1.4,vUv.y);vec3 topWaterPatternMix=mix(vec3(topWaterPatternDisplacement),vec3(baseVoronoi),min(1.0-topWaterPatternDisplacement,0.13));float topShape=step(topWaterPatternMix.r,0.3);vec3 topWaterPatternColor=topShape*uTopColor;float midWaterPatternDisplacement=smoothstep(0.0,2.1,vUv.y);vec3 midWaterPatternMix=mix(vec3(midWaterPatternDisplacement),vec3(baseVoronoi),min(1.0-midWaterPatternDisplacement,0.1));float midShape=step(midWaterPatternMix.r,0.3)-topShape;vec3 midWaterPatternColor=midShape*uMidColor;float thirdShape=1.0-topShape-midShape;vec3 bottomWaterPatternColor=thirdShape*uBaseColor;vec3 color=topWaterPatternColor+midWaterPatternColor+bottomWaterPatternColor;float bubblesNoise=vBubblesNoise;vec3 mixAttempt=mix(vec3(uv.x,uv.y,0.0),vec3(bubblesNoise),0.275);float bubblesVoronoi=vBubblesVoronoi;vec2 center=vec2(0.5,0.29);vec2 aspect=vec2(0.35,0.9);vec2 bubbleMaskBase=(uv-center)*aspect;float bubblesMask=pow(length(bubbleMaskBase),1.9);bubblesMask=pow(smoothstep(0.085,0.0,bubblesMask),2.0);float initialMask=bubblesMask;bubblesMask*=bubblesNoise;bubblesMask=1.0-step(bubblesMask,0.3);float bubblesShape=step(bubblesVoronoi*mixAttempt.z,0.05);float bubbles=bubblesShape*bubblesMask;vec3 previousPattern=color*(1.0-bubbles);color=previousPattern+bubbles*uTopColor*1.45;float verticalWave=-cos(uv.y*40.0-uTime*6.5)*0.005;float verticalStripes=mod(uv.x+verticalWave,0.1);verticalStripes=step(0.006,verticalStripes);previousPattern=color*verticalStripes;vec3 darkVerticalStripes=vec3(1.0-verticalStripes)*uMidColor;color=previousPattern+mix(color,darkVerticalStripes,0.3);float whiteVerticalStripes=mod(uv.x-0.1-verticalWave,0.08)*bubblesNoise;whiteVerticalStripes=step(0.002,whiteVerticalStripes);center=vec2(0.5,-0.2+mod(uTime*0.6,0.5)*2.1);aspect=vec2(1.0,5.2);vec2 whiteVerticalStripesMaskBase=(uv-center)*aspect;float whiteVerticalStripesMask=pow(length(whiteVerticalStripesMaskBase),1.9);whiteVerticalStripesMask*=bubblesNoise;whiteVerticalStripesMask=pow(smoothstep(0.085,0.0,whiteVerticalStripesMask),2.0);float stripelessMask=whiteVerticalStripesMask*(1.0-whiteVerticalStripes);previousPattern=color*(1.0-stripelessMask);color=previousPattern+vec3(stripelessMask);float foamNoise=vFoamNoise;float foamMaskBend=sin((uv.x+0.0)*30.0)*0.025;float foamMask=smoothstep(0.5,0.0,uv.y+foamMaskBend);float topFoam=foamNoise;topFoam*=foamMask;topFoam=pow(topFoam,3.5);topFoam*=bubblesVoronoi*bubblesNoise;float topFoamBright=smoothstep(0.02,0.035,topFoam);topFoam=step(0.02,topFoam);previousPattern=color*(1.0-topFoam);color=previousPattern+vec3(topFoam);color+=topFoamBright*brightnessStrength;float verticalStripesNoise=vVerticalStripesNoise;float periodicity=0.4;float foamVerticalStripes=smoothstep(0.0,0.025,mod(uv.x,periodicity))*smoothstep(0.0,0.025,mod(-uv.x,periodicity));foamVerticalStripes=mix(foamVerticalStripes,verticalStripesNoise,0.5);foamVerticalStripes*=smoothstep(0.0,0.25,uv.y);foamVerticalStripes=step(0.795,foamVerticalStripes);float foamVoronoi=vFoamVoronoi;float foamVoronoi2=vSmoothFoamVoronoi;float testWater=(foamVoronoi-foamVoronoi2);float brightFoam=smoothstep(0.44,0.48,testWater);testWater=step(0.44,testWater);testWater*=foamVerticalStripes;brightFoam*=foamVerticalStripes;previousPattern=color*(1.0-testWater);color=previousPattern+testWater;color+=brightFoam*brightnessStrength;float alpha=1.0;vec2 bentUv=uv;float bendStrength=0.025;bentUv.y+=sin(uv.x*15.0)*bendStrength;float fadingZone=smoothstep(0.85,1.0,bentUv.y);fadingZone+=fadingZone*(1.0-vVerticalStripesNoise*2.0);fadingZone*=1.0-sign(vWorldPosition.y);alpha=1.0-fadingZone;alpha=clamp(alpha,0.0,1.0);if(alpha<0.2){discard;}gl_FragColor=vec4(color,alpha*0.92);
#include <fog_fragment>
#include <tonemapping_fragment>
#include <colorspace_fragment>
}`,IM=`vec4 SGPP_coord_prepare(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 SGPP_coord_prepare(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 SGPP_permute(vec4 x){return fract(x*((34.0/289.0)*x+(1.0/289.0)))*289.0;}vec4 SGPP_resolve(vec4 x){return fract(x*(7.0/288.0));}vec4 SGPP_hash_2D(vec2 gridcell){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));return SGPP_resolve(SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww));}void SGPP_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));hash_0=SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww);hash_1=SGPP_resolve(SGPP_permute(hash_0));hash_0=SGPP_resolve(hash_0);}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell.zzzz));highz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell_inc1.zzzz));}void SGPP_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){vec3 coords0=gridcell.xyz-floor(gridcell.xyz*(1.0/289.0))*289.0;vec3 coords3=step(coords0,vec3(287.5))*(coords0+1.0);vec3 coords1=mix(coords0,coords3,v1_mask);vec3 coords2=mix(coords0,coords3,v2_mask);hash_2=SGPP_permute(SGPP_permute(SGPP_permute(vec4(coords0.x,coords1.x,coords2.x,coords3.x))+vec4(coords0.y,coords1.y,coords2.y,coords3.y))+vec4(coords0.z,coords1.z,coords2.z,coords3.z));hash_0=SGPP_resolve(hash_2);hash_1=SGPP_resolve(hash_2=SGPP_permute(hash_2));hash_2=SGPP_resolve(SGPP_permute(hash_2));}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash_2=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash_0=SGPP_resolve(lowz_hash_2=SGPP_permute(highz_hash_2+gridcell.zzzz));highz_hash_0=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2+gridcell_inc1.zzzz));lowz_hash_1=SGPP_resolve(lowz_hash_2=SGPP_permute(lowz_hash_2));highz_hash_1=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2));lowz_hash_2=SGPP_resolve(SGPP_permute(lowz_hash_2));highz_hash_2=SGPP_resolve(SGPP_permute(highz_hash_2));}vec4 BBS_coord_prepare(vec4 x){return x-floor(x*(1.0/61.0))*61.0;}vec3 BBS_coord_prepare(vec3 x){return x-floor(x*(1.0/61.0))*61.0;}vec4 BBS_permute(vec4 x){return fract(x*x*(1.0/61.0))*61.0;}vec4 BBS_permute_and_resolve(vec4 x){return fract(x*x*(1.0/61.0));}vec4 BBS_hash_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);return BBS_permute_and_resolve(p+hash_coord.yyww);}vec4 BBS_hash_hq_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);p=BBS_permute(p+hash_coord.yyww);return BBS_permute_and_resolve(p+hash_coord.xzxz);}void BBS_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const float DOMAIN=60.0;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 p=BBS_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy);p=BBS_permute(p+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=BBS_permute_and_resolve(p+gridcell.zzzz);highz_hash=BBS_permute_and_resolve(p+gridcell_inc1.zzzz);}vec4 FAST32_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const float SOMELARGEFLOAT=951.135664;vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec2 SOMELARGEFLOATS=vec2(951.135664,642.949883);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec3 SOMELARGEFLOATS=vec3(951.135664,642.949883,803.202459);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));hash_2=fract(P*(1.0/SOMELARGEFLOATS.z));}vec4 FAST32_hash_2D_Cell(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec4 SOMELARGEFLOATS=vec4(951.135664,642.949883,803.202459,986.973274);vec2 P=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xy;P*=P;return fract((P.x*P.y)*(1.0/SOMELARGEFLOATS.xyzw));}vec4 FAST32_hash_3D_Cell(vec3 gridcell){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;gridcell.xy+=OFFSET.xy;gridcell.xy*=gridcell.xy;return fract((gridcell.x*gridcell.y)*(1.0/(SOMELARGEFLOATS+gridcell.zzzz*ZINC)));}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;highz_hash.xy=vec2(1.0/(SOMELARGEFLOAT+vec2(gridcell.z,gridcell_inc1.z)*ZINC));lowz_hash=fract(P*highz_hash.xxxx);highz_hash=fract(P*highz_hash.yyyy);}void FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec3 lowz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));v1_mask=(v1_mask.z<0.5)? lowz_mods : highz_mods;v2_mask=(v2_mask.z<0.5)? lowz_mods : highz_mods;hash_0=fract(P*vec4(lowz_mods.x,v1_mask.x,v2_mask.x,highz_mods.x));hash_1=fract(P*vec4(lowz_mods.y,v1_mask.y,v2_mask.y,highz_mods.y));hash_2=fract(P*vec4(lowz_mods.z,v1_mask.z,v2_mask.z,highz_mods.z));}vec4 FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec2 V1z_V2z=vec2(v1_mask.z<0.5 ? gridcell.z : gridcell_inc1.z,v2_mask.z<0.5 ? gridcell.z : gridcell_inc1.z);vec4 mod_vals=vec4(1.0/(SOMELARGEFLOAT+vec4(gridcell.z,V1z_V2z,gridcell_inc1.z)*ZINC));return fract(P*mod_vals);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;vec3 lowz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));lowz_hash_0=fract(P*lowz_mod.xxxx);highz_hash_0=fract(P*highz_mod.xxxx);lowz_hash_1=fract(P*lowz_mod.yyyy);highz_hash_1=fract(P*highz_mod.yyyy);lowz_hash_2=fract(P*lowz_mod.zzzz);highz_hash_2=fract(P*highz_mod.zzzz);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 lowz_hash_3,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2,out vec4 highz_hash_3){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;lowz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell.zzzz*ZINC.xyzw));highz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell_inc1.zzzz*ZINC.xyzw));lowz_hash_0=fract(P*lowz_hash_3.xxxx);highz_hash_0=fract(P*highz_hash_3.xxxx);lowz_hash_1=fract(P*lowz_hash_3.yyyy);highz_hash_1=fract(P*highz_hash_3.yyyy);lowz_hash_2=fract(P*lowz_hash_3.zzzz);highz_hash_2=fract(P*highz_hash_3.zzzz);lowz_hash_3=fract(P*lowz_hash_3.wwww);highz_hash_3=fract(P*highz_hash_3.wwww);}vec4 FAST32_2_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(403.839172,377.242706);const float DOMAIN=69.0;const float SOMELARGEFLOAT=32745.708984;const vec2 SCALE=vec2(2.009842,1.372549);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P=(P*SCALE.xyxy)+OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_3D(vec3 gridcell,out vec4 z0_hash,out vec4 z1_hash){const vec3 OFFSET=vec3(55.882355,63.167774,52.941177);const float DOMAIN=69.0;const float SOMELARGEFLOAT=69412.070313;const vec3 SCALE=vec3(0.235142,0.205890,0.216449);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);z0_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell.zzzz*(1.0/SOMELARGEFLOAT));z1_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell_inc1.zzzz*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash,out vec4 z1w0_hash,out vec4 z0w1_hash,out vec4 z1w1_hash){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const float SOMELARGEFLOAT=47165.636719;const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww)*(1.0/SOMELARGEFLOAT);z0w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx);z1w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy);z0w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz);z1w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww);}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash_0,out vec4 z0w0_hash_1,out vec4 z0w0_hash_2,out vec4 z0w0_hash_3,out vec4 z1w0_hash_0,out vec4 z1w0_hash_1,out vec4 z1w0_hash_2,out vec4 z1w0_hash_3,out vec4 z0w1_hash_0,out vec4 z0w1_hash_1,out vec4 z0w1_hash_2,out vec4 z0w1_hash_3,out vec4 z1w1_hash_0,out vec4 z1w1_hash_1,out vec4 z1w1_hash_2,out vec4 z1w1_hash_3){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(56974.746094,47165.636719,55049.667969,49901.273438);const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww);vec4 hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx;z0w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy;z1w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz;z0w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww;z1w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));}float Interpolation_C1(float x){return x*x*(3.0-2.0*x);}vec2 Interpolation_C1(vec2 x){return x*x*(3.0-2.0*x);}vec3 Interpolation_C1(vec3 x){return x*x*(3.0-2.0*x);}vec4 Interpolation_C1(vec4 x){return x*x*(3.0-2.0*x);}float Interpolation_C2(float x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec2 Interpolation_C2(vec2 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec3 Interpolation_C2(vec3 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2(vec4 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2_InterpAndDeriv(vec2 x){return x.xyxy*x.xyxy*(x.xyxy*(x.xyxy*(x.xyxy*vec2(6.0,0.0).xxyy+vec2(-15.0,30.0).xxyy)+vec2(10.0,-60.0).xxyy)+vec2(0.0,30.0).xxyy);}vec3 Interpolation_C2_Deriv(vec3 x){return x*x*(x*(x*30.0-60.0)+30.0);}float Interpolation_C2_Fast(float x){float x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec2 Interpolation_C2_Fast(vec2 x){vec2 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec3 Interpolation_C2_Fast(vec3 x){vec3 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec4 Interpolation_C2_Fast(vec4 x){vec4 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}float Interpolation_C3(float x){float xsq=x*x;float xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec2 Interpolation_C3(vec2 x){vec2 xsq=x*x;vec2 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec3 Interpolation_C3(vec3 x){vec3 xsq=x*x;vec3 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec4 Interpolation_C3(vec4 x){vec4 xsq=x*x;vec4 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}float Falloff_Xsq_C1(float xsq){xsq=1.0-xsq;return xsq*xsq;}float Falloff_Xsq_C2(float xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}vec4 Falloff_Xsq_C2(vec4 xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}float Value2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec2 blend=Interpolation_C2(Pf);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(hash,blend2.zxzx*blend2.wwyy);}float Value3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Value4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 z0w0_hash;vec4 z1w0_hash;vec4 z0w1_hash;vec4 z1w1_hash;FAST32_2_hash_4D(Pi,z0w0_hash,z1w0_hash,z0w1_hash,z1w1_hash);vec4 blend=Interpolation_C2(Pf);vec4 res0=z0w0_hash+(z0w1_hash-z0w0_hash)*blend.wwww;vec4 res1=z1w0_hash+(z1w1_hash-z1w0_hash)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0-blend.xy);return dot(res0,blend.zxzx*blend.wwyy);}float Perlin2D(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);
#if 1
vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);
#if 1
grad_results*=1.4142135623730950488016887242097;vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#else
grad_results*=2.3703703703703703703703703703704;vec4 vecs_len_sq=Pf_Pfmin1*Pf_Pfmin1;vecs_len_sq=vecs_len_sq.xzxz+vecs_len_sq.yyww;return dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq)),grad_results);
#endif
#else
vec4 hash=FAST32_hash_2D(Pi);hash-=0.5;vec4 grad_results=Pf_Pfmin1.xzxz*sign(hash)+Pf_Pfmin1.yyww*sign(abs(hash)-0.25);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#endif
}float Perlin3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;
#if 1
vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);
#if 1
vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);final*=1.1547005383792515290182975610039;return final;
#else
Pf*=Pf;Pf_min1*=Pf_min1;vec4 vecs_len_sq=vec4(Pf.x,Pf_min1.x,Pf.x,Pf_min1.x)+vec4(Pf.yy,Pf_min1.yy);float final=dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf.zzzz)),grad_results_0)+dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf_min1.zzzz)),grad_results_1);final*=2.3703703703703703703703703703704;return final;
#endif
#else
vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);hash_lowz-=0.5;vec4 grad_results_0_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_lowz);hash_lowz=abs(hash_lowz)-0.25;vec4 grad_results_0_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_lowz);vec4 grad_results_0_2=Pf.zzzz*sign(abs(hash_lowz)-0.125);vec4 grad_results_0=grad_results_0_0+grad_results_0_1+grad_results_0_2;hash_highz-=0.5;vec4 grad_results_1_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_highz);hash_highz=abs(hash_highz)-0.25;vec4 grad_results_1_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_highz);vec4 grad_results_1_2=Pf_min1.zzzz*sign(abs(hash_highz)-0.125);vec4 grad_results_1=grad_results_1_0+grad_results_1_1+grad_results_1_2;vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy)*(2.0/3.0);
#endif
}float Perlin4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 Pf_min1=Pf-1.0;vec4 lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3;vec4 highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3;vec4 lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3;vec4 highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3;FAST32_2_hash_4D(Pi,lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3,highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3,lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3,highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3);lowz_loww_hash_0-=0.49999;lowz_loww_hash_1-=0.49999;lowz_loww_hash_2-=0.49999;lowz_loww_hash_3-=0.49999;highz_loww_hash_0-=0.49999;highz_loww_hash_1-=0.49999;highz_loww_hash_2-=0.49999;highz_loww_hash_3-=0.49999;lowz_highw_hash_0-=0.49999;lowz_highw_hash_1-=0.49999;lowz_highw_hash_2-=0.49999;lowz_highw_hash_3-=0.49999;highz_highw_hash_0-=0.49999;highz_highw_hash_1-=0.49999;highz_highw_hash_2-=0.49999;highz_highw_hash_3-=0.49999;vec4 grad_results_lowz_loww=inversesqrt(lowz_loww_hash_0*lowz_loww_hash_0+lowz_loww_hash_1*lowz_loww_hash_1+lowz_loww_hash_2*lowz_loww_hash_2+lowz_loww_hash_3*lowz_loww_hash_3);grad_results_lowz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_loww_hash_1+Pf.zzzz*lowz_loww_hash_2+Pf.wwww*lowz_loww_hash_3);vec4 grad_results_highz_loww=inversesqrt(highz_loww_hash_0*highz_loww_hash_0+highz_loww_hash_1*highz_loww_hash_1+highz_loww_hash_2*highz_loww_hash_2+highz_loww_hash_3*highz_loww_hash_3);grad_results_highz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_loww_hash_1+Pf_min1.zzzz*highz_loww_hash_2+Pf.wwww*highz_loww_hash_3);vec4 grad_results_lowz_highw=inversesqrt(lowz_highw_hash_0*lowz_highw_hash_0+lowz_highw_hash_1*lowz_highw_hash_1+lowz_highw_hash_2*lowz_highw_hash_2+lowz_highw_hash_3*lowz_highw_hash_3);grad_results_lowz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_highw_hash_1+Pf.zzzz*lowz_highw_hash_2+Pf_min1.wwww*lowz_highw_hash_3);vec4 grad_results_highz_highw=inversesqrt(highz_highw_hash_0*highz_highw_hash_0+highz_highw_hash_1*highz_highw_hash_1+highz_highw_hash_2*highz_highw_hash_2+highz_highw_hash_3*highz_highw_hash_3);grad_results_highz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_highw_hash_1+Pf_min1.zzzz*highz_highw_hash_2+Pf_min1.wwww*highz_highw_hash_3);vec4 blend=Interpolation_C2(Pf);vec4 res0=grad_results_lowz_loww+(grad_results_lowz_highw-grad_results_lowz_loww)*blend.wwww;vec4 res1=grad_results_highz_loww+(grad_results_highz_highw-grad_results_highz_loww)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0)-blend.xy;return dot(res0,blend.zxzx*blend.wwyy);}float ValuePerlin2D(vec2 P,float blend_val){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_value,hash_x,hash_y;FAST32_hash_2D(Pi,hash_value,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results*=1.4142135623730950488016887242097;grad_results=mix((hash_value*2.0-1.0),grad_results,blend_val);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);}float ValuePerlin3D(vec3 P,float blend_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0*=1.1547005383792515290182975610039;grad_results_1*=1.1547005383792515290182975610039;grad_results_0=mix((hash_value0*2.0-1.0),grad_results_0,blend_val);grad_results_1=mix((hash_value1*2.0-1.0),grad_results_1,blend_val);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Cubist2D(vec2 P,vec2 range_clamp){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y,hash_value;FAST32_hash_2D(Pi,hash_x,hash_y,hash_value);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results=(hash_value-0.5)*(1.0/grad_results);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));float final=dot(grad_results,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}float Cubist3D(vec3 P,vec2 range_clamp){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0=(hash_value0-0.5)*(1.0/grad_results_0);grad_results_1=(hash_value1-0.5)*(1.0/grad_results_1);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}vec4 Cellular_weight_samples(vec4 samples){samples=samples*2.0-1.0;return(samples*samples*samples)-sign(samples);}float Cellular2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);
#if 1
const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x=hash_x*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y=hash_y*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;d.xy=min(d.xy,d.zw);return min(d.x,d.y)*(1.0/1.125);}float Cellular3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);
#if 1
const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x0=hash_x0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y0=hash_y0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_x1=hash_x1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y1=hash_y1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_z0=hash_z0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW);hash_z1=hash_z1*JITTER_WINDOW*2.0+vec4(1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;d1=min(d1,d2);d1.xy=min(d1.xy,d1.wz);return min(d1.x,d1.y)*(9.0/12.0);}/*float SparseConvolution2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;const float RADIUS=1.0-JITTER_WINDOW;d*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d,vec4(1.0))),vec4(1.0));}float SparseConvolution3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;const float RADIUS=(1.0-JITTER_WINDOW);d1*=((1.0/RADIUS)*(1.0/RADIUS));d2*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d1,vec4(1.0)))+Falloff_Xsq_C2(min(d2,vec4(1.0))),vec4(1.0));}*/float PolkaDot2D(vec2 P,float radius_low,float radius_high){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.z*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xy*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float PolkaDot3D(vec3 P,float radius_low,float radius_high){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash=FAST32_hash_3D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.w*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xyz*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float Stars2D(vec2 P,float probability_threshold,float max_dimness,float two_over_radius){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float VALUE=1.0-max_dimness*hash.z;Pf*=two_over_radius;Pf-=(two_over_radius-1.0);Pf+=hash.xy*(two_over_radius-2.0);return(hash.w<probability_threshold)?(Falloff_Xsq_C1(min(dot(Pf,Pf),1.0))*VALUE): 0.0;}float SimplexPerlin2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw));const float FINAL_NORMALIZATION=99.204334582718712976990005025589;vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);m=m*m;return dot(m*m,grad_results)*FINAL_NORMALIZATION;}float SimplexPolkaDot2D(vec2 P,float radius,float max_dimness){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.4494897427831780981972840747059;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec2 v0=(Pi-dot(Pi,vec2(UNSKEWFACTOR))-P);vec4 v0123_x=vec4(0.0,SIMPLEX_POINTS.xyz)+v0.x;vec4 v0123_y=vec4(0.0,SIMPLEX_POINTS.yxz)+v0.y;vec4 hash=FAST32_hash_2D(Pi);radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v0123_x*=radius;v0123_y*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v0123_x*v0123_x+v0123_y*v0123_y));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float SimplexCellular2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HEIGHT=1.4142135623730950488016887242097;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR)*INV_SIMPLEX_TRI_HEIGHT;P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=(0.10566243270259355887271280487451*INV_SIMPLEX_TRI_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;vec2 p0=((Pi-dot(Pi,vec2(UNSKEWFACTOR)))-P)*INV_SIMPLEX_TRI_HEIGHT;hash_x+=p0.xxxx;hash_y+=p0.yyyy;hash_x.yzw+=SIMPLEX_POINTS.xyz;hash_y.yzw+=SIMPLEX_POINTS.yxz;vec4 distsq=hash_x*hash_x+hash_y*hash_y;vec2 tmp=min(distsq.xy,distsq.zw);return min(tmp.x,tmp.y);}void Simplex3D_GetCornerVectors(vec3 P,out vec3 Pi,out vec3 Pi_1,out vec3 Pi_2,out vec4 v1234_x,out vec4 v1234_y,out vec4 v1234_z){const float SKEWFACTOR=1.0/3.0;const float UNSKEWFACTOR=1.0/6.0;const float SIMPLEX_CORNER_POS=0.5;const float SIMPLEX_PYRAMID_HEIGHT=0.70710678118654752440084436210485;P*=SIMPLEX_PYRAMID_HEIGHT;Pi=floor(P+dot(P,vec3(SKEWFACTOR)));vec3 x0=P-Pi+dot(Pi,vec3(UNSKEWFACTOR));vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;Pi_1=min(g.xyz,l.zxy);Pi_2=max(g.xyz,l.zxy);vec3 x1=x0-Pi_1+UNSKEWFACTOR;vec3 x2=x0-Pi_2+SKEWFACTOR;vec3 x3=x0-SIMPLEX_CORNER_POS;v1234_x=vec4(x0.x,x1.x,x2.x,x3.x);v1234_y=vec4(x0.y,x1.y,x2.y,x3.y);v1234_z=vec4(x0.z,x1.z,x2.z,x3.z);}vec4 Simplex3D_GetSurfletWeights(vec4 v1234_x,vec4 v1234_y,vec4 v1234_z){vec4 surflet_weights=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;surflet_weights=max(0.5-surflet_weights,0.0);return surflet_weights*surflet_weights*surflet_weights;}float SimplexPerlin3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 grad_results=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2)*(hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return dot(Simplex3D_GetSurfletWeights(v1234_x,v1234_y,v1234_z),grad_results)*FINAL_NORMALIZATION;}float SimplexCellular3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_x;vec4 hash_y;vec4 hash_z;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_x,hash_y,hash_z);const float INV_SIMPLEX_PYRAMID_HEIGHT=1.4142135623730950488016887242097;const float JITTER_WINDOW=(0.0597865779345250670558198111*INV_SIMPLEX_PYRAMID_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;hash_z=Cellular_weight_samples(hash_z)*JITTER_WINDOW;v1234_x*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_y*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_z*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_x+=hash_x;v1234_y+=hash_y;v1234_z+=hash_z;vec4 distsq=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;return min(min(distsq.x,distsq.y),min(distsq.z,distsq.w));}float SimplexPolkaDot3D(vec3 P,float radius,float max_dimness){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash=FAST32_hash_3D(Pi,Pi_1,Pi_2);const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.3094010767585030580365951220078;radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v1234_x*=radius;v1234_y*=radius;v1234_z*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float QuinticHermite(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,x,0.0));}vec4 QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 egrad0,vec4 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;}vec4 QuinticHermite(float x,vec2 igrad0,vec2 igrad1,vec2 egrad0,vec2 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return vec4(egrad1,igrad0)*vec4(h123.zz,1.0,1.0)+vec4(egrad0,h123.xx)*vec4(vec2(h123.y+x),(igrad1-igrad0));}void QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}void QuinticHermite(float x,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}float QuinticHermiteDeriv(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(30.0,-15.0,-15.0);const vec3 C1=vec3(-60.0,32.0,28.0);const vec3 C2=vec3(30.0,-18.0,-12.0);vec3 h123=(((C1+C0*x)*x)+C2)*(x*x);return dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,1.0,0.0));}float Hermite2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float Hermite3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float ValueHermite2D(vec2 P,float value_scale,float gradient_scale,float normalization_val){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_value,hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_value,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999)*gradient_scale;hash_grady=(hash_grady-0.49999)*gradient_scale;hash_value=(hash_value-0.5)*value_scale;vec4 qh_results=QuinticHermite(Pf.y,vec4(hash_value.xy,hash_gradx.xy),vec4(hash_value.zw,hash_gradx.zw),vec4(hash_grady.xy,0.0,0.0),vec4(hash_grady.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}float ValueHermite3D(vec3 P,float value_scale,float gradient_scale,float normalization_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999)*gradient_scale;hash_grady0=(hash_grady0-0.49999)*gradient_scale;hash_gradz0=(hash_gradz0-0.49999)*gradient_scale;hash_gradx1=(hash_gradx1-0.49999)*gradient_scale;hash_grady1=(hash_grady1-0.49999)*gradient_scale;hash_gradz1=(hash_gradz1-0.49999)*gradient_scale;hash_value0=(hash_value0-0.5)*value_scale;hash_value1=(hash_value1-0.5)*value_scale;vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_value0,hash_value1,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}vec3 Value2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec4 blend=Interpolation_C2_InterpAndDeriv(Pf);vec4 res0=mix(hash.xyxz,hash.zwyw,blend.yyxx);return vec3(res0.x,0.0,0.0)+(res0.yyw-res0.xxz)*blend.xzw;}vec4 Value3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 res1=mix(res0.xyxz,res0.zwyw,blend.yyxx);vec4 res3=mix(vec4(hash_lowz.xy,hash_highz.xy),vec4(hash_lowz.zw,hash_highz.zw),blend.y);vec2 res4=mix(res3.xz,res3.yw,blend.x);return vec4(res1.x,0.0,0.0,0.0)+(vec4(res1.yyw,res4.y)-vec4(res1.xxz,res4.x))*vec4(blend.x,Interpolation_C2_Deriv(Pf));}vec3 Perlin2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 dotval=(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);vec3 dotval0_grad0=vec3(dotval.x,grad_x.x,grad_y.x);vec3 dotval1_grad1=vec3(dotval.y,grad_x.y,grad_y.y);vec3 dotval2_grad2=vec3(dotval.z,grad_x.z,grad_y.z);vec3 dotval3_grad3=vec3(dotval.w,grad_x.w,grad_y.w);vec3 k0_gk0=dotval1_grad1-dotval0_grad0;vec3 k1_gk1=dotval2_grad2-dotval0_grad0;vec3 k2_gk2=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 blend=Interpolation_C2_InterpAndDeriv(Pf_Pfmin1.xy);vec3 results=dotval0_grad0+blend.x*k0_gk0+blend.y*(k1_gk1+blend.x*k2_gk2);results.yz+=blend.zw*(vec2(k0_gk0.x,k1_gk1.x)+blend.yx*k2_gk2.xx);return results*1.4142135623730950488016887242097;}vec4 Perlin3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 dotval_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 dotval_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec4 dotval0_grad0=vec4(dotval_0.x,grad_x0.x,grad_y0.x,grad_z0.x);vec4 dotval1_grad1=vec4(dotval_0.y,grad_x0.y,grad_y0.y,grad_z0.y);vec4 dotval2_grad2=vec4(dotval_0.z,grad_x0.z,grad_y0.z,grad_z0.z);vec4 dotval3_grad3=vec4(dotval_0.w,grad_x0.w,grad_y0.w,grad_z0.w);vec4 dotval4_grad4=vec4(dotval_1.x,grad_x1.x,grad_y1.x,grad_z1.x);vec4 dotval5_grad5=vec4(dotval_1.y,grad_x1.y,grad_y1.y,grad_z1.y);vec4 dotval6_grad6=vec4(dotval_1.z,grad_x1.z,grad_y1.z,grad_z1.z);vec4 dotval7_grad7=vec4(dotval_1.w,grad_x1.w,grad_y1.w,grad_z1.w);vec4 k0_gk0=dotval1_grad1-dotval0_grad0;vec4 k1_gk1=dotval2_grad2-dotval0_grad0;vec4 k2_gk2=dotval4_grad4-dotval0_grad0;vec4 k3_gk3=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 k4_gk4=dotval5_grad5-dotval4_grad4-k0_gk0;vec4 k5_gk5=dotval6_grad6-dotval4_grad4-k1_gk1;vec4 k6_gk6=(dotval7_grad7-dotval6_grad6)-(dotval5_grad5-dotval4_grad4)-k3_gk3;vec3 blend=Interpolation_C2(Pf);vec3 blendDeriv=Interpolation_C2_Deriv(Pf);float u=blend.x;float v=blend.y;float w=blend.z;vec4 result=dotval0_grad0+u*(k0_gk0+v*k3_gk3)+v*(k1_gk1+w*k5_gk5)+w*(k2_gk2+u*(k4_gk4+v*k6_gk6));result.y+=dot(vec4(k0_gk0.x,k3_gk3.x*v,vec2(k4_gk4.x,k6_gk6.x*v)*w),vec4(blendDeriv.x));result.z+=dot(vec4(k1_gk1.x,k3_gk3.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*w),vec4(blendDeriv.y));result.w+=dot(vec4(k2_gk2.x,k4_gk4.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*v),vec4(blendDeriv.z));result*=1.1547005383792515290182975610039;return result;}vec3 PerlinSurflet2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 grad_results=grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww;vec4 m=Pf_Pfmin1*Pf_Pfmin1;m=m.xzxz+m.yyww;m=max(1.0-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,Pf_Pfmin1.xzxz)+dot(m3,grad_x);float yderiv=dot(temp,Pf_Pfmin1.yyww)+dot(m3,grad_y);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec3(dot(m3,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 PerlinSurflet3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 grad_results_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 grad_results_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec3 Pf_sq=Pf*Pf;vec3 Pf_min1_sq=Pf_min1*Pf_min1;vec4 vecs_len_sq=vec2(Pf_sq.x,Pf_min1_sq.x).xyxy+vec2(Pf_sq.y,Pf_min1_sq.y).xxyy;vec4 m_0=vecs_len_sq+Pf_sq.zzzz;m_0=max(1.0-m_0,0.0);vec4 m2_0=m_0*m_0;vec4 m3_0=m_0*m2_0;vec4 m_1=vecs_len_sq+Pf_min1_sq.zzzz;m_1=max(1.0-m_1,0.0);vec4 m2_1=m_1*m_1;vec4 m3_1=m_1*m2_1;vec4 temp_0=-6.0*m2_0*grad_results_0;float xderiv_0=dot(temp_0,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_0,grad_x0);float yderiv_0=dot(temp_0,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_0,grad_y0);float zderiv_0=dot(temp_0,Pf.zzzz)+dot(m3_0,grad_z0);vec4 temp_1=-6.0*m2_1*grad_results_1;float xderiv_1=dot(temp_1,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_1,grad_x1);float yderiv_1=dot(temp_1,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_1,grad_y1);float zderiv_1=dot(temp_1,Pf_min1.zzzz)+dot(m3_1,grad_z1);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec4(dot(m3_0,grad_results_0)+dot(m3_1,grad_results_1),vec3(xderiv_0,yderiv_0,zderiv_0)+vec3(xderiv_1,yderiv_1,zderiv_1))*FINAL_NORMALIZATION;}vec3 Cellular2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;vec3 t1=d.x<d.y ? vec3(d.x,dx.x,dy.x): vec3(d.y,dx.y,dy.y);vec3 t2=d.z<d.w ? vec3(d.z,dx.z,dy.z): vec3(d.w,dx.w,dy.w);return(t1.x<t2.x ? t1 : t2)*vec3(1.0,2.0,2.0)*(1.0/1.125);}vec4 Cellular3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;vec4 r1=d1.x<d1.y ? vec4(d1.x,dx1.x,dy1.x,dz1.x): vec4(d1.y,dx1.y,dy1.y,dz1.y);vec4 r2=d1.z<d1.w ? vec4(d1.z,dx1.z,dy1.z,dz1.z): vec4(d1.w,dx1.w,dy1.w,dz1.w);vec4 r3=d2.x<d2.y ? vec4(d2.x,dx2.x,dy2.x,dz2.x): vec4(d2.y,dx2.y,dy2.y,dz2.y);vec4 r4=d2.z<d2.w ? vec4(d2.z,dx2.z,dy2.z,dz2.z): vec4(d2.w,dx2.w,dy2.w,dz2.w);vec4 t1=r1.x<r2.x ? r1 : r2;vec4 t2=r3.x<r4.x ? r3 : r4;return(t1.x<t2.x ? t1 : t2)*vec4(1.0,vec3(2.0))*(9.0/12.0);}vec3 SimplexPerlin2D_Deriv(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec3 grad_results=grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw);vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);vec3 m2=m*m;vec3 m4=m2*m2;vec3 temp=8.0*m2*m*grad_results;float xderiv=dot(temp,vec3(v0.x,v12.xz))-dot(m4,grad_x);float yderiv=dot(temp,vec3(v0.y,v12.yw))-dot(m4,grad_y);const float FINAL_NORMALIZATION=99.204334582718712976990005025589;return vec3(dot(m4,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 SimplexPerlin3D_Deriv(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 norm=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2);hash_0*=norm;hash_1*=norm;hash_2*=norm;vec4 grad_results=hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z;vec4 m=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;m=max(0.5-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,v1234_x)+dot(m3,hash_0);float yderiv=dot(temp,v1234_y)+dot(m3,hash_1);float zderiv=dot(temp,v1234_z)+dot(m3,hash_2);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return vec4(dot(m3,grad_results),xderiv,yderiv,zderiv)*FINAL_NORMALIZATION;}vec3 Hermite2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results_x=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);vec4 qh_results_y=QuinticHermite(Pf.x,hash_grady.xz,hash_grady.yw,hash_gradx.xz,hash_gradx.yw);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);return vec3(finalpos,deriv_x,deriv_y)*FINAL_NORM_VAL;}vec4 Hermite3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results_z,igrad_results_x_z,igrad_results_y_z;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results_z,igrad_results_x_z,igrad_results_y_z);vec4 ival_results_y,igrad_results_x_y,igrad_results_z_y;QuinticHermite(Pf.y,vec4(hash_gradx0.xy,hash_gradx1.xy),vec4(hash_gradx0.zw,hash_gradx1.zw),vec4(hash_gradz0.xy,hash_gradz1.xy),vec4(hash_gradz0.zw,hash_gradz1.zw),vec4(hash_grady0.xy,hash_grady1.xy),vec4(hash_grady0.zw,hash_grady1.zw),ival_results_y,igrad_results_x_y,igrad_results_z_y);vec4 qh_results_x=QuinticHermite(Pf.y,vec4(ival_results_z.xy,igrad_results_x_z.xy),vec4(ival_results_z.zw,igrad_results_x_z.zw),vec4(igrad_results_y_z.xy,0.0,0.0),vec4(igrad_results_y_z.zw,0.0,0.0));vec4 qh_results_y=QuinticHermite(Pf.x,vec4(ival_results_z.xz,igrad_results_y_z.xz),vec4(ival_results_z.yw,igrad_results_y_z.yw),vec4(igrad_results_x_z.xz,0.0,0.0),vec4(igrad_results_x_z.yw,0.0,0.0));vec4 qh_results_z=QuinticHermite(Pf.x,vec4(ival_results_y.xz,igrad_results_z_y.xz),vec4(ival_results_y.yw,igrad_results_z_y.yw),vec4(igrad_results_x_y.xz,0.0,0.0),vec4(igrad_results_x_y.yw,0.0,0.0));float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);float deriv_z=QuinticHermiteDeriv(Pf.z,qh_results_z.x,qh_results_z.y,qh_results_z.z,qh_results_z.w);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);return vec4(finalpos,deriv_x,deriv_y,deriv_z)*FINAL_NORM_VAL;}
#ifndef BLENDER_COMMON_HASH_GLSL
#define BLENDER_COMMON_HASH_GLSL
uint jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=jenkins_rot(c,4u);c+=b;b-=a;b ^=jenkins_rot(a,6u);a+=c;c-=b;c ^=jenkins_rot(b,8u);b+=a;a-=c;a ^=jenkins_rot(c,16u);c+=b;b-=a;b ^=jenkins_rot(a,19u);a+=c;c-=b;c ^=jenkins_rot(b,4u);b+=a;}void jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=jenkins_rot(b,14u);a ^=c;a-=jenkins_rot(c,11u);b ^=a;b-=jenkins_rot(a,25u);c ^=b;c-=jenkins_rot(b,16u);a ^=c;a-=jenkins_rot(c,4u);b ^=a;b-=jenkins_rot(a,14u);c ^=b;c-=jenkins_rot(b,24u);}uint hash_uint(uint kx){uint a,b,c;a=b=c=0xdeadbeefu+(1u<<2u)+13u;a+=kx;jenkins_final(a,b,c);return c;}uint hash_uint2(uint kx,uint ky){uint a,b,c;a=b=c=0xdeadbeefu+(2u<<2u)+13u;b+=ky;a+=kx;jenkins_final(a,b,c);return c;}uint hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;jenkins_final(a,b,c);return c;}uint hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;jenkins_mix(a,b,c);a+=kw;jenkins_final(a,b,c);return c;}uint hash_int(int kx){return hash_uint(uint(kx));}uint hash_int2(int kx,int ky){return hash_uint2(uint(kx),uint(ky));}uint hash_int3(int kx,int ky,int kz){return hash_uint3(uint(kx),uint(ky),uint(kz));}uint hash_int4(int kx,int ky,int kz,int kw){return hash_uint4(uint(kx),uint(ky),uint(kz),uint(kw));}int ihash_int(int kx){return int(hash_uint(uint(kx)));}int ihash_int2(int kx,int ky){return int(hash_uint2(uint(kx),uint(ky)));}int ihash_int3(int kx,int ky,int kz){return int(hash_uint3(uint(kx),uint(ky),uint(kz)));}int ihash_int4(int kx,int ky,int kz,int kw){return int(hash_uint4(uint(kx),uint(ky),uint(kz),uint(kw)));}ivec2 hash_pcg2d_i(ivec2 v){v=v*1664525+1013904223;v.x+=v.y*1664525;v.y+=v.x*1664525;v=v ^(v>>16);v.x+=v.y*1664525;v.y+=v.x*1664525;return v;}ivec3 hash_pcg3d_i(ivec3 v){v=v*1664525+1013904223;v.x+=v.y*v.z;v.y+=v.z*v.x;v.z+=v.x*v.y;v=v ^(v>>16);v.x+=v.y*v.z;v.y+=v.z*v.x;v.z+=v.x*v.y;return v;}ivec4 hash_pcg4d_i(ivec4 v){v=v*1664525+1013904223;v.x+=v.y*v.w;v.y+=v.z*v.x;v.z+=v.x*v.y;v.w+=v.y*v.z;v=v ^(v>>16);v.x+=v.y*v.w;v.y+=v.z*v.x;v.z+=v.x*v.y;v.w+=v.y*v.z;return v;}float hash_uint_to_float(uint kx){return float(hash_uint(kx))/float(0xFFFFFFFFu);}float hash_uint2_to_float(uint kx,uint ky){return float(hash_uint2(kx,ky))/float(0xFFFFFFFFu);}float hash_uint3_to_float(uint kx,uint ky,uint kz){return float(hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float hash_float_to_float(float k){return hash_uint_to_float(floatBitsToUint(k));}float hash_vec2_to_float(vec2 k){return hash_uint2_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y));}float hash_vec3_to_float(vec3 k){return hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}float hash_vec4_to_float(vec4 k){return hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec2 hash_vec2_to_vec2(vec2 k){return vec2(hash_vec2_to_float(k),hash_vec3_to_float(vec3(k,1.0)));}vec3 hash_vec3_to_vec3(vec3 k){return vec3(hash_vec3_to_float(k),hash_vec4_to_float(vec4(k,1.0)),hash_vec4_to_float(vec4(k,2.0)));}vec4 hash_vec4_to_vec4(vec4 k){return vec4(hash_vec4_to_float(k.xyzw),hash_vec4_to_float(k.wxyz),hash_vec4_to_float(k.zwxy),hash_vec4_to_float(k.yzwx));}vec2 hash_int2_to_vec2(ivec2 k){ivec2 h=hash_pcg2d_i(k);return vec2(h&0x7fffffff)*(1.0/float(0x7fffffff));}vec3 hash_int3_to_vec3(ivec3 k){ivec3 h=hash_pcg3d_i(k);return vec3(h&0x7fffffff)*(1.0/float(0x7fffffff));}vec4 hash_int4_to_vec4(ivec4 k){ivec4 h=hash_pcg4d_i(k);return vec4(h&0x7fffffff)*(1.0/float(0x7fffffff));}vec3 hash_int2_to_vec3(ivec2 k){return hash_int3_to_vec3(ivec3(k.x,k.y,0));}vec3 hash_int4_to_vec3(ivec4 k){return hash_int4_to_vec4(k).xyz;}vec3 hash_float_to_vec3(float k){return vec3(hash_float_to_float(k),hash_vec2_to_float(vec2(k,1.0)),hash_vec2_to_float(vec2(k,2.0)));}vec3 hash_vec2_to_vec3(vec2 k){return vec3(hash_vec2_to_float(k),hash_vec3_to_float(vec3(k,1.0)),hash_vec3_to_float(vec3(k,2.0)));}vec3 hash_vec4_to_vec3(vec4 k){return vec3(hash_vec4_to_float(k.xyzw),hash_vec4_to_float(k.zxwy),hash_vec4_to_float(k.wzyx));}vec2 hash_float_to_vec2(float k){return vec2(hash_float_to_float(k),hash_vec2_to_float(vec2(k,1.0)));}vec2 hash_vec3_to_vec2(vec3 k){return vec2(hash_vec3_to_float(k.xyz),hash_vec3_to_float(k.zxy));}vec2 hash_vec4_to_vec2(vec4 k){return vec2(hash_vec4_to_float(k.xyzw),hash_vec4_to_float(k.zxwy));}float integer_noise(int n){uint nn;nn=(uint(n)+1013u)&0x7fffffffu;nn=(nn>>13u)^ nn;nn=(uint(nn*(nn*nn*60493u+19990303u))+1376312589u)&0x7fffffffu;return 0.5*(float(nn)/1073741824.0);}float wang_hash_noise(uint s){s=(s ^ 61u)^(s>>16u);s*=9u;s=s ^(s>>4u);s*=0x27d4eb2du;s=s ^(s>>15u);return fract(float(s)/4294967296.0);}
#endif
#ifndef BLENDER_COMMON_MATH_BASE_LIB_GLSL
#define BLENDER_COMMON_MATH_BASE_LIB_GLSL
#define M_PI 3.14159265358979323846
#define M_TAU 6.28318530717958647692
#define M_PI_2 1.57079632679489661923
#define M_PI_4 0.78539816339744830962
#define M_SQRT2 1.41421356237309504880
#define M_SQRT1_2 0.70710678118654752440
#define M_SQRT3 1.73205080756887729352
#define M_SQRT1_3 0.57735026918962576450
#define M_1_PI 0.318309886183790671538
#define M_E 2.7182818284590452354
#define M_LOG2E 1.4426950408889634074
#define M_LOG10E 0.43429448190325182765
#define M_LN2 0.69314718055994530942
#define M_LN10 2.30258509299404568402
float pow2f(float x){return x*x;}float pow3f(float x){return x*x*x;}float pow4f(float x){return pow2f(pow2f(x));}float pow5f(float x){return pow4f(x)*x;}float pow6f(float x){return pow2f(pow3f(x));}float pow7f(float x){return pow6f(x)*x;}float pow8f(float x){return pow2f(pow4f(x));}int square_i(int v){return v*v;}uint square_uint(uint v){return v*v;}float square(float v){return v*v;}vec2 square(vec2 v){return v*v;}vec3 square(vec3 v){return v*v;}vec4 square(vec4 v){return v*v;}int cube_i(int v){return v*v*v;}uint cube_uint(uint v){return v*v*v;}float cube_f(float v){return v*v*v;}float hypot(float x,float y){return sqrt(x*x+y*y);}float atan2_safe(float y,float x){return atan(y,x);}
#define atan2 atan2_safe
float safe_mod(float a,float b){return(b!=0.0)? mod(a,b): 0.0;}float compatible_mod(float a,float b){if(b!=0.0){int N=int(a/b);return a-float(N)*b;}return 0.0;}int ceil_to_multiple(int a,int b){return((a+b-1)/b)*b;}uint ceil_to_multiple(uint a,uint b){return((a+b-1u)/b)*b;}int divide_ceil(int a,int b){return(a+b-1)/b;}uint divide_ceil(uint a,uint b){return(a+b-1u)/b;}void min_max(float value,inout float min_v,inout float max_v){min_v=min(value,min_v);max_v=max(value,max_v);}float safe_divide(float a,float b){return(b!=0.0)?(a/b): 0.0;}float safe_rcp(float a){return(a!=0.0)?(1.0/a): 0.0;}float safe_sqrt(float a){return sqrt(max(0.0,a));}float safe_acos(float a){if(a<=-1.0)return M_PI;if(a>=1.0)return 0.0;return acos(a);}bool is_equal(float a,float b,float epsilon){return abs(a-b)<=epsilon;}float sin_from_cos(float c){return safe_sqrt(1.0-square(c));}float cos_from_sin(float s){return safe_sqrt(1.0-square(s));}float fallback_pow(float x,float y,float fallback){if(x<0.0||(x==0.0&&y<=0.0))return fallback;return pow(x,y);}float compatible_pow(float x,float y){if(y==0.0)return 1.0;if(x<0.0)return(mod(-y,2.0)==0.0)? pow(-x,y):-pow(-x,y);if(x==0.0)return 0.0;return pow(x,y);}float wrap(float a,float b,float c){float range=b-c;float s=(a!=b)? floor((a-c)/range): 1.0;return(range!=0.0)? a-range*s : c;}
#endif
#ifndef BLENDER_COMMON_MATH_VECTOR_LIB_GLSL
#define BLENDER_COMMON_MATH_VECTOR_LIB_GLSL
bool is_zero(vec2 v){return all(equal(v,vec2(0.0)));}bool is_zero(vec3 v){return all(equal(v,vec3(0.0)));}bool is_zero(vec4 v){return all(equal(v,vec4(0.0)));}bool is_any_zero(vec2 v){return any(equal(v,vec2(0.0)));}bool is_any_zero(vec3 v){return any(equal(v,vec3(0.0)));}bool is_any_zero(vec4 v){return any(equal(v,vec4(0.0)));}bool almost_equal_relative(vec2 a,vec2 b,float eps){return all(lessThanEqual(abs(a-b),eps*abs(a)));}bool almost_equal_relative(vec3 a,vec3 b,float eps){return all(lessThanEqual(abs(a-b),eps*abs(a)));}bool almost_equal_relative(vec4 a,vec4 b,float eps){return all(lessThanEqual(abs(a-b),eps*abs(a)));}vec2 safe_mod(vec2 a,vec2 b){return mix(vec2(0.0),mod(a,b),notEqual(b,vec2(0.0)));}vec3 safe_mod(vec3 a,vec3 b){return mix(vec3(0.0),mod(a,b),notEqual(b,vec3(0.0)));}vec4 safe_mod(vec4 a,vec4 b){return mix(vec4(0.0),mod(a,b),notEqual(b,vec4(0.0)));}vec2 safe_mod(vec2 a,float b){return b!=0.0 ? mod(a,vec2(b)): vec2(0.0);}vec3 safe_mod(vec3 a,float b){return b!=0.0 ? mod(a,vec3(b)): vec3(0.0);}vec4 safe_mod(vec4 a,float b){return b!=0.0 ? mod(a,vec4(b)): vec4(0.0);}vec2 compatible_mod(vec2 a,vec2 b){return vec2(compatible_mod(a.x,b.x),compatible_mod(a.y,b.y));}vec3 compatible_mod(vec3 a,vec3 b){return vec3(compatible_mod(a.x,b.x),compatible_mod(a.y,b.y),compatible_mod(a.z,b.z));}vec4 compatible_mod(vec4 a,vec4 b){return vec4(compatible_mod(a.x,b.x),compatible_mod(a.y,b.y),compatible_mod(a.z,b.z),compatible_mod(a.w,b.w));}vec2 compatible_mod(vec2 a,float b){return vec2(compatible_mod(a.x,b),compatible_mod(a.y,b));}vec3 compatible_mod(vec3 a,float b){return vec3(compatible_mod(a.x,b),compatible_mod(a.y,b),compatible_mod(a.z,b));}vec4 compatible_mod(vec4 a,float b){return vec4(compatible_mod(a.x,b),compatible_mod(a.y,b),compatible_mod(a.z,b),compatible_mod(a.w,b));}vec2 wrap(vec2 a,vec2 b,vec2 c){return vec2(wrap(a.x,b.x,c.x),wrap(a.y,b.y,c.y));}vec3 wrap(vec3 a,vec3 b,vec3 c){return vec3(wrap(a.x,b.x,c.x),wrap(a.y,b.y,c.y),wrap(a.z,b.z,c.z));}vec4 wrap(vec4 a,vec4 b,vec4 c){return vec4(wrap(a.x,b.x,c.x),wrap(a.y,b.y,c.y),wrap(a.z,b.z,c.z),wrap(a.w,b.w,c.w));}float length_manhattan(vec2 a){return abs(a.x)+abs(a.y);}float length_manhattan(vec3 a){return abs(a.x)+abs(a.y)+abs(a.z);}float length_manhattan(vec4 a){return abs(a.x)+abs(a.y)+abs(a.z)+abs(a.w);}float length_squared(vec2 a){return dot(a,a);}float length_squared(vec3 a){return dot(a,a);}float length_squared(vec4 a){return dot(a,a);}float distance_manhattan(vec2 a,vec2 b){return length_manhattan(a-b);}float distance_manhattan(vec3 a,vec3 b){return length_manhattan(a-b);}float distance_manhattan(vec4 a,vec4 b){return length_manhattan(a-b);}float distance_squared(vec2 a,vec2 b){return length_squared(a-b);}float distance_squared(vec3 a,vec3 b){return length_squared(a-b);}float distance_squared(vec4 a,vec4 b){return length_squared(a-b);}vec3 project(vec3 p,vec3 v_proj){float len2=dot(v_proj,v_proj);return len2>0.0 ? v_proj*(dot(p,v_proj)/len2): vec3(0.0);}vec2 safe_normalize(vec2 v){float l2=dot(v,v);return l2>1e-35 ? normalize(v): vec2(1.0,0.0);}vec3 safe_normalize(vec3 v){float l2=dot(v,v);return l2>1e-35 ? normalize(v): vec3(1.0,0.0,0.0);}vec4 safe_normalize(vec4 v){float l2=dot(v,v);return l2>1e-35 ? normalize(v): vec4(1.0,0.0,0.0,0.0);}vec2 safe_divide(vec2 a,vec2 b){return mix(vec2(0.0),a/b,notEqual(b,vec2(0.0)));}vec3 safe_divide(vec3 a,vec3 b){return mix(vec3(0.0),a/b,notEqual(b,vec3(0.0)));}vec4 safe_divide(vec4 a,vec4 b){return mix(vec4(0.0),a/b,notEqual(b,vec4(0.0)));}vec2 safe_divide(vec2 a,float b){return b!=0.0 ? a/b : vec2(0.0);}vec3 safe_divide(vec3 a,float b){return b!=0.0 ? a/b : vec3(0.0);}vec4 safe_divide(vec4 a,float b){return b!=0.0 ? a/b : vec4(0.0);}vec2 safe_rcp(vec2 a){return mix(vec2(0.0),1.0/a,notEqual(a,vec2(0.0)));}vec3 safe_rcp(vec3 a){return mix(vec3(0.0),1.0/a,notEqual(a,vec3(0.0)));}vec4 safe_rcp(vec4 a){return mix(vec4(0.0),1.0/a,notEqual(a,vec4(0.0)));}float reduce_add(vec2 a){return a.x+a.y;}float reduce_add(vec3 a){return a.x+a.y+a.z;}float reduce_add(vec4 a){return a.x+a.y+a.z+a.w;}float reduce_mul(vec2 a){return a.x*a.y;}float reduce_mul(vec3 a){return a.x*a.y*a.z;}float reduce_mul(vec4 a){return a.x*a.y*a.z*a.w;}float reduce_max(vec2 a){return max(a.x,a.y);}float reduce_max(vec3 a){return max(max(a.x,a.y),a.z);}float reduce_max(vec4 a){return max(max(a.x,a.y),max(a.z,a.w));}float reduce_min(vec2 a){return min(a.x,a.y);}float reduce_min(vec3 a){return min(min(a.x,a.y),a.z);}float reduce_min(vec4 a){return min(min(a.x,a.y),min(a.z,a.w));}float average(vec2 a){return reduce_add(a)/2.0;}float average(vec3 a){return reduce_add(a)/3.0;}float average(vec4 a){return reduce_add(a)/4.0;}bool is_equal(vec2 a,vec2 b,float eps){return all(lessThanEqual(abs(a-b),vec2(eps)));}bool is_equal(vec3 a,vec3 b,float eps){return all(lessThanEqual(abs(a-b),vec3(eps)));}bool is_equal(vec4 a,vec4 b,float eps){return all(lessThanEqual(abs(a-b),vec4(eps)));}
#endif
void floor_frac(float x,out int x_int,out float x_fract){float x_floor=floor(x);x_int=int(x_floor);x_fract=x-x_floor;}/*Bilinear Interpolation:**v2 v3*@++++@       y*++^*++|*++|*@++++@       @------>x*v0 v1*/float bi_mix(float v0,float v1,float v2,float v3,float x,float y){float x1=1.0-x;return(1.0-y)*(v0*x1+v1*x)+y*(v2*x1+v3*x);}/*Trilinear Interpolation:**v6               v7*@++++++@*+\\+*+\\+*+\\+*+\\ v4+\\ v5*+@+++++++@          z*++++y   ^*v2 @+++++++@ v3+\\|*\\+\\+\\|*\\+\\+\\|*\\+\\++--------->x*\\+\\+*@++++++@*v0               v1*/float tri_mix(float v0,float v1,float v2,float v3,float v4,float v5,float v6,float v7,float x,float y,float z){float x1=1.0-x;float y1=1.0-y;float z1=1.0-z;return z1*(y1*(v0*x1+v1*x)+y*(v2*x1+v3*x))+z*(y1*(v4*x1+v5*x)+y*(v6*x1+v7*x));}float quad_mix(float v0,float v1,float v2,float v3,float v4,float v5,float v6,float v7,float v8,float v9,float v10,float v11,float v12,float v13,float v14,float v15,float x,float y,float z,float w){return mix(tri_mix(v0,v1,v2,v3,v4,v5,v6,v7,x,y,z),tri_mix(v8,v9,v10,v11,v12,v13,v14,v15,x,y,z),w);}float fade(float t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float negate_if(float value,float condition){return value*(1.0-2.0*step(0.5,abs(condition)));}float noise_grad1(int hash,float x);float noise_grad2(int hash,float x,float y);float noise_grad3(int hash,float x,float y,float z);float noise_grad4(int hash,float x,float y,float z,float w);float noise_grad1(int hash,float x){int h=hash&15;float g=1.0+float(h&7);return negate_if(g,float(h&8))*x;}float noise_grad2(int hash,float x,float y){int h=hash&7;float u=float(h)<4.0 ? x : y;float v=2.0*(float(h)<4.0 ? y : x);return negate_if(u,float(h&1))+negate_if(v,float(h&2));}float noise_grad3(int hash,float x,float y,float z){int h=hash&15;float u=float(h)<8.0 ? x : y;float vt=((float(h)==12.0)||(float(h)==14.0))? x : z;float v=float(h)<4.0 ? y : vt;return negate_if(u,float(h&1))+negate_if(v,float(h&2));}float noise_grad4(int hash,float x,float y,float z,float w){int h=hash&31;float u=float(h)<24.0 ? x : y;float v=float(h)<16.0 ? y : z;float s=float(h)<8.0 ? z : w;return negate_if(u,float(h&1))+negate_if(v,float(h&2))+negate_if(s,float(h&4));}float noise_perlin(float x){int X;float fx;floor_frac(x,X,fx);float u=fade(fx);float r=mix(noise_grad1(ihash_int(X),fx),noise_grad1(ihash_int(X+1),fx-1.0),u);return r;}float noise_perlin(vec2 vec){int X,Y;float fx,fy;floor_frac(vec.x,X,fx);floor_frac(vec.y,Y,fy);float u=fade(fx);float v=fade(fy);float r=bi_mix(noise_grad2(ihash_int2(X,Y),fx,fy),noise_grad2(ihash_int2(X+1,Y),fx-1.0,fy),noise_grad2(ihash_int2(X,Y+1),fx,fy-1.0),noise_grad2(ihash_int2(X+1,Y+1),fx-1.0,fy-1.0),u,v);return r;}float noise_perlin(vec3 vec){int X,Y,Z;float fx,fy,fz;floor_frac(vec.x,X,fx);floor_frac(vec.y,Y,fy);floor_frac(vec.z,Z,fz);float u=fade(fx);float v=fade(fy);float w=fade(fz);float r=tri_mix(noise_grad3(ihash_int3(X,Y,Z),fx,fy,fz),noise_grad3(ihash_int3(X+1,Y,Z),fx-1.0,fy,fz),noise_grad3(ihash_int3(X,Y+1,Z),fx,fy-1.0,fz),noise_grad3(ihash_int3(X+1,Y+1,Z),fx-1.0,fy-1.0,fz),noise_grad3(ihash_int3(X,Y,Z+1),fx,fy,fz-1.0),noise_grad3(ihash_int3(X+1,Y,Z+1),fx-1.0,fy,fz-1.0),noise_grad3(ihash_int3(X,Y+1,Z+1),fx,fy-1.0,fz-1.0),noise_grad3(ihash_int3(X+1,Y+1,Z+1),fx-1.0,fy-1.0,fz-1.0),u,v,w);return r;}float noise_perlin(vec4 vec){int X,Y,Z,W;float fx,fy,fz,fw;floor_frac(vec.x,X,fx);floor_frac(vec.y,Y,fy);floor_frac(vec.z,Z,fz);floor_frac(vec.w,W,fw);float u=fade(fx);float v=fade(fy);float t=fade(fz);float s=fade(fw);float r=quad_mix(noise_grad4(ihash_int4(X,Y,Z,W),fx,fy,fz,fw),noise_grad4(ihash_int4(X+1,Y,Z,W),fx-1.0,fy,fz,fw),noise_grad4(ihash_int4(X,Y+1,Z,W),fx,fy-1.0,fz,fw),noise_grad4(ihash_int4(X+1,Y+1,Z,W),fx-1.0,fy-1.0,fz,fw),noise_grad4(ihash_int4(X,Y,Z+1,W),fx,fy,fz-1.0,fw),noise_grad4(ihash_int4(X+1,Y,Z+1,W),fx-1.0,fy,fz-1.0,fw),noise_grad4(ihash_int4(X,Y+1,Z+1,W),fx,fy-1.0,fz-1.0,fw),noise_grad4(ihash_int4(X+1,Y+1,Z+1,W),fx-1.0,fy-1.0,fz-1.0,fw),noise_grad4(ihash_int4(X,Y,Z,W+1),fx,fy,fz,fw-1.0),noise_grad4(ihash_int4(X+1,Y,Z,W+1),fx-1.0,fy,fz,fw-1.0),noise_grad4(ihash_int4(X,Y+1,Z,W+1),fx,fy-1.0,fz,fw-1.0),noise_grad4(ihash_int4(X+1,Y+1,Z,W+1),fx-1.0,fy-1.0,fz,fw-1.0),noise_grad4(ihash_int4(X,Y,Z+1,W+1),fx,fy,fz-1.0,fw-1.0),noise_grad4(ihash_int4(X+1,Y,Z+1,W+1),fx-1.0,fy,fz-1.0,fw-1.0),noise_grad4(ihash_int4(X,Y+1,Z+1,W+1),fx,fy-1.0,fz-1.0,fw-1.0),noise_grad4(ihash_int4(X+1,Y+1,Z+1,W+1),fx-1.0,fy-1.0,fz-1.0,fw-1.0),u,v,t,s);return r;}float noise_scale1(float result){return 0.2500*result;}float noise_scale2(float result){return 0.6616*result;}float noise_scale3(float result){return 0.9820*result;}float noise_scale4(float result){return 0.8344*result;}float snoise(float p){float precision_correction=0.5*float(abs(p)>=1000000.0);p=mod(p,100000.0)+precision_correction;return noise_scale1(noise_perlin(p));}float noise(float p){return 0.5*snoise(p)+0.5;}float snoise(vec2 p){vec2 precision_correction=0.5*vec2(float(abs(p.x)>=1000000.0),float(abs(p.y)>=1000000.0));p=mod(p,100000.0)+precision_correction;return noise_scale2(noise_perlin(p));}float noise(vec2 p){return 0.5*snoise(p)+0.5;}float snoise(vec3 p){vec3 precision_correction=0.5*vec3(float(abs(p.x)>=1000000.0),float(abs(p.y)>=1000000.0),float(abs(p.z)>=1000000.0));p=mod(p,100000.0)+precision_correction;return noise_scale3(noise_perlin(p));}float noise(vec3 p){return 0.5*snoise(p)+0.5;}float snoise(vec4 p){vec4 precision_correction=0.5*vec4(float(abs(p.x)>=1000000.0),float(abs(p.y)>=1000000.0),float(abs(p.z)>=1000000.0),float(abs(p.w)>=1000000.0));p=mod(p,100000.0)+precision_correction;return noise_scale4(noise_perlin(p));}float noise(vec4 p){return 0.5*snoise(p)+0.5;}float noise_fbm_1d(float co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){float p=co;float fscale=1.0;float amp=1.0;float maxamp=0.0;float sum=0.0;for(int i=0;i<=int(detail);i++){float t=snoise(fscale*p);sum+=t*amp;maxamp+=amp;amp*=roughness;fscale*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float t=snoise(fscale*p);float sum2=sum+t*amp;return normalize ?mix(0.5*sum/maxamp+0.5,0.5*sum2/(maxamp+amp)+0.5,rmd):mix(sum,sum2,rmd);}else{return normalize ? 0.5*sum/maxamp+0.5 : sum;}}float noise_fbm_2d(vec2 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec2 p=co;float fscale=1.0;float amp=1.0;float maxamp=0.0;float sum=0.0;for(int i=0;i<=int(detail);i++){float t=snoise(fscale*p);sum+=t*amp;maxamp+=amp;amp*=roughness;fscale*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float t=snoise(fscale*p);float sum2=sum+t*amp;return normalize ?mix(0.5*sum/maxamp+0.5,0.5*sum2/(maxamp+amp)+0.5,rmd):mix(sum,sum2,rmd);}else{return normalize ? 0.5*sum/maxamp+0.5 : sum;}}float noise_fbm_3d(vec3 co,float scale,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec3 p=co;float fscale=scale;float amp=1.0;float maxamp=0.0;float sum=0.0;for(int i=0;i<=int(detail);i++){float t=snoise(fscale*p);sum+=t*amp;maxamp+=amp;amp*=roughness;fscale*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float t=snoise(fscale*p);float sum2=sum+t*amp;return normalize ?mix(0.5*sum/maxamp+0.5,0.5*sum2/(maxamp+amp)+0.5,rmd):mix(sum,sum2,rmd);}else{return normalize ? 0.5*sum/maxamp+0.5 : sum;}}float noise_fbm_4d(vec4 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec4 p=co;float fscale=1.0;float amp=1.0;float maxamp=0.0;float sum=0.0;for(int i=0;i<=int(detail);i++){float t=snoise(fscale*p);sum+=t*amp;maxamp+=amp;amp*=roughness;fscale*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float t=snoise(fscale*p);float sum2=sum+t*amp;return normalize ?mix(0.5*sum/maxamp+0.5,0.5*sum2/(maxamp+amp)+0.5,rmd):mix(sum,sum2,rmd);}else{return normalize ? 0.5*sum/maxamp+0.5 : sum;}}float noise_multi_fractal_1d(float co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){float p=co;float value=1.0;float pwr=1.0;for(int i=0;i<=int(detail);i++){value*=(pwr*snoise(p)+1.0);pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){value*=(rmd*pwr*snoise(p)+1.0);}return value;}float noise_multi_fractal_2d(vec2 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec2 p=co;float value=1.0;float pwr=1.0;for(int i=0;i<=int(detail);i++){value*=(pwr*snoise(p)+1.0);pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){value*=(rmd*pwr*snoise(p)+1.0);}return value;}float noise_multi_fractal_3d(vec3 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec3 p=co;float value=1.0;float pwr=1.0;for(int i=0;i<=int(detail);i++){value*=(pwr*snoise(p)+1.0);pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){value*=(rmd*pwr*snoise(p)+1.0);}return value;}float noise_multi_fractal_4d(vec4 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec4 p=co;float value=1.0;float pwr=1.0;for(int i=0;i<=int(detail);i++){value*=(pwr*snoise(p)+1.0);pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){value*=(rmd*pwr*snoise(p)+1.0);}return value;}float noise_hetero_terrain_1d(float co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){float p=co;float pwr=roughness;float value=offset+snoise(p);p*=lacunarity;for(int i=1;i<=int(detail);i++){float increment=(snoise(p)+offset)*pwr*value;value+=increment;pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float increment=(snoise(p)+offset)*pwr*value;value+=rmd*increment;}return value;}float noise_hetero_terrain_2d(vec2 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec2 p=co;float pwr=roughness;float value=offset+snoise(p);p*=lacunarity;for(int i=1;i<=int(detail);i++){float increment=(snoise(p)+offset)*pwr*value;value+=increment;pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float increment=(snoise(p)+offset)*pwr*value;value+=rmd*increment;}return value;}float noise_hetero_terrain_3d(vec3 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec3 p=co;float pwr=roughness;float value=offset+snoise(p);p*=lacunarity;for(int i=1;i<=int(detail);i++){float increment=(snoise(p)+offset)*pwr*value;value+=increment;pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float increment=(snoise(p)+offset)*pwr*value;value+=rmd*increment;}return value;}float noise_hetero_terrain_4d(vec4 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec4 p=co;float pwr=roughness;float value=offset+snoise(p);p*=lacunarity;for(int i=1;i<=int(detail);i++){float increment=(snoise(p)+offset)*pwr*value;value+=increment;pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float increment=(snoise(p)+offset)*pwr*value;value+=rmd*increment;}return value;}float noise_hybrid_multi_fractal_1d(float co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){float p=co;float pwr=1.0;float value=0.0;float weight=1.0;for(int i=0;(weight>0.001)&&(i<=int(detail));i++){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;pwr*=roughness;value+=weight*signal;weight*=gain*signal;p*=lacunarity;}float rmd=detail-floor(detail);if((rmd!=0.0)&&(weight>0.001)){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;value+=rmd*weight*signal;}return value;}float noise_hybrid_multi_fractal_2d(vec2 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec2 p=co;float pwr=1.0;float value=0.0;float weight=1.0;for(int i=0;(weight>0.001)&&(i<=int(detail));i++){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;pwr*=roughness;value+=weight*signal;weight*=gain*signal;p*=lacunarity;}float rmd=detail-floor(detail);if((rmd!=0.0)&&(weight>0.001)){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;value+=rmd*weight*signal;}return value;}float noise_hybrid_multi_fractal_3d(vec3 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec3 p=co;float pwr=1.0;float value=0.0;float weight=1.0;for(int i=0;(weight>0.001)&&(i<=int(detail));i++){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;pwr*=roughness;value+=weight*signal;weight*=gain*signal;p*=lacunarity;}float rmd=detail-floor(detail);if((rmd!=0.0)&&(weight>0.001)){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;value+=rmd*weight*signal;}return value;}float noise_hybrid_multi_fractal_4d(vec4 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec4 p=co;float pwr=1.0;float value=0.0;float weight=1.0;for(int i=0;(weight>0.001)&&(i<=int(detail));i++){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;pwr*=roughness;value+=weight*signal;weight*=gain*signal;p*=lacunarity;}float rmd=detail-floor(detail);if((rmd!=0.0)&&(weight>0.001)){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;value+=rmd*weight*signal;}return value;}float noise_ridged_multi_fractal_1d(float co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){float p=co;float pwr=roughness;float signal=offset-abs(snoise(p));signal*=signal;float value=signal;float weight=1.0;for(int i=1;i<=int(detail);i++){p*=lacunarity;weight=clamp(signal*gain,0.0,1.0);signal=offset-abs(snoise(p));signal*=signal;signal*=weight;value+=signal*pwr;pwr*=roughness;}return value;}float noise_ridged_multi_fractal_2d(vec2 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec2 p=co;float pwr=roughness;float signal=offset-abs(snoise(p));signal*=signal;float value=signal;float weight=1.0;for(int i=1;i<=int(detail);i++){p*=lacunarity;weight=clamp(signal*gain,0.0,1.0);signal=offset-abs(snoise(p));signal*=signal;signal*=weight;value+=signal*pwr;pwr*=roughness;}return value;}float noise_ridged_multi_fractal_3d(vec3 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec3 p=co;float pwr=roughness;float signal=offset-abs(snoise(p));signal*=signal;float value=signal;float weight=1.0;for(int i=1;i<=int(detail);i++){p*=lacunarity;weight=clamp(signal*gain,0.0,1.0);signal=offset-abs(snoise(p));signal*=signal;signal*=weight;value+=signal*pwr;pwr*=roughness;}return value;}float noise_ridged_multi_fractal_4d(vec4 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec4 p=co;float pwr=roughness;float signal=offset-abs(snoise(p));signal*=signal;float value=signal;float weight=1.0;for(int i=1;i<=int(detail);i++){p*=lacunarity;weight=clamp(signal*gain,0.0,1.0);signal=offset-abs(snoise(p));signal*=signal;signal*=weight;value+=signal*pwr;pwr*=roughness;}return value;}float BubblesNoise_fade(float t){return t*t*t*(t*(t*6.0-15.0)+10.0);}uint BubblesNoise_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void BubblesNoise_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=BubblesNoise_jenkins_rot(b,14u);a ^=c;a-=BubblesNoise_jenkins_rot(c,11u);b ^=a;b-=BubblesNoise_jenkins_rot(a,25u);c ^=b;c-=BubblesNoise_jenkins_rot(b,16u);a ^=c;a-=BubblesNoise_jenkins_rot(c,4u);b ^=a;b-=BubblesNoise_jenkins_rot(a,14u);c ^=b;c-=BubblesNoise_jenkins_rot(b,24u);}uint BubblesNoise_hash_uint(uint kx){uint a,b,c;a=b=c=0xdeadbeefu+(1u<<2u)+13u;a+=kx;BubblesNoise_jenkins_final(a,b,c);return c;}int BubblesNoise_ihash_int(int kx){return int(BubblesNoise_hash_uint(uint(kx)));}float BubblesNoise_negateIf(float value,float condition){return value*(1.0-2.0*step(0.5,abs(condition)));}float BubblesNoise_noiseGrad1(int hash,float x){int h=hash&15;float g=1.0+float(h&7);return BubblesNoise_negateIf(g,float(h&8))*x;}void BubblesNoise_floor_frac(float x,out int x_int,out float x_fract){float x_floor=floor(x);x_int=int(x_floor);x_fract=x-x_floor;}float BubblesNoise_noise_grad3(int hash,float x,float y,float z){int h=hash&15;float u=mix(y,x,step(float(h),7.5));float vt=mix(z,x,step(11.5,float(h))*step(float(h),14.5));float v=mix(vt,y,step(float(h),3.5));return BubblesNoise_negateIf(u,float(h&1))+BubblesNoise_negateIf(v,float(h&2));}uint BubblesNoise_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;BubblesNoise_jenkins_final(a,b,c);return c;}int BubblesNoise_ihash_int3(int kx,int ky,int kz){return int(BubblesNoise_hash_uint3(uint(kx),uint(ky),uint(kz)));}float BubblesNoise_tri_mix(float v0,float v1,float v2,float v3,float v4,float v5,float v6,float v7,float x,float y,float z){float x1=1.0-x;float y1=1.0-y;float z1=1.0-z;return z1*(y1*(v0*x1+v1*x)+y*(v2*x1+v3*x))+z*(y1*(v4*x1+v5*x)+y*(v6*x1+v7*x));}float BubblesNoise_noise_perlin(vec3 vec){int X,Y,Z;float fx,fy,fz;BubblesNoise_floor_frac(vec.x,X,fx);BubblesNoise_floor_frac(vec.y,Y,fy);BubblesNoise_floor_frac(vec.z,Z,fz);float u=BubblesNoise_fade(fx);float v=BubblesNoise_fade(fy);float w=BubblesNoise_fade(fz);float r=BubblesNoise_tri_mix(BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y,Z),fx,fy,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y,Z),fx-1.0,fy,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y+1,Z),fx,fy-1.0,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y+1,Z),fx-1.0,fy-1.0,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y,Z+1),fx,fy,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y,Z+1),fx-1.0,fy,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y+1,Z+1),fx,fy-1.0,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y+1,Z+1),fx-1.0,fy-1.0,fz-1.0),u,v,w);return r;}float BubblesNoise_snoise(vec3 p){vec3 precision_correction=0.5*vec3(float(abs(p.x)>=1000000.0),float(abs(p.y)>=1000000.0),float(abs(p.z)>=1000000.0));p=mod(p,100000.0)+precision_correction;return BubblesNoise_noise_perlin(p)*0.9820;}/***Optimized FBM tailored to waterfall various effects(most important one being bubbles at the top)*/float BubblesNoise(vec2 uv,float time){vec3 position=vec3(uv.x*20.0+time*1.0,uv.y*20.0-time*1.0,0.0+time*1.0);return 0.5*BubblesNoise_snoise(position)+0.5;}float FoamNoise(vec2 uv,float time){vec3 position=vec3(uv.x*40.0,uv.y*3.0,0.0+time*1.15)*2.5;return 0.5*BubblesNoise_snoise(position)+0.5;}float VerticalStripesNoise(vec3 position,vec2 uv,float time){position=vec3(uv.x*2.6,position.y*0.7+time*0.2,position.z+time*0.05)*12.0;return 0.5*BubblesNoise_snoise(position)+0.5;}float BaseVoronoi(vec2 uv,float time){vec3 position=vec3(uv.x*2.0,uv.y*1.25+0.399-time*0.175,uv.y*0.25);vec3 pos=position*12.0;vec3 cell=floor(pos);float minDist=8.0;for(int i=-1;i<=1;i++){for(int j=-1;j<=1;j++){for(int k=-1;k<=1;k++){vec3 neighbor=cell+vec3(float(i),float(j),float(k));vec3 hashInput=vec3(dot(neighbor,vec3(127.1,311.7,74.7)),dot(neighbor,vec3(269.5,183.3,246.1)),dot(neighbor,vec3(113.5,271.9,124.6)));vec3 r=-1.0+2.0*fract(sin(hashInput)*43758.5453123);vec3 point=neighbor+0.5+0.5*1.5*r;float dist=length(pos-point);minDist=min(minDist,dist);}}}return minDist;}uint BubblesVoronoi_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void BubblesVoronoi_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=BubblesVoronoi_jenkins_rot(b,14u);a ^=c;a-=BubblesVoronoi_jenkins_rot(c,11u);b ^=a;b-=BubblesVoronoi_jenkins_rot(a,25u);c ^=b;c-=BubblesVoronoi_jenkins_rot(b,16u);a ^=c;a-=BubblesVoronoi_jenkins_rot(c,4u);b ^=a;b-=BubblesVoronoi_jenkins_rot(a,14u);c ^=b;c-=BubblesVoronoi_jenkins_rot(b,24u);}uint BubblesVoronoi_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;BubblesVoronoi_jenkins_final(a,b,c);return c;}float BubblesVoronoi_hash_uint3_to_float(uint kx,uint ky,uint kz){return float(BubblesVoronoi_hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float BubblesVoronoi_hash_vec3_to_float(vec3 k){return BubblesVoronoi_hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}void BubblesVoronoi_jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=BubblesVoronoi_jenkins_rot(c,4u);c+=b;b-=a;b ^=BubblesVoronoi_jenkins_rot(a,6u);a+=c;c-=b;c ^=BubblesVoronoi_jenkins_rot(b,8u);b+=a;a-=c;a ^=BubblesVoronoi_jenkins_rot(c,16u);c+=b;b-=a;b ^=BubblesVoronoi_jenkins_rot(a,19u);a+=c;c-=b;c ^=BubblesVoronoi_jenkins_rot(b,4u);b+=a;}uint BubblesVoronoi_hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;BubblesVoronoi_jenkins_mix(a,b,c);a+=kw;BubblesVoronoi_jenkins_final(a,b,c);return c;}float BubblesVoronoi_hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(BubblesVoronoi_hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float BubblesVoronoi_hash_vec4_to_float(vec4 k){return BubblesVoronoi_hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec3 BubblesVoronoi_hash_vec3_to_vec3(vec3 k){return vec3(BubblesVoronoi_hash_vec3_to_float(k),BubblesVoronoi_hash_vec4_to_float(vec4(k,1.0)),BubblesVoronoi_hash_vec4_to_float(vec4(k,2.0)));}float BubblesVoronoi_octave(vec3 coord,float randomness){vec3 cellPosition_f=floor(coord);vec3 localPosition=coord-cellPosition_f;float minDistance=1e10;vec3 targetOffset=vec3(0.0);vec3 targetPosition=vec3(0.0);for(int k=-1;k<=1;k++){for(int j=-1;j<=1;j++){for(int i=-1;i<=1;i++){vec3 cellOffset=vec3(float(i),float(j),float(k));vec3 pointPosition=cellOffset+BubblesVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset)*randomness;float distanceToPoint=distance(pointPosition,localPosition);float mask=float(distanceToPoint<minDistance);targetOffset=mix(targetOffset,cellOffset,mask);minDistance=min(minDistance,distanceToPoint);targetPosition=mix(targetPosition,pointPosition,mask);}}}return minDistance;}float BubblesVoronoi(vec2 uv,float time){vec3 coord=vec3(uv.x*6.0,uv.y*12.0,5.0+time);float randomness=1.0;return BubblesVoronoi_octave(coord,randomness);}float FoamVoronoi(vec3 coord){coord*=40.0;float randomness=1.0;return BubblesVoronoi_octave(coord,randomness);}uint SmoothFoamVoronoi_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void SmoothFoamVoronoi_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,14u);a ^=c;a-=SmoothFoamVoronoi_jenkins_rot(c,11u);b ^=a;b-=SmoothFoamVoronoi_jenkins_rot(a,25u);c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,16u);a ^=c;a-=SmoothFoamVoronoi_jenkins_rot(c,4u);b ^=a;b-=SmoothFoamVoronoi_jenkins_rot(a,14u);c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,24u);}uint SmoothFoamVoronoi_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;SmoothFoamVoronoi_jenkins_final(a,b,c);return c;}float SmoothFoamVoronoi_hash_uint3_to_float(uint kx,uint ky,uint kz){return float(SmoothFoamVoronoi_hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float SmoothFoamVoronoi_hash_vec3_to_float(vec3 k){return SmoothFoamVoronoi_hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}void SmoothFoamVoronoi_jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=SmoothFoamVoronoi_jenkins_rot(c,4u);c+=b;b-=a;b ^=SmoothFoamVoronoi_jenkins_rot(a,6u);a+=c;c-=b;c ^=SmoothFoamVoronoi_jenkins_rot(b,8u);b+=a;a-=c;a ^=SmoothFoamVoronoi_jenkins_rot(c,16u);c+=b;b-=a;b ^=SmoothFoamVoronoi_jenkins_rot(a,19u);a+=c;c-=b;c ^=SmoothFoamVoronoi_jenkins_rot(b,4u);b+=a;}uint SmoothFoamVoronoi_hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;SmoothFoamVoronoi_jenkins_mix(a,b,c);a+=kw;SmoothFoamVoronoi_jenkins_final(a,b,c);return c;}float SmoothFoamVoronoi_hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(SmoothFoamVoronoi_hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float SmoothFoamVoronoi_hash_vec4_to_float(vec4 k){return SmoothFoamVoronoi_hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec3 SmoothFoamVoronoi_hash_vec3_to_vec3(vec3 k){return vec3(SmoothFoamVoronoi_hash_vec3_to_float(k),SmoothFoamVoronoi_hash_vec4_to_float(vec4(k,1.0)),SmoothFoamVoronoi_hash_vec4_to_float(vec4(k,2.0)));}float SmoothFoamVoronoi_voronoi_smooth_f1_3d_full(vec3 coord,float smoothness,float randomness){vec3 cellPosition_f=floor(coord);vec3 localPosition=coord-cellPosition_f;float smoothDistance=0.0;float h=-1.0;vec3 targetOffset=vec3(0.0);float weightSum=0.0;vec3 weightedColor=vec3(0.0);for(int k=-2;k<=2;k++){for(int j=-2;j<=2;j++){for(int i=-2;i<=2;i++){vec3 cellOffset=vec3(float(i),float(j),float(k));vec3 pointPosition=cellOffset+SmoothFoamVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset)*randomness;float distanceToPoint=distance(pointPosition,localPosition);float mask=float(h==-1.0);h=mix(smoothstep(0.0,1.0,0.5+0.5*(smoothDistance-distanceToPoint)/smoothness),1.0,mask);float correctionFactor=smoothness*h*(1.0-h);smoothDistance=mix(smoothDistance,distanceToPoint,h)-correctionFactor;float weight=1.0-smoothstep(0.0,smoothness,distanceToPoint);vec3 cellColor=SmoothFoamVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset);weightedColor+=cellColor*weight;weightSum+=weight;}}}return smoothDistance;}float SmoothFoamVoronoi(vec3 coord){float amplitude=1.0;float max_amplitude=0.0;float scale=40.0;float randomness=1.0;float smoothness=1.0;float output_distance=0.0;vec3 output_color=vec3(0.0);vec4 output_position=vec4(0.0);return SmoothFoamVoronoi_voronoi_smooth_f1_3d_full(coord*scale,smoothness,randomness);}
#include <fog_pars_vertex>
uniform float uTime;varying vec2 vUv;varying vec3 vPosition;varying vec3 vWorldPosition;varying float vVerticalStripesNoise;varying float vBaseVoronoi;varying float vBubblesNoise;varying float vBubblesVoronoi;varying float vFoamNoise;varying float vFoamVoronoi;varying float vSmoothFoamVoronoi;void main(){vec3 newPosition=position;vVerticalStripesNoise=VerticalStripesNoise(position,uv,uTime);vBaseVoronoi=BaseVoronoi(uv,uTime);vBubblesNoise=BubblesNoise(uv,uTime);vBubblesVoronoi=BubblesVoronoi(uv,uTime);vFoamNoise=FoamNoise(uv,uTime);vec3 mixed=mix(vec3(uv.x*1.4,uv.y*0.8-uTime*0.1,2.0-uTime*0.05),vec3(vBubblesNoise*0.1),0.10);vFoamVoronoi=FoamVoronoi(mixed);vSmoothFoamVoronoi=SmoothFoamVoronoi(mixed);float noise=SimplexCellular3D(position*20.0+uTime);newPosition+=normal*noise*0.015*uv.y;vec4 modelPosition=modelMatrix*vec4(newPosition,1.0);vec4 mvPosition=viewMatrix*modelPosition;vec4 projectedPosition=projectionMatrix*mvPosition;gl_Position=projectedPosition;vUv=uv;vPosition=newPosition;vWorldPosition=modelPosition.xyz;
#include <fog_vertex>
}`,CM=`vec4 SGPP_coord_prepare(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 SGPP_coord_prepare(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 SGPP_permute(vec4 x){return fract(x*((34.0/289.0)*x+(1.0/289.0)))*289.0;}vec4 SGPP_resolve(vec4 x){return fract(x*(7.0/288.0));}vec4 SGPP_hash_2D(vec2 gridcell){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));return SGPP_resolve(SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww));}void SGPP_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));hash_0=SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww);hash_1=SGPP_resolve(SGPP_permute(hash_0));hash_0=SGPP_resolve(hash_0);}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell.zzzz));highz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell_inc1.zzzz));}void SGPP_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){vec3 coords0=gridcell.xyz-floor(gridcell.xyz*(1.0/289.0))*289.0;vec3 coords3=step(coords0,vec3(287.5))*(coords0+1.0);vec3 coords1=mix(coords0,coords3,v1_mask);vec3 coords2=mix(coords0,coords3,v2_mask);hash_2=SGPP_permute(SGPP_permute(SGPP_permute(vec4(coords0.x,coords1.x,coords2.x,coords3.x))+vec4(coords0.y,coords1.y,coords2.y,coords3.y))+vec4(coords0.z,coords1.z,coords2.z,coords3.z));hash_0=SGPP_resolve(hash_2);hash_1=SGPP_resolve(hash_2=SGPP_permute(hash_2));hash_2=SGPP_resolve(SGPP_permute(hash_2));}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash_2=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash_0=SGPP_resolve(lowz_hash_2=SGPP_permute(highz_hash_2+gridcell.zzzz));highz_hash_0=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2+gridcell_inc1.zzzz));lowz_hash_1=SGPP_resolve(lowz_hash_2=SGPP_permute(lowz_hash_2));highz_hash_1=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2));lowz_hash_2=SGPP_resolve(SGPP_permute(lowz_hash_2));highz_hash_2=SGPP_resolve(SGPP_permute(highz_hash_2));}vec4 BBS_coord_prepare(vec4 x){return x-floor(x*(1.0/61.0))*61.0;}vec3 BBS_coord_prepare(vec3 x){return x-floor(x*(1.0/61.0))*61.0;}vec4 BBS_permute(vec4 x){return fract(x*x*(1.0/61.0))*61.0;}vec4 BBS_permute_and_resolve(vec4 x){return fract(x*x*(1.0/61.0));}vec4 BBS_hash_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);return BBS_permute_and_resolve(p+hash_coord.yyww);}vec4 BBS_hash_hq_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);p=BBS_permute(p+hash_coord.yyww);return BBS_permute_and_resolve(p+hash_coord.xzxz);}void BBS_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const float DOMAIN=60.0;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 p=BBS_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy);p=BBS_permute(p+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=BBS_permute_and_resolve(p+gridcell.zzzz);highz_hash=BBS_permute_and_resolve(p+gridcell_inc1.zzzz);}vec4 FAST32_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const float SOMELARGEFLOAT=951.135664;vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec2 SOMELARGEFLOATS=vec2(951.135664,642.949883);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec3 SOMELARGEFLOATS=vec3(951.135664,642.949883,803.202459);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));hash_2=fract(P*(1.0/SOMELARGEFLOATS.z));}vec4 FAST32_hash_2D_Cell(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec4 SOMELARGEFLOATS=vec4(951.135664,642.949883,803.202459,986.973274);vec2 P=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xy;P*=P;return fract((P.x*P.y)*(1.0/SOMELARGEFLOATS.xyzw));}vec4 FAST32_hash_3D_Cell(vec3 gridcell){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;gridcell.xy+=OFFSET.xy;gridcell.xy*=gridcell.xy;return fract((gridcell.x*gridcell.y)*(1.0/(SOMELARGEFLOATS+gridcell.zzzz*ZINC)));}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;highz_hash.xy=vec2(1.0/(SOMELARGEFLOAT+vec2(gridcell.z,gridcell_inc1.z)*ZINC));lowz_hash=fract(P*highz_hash.xxxx);highz_hash=fract(P*highz_hash.yyyy);}void FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec3 lowz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));v1_mask=(v1_mask.z<0.5)? lowz_mods : highz_mods;v2_mask=(v2_mask.z<0.5)? lowz_mods : highz_mods;hash_0=fract(P*vec4(lowz_mods.x,v1_mask.x,v2_mask.x,highz_mods.x));hash_1=fract(P*vec4(lowz_mods.y,v1_mask.y,v2_mask.y,highz_mods.y));hash_2=fract(P*vec4(lowz_mods.z,v1_mask.z,v2_mask.z,highz_mods.z));}vec4 FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec2 V1z_V2z=vec2(v1_mask.z<0.5 ? gridcell.z : gridcell_inc1.z,v2_mask.z<0.5 ? gridcell.z : gridcell_inc1.z);vec4 mod_vals=vec4(1.0/(SOMELARGEFLOAT+vec4(gridcell.z,V1z_V2z,gridcell_inc1.z)*ZINC));return fract(P*mod_vals);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;vec3 lowz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));lowz_hash_0=fract(P*lowz_mod.xxxx);highz_hash_0=fract(P*highz_mod.xxxx);lowz_hash_1=fract(P*lowz_mod.yyyy);highz_hash_1=fract(P*highz_mod.yyyy);lowz_hash_2=fract(P*lowz_mod.zzzz);highz_hash_2=fract(P*highz_mod.zzzz);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 lowz_hash_3,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2,out vec4 highz_hash_3){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;lowz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell.zzzz*ZINC.xyzw));highz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell_inc1.zzzz*ZINC.xyzw));lowz_hash_0=fract(P*lowz_hash_3.xxxx);highz_hash_0=fract(P*highz_hash_3.xxxx);lowz_hash_1=fract(P*lowz_hash_3.yyyy);highz_hash_1=fract(P*highz_hash_3.yyyy);lowz_hash_2=fract(P*lowz_hash_3.zzzz);highz_hash_2=fract(P*highz_hash_3.zzzz);lowz_hash_3=fract(P*lowz_hash_3.wwww);highz_hash_3=fract(P*highz_hash_3.wwww);}vec4 FAST32_2_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(403.839172,377.242706);const float DOMAIN=69.0;const float SOMELARGEFLOAT=32745.708984;const vec2 SCALE=vec2(2.009842,1.372549);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P=(P*SCALE.xyxy)+OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_3D(vec3 gridcell,out vec4 z0_hash,out vec4 z1_hash){const vec3 OFFSET=vec3(55.882355,63.167774,52.941177);const float DOMAIN=69.0;const float SOMELARGEFLOAT=69412.070313;const vec3 SCALE=vec3(0.235142,0.205890,0.216449);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);z0_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell.zzzz*(1.0/SOMELARGEFLOAT));z1_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell_inc1.zzzz*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash,out vec4 z1w0_hash,out vec4 z0w1_hash,out vec4 z1w1_hash){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const float SOMELARGEFLOAT=47165.636719;const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww)*(1.0/SOMELARGEFLOAT);z0w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx);z1w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy);z0w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz);z1w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww);}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash_0,out vec4 z0w0_hash_1,out vec4 z0w0_hash_2,out vec4 z0w0_hash_3,out vec4 z1w0_hash_0,out vec4 z1w0_hash_1,out vec4 z1w0_hash_2,out vec4 z1w0_hash_3,out vec4 z0w1_hash_0,out vec4 z0w1_hash_1,out vec4 z0w1_hash_2,out vec4 z0w1_hash_3,out vec4 z1w1_hash_0,out vec4 z1w1_hash_1,out vec4 z1w1_hash_2,out vec4 z1w1_hash_3){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(56974.746094,47165.636719,55049.667969,49901.273438);const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww);vec4 hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx;z0w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy;z1w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz;z0w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww;z1w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));}float Interpolation_C1(float x){return x*x*(3.0-2.0*x);}vec2 Interpolation_C1(vec2 x){return x*x*(3.0-2.0*x);}vec3 Interpolation_C1(vec3 x){return x*x*(3.0-2.0*x);}vec4 Interpolation_C1(vec4 x){return x*x*(3.0-2.0*x);}float Interpolation_C2(float x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec2 Interpolation_C2(vec2 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec3 Interpolation_C2(vec3 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2(vec4 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2_InterpAndDeriv(vec2 x){return x.xyxy*x.xyxy*(x.xyxy*(x.xyxy*(x.xyxy*vec2(6.0,0.0).xxyy+vec2(-15.0,30.0).xxyy)+vec2(10.0,-60.0).xxyy)+vec2(0.0,30.0).xxyy);}vec3 Interpolation_C2_Deriv(vec3 x){return x*x*(x*(x*30.0-60.0)+30.0);}float Interpolation_C2_Fast(float x){float x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec2 Interpolation_C2_Fast(vec2 x){vec2 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec3 Interpolation_C2_Fast(vec3 x){vec3 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec4 Interpolation_C2_Fast(vec4 x){vec4 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}float Interpolation_C3(float x){float xsq=x*x;float xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec2 Interpolation_C3(vec2 x){vec2 xsq=x*x;vec2 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec3 Interpolation_C3(vec3 x){vec3 xsq=x*x;vec3 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec4 Interpolation_C3(vec4 x){vec4 xsq=x*x;vec4 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}float Falloff_Xsq_C1(float xsq){xsq=1.0-xsq;return xsq*xsq;}float Falloff_Xsq_C2(float xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}vec4 Falloff_Xsq_C2(vec4 xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}float Value2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec2 blend=Interpolation_C2(Pf);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(hash,blend2.zxzx*blend2.wwyy);}float Value3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Value4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 z0w0_hash;vec4 z1w0_hash;vec4 z0w1_hash;vec4 z1w1_hash;FAST32_2_hash_4D(Pi,z0w0_hash,z1w0_hash,z0w1_hash,z1w1_hash);vec4 blend=Interpolation_C2(Pf);vec4 res0=z0w0_hash+(z0w1_hash-z0w0_hash)*blend.wwww;vec4 res1=z1w0_hash+(z1w1_hash-z1w0_hash)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0-blend.xy);return dot(res0,blend.zxzx*blend.wwyy);}float Perlin2D(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);
#if 1
vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);
#if 1
grad_results*=1.4142135623730950488016887242097;vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#else
grad_results*=2.3703703703703703703703703703704;vec4 vecs_len_sq=Pf_Pfmin1*Pf_Pfmin1;vecs_len_sq=vecs_len_sq.xzxz+vecs_len_sq.yyww;return dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq)),grad_results);
#endif
#else
vec4 hash=FAST32_hash_2D(Pi);hash-=0.5;vec4 grad_results=Pf_Pfmin1.xzxz*sign(hash)+Pf_Pfmin1.yyww*sign(abs(hash)-0.25);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#endif
}float Perlin3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;
#if 1
vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);
#if 1
vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);final*=1.1547005383792515290182975610039;return final;
#else
Pf*=Pf;Pf_min1*=Pf_min1;vec4 vecs_len_sq=vec4(Pf.x,Pf_min1.x,Pf.x,Pf_min1.x)+vec4(Pf.yy,Pf_min1.yy);float final=dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf.zzzz)),grad_results_0)+dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf_min1.zzzz)),grad_results_1);final*=2.3703703703703703703703703703704;return final;
#endif
#else
vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);hash_lowz-=0.5;vec4 grad_results_0_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_lowz);hash_lowz=abs(hash_lowz)-0.25;vec4 grad_results_0_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_lowz);vec4 grad_results_0_2=Pf.zzzz*sign(abs(hash_lowz)-0.125);vec4 grad_results_0=grad_results_0_0+grad_results_0_1+grad_results_0_2;hash_highz-=0.5;vec4 grad_results_1_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_highz);hash_highz=abs(hash_highz)-0.25;vec4 grad_results_1_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_highz);vec4 grad_results_1_2=Pf_min1.zzzz*sign(abs(hash_highz)-0.125);vec4 grad_results_1=grad_results_1_0+grad_results_1_1+grad_results_1_2;vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy)*(2.0/3.0);
#endif
}float Perlin4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 Pf_min1=Pf-1.0;vec4 lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3;vec4 highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3;vec4 lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3;vec4 highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3;FAST32_2_hash_4D(Pi,lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3,highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3,lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3,highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3);lowz_loww_hash_0-=0.49999;lowz_loww_hash_1-=0.49999;lowz_loww_hash_2-=0.49999;lowz_loww_hash_3-=0.49999;highz_loww_hash_0-=0.49999;highz_loww_hash_1-=0.49999;highz_loww_hash_2-=0.49999;highz_loww_hash_3-=0.49999;lowz_highw_hash_0-=0.49999;lowz_highw_hash_1-=0.49999;lowz_highw_hash_2-=0.49999;lowz_highw_hash_3-=0.49999;highz_highw_hash_0-=0.49999;highz_highw_hash_1-=0.49999;highz_highw_hash_2-=0.49999;highz_highw_hash_3-=0.49999;vec4 grad_results_lowz_loww=inversesqrt(lowz_loww_hash_0*lowz_loww_hash_0+lowz_loww_hash_1*lowz_loww_hash_1+lowz_loww_hash_2*lowz_loww_hash_2+lowz_loww_hash_3*lowz_loww_hash_3);grad_results_lowz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_loww_hash_1+Pf.zzzz*lowz_loww_hash_2+Pf.wwww*lowz_loww_hash_3);vec4 grad_results_highz_loww=inversesqrt(highz_loww_hash_0*highz_loww_hash_0+highz_loww_hash_1*highz_loww_hash_1+highz_loww_hash_2*highz_loww_hash_2+highz_loww_hash_3*highz_loww_hash_3);grad_results_highz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_loww_hash_1+Pf_min1.zzzz*highz_loww_hash_2+Pf.wwww*highz_loww_hash_3);vec4 grad_results_lowz_highw=inversesqrt(lowz_highw_hash_0*lowz_highw_hash_0+lowz_highw_hash_1*lowz_highw_hash_1+lowz_highw_hash_2*lowz_highw_hash_2+lowz_highw_hash_3*lowz_highw_hash_3);grad_results_lowz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_highw_hash_1+Pf.zzzz*lowz_highw_hash_2+Pf_min1.wwww*lowz_highw_hash_3);vec4 grad_results_highz_highw=inversesqrt(highz_highw_hash_0*highz_highw_hash_0+highz_highw_hash_1*highz_highw_hash_1+highz_highw_hash_2*highz_highw_hash_2+highz_highw_hash_3*highz_highw_hash_3);grad_results_highz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_highw_hash_1+Pf_min1.zzzz*highz_highw_hash_2+Pf_min1.wwww*highz_highw_hash_3);vec4 blend=Interpolation_C2(Pf);vec4 res0=grad_results_lowz_loww+(grad_results_lowz_highw-grad_results_lowz_loww)*blend.wwww;vec4 res1=grad_results_highz_loww+(grad_results_highz_highw-grad_results_highz_loww)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0)-blend.xy;return dot(res0,blend.zxzx*blend.wwyy);}float ValuePerlin2D(vec2 P,float blend_val){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_value,hash_x,hash_y;FAST32_hash_2D(Pi,hash_value,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results*=1.4142135623730950488016887242097;grad_results=mix((hash_value*2.0-1.0),grad_results,blend_val);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);}float ValuePerlin3D(vec3 P,float blend_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0*=1.1547005383792515290182975610039;grad_results_1*=1.1547005383792515290182975610039;grad_results_0=mix((hash_value0*2.0-1.0),grad_results_0,blend_val);grad_results_1=mix((hash_value1*2.0-1.0),grad_results_1,blend_val);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Cubist2D(vec2 P,vec2 range_clamp){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y,hash_value;FAST32_hash_2D(Pi,hash_x,hash_y,hash_value);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results=(hash_value-0.5)*(1.0/grad_results);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));float final=dot(grad_results,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}float Cubist3D(vec3 P,vec2 range_clamp){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0=(hash_value0-0.5)*(1.0/grad_results_0);grad_results_1=(hash_value1-0.5)*(1.0/grad_results_1);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}vec4 Cellular_weight_samples(vec4 samples){samples=samples*2.0-1.0;return(samples*samples*samples)-sign(samples);}float Cellular2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);
#if 1
const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x=hash_x*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y=hash_y*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;d.xy=min(d.xy,d.zw);return min(d.x,d.y)*(1.0/1.125);}float Cellular3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);
#if 1
const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x0=hash_x0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y0=hash_y0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_x1=hash_x1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y1=hash_y1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_z0=hash_z0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW);hash_z1=hash_z1*JITTER_WINDOW*2.0+vec4(1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;d1=min(d1,d2);d1.xy=min(d1.xy,d1.wz);return min(d1.x,d1.y)*(9.0/12.0);}/*float SparseConvolution2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;const float RADIUS=1.0-JITTER_WINDOW;d*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d,vec4(1.0))),vec4(1.0));}float SparseConvolution3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;const float RADIUS=(1.0-JITTER_WINDOW);d1*=((1.0/RADIUS)*(1.0/RADIUS));d2*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d1,vec4(1.0)))+Falloff_Xsq_C2(min(d2,vec4(1.0))),vec4(1.0));}*/float PolkaDot2D(vec2 P,float radius_low,float radius_high){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.z*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xy*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float PolkaDot3D(vec3 P,float radius_low,float radius_high){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash=FAST32_hash_3D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.w*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xyz*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float Stars2D(vec2 P,float probability_threshold,float max_dimness,float two_over_radius){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float VALUE=1.0-max_dimness*hash.z;Pf*=two_over_radius;Pf-=(two_over_radius-1.0);Pf+=hash.xy*(two_over_radius-2.0);return(hash.w<probability_threshold)?(Falloff_Xsq_C1(min(dot(Pf,Pf),1.0))*VALUE): 0.0;}float SimplexPerlin2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw));const float FINAL_NORMALIZATION=99.204334582718712976990005025589;vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);m=m*m;return dot(m*m,grad_results)*FINAL_NORMALIZATION;}float SimplexPolkaDot2D(vec2 P,float radius,float max_dimness){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.4494897427831780981972840747059;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec2 v0=(Pi-dot(Pi,vec2(UNSKEWFACTOR))-P);vec4 v0123_x=vec4(0.0,SIMPLEX_POINTS.xyz)+v0.x;vec4 v0123_y=vec4(0.0,SIMPLEX_POINTS.yxz)+v0.y;vec4 hash=FAST32_hash_2D(Pi);radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v0123_x*=radius;v0123_y*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v0123_x*v0123_x+v0123_y*v0123_y));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float SimplexCellular2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HEIGHT=1.4142135623730950488016887242097;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR)*INV_SIMPLEX_TRI_HEIGHT;P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=(0.10566243270259355887271280487451*INV_SIMPLEX_TRI_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;vec2 p0=((Pi-dot(Pi,vec2(UNSKEWFACTOR)))-P)*INV_SIMPLEX_TRI_HEIGHT;hash_x+=p0.xxxx;hash_y+=p0.yyyy;hash_x.yzw+=SIMPLEX_POINTS.xyz;hash_y.yzw+=SIMPLEX_POINTS.yxz;vec4 distsq=hash_x*hash_x+hash_y*hash_y;vec2 tmp=min(distsq.xy,distsq.zw);return min(tmp.x,tmp.y);}void Simplex3D_GetCornerVectors(vec3 P,out vec3 Pi,out vec3 Pi_1,out vec3 Pi_2,out vec4 v1234_x,out vec4 v1234_y,out vec4 v1234_z){const float SKEWFACTOR=1.0/3.0;const float UNSKEWFACTOR=1.0/6.0;const float SIMPLEX_CORNER_POS=0.5;const float SIMPLEX_PYRAMID_HEIGHT=0.70710678118654752440084436210485;P*=SIMPLEX_PYRAMID_HEIGHT;Pi=floor(P+dot(P,vec3(SKEWFACTOR)));vec3 x0=P-Pi+dot(Pi,vec3(UNSKEWFACTOR));vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;Pi_1=min(g.xyz,l.zxy);Pi_2=max(g.xyz,l.zxy);vec3 x1=x0-Pi_1+UNSKEWFACTOR;vec3 x2=x0-Pi_2+SKEWFACTOR;vec3 x3=x0-SIMPLEX_CORNER_POS;v1234_x=vec4(x0.x,x1.x,x2.x,x3.x);v1234_y=vec4(x0.y,x1.y,x2.y,x3.y);v1234_z=vec4(x0.z,x1.z,x2.z,x3.z);}vec4 Simplex3D_GetSurfletWeights(vec4 v1234_x,vec4 v1234_y,vec4 v1234_z){vec4 surflet_weights=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;surflet_weights=max(0.5-surflet_weights,0.0);return surflet_weights*surflet_weights*surflet_weights;}float SimplexPerlin3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 grad_results=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2)*(hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return dot(Simplex3D_GetSurfletWeights(v1234_x,v1234_y,v1234_z),grad_results)*FINAL_NORMALIZATION;}float SimplexCellular3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_x;vec4 hash_y;vec4 hash_z;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_x,hash_y,hash_z);const float INV_SIMPLEX_PYRAMID_HEIGHT=1.4142135623730950488016887242097;const float JITTER_WINDOW=(0.0597865779345250670558198111*INV_SIMPLEX_PYRAMID_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;hash_z=Cellular_weight_samples(hash_z)*JITTER_WINDOW;v1234_x*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_y*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_z*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_x+=hash_x;v1234_y+=hash_y;v1234_z+=hash_z;vec4 distsq=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;return min(min(distsq.x,distsq.y),min(distsq.z,distsq.w));}float SimplexPolkaDot3D(vec3 P,float radius,float max_dimness){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash=FAST32_hash_3D(Pi,Pi_1,Pi_2);const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.3094010767585030580365951220078;radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v1234_x*=radius;v1234_y*=radius;v1234_z*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float QuinticHermite(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,x,0.0));}vec4 QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 egrad0,vec4 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;}vec4 QuinticHermite(float x,vec2 igrad0,vec2 igrad1,vec2 egrad0,vec2 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return vec4(egrad1,igrad0)*vec4(h123.zz,1.0,1.0)+vec4(egrad0,h123.xx)*vec4(vec2(h123.y+x),(igrad1-igrad0));}void QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}void QuinticHermite(float x,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}float QuinticHermiteDeriv(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(30.0,-15.0,-15.0);const vec3 C1=vec3(-60.0,32.0,28.0);const vec3 C2=vec3(30.0,-18.0,-12.0);vec3 h123=(((C1+C0*x)*x)+C2)*(x*x);return dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,1.0,0.0));}float Hermite2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float Hermite3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float ValueHermite2D(vec2 P,float value_scale,float gradient_scale,float normalization_val){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_value,hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_value,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999)*gradient_scale;hash_grady=(hash_grady-0.49999)*gradient_scale;hash_value=(hash_value-0.5)*value_scale;vec4 qh_results=QuinticHermite(Pf.y,vec4(hash_value.xy,hash_gradx.xy),vec4(hash_value.zw,hash_gradx.zw),vec4(hash_grady.xy,0.0,0.0),vec4(hash_grady.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}float ValueHermite3D(vec3 P,float value_scale,float gradient_scale,float normalization_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999)*gradient_scale;hash_grady0=(hash_grady0-0.49999)*gradient_scale;hash_gradz0=(hash_gradz0-0.49999)*gradient_scale;hash_gradx1=(hash_gradx1-0.49999)*gradient_scale;hash_grady1=(hash_grady1-0.49999)*gradient_scale;hash_gradz1=(hash_gradz1-0.49999)*gradient_scale;hash_value0=(hash_value0-0.5)*value_scale;hash_value1=(hash_value1-0.5)*value_scale;vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_value0,hash_value1,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}vec3 Value2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec4 blend=Interpolation_C2_InterpAndDeriv(Pf);vec4 res0=mix(hash.xyxz,hash.zwyw,blend.yyxx);return vec3(res0.x,0.0,0.0)+(res0.yyw-res0.xxz)*blend.xzw;}vec4 Value3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 res1=mix(res0.xyxz,res0.zwyw,blend.yyxx);vec4 res3=mix(vec4(hash_lowz.xy,hash_highz.xy),vec4(hash_lowz.zw,hash_highz.zw),blend.y);vec2 res4=mix(res3.xz,res3.yw,blend.x);return vec4(res1.x,0.0,0.0,0.0)+(vec4(res1.yyw,res4.y)-vec4(res1.xxz,res4.x))*vec4(blend.x,Interpolation_C2_Deriv(Pf));}vec3 Perlin2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 dotval=(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);vec3 dotval0_grad0=vec3(dotval.x,grad_x.x,grad_y.x);vec3 dotval1_grad1=vec3(dotval.y,grad_x.y,grad_y.y);vec3 dotval2_grad2=vec3(dotval.z,grad_x.z,grad_y.z);vec3 dotval3_grad3=vec3(dotval.w,grad_x.w,grad_y.w);vec3 k0_gk0=dotval1_grad1-dotval0_grad0;vec3 k1_gk1=dotval2_grad2-dotval0_grad0;vec3 k2_gk2=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 blend=Interpolation_C2_InterpAndDeriv(Pf_Pfmin1.xy);vec3 results=dotval0_grad0+blend.x*k0_gk0+blend.y*(k1_gk1+blend.x*k2_gk2);results.yz+=blend.zw*(vec2(k0_gk0.x,k1_gk1.x)+blend.yx*k2_gk2.xx);return results*1.4142135623730950488016887242097;}vec4 Perlin3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 dotval_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 dotval_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec4 dotval0_grad0=vec4(dotval_0.x,grad_x0.x,grad_y0.x,grad_z0.x);vec4 dotval1_grad1=vec4(dotval_0.y,grad_x0.y,grad_y0.y,grad_z0.y);vec4 dotval2_grad2=vec4(dotval_0.z,grad_x0.z,grad_y0.z,grad_z0.z);vec4 dotval3_grad3=vec4(dotval_0.w,grad_x0.w,grad_y0.w,grad_z0.w);vec4 dotval4_grad4=vec4(dotval_1.x,grad_x1.x,grad_y1.x,grad_z1.x);vec4 dotval5_grad5=vec4(dotval_1.y,grad_x1.y,grad_y1.y,grad_z1.y);vec4 dotval6_grad6=vec4(dotval_1.z,grad_x1.z,grad_y1.z,grad_z1.z);vec4 dotval7_grad7=vec4(dotval_1.w,grad_x1.w,grad_y1.w,grad_z1.w);vec4 k0_gk0=dotval1_grad1-dotval0_grad0;vec4 k1_gk1=dotval2_grad2-dotval0_grad0;vec4 k2_gk2=dotval4_grad4-dotval0_grad0;vec4 k3_gk3=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 k4_gk4=dotval5_grad5-dotval4_grad4-k0_gk0;vec4 k5_gk5=dotval6_grad6-dotval4_grad4-k1_gk1;vec4 k6_gk6=(dotval7_grad7-dotval6_grad6)-(dotval5_grad5-dotval4_grad4)-k3_gk3;vec3 blend=Interpolation_C2(Pf);vec3 blendDeriv=Interpolation_C2_Deriv(Pf);float u=blend.x;float v=blend.y;float w=blend.z;vec4 result=dotval0_grad0+u*(k0_gk0+v*k3_gk3)+v*(k1_gk1+w*k5_gk5)+w*(k2_gk2+u*(k4_gk4+v*k6_gk6));result.y+=dot(vec4(k0_gk0.x,k3_gk3.x*v,vec2(k4_gk4.x,k6_gk6.x*v)*w),vec4(blendDeriv.x));result.z+=dot(vec4(k1_gk1.x,k3_gk3.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*w),vec4(blendDeriv.y));result.w+=dot(vec4(k2_gk2.x,k4_gk4.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*v),vec4(blendDeriv.z));result*=1.1547005383792515290182975610039;return result;}vec3 PerlinSurflet2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 grad_results=grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww;vec4 m=Pf_Pfmin1*Pf_Pfmin1;m=m.xzxz+m.yyww;m=max(1.0-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,Pf_Pfmin1.xzxz)+dot(m3,grad_x);float yderiv=dot(temp,Pf_Pfmin1.yyww)+dot(m3,grad_y);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec3(dot(m3,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 PerlinSurflet3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 grad_results_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 grad_results_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec3 Pf_sq=Pf*Pf;vec3 Pf_min1_sq=Pf_min1*Pf_min1;vec4 vecs_len_sq=vec2(Pf_sq.x,Pf_min1_sq.x).xyxy+vec2(Pf_sq.y,Pf_min1_sq.y).xxyy;vec4 m_0=vecs_len_sq+Pf_sq.zzzz;m_0=max(1.0-m_0,0.0);vec4 m2_0=m_0*m_0;vec4 m3_0=m_0*m2_0;vec4 m_1=vecs_len_sq+Pf_min1_sq.zzzz;m_1=max(1.0-m_1,0.0);vec4 m2_1=m_1*m_1;vec4 m3_1=m_1*m2_1;vec4 temp_0=-6.0*m2_0*grad_results_0;float xderiv_0=dot(temp_0,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_0,grad_x0);float yderiv_0=dot(temp_0,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_0,grad_y0);float zderiv_0=dot(temp_0,Pf.zzzz)+dot(m3_0,grad_z0);vec4 temp_1=-6.0*m2_1*grad_results_1;float xderiv_1=dot(temp_1,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_1,grad_x1);float yderiv_1=dot(temp_1,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_1,grad_y1);float zderiv_1=dot(temp_1,Pf_min1.zzzz)+dot(m3_1,grad_z1);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec4(dot(m3_0,grad_results_0)+dot(m3_1,grad_results_1),vec3(xderiv_0,yderiv_0,zderiv_0)+vec3(xderiv_1,yderiv_1,zderiv_1))*FINAL_NORMALIZATION;}vec3 Cellular2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;vec3 t1=d.x<d.y ? vec3(d.x,dx.x,dy.x): vec3(d.y,dx.y,dy.y);vec3 t2=d.z<d.w ? vec3(d.z,dx.z,dy.z): vec3(d.w,dx.w,dy.w);return(t1.x<t2.x ? t1 : t2)*vec3(1.0,2.0,2.0)*(1.0/1.125);}vec4 Cellular3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;vec4 r1=d1.x<d1.y ? vec4(d1.x,dx1.x,dy1.x,dz1.x): vec4(d1.y,dx1.y,dy1.y,dz1.y);vec4 r2=d1.z<d1.w ? vec4(d1.z,dx1.z,dy1.z,dz1.z): vec4(d1.w,dx1.w,dy1.w,dz1.w);vec4 r3=d2.x<d2.y ? vec4(d2.x,dx2.x,dy2.x,dz2.x): vec4(d2.y,dx2.y,dy2.y,dz2.y);vec4 r4=d2.z<d2.w ? vec4(d2.z,dx2.z,dy2.z,dz2.z): vec4(d2.w,dx2.w,dy2.w,dz2.w);vec4 t1=r1.x<r2.x ? r1 : r2;vec4 t2=r3.x<r4.x ? r3 : r4;return(t1.x<t2.x ? t1 : t2)*vec4(1.0,vec3(2.0))*(9.0/12.0);}vec3 SimplexPerlin2D_Deriv(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec3 grad_results=grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw);vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);vec3 m2=m*m;vec3 m4=m2*m2;vec3 temp=8.0*m2*m*grad_results;float xderiv=dot(temp,vec3(v0.x,v12.xz))-dot(m4,grad_x);float yderiv=dot(temp,vec3(v0.y,v12.yw))-dot(m4,grad_y);const float FINAL_NORMALIZATION=99.204334582718712976990005025589;return vec3(dot(m4,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 SimplexPerlin3D_Deriv(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 norm=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2);hash_0*=norm;hash_1*=norm;hash_2*=norm;vec4 grad_results=hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z;vec4 m=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;m=max(0.5-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,v1234_x)+dot(m3,hash_0);float yderiv=dot(temp,v1234_y)+dot(m3,hash_1);float zderiv=dot(temp,v1234_z)+dot(m3,hash_2);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return vec4(dot(m3,grad_results),xderiv,yderiv,zderiv)*FINAL_NORMALIZATION;}vec3 Hermite2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results_x=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);vec4 qh_results_y=QuinticHermite(Pf.x,hash_grady.xz,hash_grady.yw,hash_gradx.xz,hash_gradx.yw);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);return vec3(finalpos,deriv_x,deriv_y)*FINAL_NORM_VAL;}vec4 Hermite3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results_z,igrad_results_x_z,igrad_results_y_z;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results_z,igrad_results_x_z,igrad_results_y_z);vec4 ival_results_y,igrad_results_x_y,igrad_results_z_y;QuinticHermite(Pf.y,vec4(hash_gradx0.xy,hash_gradx1.xy),vec4(hash_gradx0.zw,hash_gradx1.zw),vec4(hash_gradz0.xy,hash_gradz1.xy),vec4(hash_gradz0.zw,hash_gradz1.zw),vec4(hash_grady0.xy,hash_grady1.xy),vec4(hash_grady0.zw,hash_grady1.zw),ival_results_y,igrad_results_x_y,igrad_results_z_y);vec4 qh_results_x=QuinticHermite(Pf.y,vec4(ival_results_z.xy,igrad_results_x_z.xy),vec4(ival_results_z.zw,igrad_results_x_z.zw),vec4(igrad_results_y_z.xy,0.0,0.0),vec4(igrad_results_y_z.zw,0.0,0.0));vec4 qh_results_y=QuinticHermite(Pf.x,vec4(ival_results_z.xz,igrad_results_y_z.xz),vec4(ival_results_z.yw,igrad_results_y_z.yw),vec4(igrad_results_x_z.xz,0.0,0.0),vec4(igrad_results_x_z.yw,0.0,0.0));vec4 qh_results_z=QuinticHermite(Pf.x,vec4(ival_results_y.xz,igrad_results_z_y.xz),vec4(ival_results_y.yw,igrad_results_z_y.yw),vec4(igrad_results_x_y.xz,0.0,0.0),vec4(igrad_results_x_y.yw,0.0,0.0));float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);float deriv_z=QuinticHermiteDeriv(Pf.z,qh_results_z.x,qh_results_z.y,qh_results_z.z,qh_results_z.w);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);return vec4(finalpos,deriv_x,deriv_y,deriv_z)*FINAL_NORM_VAL;}float BubblesNoise_fade(float t){return t*t*t*(t*(t*6.0-15.0)+10.0);}uint BubblesNoise_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void BubblesNoise_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=BubblesNoise_jenkins_rot(b,14u);a ^=c;a-=BubblesNoise_jenkins_rot(c,11u);b ^=a;b-=BubblesNoise_jenkins_rot(a,25u);c ^=b;c-=BubblesNoise_jenkins_rot(b,16u);a ^=c;a-=BubblesNoise_jenkins_rot(c,4u);b ^=a;b-=BubblesNoise_jenkins_rot(a,14u);c ^=b;c-=BubblesNoise_jenkins_rot(b,24u);}uint BubblesNoise_hash_uint(uint kx){uint a,b,c;a=b=c=0xdeadbeefu+(1u<<2u)+13u;a+=kx;BubblesNoise_jenkins_final(a,b,c);return c;}int BubblesNoise_ihash_int(int kx){return int(BubblesNoise_hash_uint(uint(kx)));}float BubblesNoise_negateIf(float value,float condition){return value*(1.0-2.0*step(0.5,abs(condition)));}float BubblesNoise_noiseGrad1(int hash,float x){int h=hash&15;float g=1.0+float(h&7);return BubblesNoise_negateIf(g,float(h&8))*x;}void BubblesNoise_floor_frac(float x,out int x_int,out float x_fract){float x_floor=floor(x);x_int=int(x_floor);x_fract=x-x_floor;}float BubblesNoise_noise_grad3(int hash,float x,float y,float z){int h=hash&15;float u=mix(y,x,step(float(h),7.5));float vt=mix(z,x,step(11.5,float(h))*step(float(h),14.5));float v=mix(vt,y,step(float(h),3.5));return BubblesNoise_negateIf(u,float(h&1))+BubblesNoise_negateIf(v,float(h&2));}uint BubblesNoise_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;BubblesNoise_jenkins_final(a,b,c);return c;}int BubblesNoise_ihash_int3(int kx,int ky,int kz){return int(BubblesNoise_hash_uint3(uint(kx),uint(ky),uint(kz)));}float BubblesNoise_tri_mix(float v0,float v1,float v2,float v3,float v4,float v5,float v6,float v7,float x,float y,float z){float x1=1.0-x;float y1=1.0-y;float z1=1.0-z;return z1*(y1*(v0*x1+v1*x)+y*(v2*x1+v3*x))+z*(y1*(v4*x1+v5*x)+y*(v6*x1+v7*x));}float BubblesNoise_noise_perlin(vec3 vec){int X,Y,Z;float fx,fy,fz;BubblesNoise_floor_frac(vec.x,X,fx);BubblesNoise_floor_frac(vec.y,Y,fy);BubblesNoise_floor_frac(vec.z,Z,fz);float u=BubblesNoise_fade(fx);float v=BubblesNoise_fade(fy);float w=BubblesNoise_fade(fz);float r=BubblesNoise_tri_mix(BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y,Z),fx,fy,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y,Z),fx-1.0,fy,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y+1,Z),fx,fy-1.0,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y+1,Z),fx-1.0,fy-1.0,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y,Z+1),fx,fy,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y,Z+1),fx-1.0,fy,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y+1,Z+1),fx,fy-1.0,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y+1,Z+1),fx-1.0,fy-1.0,fz-1.0),u,v,w);return r;}float BubblesNoise_snoise(vec3 p){vec3 precision_correction=0.5*vec3(float(abs(p.x)>=1000000.0),float(abs(p.y)>=1000000.0),float(abs(p.z)>=1000000.0));p=mod(p,100000.0)+precision_correction;return BubblesNoise_noise_perlin(p)*0.9820;}/***Optimized FBM tailored to waterfall various effects(most important one being bubbles at the top)*/float BubblesNoise(vec2 uv,float time){vec3 position=vec3(uv.x*5.0+time*1.0,uv.y*5.0+time*1.0,0.0+time*1.0);return 0.5*BubblesNoise_snoise(position)+0.5;}float FoamNoise(vec3 coord,float time){vec3 position=(vec3(coord.x*3.0,coord.y*3.0,coord.z+time))*5.0;return 0.5*BubblesNoise_snoise(position)+0.5;}float VerticalStripesNoise(vec3 position,vec2 uv,float time){position=vec3(uv.x*2.6,position.y*0.7+time*0.2,position.z+time*0.05)*12.0;return 0.5*BubblesNoise_snoise(position)+0.5;}uint BubblesVoronoi_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void BubblesVoronoi_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=BubblesVoronoi_jenkins_rot(b,14u);a ^=c;a-=BubblesVoronoi_jenkins_rot(c,11u);b ^=a;b-=BubblesVoronoi_jenkins_rot(a,25u);c ^=b;c-=BubblesVoronoi_jenkins_rot(b,16u);a ^=c;a-=BubblesVoronoi_jenkins_rot(c,4u);b ^=a;b-=BubblesVoronoi_jenkins_rot(a,14u);c ^=b;c-=BubblesVoronoi_jenkins_rot(b,24u);}uint BubblesVoronoi_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;BubblesVoronoi_jenkins_final(a,b,c);return c;}float BubblesVoronoi_hash_uint3_to_float(uint kx,uint ky,uint kz){return float(BubblesVoronoi_hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float BubblesVoronoi_hash_vec3_to_float(vec3 k){return BubblesVoronoi_hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}void BubblesVoronoi_jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=BubblesVoronoi_jenkins_rot(c,4u);c+=b;b-=a;b ^=BubblesVoronoi_jenkins_rot(a,6u);a+=c;c-=b;c ^=BubblesVoronoi_jenkins_rot(b,8u);b+=a;a-=c;a ^=BubblesVoronoi_jenkins_rot(c,16u);c+=b;b-=a;b ^=BubblesVoronoi_jenkins_rot(a,19u);a+=c;c-=b;c ^=BubblesVoronoi_jenkins_rot(b,4u);b+=a;}uint BubblesVoronoi_hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;BubblesVoronoi_jenkins_mix(a,b,c);a+=kw;BubblesVoronoi_jenkins_final(a,b,c);return c;}float BubblesVoronoi_hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(BubblesVoronoi_hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float BubblesVoronoi_hash_vec4_to_float(vec4 k){return BubblesVoronoi_hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec3 BubblesVoronoi_hash_vec3_to_vec3(vec3 k){return vec3(BubblesVoronoi_hash_vec3_to_float(k),BubblesVoronoi_hash_vec4_to_float(vec4(k,1.0)),BubblesVoronoi_hash_vec4_to_float(vec4(k,2.0)));}float BubblesVoronoi_octave(vec3 coord,float randomness){vec3 cellPosition_f=floor(coord);vec3 localPosition=coord-cellPosition_f;float minDistance=1e10;vec3 targetOffset=vec3(0.0);vec3 targetPosition=vec3(0.0);for(int k=-1;k<=1;k++){for(int j=-1;j<=1;j++){for(int i=-1;i<=1;i++){vec3 cellOffset=vec3(float(i),float(j),float(k));vec3 pointPosition=cellOffset+BubblesVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset)*randomness;float distanceToPoint=distance(pointPosition,localPosition);float mask=float(distanceToPoint<minDistance);targetOffset=mix(targetOffset,cellOffset,mask);minDistance=min(minDistance,distanceToPoint);targetPosition=mix(targetPosition,pointPosition,mask);}}}return minDistance;}float BubblesVoronoi(vec2 uv,float time){vec3 coord=vec3(uv.x,uv.y,time)*2.0;float randomness=1.0;return BubblesVoronoi_octave(coord,randomness);}float FoamVoronoi(vec3 coord){coord*=8.0;float randomness=1.0;return BubblesVoronoi_octave(coord,randomness);}
#include <fog_pars_vertex>
uniform float uTime;attribute vec4 tangent;varying vec3 vNormal;varying vec3 vDebug;vec3 getDisplacement(vec3 position,vec3 normal,float time){vec3 displacement=vec3(0.0);float perturbator=BubblesNoise(position.xy,time*1.5);vec3 mixed=mix(position,vec3(perturbator),0.1);float noise=FoamVoronoi(mixed);displacement=normal*noise*0.1;displacement.x+=perturbator*0.2;displacement.z-=perturbator*0.2;displacement.z+=0.1;return displacement;}void main(){vec3 displacement=getDisplacement(position,normal,uTime);vDebug=displacement;vec3 newPosition=position+displacement;vec3 biTangent=cross(normal,tangent.xyz);float shift=0.2;vec3 positionA=newPosition+tangent.xyz*shift;vec3 positionB=newPosition+biTangent*shift;positionA+=getDisplacement(positionA,normal,uTime);positionB+=getDisplacement(positionB,normal,uTime);vec3 toA=normalize(positionA-newPosition);vec3 toB=normalize(positionB-newPosition);vec3 newNormal=cross(toA,toB);vNormal=newNormal;vec4 modelPosition=modelMatrix*vec4(newPosition,1.0);vec4 mvPosition=viewMatrix*modelPosition;vec4 projectedPosition=projectionMatrix*mvPosition;gl_Position=projectedPosition;
#include <fog_vertex>
}`,DM=`#include <fog_pars_fragment>
uniform float uTime;uniform vec3 uLightDirection;uniform vec3 uFoamShadowColor;uniform vec3 uFoamColor;varying vec3 vNormal;void main(){vec3 color=uFoamColor;vec3 shadowColor=uFoamShadowColor;vec3 normal=normalize(vNormal);vec3 lightColor=vec3(1.0,1.0,1.0);float NdotL=dot(normalize(vNormal),normalize(uLightDirection));float lightIntensity=smoothstep(0.1,0.12,NdotL);vec3 directionalLight=lightColor*lightIntensity;vec3 dark=1.0-directionalLight;gl_FragColor=vec4(color*directionalLight+dark*shadowColor,1.0);
#include <fog_fragment>
}`;class RM{engine;group;tweakValues;material;mesh;constructor({engine:e,group:t,initialTweaks:i}){this.engine=e,this.group=t,this.tweakValues=i,this.init(),this.configureTweaks(),this.engine.on("global:config:changed",a=>{const r=a?.detail?.config;r&&this.configChanged(r)})}configChanged(e){e.islands.foam&&(this.updateColor(e.islands.foam.color),this.updateShadowColor(e.islands.foam.shadow))}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:"Islands.Waterfalls.Foam",lightPosition:{onChange:()=>{this.material instanceof Zn||this.material.uniforms.uLightDirection.value.set(...Object.values(this.tweakValues.lightPosition))}},foamColor:{onChange:this.updateColor.bind(this)},foamShadowColor:{onChange:this.updateShadowColor.bind(this)}})}updateColor(e){this.material instanceof Zn||(this.material.uniforms.uFoamColor.value=new X(e))}updateShadowColor(e){this.material instanceof Zn||(this.material.uniforms.uFoamShadowColor.value=new X(e))}init(){this.extractMesh(),this.createMaterial(),this.applyMaterialToMesh(),this.engine.monitor.on("decline",e=>{const t=e?.detail?.declineLevel;if(t)switch(t){case 5:console.warn("Waterfalls: Low fps detected. Deleting foam."),this.flipShaderToToonMaterial();break}})}flipShaderToToonMaterial(){this.material=new Zn({color:new X("#cafff8").multiplyScalar(5)}),this.mesh.material=this.material}extractMesh(){this.group.traverse(e=>{if(e instanceof Ne&&e.name==="main-foam"){this.mesh=e;const t=this.mesh.geometry;this.mesh.geometry=eA(this.mesh.geometry),this.mesh.geometry.computeTangents(),t.dispose()}})}createMaterial(){this.material=new Le({vertexShader:CM,fragmentShader:DM,fog:!0,uniforms:{uTime:new O(0),uLightDirection:new O(new S(this.tweakValues.lightPosition.x,this.tweakValues.lightPosition.y,this.tweakValues.lightPosition.z)),uFoamColor:new O(new X(this.tweakValues.foamColor)),uFoamShadowColor:new O(new X(this.tweakValues.foamShadowColor)),...ie.fog}})}applyMaterialToMesh(){this.mesh.material=this.material}update(){!this.material||this.material instanceof Zn||this.material.uniforms?.uTime&&(this.material.uniforms.uTime.value=this.engine.time.elapsedSeconds)}destroy(){this.mesh.removeFromParent(),this.material?.dispose(),this.mesh?.geometry.dispose()}}var OM="varying vec3 vColor;varying float vAlpha;void main(){vec2 coord=gl_PointCoord-0.5;float distance=length(coord);float circle=1.0-smoothstep(0.4,0.5,distance);float alpha=circle*vAlpha;if(alpha<0.01){discard;}vec3 finalColor=vec3(1.0);gl_FragColor=vec4(finalColor,1.0);}",NM="attribute float aSize;attribute vec3 aColor;attribute vec3 aImpulse;attribute float aDelay;attribute float aLifeCycle;uniform float uTime;uniform float uSize;uniform vec2 uResolution;varying vec3 vColor;varying float vAlpha;void main(){float GRAVITY=9.81;float adjustedTime=uTime-aDelay;float cycleTime=mod(adjustedTime,aLifeCycle)/aLifeCycle;float t=cycleTime*aLifeCycle*0.5;if(adjustedTime<0.0){gl_Position=vec4(0.0,0.0,0.0,0.0);vAlpha=0.0;return;}vec3 currentPosition=position;currentPosition.x+=aImpulse.x*t;currentPosition.z+=aImpulse.z*t;currentPosition.y+=aImpulse.y*t-0.5*GRAVITY*t*t;float fadeIn=smoothstep(0.0,0.1,cycleTime);float fadeOut=1.0-smoothstep(0.7,1.0,cycleTime);vAlpha=fadeIn*fadeOut;float heightFade=smoothstep(-0.5,0.0,currentPosition.y);vAlpha*=heightFade;vColor=aColor;vec4 modelPosition=modelMatrix*vec4(currentPosition,1.0);vec4 viewPosition=viewMatrix*modelPosition;vec4 projectedPosition=projectionMatrix*viewPosition;gl_Position=projectedPosition;gl_PointSize=uSize*uResolution.y*aSize*heightFade;gl_PointSize*=1.0/-viewPosition.z;}";class LM{engine;group;tweakValues;particles;material;constructor({group:e,engine:t,initialTweaks:i}){this.group=e,this.engine=t,this.tweakValues=i,this.init()}init(){this.createMaterial(),this.createParticles(),this.addParticlesToTheGroup()}createMaterial(){this.material=new Le({fragmentShader:OM,vertexShader:NM,transparent:!0,uniforms:{uTime:new O(0),uResolution:new O(this.resolution),uSize:new O(this.tweakValues.size)}})}get resolution(){return new $(...this.engine.sizes.resolution)}createParticles(){const e=new Wt,t=new Float32Array(this.tweakValues.count*3),i=new Float32Array(this.tweakValues.count*3),a=new Float32Array(this.tweakValues.count*3),r=new Float32Array(this.tweakValues.count),n=new Float32Array(this.tweakValues.count),o=new Float32Array(this.tweakValues.count);for(let l=0;l<this.tweakValues.count;l++){const h=l*3;t.set([-.23,0,(Math.random()-.5)*.22+.05],h),r.set([Math.max(Math.random(),.1)],l),o.set([Math.random()],l),n.set([Math.max(Math.random(),.2)*5],l),i.set(St.color().toArray(),h),a.set([(Math.random()-.5)*1.5,Math.max(Math.random(),.1)*1.2,(Math.random()-.5)*1.5],h)}e.setAttribute("position",new Be(t,3)),e.setAttribute("aColor",new Be(i,3)),e.setAttribute("aImpulse",new Be(a,3)),e.setAttribute("aSize",new Be(r,1)),e.setAttribute("aLifeCycle",new Be(n,1)),e.setAttribute("aDelay",new Be(o,1)),this.particles=new Dn(e,this.material)}addParticlesToTheGroup(){this.group.add(this.particles)}update(){this.material&&(this.material.uniforms.uTime.value=this.engine.time.elapsedSeconds*.4)}destroy(){this.group.remove(this.particles),this.material.dispose(),this.particles.geometry.dispose()}}var FM="uniform sampler2D colorTexture0;uniform float mixFactor;varying vec2 vUv;void main(){gl_FragColor=texture2D(colorTexture0,vUv);}",kM="uniform sampler2D noise;uniform float mixFactor;varying vec2 vUv;void main(){vUv=uv;vec3 newPosition=position;newPosition+=normal*texture2D(noise,vUv+mixFactor*0.1).x*0.01;gl_Position=projectionMatrix*modelViewMatrix*vec4(newPosition,1.0);}";class np{engine;resources;resolution;meshToBake;bakingVertexShader;bakedTextures;bakingScene;bakingCamera;bakingQuad;bakingSnapshots;customBakedFragmentShader;constructor(e,t,i,a,r,n,o){this.bakingVertexShader=e,this.resources=a,this.engine=i,this.resolution=t,this.meshToBake=r,this.bakedTextures=[],this.bakingSnapshots=n,this.customBakedFragmentShader=o,this.init()}renderBuffer(e,t){Object.entries(t).forEach(([i,a])=>{this.meshToBake.material.uniforms[i].value=a}),this.engine.renderer.instance.setRenderTarget(e),this.engine.renderer.instance.render(this.bakingScene,this.bakingCamera),this.engine.renderer.instance.setRenderTarget(null)}setupRendering(){this.bakingScene=new gn,this.bakingCamera=new wr(-1,1,1,-1,0,1);const e=this.meshToBake.material;e.vertexShader=this.bakingVertexShader,e.needsUpdate=!0,this.bakingQuad=new Ne(this.createGeometry(),e),this.bakingScene.add(this.bakingQuad)}createGeometry(){const e=Math.ceil(Math.sqrt(this.meshToBake.geometry.attributes.position.count/3))*1.5;return new Vs(2,2,e,e)}initBuffers(){const e={minFilter:it,magFilter:it,wrapS:rt,wrapT:rt,format:At,type:Et};this.bakedTextures.push(new gt(this.resolution,this.resolution,e))}init(){this.setupRendering(),this.initBuffers()}bake(){return this.renderBuffer(this.bakedTextures[0],this.bakingSnapshots[0]),new Le({fragmentShader:this.customBakedFragmentShader??FM,vertexShader:kM,uniforms:{noise:new O(this.resources.items.grassFieldWindNoiseTexture),colorTexture0:new O(this.bakedTextures[0].texture),mixFactor:new O(0)}})}}var VM=`vec4 SGPP_coord_prepare(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 SGPP_coord_prepare(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 SGPP_permute(vec4 x){return fract(x*((34.0/289.0)*x+(1.0/289.0)))*289.0;}vec4 SGPP_resolve(vec4 x){return fract(x*(7.0/288.0));}vec4 SGPP_hash_2D(vec2 gridcell){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));return SGPP_resolve(SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww));}void SGPP_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));hash_0=SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww);hash_1=SGPP_resolve(SGPP_permute(hash_0));hash_0=SGPP_resolve(hash_0);}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell.zzzz));highz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell_inc1.zzzz));}void SGPP_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){vec3 coords0=gridcell.xyz-floor(gridcell.xyz*(1.0/289.0))*289.0;vec3 coords3=step(coords0,vec3(287.5))*(coords0+1.0);vec3 coords1=mix(coords0,coords3,v1_mask);vec3 coords2=mix(coords0,coords3,v2_mask);hash_2=SGPP_permute(SGPP_permute(SGPP_permute(vec4(coords0.x,coords1.x,coords2.x,coords3.x))+vec4(coords0.y,coords1.y,coords2.y,coords3.y))+vec4(coords0.z,coords1.z,coords2.z,coords3.z));hash_0=SGPP_resolve(hash_2);hash_1=SGPP_resolve(hash_2=SGPP_permute(hash_2));hash_2=SGPP_resolve(SGPP_permute(hash_2));}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash_2=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash_0=SGPP_resolve(lowz_hash_2=SGPP_permute(highz_hash_2+gridcell.zzzz));highz_hash_0=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2+gridcell_inc1.zzzz));lowz_hash_1=SGPP_resolve(lowz_hash_2=SGPP_permute(lowz_hash_2));highz_hash_1=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2));lowz_hash_2=SGPP_resolve(SGPP_permute(lowz_hash_2));highz_hash_2=SGPP_resolve(SGPP_permute(highz_hash_2));}vec4 BBS_coord_prepare(vec4 x){return x-floor(x*(1.0/61.0))*61.0;}vec3 BBS_coord_prepare(vec3 x){return x-floor(x*(1.0/61.0))*61.0;}vec4 BBS_permute(vec4 x){return fract(x*x*(1.0/61.0))*61.0;}vec4 BBS_permute_and_resolve(vec4 x){return fract(x*x*(1.0/61.0));}vec4 BBS_hash_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);return BBS_permute_and_resolve(p+hash_coord.yyww);}vec4 BBS_hash_hq_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);p=BBS_permute(p+hash_coord.yyww);return BBS_permute_and_resolve(p+hash_coord.xzxz);}void BBS_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const float DOMAIN=60.0;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 p=BBS_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy);p=BBS_permute(p+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=BBS_permute_and_resolve(p+gridcell.zzzz);highz_hash=BBS_permute_and_resolve(p+gridcell_inc1.zzzz);}vec4 FAST32_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const float SOMELARGEFLOAT=951.135664;vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec2 SOMELARGEFLOATS=vec2(951.135664,642.949883);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec3 SOMELARGEFLOATS=vec3(951.135664,642.949883,803.202459);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));hash_2=fract(P*(1.0/SOMELARGEFLOATS.z));}vec4 FAST32_hash_2D_Cell(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec4 SOMELARGEFLOATS=vec4(951.135664,642.949883,803.202459,986.973274);vec2 P=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xy;P*=P;return fract((P.x*P.y)*(1.0/SOMELARGEFLOATS.xyzw));}vec4 FAST32_hash_3D_Cell(vec3 gridcell){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;gridcell.xy+=OFFSET.xy;gridcell.xy*=gridcell.xy;return fract((gridcell.x*gridcell.y)*(1.0/(SOMELARGEFLOATS+gridcell.zzzz*ZINC)));}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;highz_hash.xy=vec2(1.0/(SOMELARGEFLOAT+vec2(gridcell.z,gridcell_inc1.z)*ZINC));lowz_hash=fract(P*highz_hash.xxxx);highz_hash=fract(P*highz_hash.yyyy);}void FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec3 lowz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));v1_mask=(v1_mask.z<0.5)? lowz_mods : highz_mods;v2_mask=(v2_mask.z<0.5)? lowz_mods : highz_mods;hash_0=fract(P*vec4(lowz_mods.x,v1_mask.x,v2_mask.x,highz_mods.x));hash_1=fract(P*vec4(lowz_mods.y,v1_mask.y,v2_mask.y,highz_mods.y));hash_2=fract(P*vec4(lowz_mods.z,v1_mask.z,v2_mask.z,highz_mods.z));}vec4 FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec2 V1z_V2z=vec2(v1_mask.z<0.5 ? gridcell.z : gridcell_inc1.z,v2_mask.z<0.5 ? gridcell.z : gridcell_inc1.z);vec4 mod_vals=vec4(1.0/(SOMELARGEFLOAT+vec4(gridcell.z,V1z_V2z,gridcell_inc1.z)*ZINC));return fract(P*mod_vals);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;vec3 lowz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));lowz_hash_0=fract(P*lowz_mod.xxxx);highz_hash_0=fract(P*highz_mod.xxxx);lowz_hash_1=fract(P*lowz_mod.yyyy);highz_hash_1=fract(P*highz_mod.yyyy);lowz_hash_2=fract(P*lowz_mod.zzzz);highz_hash_2=fract(P*highz_mod.zzzz);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 lowz_hash_3,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2,out vec4 highz_hash_3){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;lowz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell.zzzz*ZINC.xyzw));highz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell_inc1.zzzz*ZINC.xyzw));lowz_hash_0=fract(P*lowz_hash_3.xxxx);highz_hash_0=fract(P*highz_hash_3.xxxx);lowz_hash_1=fract(P*lowz_hash_3.yyyy);highz_hash_1=fract(P*highz_hash_3.yyyy);lowz_hash_2=fract(P*lowz_hash_3.zzzz);highz_hash_2=fract(P*highz_hash_3.zzzz);lowz_hash_3=fract(P*lowz_hash_3.wwww);highz_hash_3=fract(P*highz_hash_3.wwww);}vec4 FAST32_2_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(403.839172,377.242706);const float DOMAIN=69.0;const float SOMELARGEFLOAT=32745.708984;const vec2 SCALE=vec2(2.009842,1.372549);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P=(P*SCALE.xyxy)+OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_3D(vec3 gridcell,out vec4 z0_hash,out vec4 z1_hash){const vec3 OFFSET=vec3(55.882355,63.167774,52.941177);const float DOMAIN=69.0;const float SOMELARGEFLOAT=69412.070313;const vec3 SCALE=vec3(0.235142,0.205890,0.216449);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);z0_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell.zzzz*(1.0/SOMELARGEFLOAT));z1_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell_inc1.zzzz*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash,out vec4 z1w0_hash,out vec4 z0w1_hash,out vec4 z1w1_hash){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const float SOMELARGEFLOAT=47165.636719;const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww)*(1.0/SOMELARGEFLOAT);z0w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx);z1w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy);z0w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz);z1w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww);}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash_0,out vec4 z0w0_hash_1,out vec4 z0w0_hash_2,out vec4 z0w0_hash_3,out vec4 z1w0_hash_0,out vec4 z1w0_hash_1,out vec4 z1w0_hash_2,out vec4 z1w0_hash_3,out vec4 z0w1_hash_0,out vec4 z0w1_hash_1,out vec4 z0w1_hash_2,out vec4 z0w1_hash_3,out vec4 z1w1_hash_0,out vec4 z1w1_hash_1,out vec4 z1w1_hash_2,out vec4 z1w1_hash_3){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(56974.746094,47165.636719,55049.667969,49901.273438);const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww);vec4 hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx;z0w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy;z1w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz;z0w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww;z1w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));}float Interpolation_C1(float x){return x*x*(3.0-2.0*x);}vec2 Interpolation_C1(vec2 x){return x*x*(3.0-2.0*x);}vec3 Interpolation_C1(vec3 x){return x*x*(3.0-2.0*x);}vec4 Interpolation_C1(vec4 x){return x*x*(3.0-2.0*x);}float Interpolation_C2(float x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec2 Interpolation_C2(vec2 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec3 Interpolation_C2(vec3 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2(vec4 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2_InterpAndDeriv(vec2 x){return x.xyxy*x.xyxy*(x.xyxy*(x.xyxy*(x.xyxy*vec2(6.0,0.0).xxyy+vec2(-15.0,30.0).xxyy)+vec2(10.0,-60.0).xxyy)+vec2(0.0,30.0).xxyy);}vec3 Interpolation_C2_Deriv(vec3 x){return x*x*(x*(x*30.0-60.0)+30.0);}float Interpolation_C2_Fast(float x){float x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec2 Interpolation_C2_Fast(vec2 x){vec2 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec3 Interpolation_C2_Fast(vec3 x){vec3 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec4 Interpolation_C2_Fast(vec4 x){vec4 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}float Interpolation_C3(float x){float xsq=x*x;float xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec2 Interpolation_C3(vec2 x){vec2 xsq=x*x;vec2 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec3 Interpolation_C3(vec3 x){vec3 xsq=x*x;vec3 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec4 Interpolation_C3(vec4 x){vec4 xsq=x*x;vec4 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}float Falloff_Xsq_C1(float xsq){xsq=1.0-xsq;return xsq*xsq;}float Falloff_Xsq_C2(float xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}vec4 Falloff_Xsq_C2(vec4 xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}float Value2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec2 blend=Interpolation_C2(Pf);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(hash,blend2.zxzx*blend2.wwyy);}float Value3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Value4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 z0w0_hash;vec4 z1w0_hash;vec4 z0w1_hash;vec4 z1w1_hash;FAST32_2_hash_4D(Pi,z0w0_hash,z1w0_hash,z0w1_hash,z1w1_hash);vec4 blend=Interpolation_C2(Pf);vec4 res0=z0w0_hash+(z0w1_hash-z0w0_hash)*blend.wwww;vec4 res1=z1w0_hash+(z1w1_hash-z1w0_hash)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0-blend.xy);return dot(res0,blend.zxzx*blend.wwyy);}float Perlin2D(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);
#if 1
vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);
#if 1
grad_results*=1.4142135623730950488016887242097;vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#else
grad_results*=2.3703703703703703703703703703704;vec4 vecs_len_sq=Pf_Pfmin1*Pf_Pfmin1;vecs_len_sq=vecs_len_sq.xzxz+vecs_len_sq.yyww;return dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq)),grad_results);
#endif
#else
vec4 hash=FAST32_hash_2D(Pi);hash-=0.5;vec4 grad_results=Pf_Pfmin1.xzxz*sign(hash)+Pf_Pfmin1.yyww*sign(abs(hash)-0.25);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#endif
}float Perlin3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;
#if 1
vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);
#if 1
vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);final*=1.1547005383792515290182975610039;return final;
#else
Pf*=Pf;Pf_min1*=Pf_min1;vec4 vecs_len_sq=vec4(Pf.x,Pf_min1.x,Pf.x,Pf_min1.x)+vec4(Pf.yy,Pf_min1.yy);float final=dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf.zzzz)),grad_results_0)+dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf_min1.zzzz)),grad_results_1);final*=2.3703703703703703703703703703704;return final;
#endif
#else
vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);hash_lowz-=0.5;vec4 grad_results_0_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_lowz);hash_lowz=abs(hash_lowz)-0.25;vec4 grad_results_0_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_lowz);vec4 grad_results_0_2=Pf.zzzz*sign(abs(hash_lowz)-0.125);vec4 grad_results_0=grad_results_0_0+grad_results_0_1+grad_results_0_2;hash_highz-=0.5;vec4 grad_results_1_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_highz);hash_highz=abs(hash_highz)-0.25;vec4 grad_results_1_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_highz);vec4 grad_results_1_2=Pf_min1.zzzz*sign(abs(hash_highz)-0.125);vec4 grad_results_1=grad_results_1_0+grad_results_1_1+grad_results_1_2;vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy)*(2.0/3.0);
#endif
}float Perlin4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 Pf_min1=Pf-1.0;vec4 lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3;vec4 highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3;vec4 lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3;vec4 highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3;FAST32_2_hash_4D(Pi,lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3,highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3,lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3,highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3);lowz_loww_hash_0-=0.49999;lowz_loww_hash_1-=0.49999;lowz_loww_hash_2-=0.49999;lowz_loww_hash_3-=0.49999;highz_loww_hash_0-=0.49999;highz_loww_hash_1-=0.49999;highz_loww_hash_2-=0.49999;highz_loww_hash_3-=0.49999;lowz_highw_hash_0-=0.49999;lowz_highw_hash_1-=0.49999;lowz_highw_hash_2-=0.49999;lowz_highw_hash_3-=0.49999;highz_highw_hash_0-=0.49999;highz_highw_hash_1-=0.49999;highz_highw_hash_2-=0.49999;highz_highw_hash_3-=0.49999;vec4 grad_results_lowz_loww=inversesqrt(lowz_loww_hash_0*lowz_loww_hash_0+lowz_loww_hash_1*lowz_loww_hash_1+lowz_loww_hash_2*lowz_loww_hash_2+lowz_loww_hash_3*lowz_loww_hash_3);grad_results_lowz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_loww_hash_1+Pf.zzzz*lowz_loww_hash_2+Pf.wwww*lowz_loww_hash_3);vec4 grad_results_highz_loww=inversesqrt(highz_loww_hash_0*highz_loww_hash_0+highz_loww_hash_1*highz_loww_hash_1+highz_loww_hash_2*highz_loww_hash_2+highz_loww_hash_3*highz_loww_hash_3);grad_results_highz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_loww_hash_1+Pf_min1.zzzz*highz_loww_hash_2+Pf.wwww*highz_loww_hash_3);vec4 grad_results_lowz_highw=inversesqrt(lowz_highw_hash_0*lowz_highw_hash_0+lowz_highw_hash_1*lowz_highw_hash_1+lowz_highw_hash_2*lowz_highw_hash_2+lowz_highw_hash_3*lowz_highw_hash_3);grad_results_lowz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_highw_hash_1+Pf.zzzz*lowz_highw_hash_2+Pf_min1.wwww*lowz_highw_hash_3);vec4 grad_results_highz_highw=inversesqrt(highz_highw_hash_0*highz_highw_hash_0+highz_highw_hash_1*highz_highw_hash_1+highz_highw_hash_2*highz_highw_hash_2+highz_highw_hash_3*highz_highw_hash_3);grad_results_highz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_highw_hash_1+Pf_min1.zzzz*highz_highw_hash_2+Pf_min1.wwww*highz_highw_hash_3);vec4 blend=Interpolation_C2(Pf);vec4 res0=grad_results_lowz_loww+(grad_results_lowz_highw-grad_results_lowz_loww)*blend.wwww;vec4 res1=grad_results_highz_loww+(grad_results_highz_highw-grad_results_highz_loww)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0)-blend.xy;return dot(res0,blend.zxzx*blend.wwyy);}float ValuePerlin2D(vec2 P,float blend_val){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_value,hash_x,hash_y;FAST32_hash_2D(Pi,hash_value,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results*=1.4142135623730950488016887242097;grad_results=mix((hash_value*2.0-1.0),grad_results,blend_val);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);}float ValuePerlin3D(vec3 P,float blend_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0*=1.1547005383792515290182975610039;grad_results_1*=1.1547005383792515290182975610039;grad_results_0=mix((hash_value0*2.0-1.0),grad_results_0,blend_val);grad_results_1=mix((hash_value1*2.0-1.0),grad_results_1,blend_val);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Cubist2D(vec2 P,vec2 range_clamp){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y,hash_value;FAST32_hash_2D(Pi,hash_x,hash_y,hash_value);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results=(hash_value-0.5)*(1.0/grad_results);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));float final=dot(grad_results,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}float Cubist3D(vec3 P,vec2 range_clamp){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0=(hash_value0-0.5)*(1.0/grad_results_0);grad_results_1=(hash_value1-0.5)*(1.0/grad_results_1);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}vec4 Cellular_weight_samples(vec4 samples){samples=samples*2.0-1.0;return(samples*samples*samples)-sign(samples);}float Cellular2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);
#if 1
const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x=hash_x*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y=hash_y*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;d.xy=min(d.xy,d.zw);return min(d.x,d.y)*(1.0/1.125);}float Cellular3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);
#if 1
const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x0=hash_x0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y0=hash_y0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_x1=hash_x1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y1=hash_y1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_z0=hash_z0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW);hash_z1=hash_z1*JITTER_WINDOW*2.0+vec4(1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;d1=min(d1,d2);d1.xy=min(d1.xy,d1.wz);return min(d1.x,d1.y)*(9.0/12.0);}/*float SparseConvolution2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;const float RADIUS=1.0-JITTER_WINDOW;d*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d,vec4(1.0))),vec4(1.0));}float SparseConvolution3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;const float RADIUS=(1.0-JITTER_WINDOW);d1*=((1.0/RADIUS)*(1.0/RADIUS));d2*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d1,vec4(1.0)))+Falloff_Xsq_C2(min(d2,vec4(1.0))),vec4(1.0));}*/float PolkaDot2D(vec2 P,float radius_low,float radius_high){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.z*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xy*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float PolkaDot3D(vec3 P,float radius_low,float radius_high){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash=FAST32_hash_3D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.w*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xyz*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float Stars2D(vec2 P,float probability_threshold,float max_dimness,float two_over_radius){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float VALUE=1.0-max_dimness*hash.z;Pf*=two_over_radius;Pf-=(two_over_radius-1.0);Pf+=hash.xy*(two_over_radius-2.0);return(hash.w<probability_threshold)?(Falloff_Xsq_C1(min(dot(Pf,Pf),1.0))*VALUE): 0.0;}float SimplexPerlin2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw));const float FINAL_NORMALIZATION=99.204334582718712976990005025589;vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);m=m*m;return dot(m*m,grad_results)*FINAL_NORMALIZATION;}float SimplexPolkaDot2D(vec2 P,float radius,float max_dimness){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.4494897427831780981972840747059;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec2 v0=(Pi-dot(Pi,vec2(UNSKEWFACTOR))-P);vec4 v0123_x=vec4(0.0,SIMPLEX_POINTS.xyz)+v0.x;vec4 v0123_y=vec4(0.0,SIMPLEX_POINTS.yxz)+v0.y;vec4 hash=FAST32_hash_2D(Pi);radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v0123_x*=radius;v0123_y*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v0123_x*v0123_x+v0123_y*v0123_y));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float SimplexCellular2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HEIGHT=1.4142135623730950488016887242097;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR)*INV_SIMPLEX_TRI_HEIGHT;P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=(0.10566243270259355887271280487451*INV_SIMPLEX_TRI_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;vec2 p0=((Pi-dot(Pi,vec2(UNSKEWFACTOR)))-P)*INV_SIMPLEX_TRI_HEIGHT;hash_x+=p0.xxxx;hash_y+=p0.yyyy;hash_x.yzw+=SIMPLEX_POINTS.xyz;hash_y.yzw+=SIMPLEX_POINTS.yxz;vec4 distsq=hash_x*hash_x+hash_y*hash_y;vec2 tmp=min(distsq.xy,distsq.zw);return min(tmp.x,tmp.y);}void Simplex3D_GetCornerVectors(vec3 P,out vec3 Pi,out vec3 Pi_1,out vec3 Pi_2,out vec4 v1234_x,out vec4 v1234_y,out vec4 v1234_z){const float SKEWFACTOR=1.0/3.0;const float UNSKEWFACTOR=1.0/6.0;const float SIMPLEX_CORNER_POS=0.5;const float SIMPLEX_PYRAMID_HEIGHT=0.70710678118654752440084436210485;P*=SIMPLEX_PYRAMID_HEIGHT;Pi=floor(P+dot(P,vec3(SKEWFACTOR)));vec3 x0=P-Pi+dot(Pi,vec3(UNSKEWFACTOR));vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;Pi_1=min(g.xyz,l.zxy);Pi_2=max(g.xyz,l.zxy);vec3 x1=x0-Pi_1+UNSKEWFACTOR;vec3 x2=x0-Pi_2+SKEWFACTOR;vec3 x3=x0-SIMPLEX_CORNER_POS;v1234_x=vec4(x0.x,x1.x,x2.x,x3.x);v1234_y=vec4(x0.y,x1.y,x2.y,x3.y);v1234_z=vec4(x0.z,x1.z,x2.z,x3.z);}vec4 Simplex3D_GetSurfletWeights(vec4 v1234_x,vec4 v1234_y,vec4 v1234_z){vec4 surflet_weights=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;surflet_weights=max(0.5-surflet_weights,0.0);return surflet_weights*surflet_weights*surflet_weights;}float SimplexPerlin3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 grad_results=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2)*(hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return dot(Simplex3D_GetSurfletWeights(v1234_x,v1234_y,v1234_z),grad_results)*FINAL_NORMALIZATION;}float SimplexCellular3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_x;vec4 hash_y;vec4 hash_z;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_x,hash_y,hash_z);const float INV_SIMPLEX_PYRAMID_HEIGHT=1.4142135623730950488016887242097;const float JITTER_WINDOW=(0.0597865779345250670558198111*INV_SIMPLEX_PYRAMID_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;hash_z=Cellular_weight_samples(hash_z)*JITTER_WINDOW;v1234_x*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_y*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_z*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_x+=hash_x;v1234_y+=hash_y;v1234_z+=hash_z;vec4 distsq=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;return min(min(distsq.x,distsq.y),min(distsq.z,distsq.w));}float SimplexPolkaDot3D(vec3 P,float radius,float max_dimness){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash=FAST32_hash_3D(Pi,Pi_1,Pi_2);const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.3094010767585030580365951220078;radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v1234_x*=radius;v1234_y*=radius;v1234_z*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float QuinticHermite(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,x,0.0));}vec4 QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 egrad0,vec4 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;}vec4 QuinticHermite(float x,vec2 igrad0,vec2 igrad1,vec2 egrad0,vec2 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return vec4(egrad1,igrad0)*vec4(h123.zz,1.0,1.0)+vec4(egrad0,h123.xx)*vec4(vec2(h123.y+x),(igrad1-igrad0));}void QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}void QuinticHermite(float x,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}float QuinticHermiteDeriv(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(30.0,-15.0,-15.0);const vec3 C1=vec3(-60.0,32.0,28.0);const vec3 C2=vec3(30.0,-18.0,-12.0);vec3 h123=(((C1+C0*x)*x)+C2)*(x*x);return dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,1.0,0.0));}float Hermite2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float Hermite3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float ValueHermite2D(vec2 P,float value_scale,float gradient_scale,float normalization_val){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_value,hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_value,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999)*gradient_scale;hash_grady=(hash_grady-0.49999)*gradient_scale;hash_value=(hash_value-0.5)*value_scale;vec4 qh_results=QuinticHermite(Pf.y,vec4(hash_value.xy,hash_gradx.xy),vec4(hash_value.zw,hash_gradx.zw),vec4(hash_grady.xy,0.0,0.0),vec4(hash_grady.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}float ValueHermite3D(vec3 P,float value_scale,float gradient_scale,float normalization_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999)*gradient_scale;hash_grady0=(hash_grady0-0.49999)*gradient_scale;hash_gradz0=(hash_gradz0-0.49999)*gradient_scale;hash_gradx1=(hash_gradx1-0.49999)*gradient_scale;hash_grady1=(hash_grady1-0.49999)*gradient_scale;hash_gradz1=(hash_gradz1-0.49999)*gradient_scale;hash_value0=(hash_value0-0.5)*value_scale;hash_value1=(hash_value1-0.5)*value_scale;vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_value0,hash_value1,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}vec3 Value2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec4 blend=Interpolation_C2_InterpAndDeriv(Pf);vec4 res0=mix(hash.xyxz,hash.zwyw,blend.yyxx);return vec3(res0.x,0.0,0.0)+(res0.yyw-res0.xxz)*blend.xzw;}vec4 Value3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 res1=mix(res0.xyxz,res0.zwyw,blend.yyxx);vec4 res3=mix(vec4(hash_lowz.xy,hash_highz.xy),vec4(hash_lowz.zw,hash_highz.zw),blend.y);vec2 res4=mix(res3.xz,res3.yw,blend.x);return vec4(res1.x,0.0,0.0,0.0)+(vec4(res1.yyw,res4.y)-vec4(res1.xxz,res4.x))*vec4(blend.x,Interpolation_C2_Deriv(Pf));}vec3 Perlin2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 dotval=(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);vec3 dotval0_grad0=vec3(dotval.x,grad_x.x,grad_y.x);vec3 dotval1_grad1=vec3(dotval.y,grad_x.y,grad_y.y);vec3 dotval2_grad2=vec3(dotval.z,grad_x.z,grad_y.z);vec3 dotval3_grad3=vec3(dotval.w,grad_x.w,grad_y.w);vec3 k0_gk0=dotval1_grad1-dotval0_grad0;vec3 k1_gk1=dotval2_grad2-dotval0_grad0;vec3 k2_gk2=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 blend=Interpolation_C2_InterpAndDeriv(Pf_Pfmin1.xy);vec3 results=dotval0_grad0+blend.x*k0_gk0+blend.y*(k1_gk1+blend.x*k2_gk2);results.yz+=blend.zw*(vec2(k0_gk0.x,k1_gk1.x)+blend.yx*k2_gk2.xx);return results*1.4142135623730950488016887242097;}vec4 Perlin3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 dotval_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 dotval_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec4 dotval0_grad0=vec4(dotval_0.x,grad_x0.x,grad_y0.x,grad_z0.x);vec4 dotval1_grad1=vec4(dotval_0.y,grad_x0.y,grad_y0.y,grad_z0.y);vec4 dotval2_grad2=vec4(dotval_0.z,grad_x0.z,grad_y0.z,grad_z0.z);vec4 dotval3_grad3=vec4(dotval_0.w,grad_x0.w,grad_y0.w,grad_z0.w);vec4 dotval4_grad4=vec4(dotval_1.x,grad_x1.x,grad_y1.x,grad_z1.x);vec4 dotval5_grad5=vec4(dotval_1.y,grad_x1.y,grad_y1.y,grad_z1.y);vec4 dotval6_grad6=vec4(dotval_1.z,grad_x1.z,grad_y1.z,grad_z1.z);vec4 dotval7_grad7=vec4(dotval_1.w,grad_x1.w,grad_y1.w,grad_z1.w);vec4 k0_gk0=dotval1_grad1-dotval0_grad0;vec4 k1_gk1=dotval2_grad2-dotval0_grad0;vec4 k2_gk2=dotval4_grad4-dotval0_grad0;vec4 k3_gk3=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 k4_gk4=dotval5_grad5-dotval4_grad4-k0_gk0;vec4 k5_gk5=dotval6_grad6-dotval4_grad4-k1_gk1;vec4 k6_gk6=(dotval7_grad7-dotval6_grad6)-(dotval5_grad5-dotval4_grad4)-k3_gk3;vec3 blend=Interpolation_C2(Pf);vec3 blendDeriv=Interpolation_C2_Deriv(Pf);float u=blend.x;float v=blend.y;float w=blend.z;vec4 result=dotval0_grad0+u*(k0_gk0+v*k3_gk3)+v*(k1_gk1+w*k5_gk5)+w*(k2_gk2+u*(k4_gk4+v*k6_gk6));result.y+=dot(vec4(k0_gk0.x,k3_gk3.x*v,vec2(k4_gk4.x,k6_gk6.x*v)*w),vec4(blendDeriv.x));result.z+=dot(vec4(k1_gk1.x,k3_gk3.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*w),vec4(blendDeriv.y));result.w+=dot(vec4(k2_gk2.x,k4_gk4.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*v),vec4(blendDeriv.z));result*=1.1547005383792515290182975610039;return result;}vec3 PerlinSurflet2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 grad_results=grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww;vec4 m=Pf_Pfmin1*Pf_Pfmin1;m=m.xzxz+m.yyww;m=max(1.0-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,Pf_Pfmin1.xzxz)+dot(m3,grad_x);float yderiv=dot(temp,Pf_Pfmin1.yyww)+dot(m3,grad_y);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec3(dot(m3,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 PerlinSurflet3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 grad_results_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 grad_results_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec3 Pf_sq=Pf*Pf;vec3 Pf_min1_sq=Pf_min1*Pf_min1;vec4 vecs_len_sq=vec2(Pf_sq.x,Pf_min1_sq.x).xyxy+vec2(Pf_sq.y,Pf_min1_sq.y).xxyy;vec4 m_0=vecs_len_sq+Pf_sq.zzzz;m_0=max(1.0-m_0,0.0);vec4 m2_0=m_0*m_0;vec4 m3_0=m_0*m2_0;vec4 m_1=vecs_len_sq+Pf_min1_sq.zzzz;m_1=max(1.0-m_1,0.0);vec4 m2_1=m_1*m_1;vec4 m3_1=m_1*m2_1;vec4 temp_0=-6.0*m2_0*grad_results_0;float xderiv_0=dot(temp_0,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_0,grad_x0);float yderiv_0=dot(temp_0,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_0,grad_y0);float zderiv_0=dot(temp_0,Pf.zzzz)+dot(m3_0,grad_z0);vec4 temp_1=-6.0*m2_1*grad_results_1;float xderiv_1=dot(temp_1,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_1,grad_x1);float yderiv_1=dot(temp_1,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_1,grad_y1);float zderiv_1=dot(temp_1,Pf_min1.zzzz)+dot(m3_1,grad_z1);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec4(dot(m3_0,grad_results_0)+dot(m3_1,grad_results_1),vec3(xderiv_0,yderiv_0,zderiv_0)+vec3(xderiv_1,yderiv_1,zderiv_1))*FINAL_NORMALIZATION;}vec3 Cellular2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;vec3 t1=d.x<d.y ? vec3(d.x,dx.x,dy.x): vec3(d.y,dx.y,dy.y);vec3 t2=d.z<d.w ? vec3(d.z,dx.z,dy.z): vec3(d.w,dx.w,dy.w);return(t1.x<t2.x ? t1 : t2)*vec3(1.0,2.0,2.0)*(1.0/1.125);}vec4 Cellular3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;vec4 r1=d1.x<d1.y ? vec4(d1.x,dx1.x,dy1.x,dz1.x): vec4(d1.y,dx1.y,dy1.y,dz1.y);vec4 r2=d1.z<d1.w ? vec4(d1.z,dx1.z,dy1.z,dz1.z): vec4(d1.w,dx1.w,dy1.w,dz1.w);vec4 r3=d2.x<d2.y ? vec4(d2.x,dx2.x,dy2.x,dz2.x): vec4(d2.y,dx2.y,dy2.y,dz2.y);vec4 r4=d2.z<d2.w ? vec4(d2.z,dx2.z,dy2.z,dz2.z): vec4(d2.w,dx2.w,dy2.w,dz2.w);vec4 t1=r1.x<r2.x ? r1 : r2;vec4 t2=r3.x<r4.x ? r3 : r4;return(t1.x<t2.x ? t1 : t2)*vec4(1.0,vec3(2.0))*(9.0/12.0);}vec3 SimplexPerlin2D_Deriv(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec3 grad_results=grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw);vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);vec3 m2=m*m;vec3 m4=m2*m2;vec3 temp=8.0*m2*m*grad_results;float xderiv=dot(temp,vec3(v0.x,v12.xz))-dot(m4,grad_x);float yderiv=dot(temp,vec3(v0.y,v12.yw))-dot(m4,grad_y);const float FINAL_NORMALIZATION=99.204334582718712976990005025589;return vec3(dot(m4,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 SimplexPerlin3D_Deriv(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 norm=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2);hash_0*=norm;hash_1*=norm;hash_2*=norm;vec4 grad_results=hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z;vec4 m=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;m=max(0.5-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,v1234_x)+dot(m3,hash_0);float yderiv=dot(temp,v1234_y)+dot(m3,hash_1);float zderiv=dot(temp,v1234_z)+dot(m3,hash_2);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return vec4(dot(m3,grad_results),xderiv,yderiv,zderiv)*FINAL_NORMALIZATION;}vec3 Hermite2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results_x=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);vec4 qh_results_y=QuinticHermite(Pf.x,hash_grady.xz,hash_grady.yw,hash_gradx.xz,hash_gradx.yw);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);return vec3(finalpos,deriv_x,deriv_y)*FINAL_NORM_VAL;}vec4 Hermite3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results_z,igrad_results_x_z,igrad_results_y_z;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results_z,igrad_results_x_z,igrad_results_y_z);vec4 ival_results_y,igrad_results_x_y,igrad_results_z_y;QuinticHermite(Pf.y,vec4(hash_gradx0.xy,hash_gradx1.xy),vec4(hash_gradx0.zw,hash_gradx1.zw),vec4(hash_gradz0.xy,hash_gradz1.xy),vec4(hash_gradz0.zw,hash_gradz1.zw),vec4(hash_grady0.xy,hash_grady1.xy),vec4(hash_grady0.zw,hash_grady1.zw),ival_results_y,igrad_results_x_y,igrad_results_z_y);vec4 qh_results_x=QuinticHermite(Pf.y,vec4(ival_results_z.xy,igrad_results_x_z.xy),vec4(ival_results_z.zw,igrad_results_x_z.zw),vec4(igrad_results_y_z.xy,0.0,0.0),vec4(igrad_results_y_z.zw,0.0,0.0));vec4 qh_results_y=QuinticHermite(Pf.x,vec4(ival_results_z.xz,igrad_results_y_z.xz),vec4(ival_results_z.yw,igrad_results_y_z.yw),vec4(igrad_results_x_z.xz,0.0,0.0),vec4(igrad_results_x_z.yw,0.0,0.0));vec4 qh_results_z=QuinticHermite(Pf.x,vec4(ival_results_y.xz,igrad_results_z_y.xz),vec4(ival_results_y.yw,igrad_results_z_y.yw),vec4(igrad_results_x_y.xz,0.0,0.0),vec4(igrad_results_x_y.yw,0.0,0.0));float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);float deriv_z=QuinticHermiteDeriv(Pf.z,qh_results_z.x,qh_results_z.y,qh_results_z.z,qh_results_z.w);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);return vec4(finalpos,deriv_x,deriv_y,deriv_z)*FINAL_NORM_VAL;}
#ifndef BLENDER_COMMON_HASH_GLSL
#define BLENDER_COMMON_HASH_GLSL
uint jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=jenkins_rot(c,4u);c+=b;b-=a;b ^=jenkins_rot(a,6u);a+=c;c-=b;c ^=jenkins_rot(b,8u);b+=a;a-=c;a ^=jenkins_rot(c,16u);c+=b;b-=a;b ^=jenkins_rot(a,19u);a+=c;c-=b;c ^=jenkins_rot(b,4u);b+=a;}void jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=jenkins_rot(b,14u);a ^=c;a-=jenkins_rot(c,11u);b ^=a;b-=jenkins_rot(a,25u);c ^=b;c-=jenkins_rot(b,16u);a ^=c;a-=jenkins_rot(c,4u);b ^=a;b-=jenkins_rot(a,14u);c ^=b;c-=jenkins_rot(b,24u);}uint hash_uint(uint kx){uint a,b,c;a=b=c=0xdeadbeefu+(1u<<2u)+13u;a+=kx;jenkins_final(a,b,c);return c;}uint hash_uint2(uint kx,uint ky){uint a,b,c;a=b=c=0xdeadbeefu+(2u<<2u)+13u;b+=ky;a+=kx;jenkins_final(a,b,c);return c;}uint hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;jenkins_final(a,b,c);return c;}uint hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;jenkins_mix(a,b,c);a+=kw;jenkins_final(a,b,c);return c;}uint hash_int(int kx){return hash_uint(uint(kx));}uint hash_int2(int kx,int ky){return hash_uint2(uint(kx),uint(ky));}uint hash_int3(int kx,int ky,int kz){return hash_uint3(uint(kx),uint(ky),uint(kz));}uint hash_int4(int kx,int ky,int kz,int kw){return hash_uint4(uint(kx),uint(ky),uint(kz),uint(kw));}int ihash_int(int kx){return int(hash_uint(uint(kx)));}int ihash_int2(int kx,int ky){return int(hash_uint2(uint(kx),uint(ky)));}int ihash_int3(int kx,int ky,int kz){return int(hash_uint3(uint(kx),uint(ky),uint(kz)));}int ihash_int4(int kx,int ky,int kz,int kw){return int(hash_uint4(uint(kx),uint(ky),uint(kz),uint(kw)));}ivec2 hash_pcg2d_i(ivec2 v){v=v*1664525+1013904223;v.x+=v.y*1664525;v.y+=v.x*1664525;v=v ^(v>>16);v.x+=v.y*1664525;v.y+=v.x*1664525;return v;}ivec3 hash_pcg3d_i(ivec3 v){v=v*1664525+1013904223;v.x+=v.y*v.z;v.y+=v.z*v.x;v.z+=v.x*v.y;v=v ^(v>>16);v.x+=v.y*v.z;v.y+=v.z*v.x;v.z+=v.x*v.y;return v;}ivec4 hash_pcg4d_i(ivec4 v){v=v*1664525+1013904223;v.x+=v.y*v.w;v.y+=v.z*v.x;v.z+=v.x*v.y;v.w+=v.y*v.z;v=v ^(v>>16);v.x+=v.y*v.w;v.y+=v.z*v.x;v.z+=v.x*v.y;v.w+=v.y*v.z;return v;}float hash_uint_to_float(uint kx){return float(hash_uint(kx))/float(0xFFFFFFFFu);}float hash_uint2_to_float(uint kx,uint ky){return float(hash_uint2(kx,ky))/float(0xFFFFFFFFu);}float hash_uint3_to_float(uint kx,uint ky,uint kz){return float(hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float hash_float_to_float(float k){return hash_uint_to_float(floatBitsToUint(k));}float hash_vec2_to_float(vec2 k){return hash_uint2_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y));}float hash_vec3_to_float(vec3 k){return hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}float hash_vec4_to_float(vec4 k){return hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec2 hash_vec2_to_vec2(vec2 k){return vec2(hash_vec2_to_float(k),hash_vec3_to_float(vec3(k,1.0)));}vec3 hash_vec3_to_vec3(vec3 k){return vec3(hash_vec3_to_float(k),hash_vec4_to_float(vec4(k,1.0)),hash_vec4_to_float(vec4(k,2.0)));}vec4 hash_vec4_to_vec4(vec4 k){return vec4(hash_vec4_to_float(k.xyzw),hash_vec4_to_float(k.wxyz),hash_vec4_to_float(k.zwxy),hash_vec4_to_float(k.yzwx));}vec2 hash_int2_to_vec2(ivec2 k){ivec2 h=hash_pcg2d_i(k);return vec2(h&0x7fffffff)*(1.0/float(0x7fffffff));}vec3 hash_int3_to_vec3(ivec3 k){ivec3 h=hash_pcg3d_i(k);return vec3(h&0x7fffffff)*(1.0/float(0x7fffffff));}vec4 hash_int4_to_vec4(ivec4 k){ivec4 h=hash_pcg4d_i(k);return vec4(h&0x7fffffff)*(1.0/float(0x7fffffff));}vec3 hash_int2_to_vec3(ivec2 k){return hash_int3_to_vec3(ivec3(k.x,k.y,0));}vec3 hash_int4_to_vec3(ivec4 k){return hash_int4_to_vec4(k).xyz;}vec3 hash_float_to_vec3(float k){return vec3(hash_float_to_float(k),hash_vec2_to_float(vec2(k,1.0)),hash_vec2_to_float(vec2(k,2.0)));}vec3 hash_vec2_to_vec3(vec2 k){return vec3(hash_vec2_to_float(k),hash_vec3_to_float(vec3(k,1.0)),hash_vec3_to_float(vec3(k,2.0)));}vec3 hash_vec4_to_vec3(vec4 k){return vec3(hash_vec4_to_float(k.xyzw),hash_vec4_to_float(k.zxwy),hash_vec4_to_float(k.wzyx));}vec2 hash_float_to_vec2(float k){return vec2(hash_float_to_float(k),hash_vec2_to_float(vec2(k,1.0)));}vec2 hash_vec3_to_vec2(vec3 k){return vec2(hash_vec3_to_float(k.xyz),hash_vec3_to_float(k.zxy));}vec2 hash_vec4_to_vec2(vec4 k){return vec2(hash_vec4_to_float(k.xyzw),hash_vec4_to_float(k.zxwy));}float integer_noise(int n){uint nn;nn=(uint(n)+1013u)&0x7fffffffu;nn=(nn>>13u)^ nn;nn=(uint(nn*(nn*nn*60493u+19990303u))+1376312589u)&0x7fffffffu;return 0.5*(float(nn)/1073741824.0);}float wang_hash_noise(uint s){s=(s ^ 61u)^(s>>16u);s*=9u;s=s ^(s>>4u);s*=0x27d4eb2du;s=s ^(s>>15u);return fract(float(s)/4294967296.0);}
#endif
#ifndef BLENDER_COMMON_MATH_BASE_LIB_GLSL
#define BLENDER_COMMON_MATH_BASE_LIB_GLSL
#define M_PI 3.14159265358979323846
#define M_TAU 6.28318530717958647692
#define M_PI_2 1.57079632679489661923
#define M_PI_4 0.78539816339744830962
#define M_SQRT2 1.41421356237309504880
#define M_SQRT1_2 0.70710678118654752440
#define M_SQRT3 1.73205080756887729352
#define M_SQRT1_3 0.57735026918962576450
#define M_1_PI 0.318309886183790671538
#define M_E 2.7182818284590452354
#define M_LOG2E 1.4426950408889634074
#define M_LOG10E 0.43429448190325182765
#define M_LN2 0.69314718055994530942
#define M_LN10 2.30258509299404568402
float pow2f(float x){return x*x;}float pow3f(float x){return x*x*x;}float pow4f(float x){return pow2f(pow2f(x));}float pow5f(float x){return pow4f(x)*x;}float pow6f(float x){return pow2f(pow3f(x));}float pow7f(float x){return pow6f(x)*x;}float pow8f(float x){return pow2f(pow4f(x));}int square_i(int v){return v*v;}uint square_uint(uint v){return v*v;}float square(float v){return v*v;}vec2 square(vec2 v){return v*v;}vec3 square(vec3 v){return v*v;}vec4 square(vec4 v){return v*v;}int cube_i(int v){return v*v*v;}uint cube_uint(uint v){return v*v*v;}float cube_f(float v){return v*v*v;}float hypot(float x,float y){return sqrt(x*x+y*y);}float atan2_safe(float y,float x){return atan(y,x);}
#define atan2 atan2_safe
float safe_mod(float a,float b){return(b!=0.0)? mod(a,b): 0.0;}float compatible_mod(float a,float b){if(b!=0.0){int N=int(a/b);return a-float(N)*b;}return 0.0;}int ceil_to_multiple(int a,int b){return((a+b-1)/b)*b;}uint ceil_to_multiple(uint a,uint b){return((a+b-1u)/b)*b;}int divide_ceil(int a,int b){return(a+b-1)/b;}uint divide_ceil(uint a,uint b){return(a+b-1u)/b;}void min_max(float value,inout float min_v,inout float max_v){min_v=min(value,min_v);max_v=max(value,max_v);}float safe_divide(float a,float b){return(b!=0.0)?(a/b): 0.0;}float safe_rcp(float a){return(a!=0.0)?(1.0/a): 0.0;}float safe_sqrt(float a){return sqrt(max(0.0,a));}float safe_acos(float a){if(a<=-1.0)return M_PI;if(a>=1.0)return 0.0;return acos(a);}bool is_equal(float a,float b,float epsilon){return abs(a-b)<=epsilon;}float sin_from_cos(float c){return safe_sqrt(1.0-square(c));}float cos_from_sin(float s){return safe_sqrt(1.0-square(s));}float fallback_pow(float x,float y,float fallback){if(x<0.0||(x==0.0&&y<=0.0))return fallback;return pow(x,y);}float compatible_pow(float x,float y){if(y==0.0)return 1.0;if(x<0.0)return(mod(-y,2.0)==0.0)? pow(-x,y):-pow(-x,y);if(x==0.0)return 0.0;return pow(x,y);}float wrap(float a,float b,float c){float range=b-c;float s=(a!=b)? floor((a-c)/range): 1.0;return(range!=0.0)? a-range*s : c;}
#endif
#ifndef BLENDER_COMMON_MATH_VECTOR_LIB_GLSL
#define BLENDER_COMMON_MATH_VECTOR_LIB_GLSL
bool is_zero(vec2 v){return all(equal(v,vec2(0.0)));}bool is_zero(vec3 v){return all(equal(v,vec3(0.0)));}bool is_zero(vec4 v){return all(equal(v,vec4(0.0)));}bool is_any_zero(vec2 v){return any(equal(v,vec2(0.0)));}bool is_any_zero(vec3 v){return any(equal(v,vec3(0.0)));}bool is_any_zero(vec4 v){return any(equal(v,vec4(0.0)));}bool almost_equal_relative(vec2 a,vec2 b,float eps){return all(lessThanEqual(abs(a-b),eps*abs(a)));}bool almost_equal_relative(vec3 a,vec3 b,float eps){return all(lessThanEqual(abs(a-b),eps*abs(a)));}bool almost_equal_relative(vec4 a,vec4 b,float eps){return all(lessThanEqual(abs(a-b),eps*abs(a)));}vec2 safe_mod(vec2 a,vec2 b){return mix(vec2(0.0),mod(a,b),notEqual(b,vec2(0.0)));}vec3 safe_mod(vec3 a,vec3 b){return mix(vec3(0.0),mod(a,b),notEqual(b,vec3(0.0)));}vec4 safe_mod(vec4 a,vec4 b){return mix(vec4(0.0),mod(a,b),notEqual(b,vec4(0.0)));}vec2 safe_mod(vec2 a,float b){return b!=0.0 ? mod(a,vec2(b)): vec2(0.0);}vec3 safe_mod(vec3 a,float b){return b!=0.0 ? mod(a,vec3(b)): vec3(0.0);}vec4 safe_mod(vec4 a,float b){return b!=0.0 ? mod(a,vec4(b)): vec4(0.0);}vec2 compatible_mod(vec2 a,vec2 b){return vec2(compatible_mod(a.x,b.x),compatible_mod(a.y,b.y));}vec3 compatible_mod(vec3 a,vec3 b){return vec3(compatible_mod(a.x,b.x),compatible_mod(a.y,b.y),compatible_mod(a.z,b.z));}vec4 compatible_mod(vec4 a,vec4 b){return vec4(compatible_mod(a.x,b.x),compatible_mod(a.y,b.y),compatible_mod(a.z,b.z),compatible_mod(a.w,b.w));}vec2 compatible_mod(vec2 a,float b){return vec2(compatible_mod(a.x,b),compatible_mod(a.y,b));}vec3 compatible_mod(vec3 a,float b){return vec3(compatible_mod(a.x,b),compatible_mod(a.y,b),compatible_mod(a.z,b));}vec4 compatible_mod(vec4 a,float b){return vec4(compatible_mod(a.x,b),compatible_mod(a.y,b),compatible_mod(a.z,b),compatible_mod(a.w,b));}vec2 wrap(vec2 a,vec2 b,vec2 c){return vec2(wrap(a.x,b.x,c.x),wrap(a.y,b.y,c.y));}vec3 wrap(vec3 a,vec3 b,vec3 c){return vec3(wrap(a.x,b.x,c.x),wrap(a.y,b.y,c.y),wrap(a.z,b.z,c.z));}vec4 wrap(vec4 a,vec4 b,vec4 c){return vec4(wrap(a.x,b.x,c.x),wrap(a.y,b.y,c.y),wrap(a.z,b.z,c.z),wrap(a.w,b.w,c.w));}float length_manhattan(vec2 a){return abs(a.x)+abs(a.y);}float length_manhattan(vec3 a){return abs(a.x)+abs(a.y)+abs(a.z);}float length_manhattan(vec4 a){return abs(a.x)+abs(a.y)+abs(a.z)+abs(a.w);}float length_squared(vec2 a){return dot(a,a);}float length_squared(vec3 a){return dot(a,a);}float length_squared(vec4 a){return dot(a,a);}float distance_manhattan(vec2 a,vec2 b){return length_manhattan(a-b);}float distance_manhattan(vec3 a,vec3 b){return length_manhattan(a-b);}float distance_manhattan(vec4 a,vec4 b){return length_manhattan(a-b);}float distance_squared(vec2 a,vec2 b){return length_squared(a-b);}float distance_squared(vec3 a,vec3 b){return length_squared(a-b);}float distance_squared(vec4 a,vec4 b){return length_squared(a-b);}vec3 project(vec3 p,vec3 v_proj){float len2=dot(v_proj,v_proj);return len2>0.0 ? v_proj*(dot(p,v_proj)/len2): vec3(0.0);}vec2 safe_normalize(vec2 v){float l2=dot(v,v);return l2>1e-35 ? normalize(v): vec2(1.0,0.0);}vec3 safe_normalize(vec3 v){float l2=dot(v,v);return l2>1e-35 ? normalize(v): vec3(1.0,0.0,0.0);}vec4 safe_normalize(vec4 v){float l2=dot(v,v);return l2>1e-35 ? normalize(v): vec4(1.0,0.0,0.0,0.0);}vec2 safe_divide(vec2 a,vec2 b){return mix(vec2(0.0),a/b,notEqual(b,vec2(0.0)));}vec3 safe_divide(vec3 a,vec3 b){return mix(vec3(0.0),a/b,notEqual(b,vec3(0.0)));}vec4 safe_divide(vec4 a,vec4 b){return mix(vec4(0.0),a/b,notEqual(b,vec4(0.0)));}vec2 safe_divide(vec2 a,float b){return b!=0.0 ? a/b : vec2(0.0);}vec3 safe_divide(vec3 a,float b){return b!=0.0 ? a/b : vec3(0.0);}vec4 safe_divide(vec4 a,float b){return b!=0.0 ? a/b : vec4(0.0);}vec2 safe_rcp(vec2 a){return mix(vec2(0.0),1.0/a,notEqual(a,vec2(0.0)));}vec3 safe_rcp(vec3 a){return mix(vec3(0.0),1.0/a,notEqual(a,vec3(0.0)));}vec4 safe_rcp(vec4 a){return mix(vec4(0.0),1.0/a,notEqual(a,vec4(0.0)));}float reduce_add(vec2 a){return a.x+a.y;}float reduce_add(vec3 a){return a.x+a.y+a.z;}float reduce_add(vec4 a){return a.x+a.y+a.z+a.w;}float reduce_mul(vec2 a){return a.x*a.y;}float reduce_mul(vec3 a){return a.x*a.y*a.z;}float reduce_mul(vec4 a){return a.x*a.y*a.z*a.w;}float reduce_max(vec2 a){return max(a.x,a.y);}float reduce_max(vec3 a){return max(max(a.x,a.y),a.z);}float reduce_max(vec4 a){return max(max(a.x,a.y),max(a.z,a.w));}float reduce_min(vec2 a){return min(a.x,a.y);}float reduce_min(vec3 a){return min(min(a.x,a.y),a.z);}float reduce_min(vec4 a){return min(min(a.x,a.y),min(a.z,a.w));}float average(vec2 a){return reduce_add(a)/2.0;}float average(vec3 a){return reduce_add(a)/3.0;}float average(vec4 a){return reduce_add(a)/4.0;}bool is_equal(vec2 a,vec2 b,float eps){return all(lessThanEqual(abs(a-b),vec2(eps)));}bool is_equal(vec3 a,vec3 b,float eps){return all(lessThanEqual(abs(a-b),vec3(eps)));}bool is_equal(vec4 a,vec4 b,float eps){return all(lessThanEqual(abs(a-b),vec4(eps)));}
#endif
void floor_frac(float x,out int x_int,out float x_fract){float x_floor=floor(x);x_int=int(x_floor);x_fract=x-x_floor;}/*Bilinear Interpolation:**v2 v3*@++++@       y*++^*++|*++|*@++++@       @------>x*v0 v1*/float bi_mix(float v0,float v1,float v2,float v3,float x,float y){float x1=1.0-x;return(1.0-y)*(v0*x1+v1*x)+y*(v2*x1+v3*x);}/*Trilinear Interpolation:**v6               v7*@++++++@*+\\+*+\\+*+\\+*+\\ v4+\\ v5*+@+++++++@          z*++++y   ^*v2 @+++++++@ v3+\\|*\\+\\+\\|*\\+\\+\\|*\\+\\++--------->x*\\+\\+*@++++++@*v0               v1*/float tri_mix(float v0,float v1,float v2,float v3,float v4,float v5,float v6,float v7,float x,float y,float z){float x1=1.0-x;float y1=1.0-y;float z1=1.0-z;return z1*(y1*(v0*x1+v1*x)+y*(v2*x1+v3*x))+z*(y1*(v4*x1+v5*x)+y*(v6*x1+v7*x));}float quad_mix(float v0,float v1,float v2,float v3,float v4,float v5,float v6,float v7,float v8,float v9,float v10,float v11,float v12,float v13,float v14,float v15,float x,float y,float z,float w){return mix(tri_mix(v0,v1,v2,v3,v4,v5,v6,v7,x,y,z),tri_mix(v8,v9,v10,v11,v12,v13,v14,v15,x,y,z),w);}float fade(float t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float negate_if(float value,float condition){return value*(1.0-2.0*step(0.5,abs(condition)));}float noise_grad1(int hash,float x);float noise_grad2(int hash,float x,float y);float noise_grad3(int hash,float x,float y,float z);float noise_grad4(int hash,float x,float y,float z,float w);float noise_grad1(int hash,float x){int h=hash&15;float g=1.0+float(h&7);return negate_if(g,float(h&8))*x;}float noise_grad2(int hash,float x,float y){int h=hash&7;float u=float(h)<4.0 ? x : y;float v=2.0*(float(h)<4.0 ? y : x);return negate_if(u,float(h&1))+negate_if(v,float(h&2));}float noise_grad3(int hash,float x,float y,float z){int h=hash&15;float u=float(h)<8.0 ? x : y;float vt=((float(h)==12.0)||(float(h)==14.0))? x : z;float v=float(h)<4.0 ? y : vt;return negate_if(u,float(h&1))+negate_if(v,float(h&2));}float noise_grad4(int hash,float x,float y,float z,float w){int h=hash&31;float u=float(h)<24.0 ? x : y;float v=float(h)<16.0 ? y : z;float s=float(h)<8.0 ? z : w;return negate_if(u,float(h&1))+negate_if(v,float(h&2))+negate_if(s,float(h&4));}float noise_perlin(float x){int X;float fx;floor_frac(x,X,fx);float u=fade(fx);float r=mix(noise_grad1(ihash_int(X),fx),noise_grad1(ihash_int(X+1),fx-1.0),u);return r;}float noise_perlin(vec2 vec){int X,Y;float fx,fy;floor_frac(vec.x,X,fx);floor_frac(vec.y,Y,fy);float u=fade(fx);float v=fade(fy);float r=bi_mix(noise_grad2(ihash_int2(X,Y),fx,fy),noise_grad2(ihash_int2(X+1,Y),fx-1.0,fy),noise_grad2(ihash_int2(X,Y+1),fx,fy-1.0),noise_grad2(ihash_int2(X+1,Y+1),fx-1.0,fy-1.0),u,v);return r;}float noise_perlin(vec3 vec){int X,Y,Z;float fx,fy,fz;floor_frac(vec.x,X,fx);floor_frac(vec.y,Y,fy);floor_frac(vec.z,Z,fz);float u=fade(fx);float v=fade(fy);float w=fade(fz);float r=tri_mix(noise_grad3(ihash_int3(X,Y,Z),fx,fy,fz),noise_grad3(ihash_int3(X+1,Y,Z),fx-1.0,fy,fz),noise_grad3(ihash_int3(X,Y+1,Z),fx,fy-1.0,fz),noise_grad3(ihash_int3(X+1,Y+1,Z),fx-1.0,fy-1.0,fz),noise_grad3(ihash_int3(X,Y,Z+1),fx,fy,fz-1.0),noise_grad3(ihash_int3(X+1,Y,Z+1),fx-1.0,fy,fz-1.0),noise_grad3(ihash_int3(X,Y+1,Z+1),fx,fy-1.0,fz-1.0),noise_grad3(ihash_int3(X+1,Y+1,Z+1),fx-1.0,fy-1.0,fz-1.0),u,v,w);return r;}float noise_perlin(vec4 vec){int X,Y,Z,W;float fx,fy,fz,fw;floor_frac(vec.x,X,fx);floor_frac(vec.y,Y,fy);floor_frac(vec.z,Z,fz);floor_frac(vec.w,W,fw);float u=fade(fx);float v=fade(fy);float t=fade(fz);float s=fade(fw);float r=quad_mix(noise_grad4(ihash_int4(X,Y,Z,W),fx,fy,fz,fw),noise_grad4(ihash_int4(X+1,Y,Z,W),fx-1.0,fy,fz,fw),noise_grad4(ihash_int4(X,Y+1,Z,W),fx,fy-1.0,fz,fw),noise_grad4(ihash_int4(X+1,Y+1,Z,W),fx-1.0,fy-1.0,fz,fw),noise_grad4(ihash_int4(X,Y,Z+1,W),fx,fy,fz-1.0,fw),noise_grad4(ihash_int4(X+1,Y,Z+1,W),fx-1.0,fy,fz-1.0,fw),noise_grad4(ihash_int4(X,Y+1,Z+1,W),fx,fy-1.0,fz-1.0,fw),noise_grad4(ihash_int4(X+1,Y+1,Z+1,W),fx-1.0,fy-1.0,fz-1.0,fw),noise_grad4(ihash_int4(X,Y,Z,W+1),fx,fy,fz,fw-1.0),noise_grad4(ihash_int4(X+1,Y,Z,W+1),fx-1.0,fy,fz,fw-1.0),noise_grad4(ihash_int4(X,Y+1,Z,W+1),fx,fy-1.0,fz,fw-1.0),noise_grad4(ihash_int4(X+1,Y+1,Z,W+1),fx-1.0,fy-1.0,fz,fw-1.0),noise_grad4(ihash_int4(X,Y,Z+1,W+1),fx,fy,fz-1.0,fw-1.0),noise_grad4(ihash_int4(X+1,Y,Z+1,W+1),fx-1.0,fy,fz-1.0,fw-1.0),noise_grad4(ihash_int4(X,Y+1,Z+1,W+1),fx,fy-1.0,fz-1.0,fw-1.0),noise_grad4(ihash_int4(X+1,Y+1,Z+1,W+1),fx-1.0,fy-1.0,fz-1.0,fw-1.0),u,v,t,s);return r;}float noise_scale1(float result){return 0.2500*result;}float noise_scale2(float result){return 0.6616*result;}float noise_scale3(float result){return 0.9820*result;}float noise_scale4(float result){return 0.8344*result;}float snoise(float p){float precision_correction=0.5*float(abs(p)>=1000000.0);p=mod(p,100000.0)+precision_correction;return noise_scale1(noise_perlin(p));}float noise(float p){return 0.5*snoise(p)+0.5;}float snoise(vec2 p){vec2 precision_correction=0.5*vec2(float(abs(p.x)>=1000000.0),float(abs(p.y)>=1000000.0));p=mod(p,100000.0)+precision_correction;return noise_scale2(noise_perlin(p));}float noise(vec2 p){return 0.5*snoise(p)+0.5;}float snoise(vec3 p){vec3 precision_correction=0.5*vec3(float(abs(p.x)>=1000000.0),float(abs(p.y)>=1000000.0),float(abs(p.z)>=1000000.0));p=mod(p,100000.0)+precision_correction;return noise_scale3(noise_perlin(p));}float noise(vec3 p){return 0.5*snoise(p)+0.5;}float snoise(vec4 p){vec4 precision_correction=0.5*vec4(float(abs(p.x)>=1000000.0),float(abs(p.y)>=1000000.0),float(abs(p.z)>=1000000.0),float(abs(p.w)>=1000000.0));p=mod(p,100000.0)+precision_correction;return noise_scale4(noise_perlin(p));}float noise(vec4 p){return 0.5*snoise(p)+0.5;}float noise_fbm_1d(float co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){float p=co;float fscale=1.0;float amp=1.0;float maxamp=0.0;float sum=0.0;for(int i=0;i<=int(detail);i++){float t=snoise(fscale*p);sum+=t*amp;maxamp+=amp;amp*=roughness;fscale*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float t=snoise(fscale*p);float sum2=sum+t*amp;return normalize ?mix(0.5*sum/maxamp+0.5,0.5*sum2/(maxamp+amp)+0.5,rmd):mix(sum,sum2,rmd);}else{return normalize ? 0.5*sum/maxamp+0.5 : sum;}}float noise_fbm_2d(vec2 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec2 p=co;float fscale=1.0;float amp=1.0;float maxamp=0.0;float sum=0.0;for(int i=0;i<=int(detail);i++){float t=snoise(fscale*p);sum+=t*amp;maxamp+=amp;amp*=roughness;fscale*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float t=snoise(fscale*p);float sum2=sum+t*amp;return normalize ?mix(0.5*sum/maxamp+0.5,0.5*sum2/(maxamp+amp)+0.5,rmd):mix(sum,sum2,rmd);}else{return normalize ? 0.5*sum/maxamp+0.5 : sum;}}float noise_fbm_3d(vec3 co,float scale,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec3 p=co;float fscale=scale;float amp=1.0;float maxamp=0.0;float sum=0.0;for(int i=0;i<=int(detail);i++){float t=snoise(fscale*p);sum+=t*amp;maxamp+=amp;amp*=roughness;fscale*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float t=snoise(fscale*p);float sum2=sum+t*amp;return normalize ?mix(0.5*sum/maxamp+0.5,0.5*sum2/(maxamp+amp)+0.5,rmd):mix(sum,sum2,rmd);}else{return normalize ? 0.5*sum/maxamp+0.5 : sum;}}float noise_fbm_4d(vec4 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec4 p=co;float fscale=1.0;float amp=1.0;float maxamp=0.0;float sum=0.0;for(int i=0;i<=int(detail);i++){float t=snoise(fscale*p);sum+=t*amp;maxamp+=amp;amp*=roughness;fscale*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float t=snoise(fscale*p);float sum2=sum+t*amp;return normalize ?mix(0.5*sum/maxamp+0.5,0.5*sum2/(maxamp+amp)+0.5,rmd):mix(sum,sum2,rmd);}else{return normalize ? 0.5*sum/maxamp+0.5 : sum;}}float noise_multi_fractal_1d(float co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){float p=co;float value=1.0;float pwr=1.0;for(int i=0;i<=int(detail);i++){value*=(pwr*snoise(p)+1.0);pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){value*=(rmd*pwr*snoise(p)+1.0);}return value;}float noise_multi_fractal_2d(vec2 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec2 p=co;float value=1.0;float pwr=1.0;for(int i=0;i<=int(detail);i++){value*=(pwr*snoise(p)+1.0);pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){value*=(rmd*pwr*snoise(p)+1.0);}return value;}float noise_multi_fractal_3d(vec3 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec3 p=co;float value=1.0;float pwr=1.0;for(int i=0;i<=int(detail);i++){value*=(pwr*snoise(p)+1.0);pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){value*=(rmd*pwr*snoise(p)+1.0);}return value;}float noise_multi_fractal_4d(vec4 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec4 p=co;float value=1.0;float pwr=1.0;for(int i=0;i<=int(detail);i++){value*=(pwr*snoise(p)+1.0);pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){value*=(rmd*pwr*snoise(p)+1.0);}return value;}float noise_hetero_terrain_1d(float co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){float p=co;float pwr=roughness;float value=offset+snoise(p);p*=lacunarity;for(int i=1;i<=int(detail);i++){float increment=(snoise(p)+offset)*pwr*value;value+=increment;pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float increment=(snoise(p)+offset)*pwr*value;value+=rmd*increment;}return value;}float noise_hetero_terrain_2d(vec2 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec2 p=co;float pwr=roughness;float value=offset+snoise(p);p*=lacunarity;for(int i=1;i<=int(detail);i++){float increment=(snoise(p)+offset)*pwr*value;value+=increment;pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float increment=(snoise(p)+offset)*pwr*value;value+=rmd*increment;}return value;}float noise_hetero_terrain_3d(vec3 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec3 p=co;float pwr=roughness;float value=offset+snoise(p);p*=lacunarity;for(int i=1;i<=int(detail);i++){float increment=(snoise(p)+offset)*pwr*value;value+=increment;pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float increment=(snoise(p)+offset)*pwr*value;value+=rmd*increment;}return value;}float noise_hetero_terrain_4d(vec4 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec4 p=co;float pwr=roughness;float value=offset+snoise(p);p*=lacunarity;for(int i=1;i<=int(detail);i++){float increment=(snoise(p)+offset)*pwr*value;value+=increment;pwr*=roughness;p*=lacunarity;}float rmd=detail-floor(detail);if(rmd!=0.0){float increment=(snoise(p)+offset)*pwr*value;value+=rmd*increment;}return value;}float noise_hybrid_multi_fractal_1d(float co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){float p=co;float pwr=1.0;float value=0.0;float weight=1.0;for(int i=0;(weight>0.001)&&(i<=int(detail));i++){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;pwr*=roughness;value+=weight*signal;weight*=gain*signal;p*=lacunarity;}float rmd=detail-floor(detail);if((rmd!=0.0)&&(weight>0.001)){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;value+=rmd*weight*signal;}return value;}float noise_hybrid_multi_fractal_2d(vec2 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec2 p=co;float pwr=1.0;float value=0.0;float weight=1.0;for(int i=0;(weight>0.001)&&(i<=int(detail));i++){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;pwr*=roughness;value+=weight*signal;weight*=gain*signal;p*=lacunarity;}float rmd=detail-floor(detail);if((rmd!=0.0)&&(weight>0.001)){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;value+=rmd*weight*signal;}return value;}float noise_hybrid_multi_fractal_3d(vec3 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec3 p=co;float pwr=1.0;float value=0.0;float weight=1.0;for(int i=0;(weight>0.001)&&(i<=int(detail));i++){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;pwr*=roughness;value+=weight*signal;weight*=gain*signal;p*=lacunarity;}float rmd=detail-floor(detail);if((rmd!=0.0)&&(weight>0.001)){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;value+=rmd*weight*signal;}return value;}float noise_hybrid_multi_fractal_4d(vec4 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec4 p=co;float pwr=1.0;float value=0.0;float weight=1.0;for(int i=0;(weight>0.001)&&(i<=int(detail));i++){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;pwr*=roughness;value+=weight*signal;weight*=gain*signal;p*=lacunarity;}float rmd=detail-floor(detail);if((rmd!=0.0)&&(weight>0.001)){if(weight>1.0){weight=1.0;}float signal=(snoise(p)+offset)*pwr;value+=rmd*weight*signal;}return value;}float noise_ridged_multi_fractal_1d(float co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){float p=co;float pwr=roughness;float signal=offset-abs(snoise(p));signal*=signal;float value=signal;float weight=1.0;for(int i=1;i<=int(detail);i++){p*=lacunarity;weight=clamp(signal*gain,0.0,1.0);signal=offset-abs(snoise(p));signal*=signal;signal*=weight;value+=signal*pwr;pwr*=roughness;}return value;}float noise_ridged_multi_fractal_2d(vec2 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec2 p=co;float pwr=roughness;float signal=offset-abs(snoise(p));signal*=signal;float value=signal;float weight=1.0;for(int i=1;i<=int(detail);i++){p*=lacunarity;weight=clamp(signal*gain,0.0,1.0);signal=offset-abs(snoise(p));signal*=signal;signal*=weight;value+=signal*pwr;pwr*=roughness;}return value;}float noise_ridged_multi_fractal_3d(vec3 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec3 p=co;float pwr=roughness;float signal=offset-abs(snoise(p));signal*=signal;float value=signal;float weight=1.0;for(int i=1;i<=int(detail);i++){p*=lacunarity;weight=clamp(signal*gain,0.0,1.0);signal=offset-abs(snoise(p));signal*=signal;signal*=weight;value+=signal*pwr;pwr*=roughness;}return value;}float noise_ridged_multi_fractal_4d(vec4 co,float detail,float roughness,float lacunarity,float offset,float gain,bool normalize){vec4 p=co;float pwr=roughness;float signal=offset-abs(snoise(p));signal*=signal;float value=signal;float weight=1.0;for(int i=1;i<=int(detail);i++){p*=lacunarity;weight=clamp(signal*gain,0.0,1.0);signal=offset-abs(snoise(p));signal*=signal;signal*=weight;value+=signal*pwr;pwr*=roughness;}return value;}float BubblesNoise_fade(float t){return t*t*t*(t*(t*6.0-15.0)+10.0);}uint BubblesNoise_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void BubblesNoise_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=BubblesNoise_jenkins_rot(b,14u);a ^=c;a-=BubblesNoise_jenkins_rot(c,11u);b ^=a;b-=BubblesNoise_jenkins_rot(a,25u);c ^=b;c-=BubblesNoise_jenkins_rot(b,16u);a ^=c;a-=BubblesNoise_jenkins_rot(c,4u);b ^=a;b-=BubblesNoise_jenkins_rot(a,14u);c ^=b;c-=BubblesNoise_jenkins_rot(b,24u);}uint BubblesNoise_hash_uint(uint kx){uint a,b,c;a=b=c=0xdeadbeefu+(1u<<2u)+13u;a+=kx;BubblesNoise_jenkins_final(a,b,c);return c;}int BubblesNoise_ihash_int(int kx){return int(BubblesNoise_hash_uint(uint(kx)));}float BubblesNoise_negateIf(float value,float condition){return value*(1.0-2.0*step(0.5,abs(condition)));}float BubblesNoise_noiseGrad1(int hash,float x){int h=hash&15;float g=1.0+float(h&7);return BubblesNoise_negateIf(g,float(h&8))*x;}void BubblesNoise_floor_frac(float x,out int x_int,out float x_fract){float x_floor=floor(x);x_int=int(x_floor);x_fract=x-x_floor;}float BubblesNoise_noise_grad3(int hash,float x,float y,float z){int h=hash&15;float u=mix(y,x,step(float(h),7.5));float vt=mix(z,x,step(11.5,float(h))*step(float(h),14.5));float v=mix(vt,y,step(float(h),3.5));return BubblesNoise_negateIf(u,float(h&1))+BubblesNoise_negateIf(v,float(h&2));}uint BubblesNoise_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;BubblesNoise_jenkins_final(a,b,c);return c;}int BubblesNoise_ihash_int3(int kx,int ky,int kz){return int(BubblesNoise_hash_uint3(uint(kx),uint(ky),uint(kz)));}float BubblesNoise_tri_mix(float v0,float v1,float v2,float v3,float v4,float v5,float v6,float v7,float x,float y,float z){float x1=1.0-x;float y1=1.0-y;float z1=1.0-z;return z1*(y1*(v0*x1+v1*x)+y*(v2*x1+v3*x))+z*(y1*(v4*x1+v5*x)+y*(v6*x1+v7*x));}float BubblesNoise_noise_perlin(vec3 vec){int X,Y,Z;float fx,fy,fz;BubblesNoise_floor_frac(vec.x,X,fx);BubblesNoise_floor_frac(vec.y,Y,fy);BubblesNoise_floor_frac(vec.z,Z,fz);float u=BubblesNoise_fade(fx);float v=BubblesNoise_fade(fy);float w=BubblesNoise_fade(fz);float r=BubblesNoise_tri_mix(BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y,Z),fx,fy,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y,Z),fx-1.0,fy,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y+1,Z),fx,fy-1.0,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y+1,Z),fx-1.0,fy-1.0,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y,Z+1),fx,fy,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y,Z+1),fx-1.0,fy,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y+1,Z+1),fx,fy-1.0,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y+1,Z+1),fx-1.0,fy-1.0,fz-1.0),u,v,w);return r;}float BubblesNoise_snoise(vec3 p){vec3 precision_correction=0.5*vec3(float(abs(p.x)>=1000000.0),float(abs(p.y)>=1000000.0),float(abs(p.z)>=1000000.0));p=mod(p,100000.0)+precision_correction;return BubblesNoise_noise_perlin(p)*0.9820;}/***Optimized FBM tailored to waterfall various effects(most important one being bubbles at the top)*/float BubblesNoise(vec2 uv,float time){vec3 position=vec3(uv.x*20.0+time*1.0,uv.y*20.0-time*1.0,0.0+time*1.0);return 0.5*BubblesNoise_snoise(position)+0.5;}float FoamNoise(vec2 uv,float time){vec3 position=vec3(uv.x*40.0,uv.y*3.0,0.0+time*1.15)*2.5;return 0.5*BubblesNoise_snoise(position)+0.5;}float VerticalStripesNoise(vec3 position,vec2 uv,float time){position=vec3(uv.x*2.6,position.y*0.7+time*0.2,position.z+time*0.05)*12.0;return 0.5*BubblesNoise_snoise(position)+0.5;}float BaseVoronoi(vec2 uv,float time){vec3 position=vec3(uv.x*2.0,uv.y*1.25+0.399-time*0.175,uv.y*0.25);vec3 pos=position*12.0;vec3 cell=floor(pos);float minDist=8.0;for(int i=-1;i<=1;i++){for(int j=-1;j<=1;j++){for(int k=-1;k<=1;k++){vec3 neighbor=cell+vec3(float(i),float(j),float(k));vec3 hashInput=vec3(dot(neighbor,vec3(127.1,311.7,74.7)),dot(neighbor,vec3(269.5,183.3,246.1)),dot(neighbor,vec3(113.5,271.9,124.6)));vec3 r=-1.0+2.0*fract(sin(hashInput)*43758.5453123);vec3 point=neighbor+0.5+0.5*1.5*r;float dist=length(pos-point);minDist=min(minDist,dist);}}}return minDist;}uint BubblesVoronoi_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void BubblesVoronoi_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=BubblesVoronoi_jenkins_rot(b,14u);a ^=c;a-=BubblesVoronoi_jenkins_rot(c,11u);b ^=a;b-=BubblesVoronoi_jenkins_rot(a,25u);c ^=b;c-=BubblesVoronoi_jenkins_rot(b,16u);a ^=c;a-=BubblesVoronoi_jenkins_rot(c,4u);b ^=a;b-=BubblesVoronoi_jenkins_rot(a,14u);c ^=b;c-=BubblesVoronoi_jenkins_rot(b,24u);}uint BubblesVoronoi_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;BubblesVoronoi_jenkins_final(a,b,c);return c;}float BubblesVoronoi_hash_uint3_to_float(uint kx,uint ky,uint kz){return float(BubblesVoronoi_hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float BubblesVoronoi_hash_vec3_to_float(vec3 k){return BubblesVoronoi_hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}void BubblesVoronoi_jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=BubblesVoronoi_jenkins_rot(c,4u);c+=b;b-=a;b ^=BubblesVoronoi_jenkins_rot(a,6u);a+=c;c-=b;c ^=BubblesVoronoi_jenkins_rot(b,8u);b+=a;a-=c;a ^=BubblesVoronoi_jenkins_rot(c,16u);c+=b;b-=a;b ^=BubblesVoronoi_jenkins_rot(a,19u);a+=c;c-=b;c ^=BubblesVoronoi_jenkins_rot(b,4u);b+=a;}uint BubblesVoronoi_hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;BubblesVoronoi_jenkins_mix(a,b,c);a+=kw;BubblesVoronoi_jenkins_final(a,b,c);return c;}float BubblesVoronoi_hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(BubblesVoronoi_hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float BubblesVoronoi_hash_vec4_to_float(vec4 k){return BubblesVoronoi_hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec3 BubblesVoronoi_hash_vec3_to_vec3(vec3 k){return vec3(BubblesVoronoi_hash_vec3_to_float(k),BubblesVoronoi_hash_vec4_to_float(vec4(k,1.0)),BubblesVoronoi_hash_vec4_to_float(vec4(k,2.0)));}float BubblesVoronoi_octave(vec3 coord,float randomness){vec3 cellPosition_f=floor(coord);vec3 localPosition=coord-cellPosition_f;float minDistance=1e10;vec3 targetOffset=vec3(0.0);vec3 targetPosition=vec3(0.0);for(int k=-1;k<=1;k++){for(int j=-1;j<=1;j++){for(int i=-1;i<=1;i++){vec3 cellOffset=vec3(float(i),float(j),float(k));vec3 pointPosition=cellOffset+BubblesVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset)*randomness;float distanceToPoint=distance(pointPosition,localPosition);float mask=float(distanceToPoint<minDistance);targetOffset=mix(targetOffset,cellOffset,mask);minDistance=min(minDistance,distanceToPoint);targetPosition=mix(targetPosition,pointPosition,mask);}}}return minDistance;}float BubblesVoronoi(vec2 uv,float time){vec3 coord=vec3(uv.x*6.0,uv.y*12.0,5.0+time);float randomness=1.0;return BubblesVoronoi_octave(coord,randomness);}float FoamVoronoi(vec3 coord){coord*=40.0;float randomness=1.0;return BubblesVoronoi_octave(coord,randomness);}uint SmoothFoamVoronoi_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void SmoothFoamVoronoi_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,14u);a ^=c;a-=SmoothFoamVoronoi_jenkins_rot(c,11u);b ^=a;b-=SmoothFoamVoronoi_jenkins_rot(a,25u);c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,16u);a ^=c;a-=SmoothFoamVoronoi_jenkins_rot(c,4u);b ^=a;b-=SmoothFoamVoronoi_jenkins_rot(a,14u);c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,24u);}uint SmoothFoamVoronoi_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;SmoothFoamVoronoi_jenkins_final(a,b,c);return c;}float SmoothFoamVoronoi_hash_uint3_to_float(uint kx,uint ky,uint kz){return float(SmoothFoamVoronoi_hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float SmoothFoamVoronoi_hash_vec3_to_float(vec3 k){return SmoothFoamVoronoi_hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}void SmoothFoamVoronoi_jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=SmoothFoamVoronoi_jenkins_rot(c,4u);c+=b;b-=a;b ^=SmoothFoamVoronoi_jenkins_rot(a,6u);a+=c;c-=b;c ^=SmoothFoamVoronoi_jenkins_rot(b,8u);b+=a;a-=c;a ^=SmoothFoamVoronoi_jenkins_rot(c,16u);c+=b;b-=a;b ^=SmoothFoamVoronoi_jenkins_rot(a,19u);a+=c;c-=b;c ^=SmoothFoamVoronoi_jenkins_rot(b,4u);b+=a;}uint SmoothFoamVoronoi_hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;SmoothFoamVoronoi_jenkins_mix(a,b,c);a+=kw;SmoothFoamVoronoi_jenkins_final(a,b,c);return c;}float SmoothFoamVoronoi_hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(SmoothFoamVoronoi_hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float SmoothFoamVoronoi_hash_vec4_to_float(vec4 k){return SmoothFoamVoronoi_hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec3 SmoothFoamVoronoi_hash_vec3_to_vec3(vec3 k){return vec3(SmoothFoamVoronoi_hash_vec3_to_float(k),SmoothFoamVoronoi_hash_vec4_to_float(vec4(k,1.0)),SmoothFoamVoronoi_hash_vec4_to_float(vec4(k,2.0)));}float SmoothFoamVoronoi_voronoi_smooth_f1_3d_full(vec3 coord,float smoothness,float randomness){vec3 cellPosition_f=floor(coord);vec3 localPosition=coord-cellPosition_f;float smoothDistance=0.0;float h=-1.0;vec3 targetOffset=vec3(0.0);float weightSum=0.0;vec3 weightedColor=vec3(0.0);for(int k=-2;k<=2;k++){for(int j=-2;j<=2;j++){for(int i=-2;i<=2;i++){vec3 cellOffset=vec3(float(i),float(j),float(k));vec3 pointPosition=cellOffset+SmoothFoamVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset)*randomness;float distanceToPoint=distance(pointPosition,localPosition);float mask=float(h==-1.0);h=mix(smoothstep(0.0,1.0,0.5+0.5*(smoothDistance-distanceToPoint)/smoothness),1.0,mask);float correctionFactor=smoothness*h*(1.0-h);smoothDistance=mix(smoothDistance,distanceToPoint,h)-correctionFactor;float weight=1.0-smoothstep(0.0,smoothness,distanceToPoint);vec3 cellColor=SmoothFoamVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset);weightedColor+=cellColor*weight;weightSum+=weight;}}}return smoothDistance;}float SmoothFoamVoronoi(vec3 coord){float amplitude=1.0;float max_amplitude=0.0;float scale=40.0;float randomness=1.0;float smoothness=1.0;float output_distance=0.0;vec3 output_color=vec3(0.0);vec4 output_position=vec4(0.0);return SmoothFoamVoronoi_voronoi_smooth_f1_3d_full(coord*scale,smoothness,randomness);}
#include <fog_pars_vertex>
uniform float uTime;varying vec2 vUv;varying vec3 vPosition;varying vec3 vWorldPosition;varying float vVerticalStripesNoise;varying float vBaseVoronoi;varying float vBubblesNoise;varying float vBubblesVoronoi;varying float vFoamNoise;varying float vFoamVoronoi;varying float vSmoothFoamVoronoi;void main(){vec3 newPosition=position;vVerticalStripesNoise=VerticalStripesNoise(position,uv,uTime);vBaseVoronoi=BaseVoronoi(uv,uTime);vBubblesNoise=BubblesNoise(uv,uTime);vBubblesVoronoi=BubblesVoronoi(uv,uTime);vFoamNoise=FoamNoise(uv,uTime);vec3 mixed=mix(vec3(uv.x*1.4,uv.y*0.8-uTime*0.1,2.0-uTime*0.05),vec3(vBubblesNoise*0.1),0.10);vFoamVoronoi=FoamVoronoi(mixed);vSmoothFoamVoronoi=SmoothFoamVoronoi(mixed);float noise=SimplexCellular3D(position*20.0+uTime);newPosition+=normal*noise*0.015*uv.y;gl_Position=vec4(position,1.0);vUv=uv;vPosition=newPosition;vWorldPosition=position.xyz;
#include <fog_vertex>
}`;class UM{resources;group;waterfalls;engine;tweaksValue;foam;waterDrops;material;soundAnchorPoints;bakedShaders;constructor({group:e,engine:t,resources:i,initialTweaks:a}){this.engine=t,this.group=e,this.waterfalls=[],this.resources=i,this.soundAnchorPoints=[],this.tweaksValue=a,this.bakedShaders=[],this.init(),this.configureTweaks(),this.engine.on("global:config:changed",r=>{const n=r?.detail?.config;n&&this.configChanged(n)})}configChanged(e){e.islands.waterfalls&&(this.updateMidColor(e.islands.waterfalls.midColor),this.updateTopColor(e.islands.waterfalls.topColor),this.updateBaseColor(e.islands.waterfalls.baseColor))}configureTweaks(){this.engine.tweaks.configure(this.tweaksValue,{folder:"Islands.Waterfalls",topColor:{onChange:this.updateTopColor.bind(this)},midColor:{onChange:this.updateMidColor.bind(this)},baseColor:{onChange:this.updateBaseColor.bind(this)}})}updateTopColor(e){this.material.uniforms.uTopColor.value=new X(e)}updateMidColor(e){this.material.uniforms.uMidColor.value=new X(e)}updateBaseColor(e){this.material.uniforms.uBaseColor.value=new X(e)}init(){this.extractMeshes(),this.createMaterial(),this.applyMaterialToMeshes(),this.initFoam(),this.initWaterDrops(),this.resources.once("loaded:soundWaterfall",()=>{this.soundAnchorPoints.forEach((e,t)=>{const i=this.engine.audio.createPositionalAudio(`waterfall-${t}`,this.resources.items.soundWaterfall,{volume:.5,loop:!0});i.position.copy(e.position),i.setRefDistance(3),i.setRolloffFactor(2),i.setMaxDistance(5.5),this.group.add(i)})}),this.engine.monitor.on("decline",e=>{const t=e?.detail?.declineLevel;if(t)switch(t){case 4:console.warn("Waterfalls: Low fps detected. Baking shaders..."),this.bakeShaders();break;case 5:console.warn("Waterfalls: Low fps detected. Deleting water drops."),this.waterDrops.destroy();break}})}bakeShaders(){this.waterfalls.forEach(e=>{const t=new np(VM,1024,this.engine,this.resources,e,[{uTime:0},{uTime:1}]);try{const i=t.bake();this.bakedShaders.push(i),e.material=i,console.log("Waterfalls: Shaders successfully baked for performance optimization")}catch(i){console.error("Waterfalls: Failed to bake shaders:",i)}})}initFoam(){this.foam=new RM({engine:this.engine,group:this.group,initialTweaks:{lightPosition:{x:66.55,y:20.338,z:-68.2},foamColor:nt.islands.foam.color,foamShadowColor:nt.islands.foam.shadow}})}initWaterDrops(){this.waterDrops=new LM({engine:this.engine,group:this.group,initialTweaks:{count:500,size:.04}})}extractMeshes(){this.group.traverse(e=>{if(e.name?.startsWith("sound-waterfall")){this.soundAnchorPoints.push(e);return}e.name?.match(/-waterfall$/)&&this.waterfalls.push(e)})}createMaterial(){this.material=new Le({fragmentShader:MM,vertexShader:IM,fog:!0,uniforms:{uTime:new O(0),uBaseColor:new O(new X(this.tweaksValue.baseColor)),uTopColor:new O(new X(this.tweaksValue.topColor)),uMidColor:new O(new X(this.tweaksValue.midColor)),...ie.fog}})}applyMaterialToMeshes(){this.waterfalls.forEach(e=>{e.material=this.material,e.castShadow=!0,e.receiveShadow=!0})}update(){this.foam?.update(),this.waterDrops?.update(),this.material&&(this.material.transparent=this.engine.camera.isCloseEnough(25),this.material.uniforms.uTime&&(this.material.uniforms.uTime.value=this.engine.time.elapsedSeconds),this.bakedShaders.forEach(e=>{e.uniforms.mixFactor.value=this.engine.time.elapsedSeconds}))}destroy(){this.foam?.destroy(),this.waterDrops?.destroy(),this.material?.dispose(),this.waterfalls.forEach(e=>{e.geometry.dispose()})}}var BM=`vec4 SGPP_coord_prepare(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 SGPP_coord_prepare(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 SGPP_permute(vec4 x){return fract(x*((34.0/289.0)*x+(1.0/289.0)))*289.0;}vec4 SGPP_resolve(vec4 x){return fract(x*(7.0/288.0));}vec4 SGPP_hash_2D(vec2 gridcell){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));return SGPP_resolve(SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww));}void SGPP_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));hash_0=SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww);hash_1=SGPP_resolve(SGPP_permute(hash_0));hash_0=SGPP_resolve(hash_0);}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell.zzzz));highz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell_inc1.zzzz));}void SGPP_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){vec3 coords0=gridcell.xyz-floor(gridcell.xyz*(1.0/289.0))*289.0;vec3 coords3=step(coords0,vec3(287.5))*(coords0+1.0);vec3 coords1=mix(coords0,coords3,v1_mask);vec3 coords2=mix(coords0,coords3,v2_mask);hash_2=SGPP_permute(SGPP_permute(SGPP_permute(vec4(coords0.x,coords1.x,coords2.x,coords3.x))+vec4(coords0.y,coords1.y,coords2.y,coords3.y))+vec4(coords0.z,coords1.z,coords2.z,coords3.z));hash_0=SGPP_resolve(hash_2);hash_1=SGPP_resolve(hash_2=SGPP_permute(hash_2));hash_2=SGPP_resolve(SGPP_permute(hash_2));}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash_2=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash_0=SGPP_resolve(lowz_hash_2=SGPP_permute(highz_hash_2+gridcell.zzzz));highz_hash_0=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2+gridcell_inc1.zzzz));lowz_hash_1=SGPP_resolve(lowz_hash_2=SGPP_permute(lowz_hash_2));highz_hash_1=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2));lowz_hash_2=SGPP_resolve(SGPP_permute(lowz_hash_2));highz_hash_2=SGPP_resolve(SGPP_permute(highz_hash_2));}vec4 BBS_coord_prepare(vec4 x){return x-floor(x*(1.0/61.0))*61.0;}vec3 BBS_coord_prepare(vec3 x){return x-floor(x*(1.0/61.0))*61.0;}vec4 BBS_permute(vec4 x){return fract(x*x*(1.0/61.0))*61.0;}vec4 BBS_permute_and_resolve(vec4 x){return fract(x*x*(1.0/61.0));}vec4 BBS_hash_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);return BBS_permute_and_resolve(p+hash_coord.yyww);}vec4 BBS_hash_hq_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);p=BBS_permute(p+hash_coord.yyww);return BBS_permute_and_resolve(p+hash_coord.xzxz);}void BBS_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const float DOMAIN=60.0;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 p=BBS_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy);p=BBS_permute(p+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=BBS_permute_and_resolve(p+gridcell.zzzz);highz_hash=BBS_permute_and_resolve(p+gridcell_inc1.zzzz);}vec4 FAST32_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const float SOMELARGEFLOAT=951.135664;vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec2 SOMELARGEFLOATS=vec2(951.135664,642.949883);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec3 SOMELARGEFLOATS=vec3(951.135664,642.949883,803.202459);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));hash_2=fract(P*(1.0/SOMELARGEFLOATS.z));}vec4 FAST32_hash_2D_Cell(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec4 SOMELARGEFLOATS=vec4(951.135664,642.949883,803.202459,986.973274);vec2 P=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xy;P*=P;return fract((P.x*P.y)*(1.0/SOMELARGEFLOATS.xyzw));}vec4 FAST32_hash_3D_Cell(vec3 gridcell){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;gridcell.xy+=OFFSET.xy;gridcell.xy*=gridcell.xy;return fract((gridcell.x*gridcell.y)*(1.0/(SOMELARGEFLOATS+gridcell.zzzz*ZINC)));}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;highz_hash.xy=vec2(1.0/(SOMELARGEFLOAT+vec2(gridcell.z,gridcell_inc1.z)*ZINC));lowz_hash=fract(P*highz_hash.xxxx);highz_hash=fract(P*highz_hash.yyyy);}void FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec3 lowz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));v1_mask=(v1_mask.z<0.5)? lowz_mods : highz_mods;v2_mask=(v2_mask.z<0.5)? lowz_mods : highz_mods;hash_0=fract(P*vec4(lowz_mods.x,v1_mask.x,v2_mask.x,highz_mods.x));hash_1=fract(P*vec4(lowz_mods.y,v1_mask.y,v2_mask.y,highz_mods.y));hash_2=fract(P*vec4(lowz_mods.z,v1_mask.z,v2_mask.z,highz_mods.z));}vec4 FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec2 V1z_V2z=vec2(v1_mask.z<0.5 ? gridcell.z : gridcell_inc1.z,v2_mask.z<0.5 ? gridcell.z : gridcell_inc1.z);vec4 mod_vals=vec4(1.0/(SOMELARGEFLOAT+vec4(gridcell.z,V1z_V2z,gridcell_inc1.z)*ZINC));return fract(P*mod_vals);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;vec3 lowz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));lowz_hash_0=fract(P*lowz_mod.xxxx);highz_hash_0=fract(P*highz_mod.xxxx);lowz_hash_1=fract(P*lowz_mod.yyyy);highz_hash_1=fract(P*highz_mod.yyyy);lowz_hash_2=fract(P*lowz_mod.zzzz);highz_hash_2=fract(P*highz_mod.zzzz);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 lowz_hash_3,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2,out vec4 highz_hash_3){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;lowz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell.zzzz*ZINC.xyzw));highz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell_inc1.zzzz*ZINC.xyzw));lowz_hash_0=fract(P*lowz_hash_3.xxxx);highz_hash_0=fract(P*highz_hash_3.xxxx);lowz_hash_1=fract(P*lowz_hash_3.yyyy);highz_hash_1=fract(P*highz_hash_3.yyyy);lowz_hash_2=fract(P*lowz_hash_3.zzzz);highz_hash_2=fract(P*highz_hash_3.zzzz);lowz_hash_3=fract(P*lowz_hash_3.wwww);highz_hash_3=fract(P*highz_hash_3.wwww);}vec4 FAST32_2_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(403.839172,377.242706);const float DOMAIN=69.0;const float SOMELARGEFLOAT=32745.708984;const vec2 SCALE=vec2(2.009842,1.372549);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P=(P*SCALE.xyxy)+OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_3D(vec3 gridcell,out vec4 z0_hash,out vec4 z1_hash){const vec3 OFFSET=vec3(55.882355,63.167774,52.941177);const float DOMAIN=69.0;const float SOMELARGEFLOAT=69412.070313;const vec3 SCALE=vec3(0.235142,0.205890,0.216449);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);z0_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell.zzzz*(1.0/SOMELARGEFLOAT));z1_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell_inc1.zzzz*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash,out vec4 z1w0_hash,out vec4 z0w1_hash,out vec4 z1w1_hash){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const float SOMELARGEFLOAT=47165.636719;const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww)*(1.0/SOMELARGEFLOAT);z0w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx);z1w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy);z0w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz);z1w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww);}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash_0,out vec4 z0w0_hash_1,out vec4 z0w0_hash_2,out vec4 z0w0_hash_3,out vec4 z1w0_hash_0,out vec4 z1w0_hash_1,out vec4 z1w0_hash_2,out vec4 z1w0_hash_3,out vec4 z0w1_hash_0,out vec4 z0w1_hash_1,out vec4 z0w1_hash_2,out vec4 z0w1_hash_3,out vec4 z1w1_hash_0,out vec4 z1w1_hash_1,out vec4 z1w1_hash_2,out vec4 z1w1_hash_3){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(56974.746094,47165.636719,55049.667969,49901.273438);const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww);vec4 hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx;z0w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy;z1w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz;z0w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww;z1w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));}float Interpolation_C1(float x){return x*x*(3.0-2.0*x);}vec2 Interpolation_C1(vec2 x){return x*x*(3.0-2.0*x);}vec3 Interpolation_C1(vec3 x){return x*x*(3.0-2.0*x);}vec4 Interpolation_C1(vec4 x){return x*x*(3.0-2.0*x);}float Interpolation_C2(float x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec2 Interpolation_C2(vec2 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec3 Interpolation_C2(vec3 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2(vec4 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2_InterpAndDeriv(vec2 x){return x.xyxy*x.xyxy*(x.xyxy*(x.xyxy*(x.xyxy*vec2(6.0,0.0).xxyy+vec2(-15.0,30.0).xxyy)+vec2(10.0,-60.0).xxyy)+vec2(0.0,30.0).xxyy);}vec3 Interpolation_C2_Deriv(vec3 x){return x*x*(x*(x*30.0-60.0)+30.0);}float Interpolation_C2_Fast(float x){float x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec2 Interpolation_C2_Fast(vec2 x){vec2 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec3 Interpolation_C2_Fast(vec3 x){vec3 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec4 Interpolation_C2_Fast(vec4 x){vec4 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}float Interpolation_C3(float x){float xsq=x*x;float xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec2 Interpolation_C3(vec2 x){vec2 xsq=x*x;vec2 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec3 Interpolation_C3(vec3 x){vec3 xsq=x*x;vec3 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec4 Interpolation_C3(vec4 x){vec4 xsq=x*x;vec4 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}float Falloff_Xsq_C1(float xsq){xsq=1.0-xsq;return xsq*xsq;}float Falloff_Xsq_C2(float xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}vec4 Falloff_Xsq_C2(vec4 xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}float Value2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec2 blend=Interpolation_C2(Pf);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(hash,blend2.zxzx*blend2.wwyy);}float Value3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Value4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 z0w0_hash;vec4 z1w0_hash;vec4 z0w1_hash;vec4 z1w1_hash;FAST32_2_hash_4D(Pi,z0w0_hash,z1w0_hash,z0w1_hash,z1w1_hash);vec4 blend=Interpolation_C2(Pf);vec4 res0=z0w0_hash+(z0w1_hash-z0w0_hash)*blend.wwww;vec4 res1=z1w0_hash+(z1w1_hash-z1w0_hash)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0-blend.xy);return dot(res0,blend.zxzx*blend.wwyy);}float Perlin2D(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);
#if 1
vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);
#if 1
grad_results*=1.4142135623730950488016887242097;vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#else
grad_results*=2.3703703703703703703703703703704;vec4 vecs_len_sq=Pf_Pfmin1*Pf_Pfmin1;vecs_len_sq=vecs_len_sq.xzxz+vecs_len_sq.yyww;return dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq)),grad_results);
#endif
#else
vec4 hash=FAST32_hash_2D(Pi);hash-=0.5;vec4 grad_results=Pf_Pfmin1.xzxz*sign(hash)+Pf_Pfmin1.yyww*sign(abs(hash)-0.25);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#endif
}float Perlin3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;
#if 1
vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);
#if 1
vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);final*=1.1547005383792515290182975610039;return final;
#else
Pf*=Pf;Pf_min1*=Pf_min1;vec4 vecs_len_sq=vec4(Pf.x,Pf_min1.x,Pf.x,Pf_min1.x)+vec4(Pf.yy,Pf_min1.yy);float final=dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf.zzzz)),grad_results_0)+dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf_min1.zzzz)),grad_results_1);final*=2.3703703703703703703703703703704;return final;
#endif
#else
vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);hash_lowz-=0.5;vec4 grad_results_0_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_lowz);hash_lowz=abs(hash_lowz)-0.25;vec4 grad_results_0_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_lowz);vec4 grad_results_0_2=Pf.zzzz*sign(abs(hash_lowz)-0.125);vec4 grad_results_0=grad_results_0_0+grad_results_0_1+grad_results_0_2;hash_highz-=0.5;vec4 grad_results_1_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_highz);hash_highz=abs(hash_highz)-0.25;vec4 grad_results_1_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_highz);vec4 grad_results_1_2=Pf_min1.zzzz*sign(abs(hash_highz)-0.125);vec4 grad_results_1=grad_results_1_0+grad_results_1_1+grad_results_1_2;vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy)*(2.0/3.0);
#endif
}float Perlin4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 Pf_min1=Pf-1.0;vec4 lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3;vec4 highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3;vec4 lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3;vec4 highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3;FAST32_2_hash_4D(Pi,lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3,highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3,lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3,highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3);lowz_loww_hash_0-=0.49999;lowz_loww_hash_1-=0.49999;lowz_loww_hash_2-=0.49999;lowz_loww_hash_3-=0.49999;highz_loww_hash_0-=0.49999;highz_loww_hash_1-=0.49999;highz_loww_hash_2-=0.49999;highz_loww_hash_3-=0.49999;lowz_highw_hash_0-=0.49999;lowz_highw_hash_1-=0.49999;lowz_highw_hash_2-=0.49999;lowz_highw_hash_3-=0.49999;highz_highw_hash_0-=0.49999;highz_highw_hash_1-=0.49999;highz_highw_hash_2-=0.49999;highz_highw_hash_3-=0.49999;vec4 grad_results_lowz_loww=inversesqrt(lowz_loww_hash_0*lowz_loww_hash_0+lowz_loww_hash_1*lowz_loww_hash_1+lowz_loww_hash_2*lowz_loww_hash_2+lowz_loww_hash_3*lowz_loww_hash_3);grad_results_lowz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_loww_hash_1+Pf.zzzz*lowz_loww_hash_2+Pf.wwww*lowz_loww_hash_3);vec4 grad_results_highz_loww=inversesqrt(highz_loww_hash_0*highz_loww_hash_0+highz_loww_hash_1*highz_loww_hash_1+highz_loww_hash_2*highz_loww_hash_2+highz_loww_hash_3*highz_loww_hash_3);grad_results_highz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_loww_hash_1+Pf_min1.zzzz*highz_loww_hash_2+Pf.wwww*highz_loww_hash_3);vec4 grad_results_lowz_highw=inversesqrt(lowz_highw_hash_0*lowz_highw_hash_0+lowz_highw_hash_1*lowz_highw_hash_1+lowz_highw_hash_2*lowz_highw_hash_2+lowz_highw_hash_3*lowz_highw_hash_3);grad_results_lowz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_highw_hash_1+Pf.zzzz*lowz_highw_hash_2+Pf_min1.wwww*lowz_highw_hash_3);vec4 grad_results_highz_highw=inversesqrt(highz_highw_hash_0*highz_highw_hash_0+highz_highw_hash_1*highz_highw_hash_1+highz_highw_hash_2*highz_highw_hash_2+highz_highw_hash_3*highz_highw_hash_3);grad_results_highz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_highw_hash_1+Pf_min1.zzzz*highz_highw_hash_2+Pf_min1.wwww*highz_highw_hash_3);vec4 blend=Interpolation_C2(Pf);vec4 res0=grad_results_lowz_loww+(grad_results_lowz_highw-grad_results_lowz_loww)*blend.wwww;vec4 res1=grad_results_highz_loww+(grad_results_highz_highw-grad_results_highz_loww)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0)-blend.xy;return dot(res0,blend.zxzx*blend.wwyy);}float ValuePerlin2D(vec2 P,float blend_val){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_value,hash_x,hash_y;FAST32_hash_2D(Pi,hash_value,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results*=1.4142135623730950488016887242097;grad_results=mix((hash_value*2.0-1.0),grad_results,blend_val);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);}float ValuePerlin3D(vec3 P,float blend_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0*=1.1547005383792515290182975610039;grad_results_1*=1.1547005383792515290182975610039;grad_results_0=mix((hash_value0*2.0-1.0),grad_results_0,blend_val);grad_results_1=mix((hash_value1*2.0-1.0),grad_results_1,blend_val);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Cubist2D(vec2 P,vec2 range_clamp){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y,hash_value;FAST32_hash_2D(Pi,hash_x,hash_y,hash_value);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results=(hash_value-0.5)*(1.0/grad_results);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));float final=dot(grad_results,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}float Cubist3D(vec3 P,vec2 range_clamp){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0=(hash_value0-0.5)*(1.0/grad_results_0);grad_results_1=(hash_value1-0.5)*(1.0/grad_results_1);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}vec4 Cellular_weight_samples(vec4 samples){samples=samples*2.0-1.0;return(samples*samples*samples)-sign(samples);}float Cellular2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);
#if 1
const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x=hash_x*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y=hash_y*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;d.xy=min(d.xy,d.zw);return min(d.x,d.y)*(1.0/1.125);}float Cellular3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);
#if 1
const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x0=hash_x0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y0=hash_y0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_x1=hash_x1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y1=hash_y1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_z0=hash_z0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW);hash_z1=hash_z1*JITTER_WINDOW*2.0+vec4(1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;d1=min(d1,d2);d1.xy=min(d1.xy,d1.wz);return min(d1.x,d1.y)*(9.0/12.0);}/*float SparseConvolution2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;const float RADIUS=1.0-JITTER_WINDOW;d*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d,vec4(1.0))),vec4(1.0));}float SparseConvolution3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;const float RADIUS=(1.0-JITTER_WINDOW);d1*=((1.0/RADIUS)*(1.0/RADIUS));d2*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d1,vec4(1.0)))+Falloff_Xsq_C2(min(d2,vec4(1.0))),vec4(1.0));}*/float PolkaDot2D(vec2 P,float radius_low,float radius_high){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.z*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xy*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float PolkaDot3D(vec3 P,float radius_low,float radius_high){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash=FAST32_hash_3D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.w*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xyz*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float Stars2D(vec2 P,float probability_threshold,float max_dimness,float two_over_radius){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float VALUE=1.0-max_dimness*hash.z;Pf*=two_over_radius;Pf-=(two_over_radius-1.0);Pf+=hash.xy*(two_over_radius-2.0);return(hash.w<probability_threshold)?(Falloff_Xsq_C1(min(dot(Pf,Pf),1.0))*VALUE): 0.0;}float SimplexPerlin2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw));const float FINAL_NORMALIZATION=99.204334582718712976990005025589;vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);m=m*m;return dot(m*m,grad_results)*FINAL_NORMALIZATION;}float SimplexPolkaDot2D(vec2 P,float radius,float max_dimness){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.4494897427831780981972840747059;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec2 v0=(Pi-dot(Pi,vec2(UNSKEWFACTOR))-P);vec4 v0123_x=vec4(0.0,SIMPLEX_POINTS.xyz)+v0.x;vec4 v0123_y=vec4(0.0,SIMPLEX_POINTS.yxz)+v0.y;vec4 hash=FAST32_hash_2D(Pi);radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v0123_x*=radius;v0123_y*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v0123_x*v0123_x+v0123_y*v0123_y));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float SimplexCellular2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HEIGHT=1.4142135623730950488016887242097;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR)*INV_SIMPLEX_TRI_HEIGHT;P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=(0.10566243270259355887271280487451*INV_SIMPLEX_TRI_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;vec2 p0=((Pi-dot(Pi,vec2(UNSKEWFACTOR)))-P)*INV_SIMPLEX_TRI_HEIGHT;hash_x+=p0.xxxx;hash_y+=p0.yyyy;hash_x.yzw+=SIMPLEX_POINTS.xyz;hash_y.yzw+=SIMPLEX_POINTS.yxz;vec4 distsq=hash_x*hash_x+hash_y*hash_y;vec2 tmp=min(distsq.xy,distsq.zw);return min(tmp.x,tmp.y);}void Simplex3D_GetCornerVectors(vec3 P,out vec3 Pi,out vec3 Pi_1,out vec3 Pi_2,out vec4 v1234_x,out vec4 v1234_y,out vec4 v1234_z){const float SKEWFACTOR=1.0/3.0;const float UNSKEWFACTOR=1.0/6.0;const float SIMPLEX_CORNER_POS=0.5;const float SIMPLEX_PYRAMID_HEIGHT=0.70710678118654752440084436210485;P*=SIMPLEX_PYRAMID_HEIGHT;Pi=floor(P+dot(P,vec3(SKEWFACTOR)));vec3 x0=P-Pi+dot(Pi,vec3(UNSKEWFACTOR));vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;Pi_1=min(g.xyz,l.zxy);Pi_2=max(g.xyz,l.zxy);vec3 x1=x0-Pi_1+UNSKEWFACTOR;vec3 x2=x0-Pi_2+SKEWFACTOR;vec3 x3=x0-SIMPLEX_CORNER_POS;v1234_x=vec4(x0.x,x1.x,x2.x,x3.x);v1234_y=vec4(x0.y,x1.y,x2.y,x3.y);v1234_z=vec4(x0.z,x1.z,x2.z,x3.z);}vec4 Simplex3D_GetSurfletWeights(vec4 v1234_x,vec4 v1234_y,vec4 v1234_z){vec4 surflet_weights=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;surflet_weights=max(0.5-surflet_weights,0.0);return surflet_weights*surflet_weights*surflet_weights;}float SimplexPerlin3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 grad_results=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2)*(hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return dot(Simplex3D_GetSurfletWeights(v1234_x,v1234_y,v1234_z),grad_results)*FINAL_NORMALIZATION;}float SimplexCellular3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_x;vec4 hash_y;vec4 hash_z;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_x,hash_y,hash_z);const float INV_SIMPLEX_PYRAMID_HEIGHT=1.4142135623730950488016887242097;const float JITTER_WINDOW=(0.0597865779345250670558198111*INV_SIMPLEX_PYRAMID_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;hash_z=Cellular_weight_samples(hash_z)*JITTER_WINDOW;v1234_x*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_y*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_z*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_x+=hash_x;v1234_y+=hash_y;v1234_z+=hash_z;vec4 distsq=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;return min(min(distsq.x,distsq.y),min(distsq.z,distsq.w));}float SimplexPolkaDot3D(vec3 P,float radius,float max_dimness){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash=FAST32_hash_3D(Pi,Pi_1,Pi_2);const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.3094010767585030580365951220078;radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v1234_x*=radius;v1234_y*=radius;v1234_z*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float QuinticHermite(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,x,0.0));}vec4 QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 egrad0,vec4 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;}vec4 QuinticHermite(float x,vec2 igrad0,vec2 igrad1,vec2 egrad0,vec2 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return vec4(egrad1,igrad0)*vec4(h123.zz,1.0,1.0)+vec4(egrad0,h123.xx)*vec4(vec2(h123.y+x),(igrad1-igrad0));}void QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}void QuinticHermite(float x,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}float QuinticHermiteDeriv(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(30.0,-15.0,-15.0);const vec3 C1=vec3(-60.0,32.0,28.0);const vec3 C2=vec3(30.0,-18.0,-12.0);vec3 h123=(((C1+C0*x)*x)+C2)*(x*x);return dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,1.0,0.0));}float Hermite2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float Hermite3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float ValueHermite2D(vec2 P,float value_scale,float gradient_scale,float normalization_val){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_value,hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_value,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999)*gradient_scale;hash_grady=(hash_grady-0.49999)*gradient_scale;hash_value=(hash_value-0.5)*value_scale;vec4 qh_results=QuinticHermite(Pf.y,vec4(hash_value.xy,hash_gradx.xy),vec4(hash_value.zw,hash_gradx.zw),vec4(hash_grady.xy,0.0,0.0),vec4(hash_grady.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}float ValueHermite3D(vec3 P,float value_scale,float gradient_scale,float normalization_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999)*gradient_scale;hash_grady0=(hash_grady0-0.49999)*gradient_scale;hash_gradz0=(hash_gradz0-0.49999)*gradient_scale;hash_gradx1=(hash_gradx1-0.49999)*gradient_scale;hash_grady1=(hash_grady1-0.49999)*gradient_scale;hash_gradz1=(hash_gradz1-0.49999)*gradient_scale;hash_value0=(hash_value0-0.5)*value_scale;hash_value1=(hash_value1-0.5)*value_scale;vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_value0,hash_value1,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}vec3 Value2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec4 blend=Interpolation_C2_InterpAndDeriv(Pf);vec4 res0=mix(hash.xyxz,hash.zwyw,blend.yyxx);return vec3(res0.x,0.0,0.0)+(res0.yyw-res0.xxz)*blend.xzw;}vec4 Value3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 res1=mix(res0.xyxz,res0.zwyw,blend.yyxx);vec4 res3=mix(vec4(hash_lowz.xy,hash_highz.xy),vec4(hash_lowz.zw,hash_highz.zw),blend.y);vec2 res4=mix(res3.xz,res3.yw,blend.x);return vec4(res1.x,0.0,0.0,0.0)+(vec4(res1.yyw,res4.y)-vec4(res1.xxz,res4.x))*vec4(blend.x,Interpolation_C2_Deriv(Pf));}vec3 Perlin2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 dotval=(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);vec3 dotval0_grad0=vec3(dotval.x,grad_x.x,grad_y.x);vec3 dotval1_grad1=vec3(dotval.y,grad_x.y,grad_y.y);vec3 dotval2_grad2=vec3(dotval.z,grad_x.z,grad_y.z);vec3 dotval3_grad3=vec3(dotval.w,grad_x.w,grad_y.w);vec3 k0_gk0=dotval1_grad1-dotval0_grad0;vec3 k1_gk1=dotval2_grad2-dotval0_grad0;vec3 k2_gk2=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 blend=Interpolation_C2_InterpAndDeriv(Pf_Pfmin1.xy);vec3 results=dotval0_grad0+blend.x*k0_gk0+blend.y*(k1_gk1+blend.x*k2_gk2);results.yz+=blend.zw*(vec2(k0_gk0.x,k1_gk1.x)+blend.yx*k2_gk2.xx);return results*1.4142135623730950488016887242097;}vec4 Perlin3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 dotval_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 dotval_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec4 dotval0_grad0=vec4(dotval_0.x,grad_x0.x,grad_y0.x,grad_z0.x);vec4 dotval1_grad1=vec4(dotval_0.y,grad_x0.y,grad_y0.y,grad_z0.y);vec4 dotval2_grad2=vec4(dotval_0.z,grad_x0.z,grad_y0.z,grad_z0.z);vec4 dotval3_grad3=vec4(dotval_0.w,grad_x0.w,grad_y0.w,grad_z0.w);vec4 dotval4_grad4=vec4(dotval_1.x,grad_x1.x,grad_y1.x,grad_z1.x);vec4 dotval5_grad5=vec4(dotval_1.y,grad_x1.y,grad_y1.y,grad_z1.y);vec4 dotval6_grad6=vec4(dotval_1.z,grad_x1.z,grad_y1.z,grad_z1.z);vec4 dotval7_grad7=vec4(dotval_1.w,grad_x1.w,grad_y1.w,grad_z1.w);vec4 k0_gk0=dotval1_grad1-dotval0_grad0;vec4 k1_gk1=dotval2_grad2-dotval0_grad0;vec4 k2_gk2=dotval4_grad4-dotval0_grad0;vec4 k3_gk3=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 k4_gk4=dotval5_grad5-dotval4_grad4-k0_gk0;vec4 k5_gk5=dotval6_grad6-dotval4_grad4-k1_gk1;vec4 k6_gk6=(dotval7_grad7-dotval6_grad6)-(dotval5_grad5-dotval4_grad4)-k3_gk3;vec3 blend=Interpolation_C2(Pf);vec3 blendDeriv=Interpolation_C2_Deriv(Pf);float u=blend.x;float v=blend.y;float w=blend.z;vec4 result=dotval0_grad0+u*(k0_gk0+v*k3_gk3)+v*(k1_gk1+w*k5_gk5)+w*(k2_gk2+u*(k4_gk4+v*k6_gk6));result.y+=dot(vec4(k0_gk0.x,k3_gk3.x*v,vec2(k4_gk4.x,k6_gk6.x*v)*w),vec4(blendDeriv.x));result.z+=dot(vec4(k1_gk1.x,k3_gk3.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*w),vec4(blendDeriv.y));result.w+=dot(vec4(k2_gk2.x,k4_gk4.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*v),vec4(blendDeriv.z));result*=1.1547005383792515290182975610039;return result;}vec3 PerlinSurflet2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 grad_results=grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww;vec4 m=Pf_Pfmin1*Pf_Pfmin1;m=m.xzxz+m.yyww;m=max(1.0-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,Pf_Pfmin1.xzxz)+dot(m3,grad_x);float yderiv=dot(temp,Pf_Pfmin1.yyww)+dot(m3,grad_y);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec3(dot(m3,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 PerlinSurflet3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 grad_results_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 grad_results_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec3 Pf_sq=Pf*Pf;vec3 Pf_min1_sq=Pf_min1*Pf_min1;vec4 vecs_len_sq=vec2(Pf_sq.x,Pf_min1_sq.x).xyxy+vec2(Pf_sq.y,Pf_min1_sq.y).xxyy;vec4 m_0=vecs_len_sq+Pf_sq.zzzz;m_0=max(1.0-m_0,0.0);vec4 m2_0=m_0*m_0;vec4 m3_0=m_0*m2_0;vec4 m_1=vecs_len_sq+Pf_min1_sq.zzzz;m_1=max(1.0-m_1,0.0);vec4 m2_1=m_1*m_1;vec4 m3_1=m_1*m2_1;vec4 temp_0=-6.0*m2_0*grad_results_0;float xderiv_0=dot(temp_0,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_0,grad_x0);float yderiv_0=dot(temp_0,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_0,grad_y0);float zderiv_0=dot(temp_0,Pf.zzzz)+dot(m3_0,grad_z0);vec4 temp_1=-6.0*m2_1*grad_results_1;float xderiv_1=dot(temp_1,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_1,grad_x1);float yderiv_1=dot(temp_1,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_1,grad_y1);float zderiv_1=dot(temp_1,Pf_min1.zzzz)+dot(m3_1,grad_z1);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec4(dot(m3_0,grad_results_0)+dot(m3_1,grad_results_1),vec3(xderiv_0,yderiv_0,zderiv_0)+vec3(xderiv_1,yderiv_1,zderiv_1))*FINAL_NORMALIZATION;}vec3 Cellular2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;vec3 t1=d.x<d.y ? vec3(d.x,dx.x,dy.x): vec3(d.y,dx.y,dy.y);vec3 t2=d.z<d.w ? vec3(d.z,dx.z,dy.z): vec3(d.w,dx.w,dy.w);return(t1.x<t2.x ? t1 : t2)*vec3(1.0,2.0,2.0)*(1.0/1.125);}vec4 Cellular3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;vec4 r1=d1.x<d1.y ? vec4(d1.x,dx1.x,dy1.x,dz1.x): vec4(d1.y,dx1.y,dy1.y,dz1.y);vec4 r2=d1.z<d1.w ? vec4(d1.z,dx1.z,dy1.z,dz1.z): vec4(d1.w,dx1.w,dy1.w,dz1.w);vec4 r3=d2.x<d2.y ? vec4(d2.x,dx2.x,dy2.x,dz2.x): vec4(d2.y,dx2.y,dy2.y,dz2.y);vec4 r4=d2.z<d2.w ? vec4(d2.z,dx2.z,dy2.z,dz2.z): vec4(d2.w,dx2.w,dy2.w,dz2.w);vec4 t1=r1.x<r2.x ? r1 : r2;vec4 t2=r3.x<r4.x ? r3 : r4;return(t1.x<t2.x ? t1 : t2)*vec4(1.0,vec3(2.0))*(9.0/12.0);}vec3 SimplexPerlin2D_Deriv(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec3 grad_results=grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw);vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);vec3 m2=m*m;vec3 m4=m2*m2;vec3 temp=8.0*m2*m*grad_results;float xderiv=dot(temp,vec3(v0.x,v12.xz))-dot(m4,grad_x);float yderiv=dot(temp,vec3(v0.y,v12.yw))-dot(m4,grad_y);const float FINAL_NORMALIZATION=99.204334582718712976990005025589;return vec3(dot(m4,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 SimplexPerlin3D_Deriv(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 norm=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2);hash_0*=norm;hash_1*=norm;hash_2*=norm;vec4 grad_results=hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z;vec4 m=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;m=max(0.5-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,v1234_x)+dot(m3,hash_0);float yderiv=dot(temp,v1234_y)+dot(m3,hash_1);float zderiv=dot(temp,v1234_z)+dot(m3,hash_2);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return vec4(dot(m3,grad_results),xderiv,yderiv,zderiv)*FINAL_NORMALIZATION;}vec3 Hermite2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results_x=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);vec4 qh_results_y=QuinticHermite(Pf.x,hash_grady.xz,hash_grady.yw,hash_gradx.xz,hash_gradx.yw);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);return vec3(finalpos,deriv_x,deriv_y)*FINAL_NORM_VAL;}vec4 Hermite3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results_z,igrad_results_x_z,igrad_results_y_z;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results_z,igrad_results_x_z,igrad_results_y_z);vec4 ival_results_y,igrad_results_x_y,igrad_results_z_y;QuinticHermite(Pf.y,vec4(hash_gradx0.xy,hash_gradx1.xy),vec4(hash_gradx0.zw,hash_gradx1.zw),vec4(hash_gradz0.xy,hash_gradz1.xy),vec4(hash_gradz0.zw,hash_gradz1.zw),vec4(hash_grady0.xy,hash_grady1.xy),vec4(hash_grady0.zw,hash_grady1.zw),ival_results_y,igrad_results_x_y,igrad_results_z_y);vec4 qh_results_x=QuinticHermite(Pf.y,vec4(ival_results_z.xy,igrad_results_x_z.xy),vec4(ival_results_z.zw,igrad_results_x_z.zw),vec4(igrad_results_y_z.xy,0.0,0.0),vec4(igrad_results_y_z.zw,0.0,0.0));vec4 qh_results_y=QuinticHermite(Pf.x,vec4(ival_results_z.xz,igrad_results_y_z.xz),vec4(ival_results_z.yw,igrad_results_y_z.yw),vec4(igrad_results_x_z.xz,0.0,0.0),vec4(igrad_results_x_z.yw,0.0,0.0));vec4 qh_results_z=QuinticHermite(Pf.x,vec4(ival_results_y.xz,igrad_results_z_y.xz),vec4(ival_results_y.yw,igrad_results_z_y.yw),vec4(igrad_results_x_y.xz,0.0,0.0),vec4(igrad_results_x_y.yw,0.0,0.0));float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);float deriv_z=QuinticHermiteDeriv(Pf.z,qh_results_z.x,qh_results_z.y,qh_results_z.z,qh_results_z.w);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);return vec4(finalpos,deriv_x,deriv_y,deriv_z)*FINAL_NORM_VAL;}float BubblesNoise_fade(float t){return t*t*t*(t*(t*6.0-15.0)+10.0);}uint BubblesNoise_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void BubblesNoise_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=BubblesNoise_jenkins_rot(b,14u);a ^=c;a-=BubblesNoise_jenkins_rot(c,11u);b ^=a;b-=BubblesNoise_jenkins_rot(a,25u);c ^=b;c-=BubblesNoise_jenkins_rot(b,16u);a ^=c;a-=BubblesNoise_jenkins_rot(c,4u);b ^=a;b-=BubblesNoise_jenkins_rot(a,14u);c ^=b;c-=BubblesNoise_jenkins_rot(b,24u);}uint BubblesNoise_hash_uint(uint kx){uint a,b,c;a=b=c=0xdeadbeefu+(1u<<2u)+13u;a+=kx;BubblesNoise_jenkins_final(a,b,c);return c;}int BubblesNoise_ihash_int(int kx){return int(BubblesNoise_hash_uint(uint(kx)));}float BubblesNoise_negateIf(float value,float condition){return value*(1.0-2.0*step(0.5,abs(condition)));}float BubblesNoise_noiseGrad1(int hash,float x){int h=hash&15;float g=1.0+float(h&7);return BubblesNoise_negateIf(g,float(h&8))*x;}void BubblesNoise_floor_frac(float x,out int x_int,out float x_fract){float x_floor=floor(x);x_int=int(x_floor);x_fract=x-x_floor;}float BubblesNoise_noise_grad3(int hash,float x,float y,float z){int h=hash&15;float u=mix(y,x,step(float(h),7.5));float vt=mix(z,x,step(11.5,float(h))*step(float(h),14.5));float v=mix(vt,y,step(float(h),3.5));return BubblesNoise_negateIf(u,float(h&1))+BubblesNoise_negateIf(v,float(h&2));}uint BubblesNoise_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;BubblesNoise_jenkins_final(a,b,c);return c;}int BubblesNoise_ihash_int3(int kx,int ky,int kz){return int(BubblesNoise_hash_uint3(uint(kx),uint(ky),uint(kz)));}float BubblesNoise_tri_mix(float v0,float v1,float v2,float v3,float v4,float v5,float v6,float v7,float x,float y,float z){float x1=1.0-x;float y1=1.0-y;float z1=1.0-z;return z1*(y1*(v0*x1+v1*x)+y*(v2*x1+v3*x))+z*(y1*(v4*x1+v5*x)+y*(v6*x1+v7*x));}float BubblesNoise_noise_perlin(vec3 vec){int X,Y,Z;float fx,fy,fz;BubblesNoise_floor_frac(vec.x,X,fx);BubblesNoise_floor_frac(vec.y,Y,fy);BubblesNoise_floor_frac(vec.z,Z,fz);float u=BubblesNoise_fade(fx);float v=BubblesNoise_fade(fy);float w=BubblesNoise_fade(fz);float r=BubblesNoise_tri_mix(BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y,Z),fx,fy,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y,Z),fx-1.0,fy,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y+1,Z),fx,fy-1.0,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y+1,Z),fx-1.0,fy-1.0,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y,Z+1),fx,fy,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y,Z+1),fx-1.0,fy,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y+1,Z+1),fx,fy-1.0,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y+1,Z+1),fx-1.0,fy-1.0,fz-1.0),u,v,w);return r;}float BubblesNoise_snoise(vec3 p){vec3 precision_correction=0.5*vec3(float(abs(p.x)>=1000000.0),float(abs(p.y)>=1000000.0),float(abs(p.z)>=1000000.0));p=mod(p,100000.0)+precision_correction;return BubblesNoise_noise_perlin(p)*0.9820;}/***Optimized FBM tailored to waterfall various effects(most important one being bubbles at the top)*/float BubblesNoise(vec2 uv,float time){vec3 position=vec3(uv.x*20.0-time*0.1,uv.y*20.0-time*0.1,0.0-time*0.1)*2.0;return 0.5*BubblesNoise_snoise(position)+0.5;}float FoamNoise(vec2 uv,float time){vec3 position=vec3(uv.x*2.0,uv.y*3.0,0.0+time*0.01)*62.5;return 0.5*BubblesNoise_snoise(position)+0.5;}float VerticalStripesNoise(vec3 position,vec2 uv,float time){position=vec3(uv.x*2.6,position.y*0.7+time*0.2,position.z+time*0.05)*12.0;return 0.5*BubblesNoise_snoise(position)+0.5;}float BaseVoronoi(vec2 uv,float time){vec3 position=vec3(uv.x*2.0,uv.y*1.25+0.399,uv.y*0.25-time*0.05);vec3 pos=position*25.0;vec3 cell=floor(pos);float minDist=8.0;for(int i=-1;i<=1;i++){for(int j=-1;j<=1;j++){for(int k=-1;k<=1;k++){vec3 neighbor=cell+vec3(float(i),float(j),float(k));vec3 hashInput=vec3(dot(neighbor,vec3(127.1,311.7,74.7)),dot(neighbor,vec3(269.5,183.3,246.1)),dot(neighbor,vec3(113.5,271.9,124.6)));vec3 r=-1.0+2.0*fract(sin(hashInput)*43758.5453123);vec3 point=neighbor+0.5+0.5*1.5*r;float dist=length(pos-point);minDist=min(minDist,dist);}}}return minDist;}uint BubblesVoronoi_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void BubblesVoronoi_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=BubblesVoronoi_jenkins_rot(b,14u);a ^=c;a-=BubblesVoronoi_jenkins_rot(c,11u);b ^=a;b-=BubblesVoronoi_jenkins_rot(a,25u);c ^=b;c-=BubblesVoronoi_jenkins_rot(b,16u);a ^=c;a-=BubblesVoronoi_jenkins_rot(c,4u);b ^=a;b-=BubblesVoronoi_jenkins_rot(a,14u);c ^=b;c-=BubblesVoronoi_jenkins_rot(b,24u);}uint BubblesVoronoi_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;BubblesVoronoi_jenkins_final(a,b,c);return c;}float BubblesVoronoi_hash_uint3_to_float(uint kx,uint ky,uint kz){return float(BubblesVoronoi_hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float BubblesVoronoi_hash_vec3_to_float(vec3 k){return BubblesVoronoi_hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}void BubblesVoronoi_jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=BubblesVoronoi_jenkins_rot(c,4u);c+=b;b-=a;b ^=BubblesVoronoi_jenkins_rot(a,6u);a+=c;c-=b;c ^=BubblesVoronoi_jenkins_rot(b,8u);b+=a;a-=c;a ^=BubblesVoronoi_jenkins_rot(c,16u);c+=b;b-=a;b ^=BubblesVoronoi_jenkins_rot(a,19u);a+=c;c-=b;c ^=BubblesVoronoi_jenkins_rot(b,4u);b+=a;}uint BubblesVoronoi_hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;BubblesVoronoi_jenkins_mix(a,b,c);a+=kw;BubblesVoronoi_jenkins_final(a,b,c);return c;}float BubblesVoronoi_hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(BubblesVoronoi_hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float BubblesVoronoi_hash_vec4_to_float(vec4 k){return BubblesVoronoi_hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec3 BubblesVoronoi_hash_vec3_to_vec3(vec3 k){return vec3(BubblesVoronoi_hash_vec3_to_float(k),BubblesVoronoi_hash_vec4_to_float(vec4(k,1.0)),BubblesVoronoi_hash_vec4_to_float(vec4(k,2.0)));}float BubblesVoronoi_octave(vec3 coord,float randomness){vec3 cellPosition_f=floor(coord);vec3 localPosition=coord-cellPosition_f;float minDistance=1e10;vec3 targetOffset=vec3(0.0);vec3 targetPosition=vec3(0.0);for(int k=-1;k<=1;k++){for(int j=-1;j<=1;j++){for(int i=-1;i<=1;i++){vec3 cellOffset=vec3(float(i),float(j),float(k));vec3 pointPosition=cellOffset+BubblesVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset)*randomness;float distanceToPoint=distance(pointPosition,localPosition);float mask=float(distanceToPoint<minDistance);targetOffset=mix(targetOffset,cellOffset,mask);minDistance=min(minDistance,distanceToPoint);targetPosition=mix(targetPosition,pointPosition,mask);}}}return minDistance;}float BubblesVoronoi(vec2 uv,float time){vec3 coord=vec3(uv.x*6.0,uv.y*12.0,5.0+time);float randomness=1.0;return BubblesVoronoi_octave(coord,randomness);}float FoamVoronoi(vec3 coord){coord*=130.0;float randomness=1.0;return BubblesVoronoi_octave(coord,randomness);}uint SmoothFoamVoronoi_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void SmoothFoamVoronoi_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,14u);a ^=c;a-=SmoothFoamVoronoi_jenkins_rot(c,11u);b ^=a;b-=SmoothFoamVoronoi_jenkins_rot(a,25u);c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,16u);a ^=c;a-=SmoothFoamVoronoi_jenkins_rot(c,4u);b ^=a;b-=SmoothFoamVoronoi_jenkins_rot(a,14u);c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,24u);}uint SmoothFoamVoronoi_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;SmoothFoamVoronoi_jenkins_final(a,b,c);return c;}float SmoothFoamVoronoi_hash_uint3_to_float(uint kx,uint ky,uint kz){return float(SmoothFoamVoronoi_hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float SmoothFoamVoronoi_hash_vec3_to_float(vec3 k){return SmoothFoamVoronoi_hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}void SmoothFoamVoronoi_jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=SmoothFoamVoronoi_jenkins_rot(c,4u);c+=b;b-=a;b ^=SmoothFoamVoronoi_jenkins_rot(a,6u);a+=c;c-=b;c ^=SmoothFoamVoronoi_jenkins_rot(b,8u);b+=a;a-=c;a ^=SmoothFoamVoronoi_jenkins_rot(c,16u);c+=b;b-=a;b ^=SmoothFoamVoronoi_jenkins_rot(a,19u);a+=c;c-=b;c ^=SmoothFoamVoronoi_jenkins_rot(b,4u);b+=a;}uint SmoothFoamVoronoi_hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;SmoothFoamVoronoi_jenkins_mix(a,b,c);a+=kw;SmoothFoamVoronoi_jenkins_final(a,b,c);return c;}float SmoothFoamVoronoi_hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(SmoothFoamVoronoi_hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float SmoothFoamVoronoi_hash_vec4_to_float(vec4 k){return SmoothFoamVoronoi_hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec3 SmoothFoamVoronoi_hash_vec3_to_vec3(vec3 k){return vec3(SmoothFoamVoronoi_hash_vec3_to_float(k),SmoothFoamVoronoi_hash_vec4_to_float(vec4(k,1.0)),SmoothFoamVoronoi_hash_vec4_to_float(vec4(k,2.0)));}float SmoothFoamVoronoi_voronoi_smooth_f1_3d_full(vec3 coord,float smoothness,float randomness){vec3 cellPosition_f=floor(coord);vec3 localPosition=coord-cellPosition_f;float smoothDistance=0.0;float h=-1.0;vec3 targetOffset=vec3(0.0);float weightSum=0.0;vec3 weightedColor=vec3(0.0);for(int k=-2;k<=2;k++){for(int j=-2;j<=2;j++){for(int i=-2;i<=2;i++){vec3 cellOffset=vec3(float(i),float(j),float(k));vec3 pointPosition=cellOffset+SmoothFoamVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset)*randomness;float distanceToPoint=distance(pointPosition,localPosition);float mask=float(h==-1.0);h=mix(smoothstep(0.0,1.0,0.5+0.5*(smoothDistance-distanceToPoint)/smoothness),1.0,mask);float correctionFactor=smoothness*h*(1.0-h);smoothDistance=mix(smoothDistance,distanceToPoint,h)-correctionFactor;float weight=1.0-smoothstep(0.0,smoothness,distanceToPoint);vec3 cellColor=SmoothFoamVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset);weightedColor+=cellColor*weight;weightSum+=weight;}}}return smoothDistance;}float SmoothFoamVoronoi(vec3 coord){float amplitude=1.0;float max_amplitude=0.0;float scale=130.0;float randomness=1.0;float smoothness=1.0;float output_distance=0.0;vec3 output_color=vec3(0.0);vec4 output_position=vec4(0.0);return SmoothFoamVoronoi_voronoi_smooth_f1_3d_full(coord*scale,smoothness,randomness);}
#include <fog_pars_vertex>
uniform float uTime;attribute vec4 tangent;varying vec2 vUv;varying vec3 vPosition;varying float vBubblesNoise;varying float vFoamNoise;varying float vBaseVoronoi;varying vec3 vLight;vec3 getDisplacement(vec3 position,vec3 normal,float uTime,float noise){vec3 newPosition=position;float repeat=0.6;vec2 correctedUv=fract(uv*repeat);float left=1.0-smoothstep(0.015,0.03,correctedUv.x);vec2 uvRot=vec2(correctedUv.x*cos(-3.14/6.0)-correctedUv.y*sin(-3.14/6.0),correctedUv.x*sin(-3.14/6.0)+correctedUv.y*cos(-3.14/6.0));float right=smoothstep(0.65,0.66,uvRot.x);float bottom=smoothstep(0.41,0.43,correctedUv.y);float affectedPositionMask=1.0-(left+right+bottom);return normal*noise*0.03*correctedUv.y*affectedPositionMask;}void main(){vBubblesNoise=BubblesNoise(uv,uTime);float foamNoise=FoamNoise(uv,uTime);vec3 mixed=mix(vec3(uv.x*1.4,uv.y*0.8-uTime*0.015,2.0-uTime*0.015),vec3(foamNoise*0.05),0.06);float foamVoronoi=FoamVoronoi(mixed);float smoothFoamVoronoi=SmoothFoamVoronoi(mixed);vFoamNoise=foamVoronoi-smoothFoamVoronoi;vec2 distortion=mix(uv,vec2(vBubblesNoise),0.03);vBaseVoronoi=BaseVoronoi(distortion,uTime);float noise=SimplexCellular3D(position*20.0+uTime);vec3 displacement=getDisplacement(position,normal,uTime,noise);vec3 newPosition=position+displacement;vec3 normalizedTangent=normalize(tangent.xyz);vec3 biTangent=normalize(cross(normal,normalizedTangent.xyz));float shift=0.2;vec3 positionA=newPosition+normalizedTangent.xyz*shift;vec3 positionB=newPosition+biTangent*shift;positionA+=getDisplacement(positionA,normal,uTime,noise);positionB+=getDisplacement(positionB,normal,uTime,noise);vec3 toA=normalize(positionA-newPosition);vec3 toB=normalize(positionB-newPosition);vec3 newNormal=cross(toA,toB);vec4 modelPosition=modelMatrix*vec4(newPosition,1.0);vec4 mvPosition=viewMatrix*modelPosition;vec4 projectedPosition=projectionMatrix*mvPosition;gl_Position=projectedPosition;vUv=uv;vPosition=newPosition;
#include <fog_vertex>
}`,WM=`#include <fog_pars_fragment>
uniform float uTime;uniform vec3 uMidColor;uniform vec3 uTopColor;uniform vec3 uBaseColor;varying vec2 vUv;varying float vBubblesNoise;varying float vFoamNoise;varying float vBaseVoronoi;void main(){float brightStrength=10.0;float noise=vBubblesNoise;float voronoi=vBaseVoronoi;vec3 color=vec3(0.0,0.0,1.0);float repeat=0.6;vec2 uv=vUv*repeat;vec2 center=vec2(0.22,0.20);float dist=distance(uv,center);float radius=0.085;float fading=0.06;float solid=smoothstep(radius*0.75,radius*0.75-fading,dist);float firstMask=smoothstep(radius,radius-fading,dist);firstMask*=solid+voronoi;firstMask=step(0.6,firstMask);vec3 depth=uBaseColor*firstMask;color=depth;radius=0.15;solid=smoothstep(radius*0.75,radius*0.75-fading,dist);float secondMask=smoothstep(radius,radius-fading,dist);secondMask*=solid+(1.0-voronoi);secondMask=step(0.5,secondMask);depth=uTopColor*secondMask*1.45;color+=(1.0-firstMask)*depth;radius=0.225;solid=smoothstep(radius*0.75,radius*0.75-fading,dist);float thirdMask=smoothstep(radius,radius-fading,dist);thirdMask*=solid+(1.0-voronoi);thirdMask=step(0.5,thirdMask);depth=uTopColor*thirdMask;color+=(1.0-secondMask)*depth;color+=(1.0-thirdMask)*uTopColor*1.45;vec3 mixAttempt=mix(vec3(uv.x,uv.y,0.0),vec3(noise),0.275);float bubblesVoronoi=voronoi;center=vec2(0.5,0.28);vec2 aspect=vec2(0.35,0.9);vec2 bubbleMaskBase=(uv-center)*aspect;float bubblesMask=pow(length(bubbleMaskBase),1.9);bubblesMask=pow(smoothstep(0.085,0.0,bubblesMask),2.0);float initialMask=bubblesMask;bubblesMask*=noise;bubblesMask=1.0-step(bubblesMask,0.3);float bubblesShape=step(bubblesVoronoi*mixAttempt.z,0.05);float bubbles=bubblesShape*bubblesMask;color+=bubbles*uTopColor*secondMask;radius=0.13;fading=0.09;float foamMask=smoothstep(radius,radius-fading,dist);float foam=vFoamNoise;float maskedFoam=foam*foamMask;float finalMaskedFoam=step(0.40,maskedFoam);color=color*(1.0-finalMaskedFoam)+finalMaskedFoam;finalMaskedFoam=smoothstep(0.40,0.45,maskedFoam);color+=finalMaskedFoam*brightStrength;float reflects=step(0.36,foam*voronoi*(1.0-firstMask));color=color*(1.0-reflects)+reflects;reflects=smoothstep(0.36,0.43,foam*voronoi*(1.0-firstMask));color+=reflects*brightStrength;gl_FragColor=vec4(color,1.0*0.75);
#include <fog_fragment>
#include <tonemapping_fragment>
#include <colorspace_fragment>
}`,GM=`vec4 SGPP_coord_prepare(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 SGPP_coord_prepare(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 SGPP_permute(vec4 x){return fract(x*((34.0/289.0)*x+(1.0/289.0)))*289.0;}vec4 SGPP_resolve(vec4 x){return fract(x*(7.0/288.0));}vec4 SGPP_hash_2D(vec2 gridcell){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));return SGPP_resolve(SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww));}void SGPP_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){vec4 hash_coord=SGPP_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));hash_0=SGPP_permute(SGPP_permute(hash_coord.xzxz)+hash_coord.yyww);hash_1=SGPP_resolve(SGPP_permute(hash_0));hash_0=SGPP_resolve(hash_0);}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell.zzzz));highz_hash=SGPP_resolve(SGPP_permute(highz_hash+gridcell_inc1.zzzz));}void SGPP_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){vec3 coords0=gridcell.xyz-floor(gridcell.xyz*(1.0/289.0))*289.0;vec3 coords3=step(coords0,vec3(287.5))*(coords0+1.0);vec3 coords1=mix(coords0,coords3,v1_mask);vec3 coords2=mix(coords0,coords3,v2_mask);hash_2=SGPP_permute(SGPP_permute(SGPP_permute(vec4(coords0.x,coords1.x,coords2.x,coords3.x))+vec4(coords0.y,coords1.y,coords2.y,coords3.y))+vec4(coords0.z,coords1.z,coords2.z,coords3.z));hash_0=SGPP_resolve(hash_2);hash_1=SGPP_resolve(hash_2=SGPP_permute(hash_2));hash_2=SGPP_resolve(SGPP_permute(hash_2));}void SGPP_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){gridcell=SGPP_coord_prepare(gridcell);vec3 gridcell_inc1=step(gridcell,vec3(287.5))*(gridcell+1.0);highz_hash_2=SGPP_permute(SGPP_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy)+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash_0=SGPP_resolve(lowz_hash_2=SGPP_permute(highz_hash_2+gridcell.zzzz));highz_hash_0=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2+gridcell_inc1.zzzz));lowz_hash_1=SGPP_resolve(lowz_hash_2=SGPP_permute(lowz_hash_2));highz_hash_1=SGPP_resolve(highz_hash_2=SGPP_permute(highz_hash_2));lowz_hash_2=SGPP_resolve(SGPP_permute(lowz_hash_2));highz_hash_2=SGPP_resolve(SGPP_permute(highz_hash_2));}vec4 BBS_coord_prepare(vec4 x){return x-floor(x*(1.0/61.0))*61.0;}vec3 BBS_coord_prepare(vec3 x){return x-floor(x*(1.0/61.0))*61.0;}vec4 BBS_permute(vec4 x){return fract(x*x*(1.0/61.0))*61.0;}vec4 BBS_permute_and_resolve(vec4 x){return fract(x*x*(1.0/61.0));}vec4 BBS_hash_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);return BBS_permute_and_resolve(p+hash_coord.yyww);}vec4 BBS_hash_hq_2D(vec2 gridcell){vec4 hash_coord=BBS_coord_prepare(vec4(gridcell.xy,gridcell.xy+1.0));vec4 p=BBS_permute(hash_coord.xzxz);p=BBS_permute(p+hash_coord.yyww);return BBS_permute_and_resolve(p+hash_coord.xzxz);}void BBS_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const float DOMAIN=60.0;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 p=BBS_permute(vec2(gridcell.x,gridcell_inc1.x).xyxy);p=BBS_permute(p+vec2(gridcell.y,gridcell_inc1.y).xxyy);lowz_hash=BBS_permute_and_resolve(p+gridcell.zzzz);highz_hash=BBS_permute_and_resolve(p+gridcell_inc1.zzzz);}vec4 FAST32_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const float SOMELARGEFLOAT=951.135664;vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec2 SOMELARGEFLOATS=vec2(951.135664,642.949883);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));}void FAST32_hash_2D(vec2 gridcell,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec3 SOMELARGEFLOATS=vec3(951.135664,642.949883,803.202459);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;hash_0=fract(P*(1.0/SOMELARGEFLOATS.x));hash_1=fract(P*(1.0/SOMELARGEFLOATS.y));hash_2=fract(P*(1.0/SOMELARGEFLOATS.z));}vec4 FAST32_hash_2D_Cell(vec2 gridcell){const vec2 OFFSET=vec2(26.0,161.0);const float DOMAIN=71.0;const vec4 SOMELARGEFLOATS=vec4(951.135664,642.949883,803.202459,986.973274);vec2 P=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;P+=OFFSET.xy;P*=P;return fract((P.x*P.y)*(1.0/SOMELARGEFLOATS.xyzw));}vec4 FAST32_hash_3D_Cell(vec3 gridcell){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;gridcell.xy+=OFFSET.xy;gridcell.xy*=gridcell.xy;return fract((gridcell.x*gridcell.y)*(1.0/(SOMELARGEFLOATS+gridcell.zzzz*ZINC)));}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash,out vec4 highz_hash){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;highz_hash.xy=vec2(1.0/(SOMELARGEFLOAT+vec2(gridcell.z,gridcell_inc1.z)*ZINC));lowz_hash=fract(P*highz_hash.xxxx);highz_hash=fract(P*highz_hash.yyyy);}void FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask,out vec4 hash_0,out vec4 hash_1,out vec4 hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec3 lowz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mods=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));v1_mask=(v1_mask.z<0.5)? lowz_mods : highz_mods;v2_mask=(v2_mask.z<0.5)? lowz_mods : highz_mods;hash_0=fract(P*vec4(lowz_mods.x,v1_mask.x,v2_mask.x,highz_mods.x));hash_1=fract(P*vec4(lowz_mods.y,v1_mask.y,v2_mask.y,highz_mods.y));hash_2=fract(P*vec4(lowz_mods.z,v1_mask.z,v2_mask.z,highz_mods.z));}vec4 FAST32_hash_3D(vec3 gridcell,vec3 v1_mask,vec3 v2_mask){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const float SOMELARGEFLOAT=635.298681;const float ZINC=48.500388;gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;vec4 V1xy_V2xy=mix(P.xyxy,P.zwzw,vec4(v1_mask.xy,v2_mask.xy));P=vec4(P.x,V1xy_V2xy.xz,P.z)*vec4(P.y,V1xy_V2xy.yw,P.w);vec2 V1z_V2z=vec2(v1_mask.z<0.5 ? gridcell.z : gridcell_inc1.z,v2_mask.z<0.5 ? gridcell.z : gridcell_inc1.z);vec4 mod_vals=vec4(1.0/(SOMELARGEFLOAT+vec4(gridcell.z,V1z_V2z,gridcell_inc1.z)*ZINC));return fract(P*mod_vals);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec3 SOMELARGEFLOATS=vec3(635.298681,682.357502,668.926525);const vec3 ZINC=vec3(48.500388,65.294118,63.934599);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;vec3 lowz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell.zzz*ZINC.xyz));vec3 highz_mod=vec3(1.0/(SOMELARGEFLOATS.xyz+gridcell_inc1.zzz*ZINC.xyz));lowz_hash_0=fract(P*lowz_mod.xxxx);highz_hash_0=fract(P*highz_mod.xxxx);lowz_hash_1=fract(P*lowz_mod.yyyy);highz_hash_1=fract(P*highz_mod.yyyy);lowz_hash_2=fract(P*lowz_mod.zzzz);highz_hash_2=fract(P*highz_mod.zzzz);}void FAST32_hash_3D(vec3 gridcell,out vec4 lowz_hash_0,out vec4 lowz_hash_1,out vec4 lowz_hash_2,out vec4 lowz_hash_3,out vec4 highz_hash_0,out vec4 highz_hash_1,out vec4 highz_hash_2,out vec4 highz_hash_3){const vec2 OFFSET=vec2(50.0,161.0);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(635.298681,682.357502,668.926525,588.255119);const vec4 ZINC=vec4(48.500388,65.294118,63.934599,63.279683);gridcell.xyz=gridcell.xyz-floor(gridcell.xyz*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);vec4 P=vec4(gridcell.xy,gridcell_inc1.xy)+OFFSET.xyxy;P*=P;P=P.xzxz*P.yyww;lowz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell.zzzz*ZINC.xyzw));highz_hash_3.xyzw=vec4(1.0/(SOMELARGEFLOATS.xyzw+gridcell_inc1.zzzz*ZINC.xyzw));lowz_hash_0=fract(P*lowz_hash_3.xxxx);highz_hash_0=fract(P*highz_hash_3.xxxx);lowz_hash_1=fract(P*lowz_hash_3.yyyy);highz_hash_1=fract(P*highz_hash_3.yyyy);lowz_hash_2=fract(P*lowz_hash_3.zzzz);highz_hash_2=fract(P*highz_hash_3.zzzz);lowz_hash_3=fract(P*lowz_hash_3.wwww);highz_hash_3=fract(P*highz_hash_3.wwww);}vec4 FAST32_2_hash_2D(vec2 gridcell){const vec2 OFFSET=vec2(403.839172,377.242706);const float DOMAIN=69.0;const float SOMELARGEFLOAT=32745.708984;const vec2 SCALE=vec2(2.009842,1.372549);vec4 P=vec4(gridcell.xy,gridcell.xy+1.0);P=P-floor(P*(1.0/DOMAIN))*DOMAIN;P=(P*SCALE.xyxy)+OFFSET.xyxy;P*=P;return fract(P.xzxz*P.yyww*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_3D(vec3 gridcell,out vec4 z0_hash,out vec4 z1_hash){const vec3 OFFSET=vec3(55.882355,63.167774,52.941177);const float DOMAIN=69.0;const float SOMELARGEFLOAT=69412.070313;const vec3 SCALE=vec3(0.235142,0.205890,0.216449);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec3 gridcell_inc1=step(gridcell,vec3(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);z0_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell.zzzz*(1.0/SOMELARGEFLOAT));z1_hash=fract(x0y0_x1y0_x0y1_x1y1*gridcell_inc1.zzzz*(1.0/SOMELARGEFLOAT));}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash,out vec4 z1w0_hash,out vec4 z0w1_hash,out vec4 z1w1_hash){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const float SOMELARGEFLOAT=47165.636719;const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww)*(1.0/SOMELARGEFLOAT);z0w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx);z1w0_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy);z0w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz);z1w1_hash=fract(x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww);}void FAST32_2_hash_4D(vec4 gridcell,out vec4 z0w0_hash_0,out vec4 z0w0_hash_1,out vec4 z0w0_hash_2,out vec4 z0w0_hash_3,out vec4 z1w0_hash_0,out vec4 z1w0_hash_1,out vec4 z1w0_hash_2,out vec4 z1w0_hash_3,out vec4 z0w1_hash_0,out vec4 z0w1_hash_1,out vec4 z0w1_hash_2,out vec4 z0w1_hash_3,out vec4 z1w1_hash_0,out vec4 z1w1_hash_1,out vec4 z1w1_hash_2,out vec4 z1w1_hash_3){const vec4 OFFSET=vec4(16.841230,18.774548,16.873274,13.664607);const float DOMAIN=69.0;const vec4 SOMELARGEFLOATS=vec4(56974.746094,47165.636719,55049.667969,49901.273438);const vec4 SCALE=vec4(0.102007,0.114473,0.139651,0.084550);gridcell=gridcell-floor(gridcell*(1.0/DOMAIN))*DOMAIN;vec4 gridcell_inc1=step(gridcell,vec4(DOMAIN-1.5))*(gridcell+1.0);gridcell=(gridcell*SCALE)+OFFSET;gridcell_inc1=(gridcell_inc1*SCALE)+OFFSET;gridcell*=gridcell;gridcell_inc1*=gridcell_inc1;vec4 x0y0_x1y0_x0y1_x1y1=vec4(gridcell.x,gridcell_inc1.x,gridcell.x,gridcell_inc1.x)*vec4(gridcell.yy,gridcell_inc1.yy);vec4 z0w0_z1w0_z0w1_z1w1=vec4(gridcell.z,gridcell_inc1.z,gridcell.z,gridcell_inc1.z)*vec4(gridcell.ww,gridcell_inc1.ww);vec4 hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.xxxx;z0w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.yyyy;z1w0_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w0_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w0_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w0_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.zzzz;z0w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z0w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z0w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z0w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));hashval=x0y0_x1y0_x0y1_x1y1*z0w0_z1w0_z0w1_z1w1.wwww;z1w1_hash_0=fract(hashval*(1.0/SOMELARGEFLOATS.x));z1w1_hash_1=fract(hashval*(1.0/SOMELARGEFLOATS.y));z1w1_hash_2=fract(hashval*(1.0/SOMELARGEFLOATS.z));z1w1_hash_3=fract(hashval*(1.0/SOMELARGEFLOATS.w));}float Interpolation_C1(float x){return x*x*(3.0-2.0*x);}vec2 Interpolation_C1(vec2 x){return x*x*(3.0-2.0*x);}vec3 Interpolation_C1(vec3 x){return x*x*(3.0-2.0*x);}vec4 Interpolation_C1(vec4 x){return x*x*(3.0-2.0*x);}float Interpolation_C2(float x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec2 Interpolation_C2(vec2 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec3 Interpolation_C2(vec3 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2(vec4 x){return x*x*x*(x*(x*6.0-15.0)+10.0);}vec4 Interpolation_C2_InterpAndDeriv(vec2 x){return x.xyxy*x.xyxy*(x.xyxy*(x.xyxy*(x.xyxy*vec2(6.0,0.0).xxyy+vec2(-15.0,30.0).xxyy)+vec2(10.0,-60.0).xxyy)+vec2(0.0,30.0).xxyy);}vec3 Interpolation_C2_Deriv(vec3 x){return x*x*(x*(x*30.0-60.0)+30.0);}float Interpolation_C2_Fast(float x){float x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec2 Interpolation_C2_Fast(vec2 x){vec2 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec3 Interpolation_C2_Fast(vec3 x){vec3 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}vec4 Interpolation_C2_Fast(vec4 x){vec4 x3=x*x*x;return(7.0+(x3-7.0)*x)*x3;}float Interpolation_C3(float x){float xsq=x*x;float xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec2 Interpolation_C3(vec2 x){vec2 xsq=x*x;vec2 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec3 Interpolation_C3(vec3 x){vec3 xsq=x*x;vec3 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}vec4 Interpolation_C3(vec4 x){vec4 xsq=x*x;vec4 xsqsq=xsq*xsq;return xsqsq*(25.0-48.0*x+xsq*(25.0-xsqsq));}float Falloff_Xsq_C1(float xsq){xsq=1.0-xsq;return xsq*xsq;}float Falloff_Xsq_C2(float xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}vec4 Falloff_Xsq_C2(vec4 xsq){xsq=1.0-xsq;return xsq*xsq*xsq;}float Value2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec2 blend=Interpolation_C2(Pf);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(hash,blend2.zxzx*blend2.wwyy);}float Value3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Value4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 z0w0_hash;vec4 z1w0_hash;vec4 z0w1_hash;vec4 z1w1_hash;FAST32_2_hash_4D(Pi,z0w0_hash,z1w0_hash,z0w1_hash,z1w1_hash);vec4 blend=Interpolation_C2(Pf);vec4 res0=z0w0_hash+(z0w1_hash-z0w0_hash)*blend.wwww;vec4 res1=z1w0_hash+(z1w1_hash-z1w0_hash)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0-blend.xy);return dot(res0,blend.zxzx*blend.wwyy);}float Perlin2D(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);
#if 1
vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);
#if 1
grad_results*=1.4142135623730950488016887242097;vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#else
grad_results*=2.3703703703703703703703703703704;vec4 vecs_len_sq=Pf_Pfmin1*Pf_Pfmin1;vecs_len_sq=vecs_len_sq.xzxz+vecs_len_sq.yyww;return dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq)),grad_results);
#endif
#else
vec4 hash=FAST32_hash_2D(Pi);hash-=0.5;vec4 grad_results=Pf_Pfmin1.xzxz*sign(hash)+Pf_Pfmin1.yyww*sign(abs(hash)-0.25);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);
#endif
}float Perlin3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;
#if 1
vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);
#if 1
vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);final*=1.1547005383792515290182975610039;return final;
#else
Pf*=Pf;Pf_min1*=Pf_min1;vec4 vecs_len_sq=vec4(Pf.x,Pf_min1.x,Pf.x,Pf_min1.x)+vec4(Pf.yy,Pf_min1.yy);float final=dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf.zzzz)),grad_results_0)+dot(Falloff_Xsq_C2(min(vec4(1.0),vecs_len_sq+Pf_min1.zzzz)),grad_results_1);final*=2.3703703703703703703703703703704;return final;
#endif
#else
vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);hash_lowz-=0.5;vec4 grad_results_0_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_lowz);hash_lowz=abs(hash_lowz)-0.25;vec4 grad_results_0_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_lowz);vec4 grad_results_0_2=Pf.zzzz*sign(abs(hash_lowz)-0.125);vec4 grad_results_0=grad_results_0_0+grad_results_0_1+grad_results_0_2;hash_highz-=0.5;vec4 grad_results_1_0=vec2(Pf.x,Pf_min1.x).xyxy*sign(hash_highz);hash_highz=abs(hash_highz)-0.25;vec4 grad_results_1_1=vec2(Pf.y,Pf_min1.y).xxyy*sign(hash_highz);vec4 grad_results_1_2=Pf_min1.zzzz*sign(abs(hash_highz)-0.125);vec4 grad_results_1=grad_results_1_0+grad_results_1_1+grad_results_1_2;vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy)*(2.0/3.0);
#endif
}float Perlin4D(vec4 P){vec4 Pi=floor(P);vec4 Pf=P-Pi;vec4 Pf_min1=Pf-1.0;vec4 lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3;vec4 highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3;vec4 lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3;vec4 highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3;FAST32_2_hash_4D(Pi,lowz_loww_hash_0,lowz_loww_hash_1,lowz_loww_hash_2,lowz_loww_hash_3,highz_loww_hash_0,highz_loww_hash_1,highz_loww_hash_2,highz_loww_hash_3,lowz_highw_hash_0,lowz_highw_hash_1,lowz_highw_hash_2,lowz_highw_hash_3,highz_highw_hash_0,highz_highw_hash_1,highz_highw_hash_2,highz_highw_hash_3);lowz_loww_hash_0-=0.49999;lowz_loww_hash_1-=0.49999;lowz_loww_hash_2-=0.49999;lowz_loww_hash_3-=0.49999;highz_loww_hash_0-=0.49999;highz_loww_hash_1-=0.49999;highz_loww_hash_2-=0.49999;highz_loww_hash_3-=0.49999;lowz_highw_hash_0-=0.49999;lowz_highw_hash_1-=0.49999;lowz_highw_hash_2-=0.49999;lowz_highw_hash_3-=0.49999;highz_highw_hash_0-=0.49999;highz_highw_hash_1-=0.49999;highz_highw_hash_2-=0.49999;highz_highw_hash_3-=0.49999;vec4 grad_results_lowz_loww=inversesqrt(lowz_loww_hash_0*lowz_loww_hash_0+lowz_loww_hash_1*lowz_loww_hash_1+lowz_loww_hash_2*lowz_loww_hash_2+lowz_loww_hash_3*lowz_loww_hash_3);grad_results_lowz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_loww_hash_1+Pf.zzzz*lowz_loww_hash_2+Pf.wwww*lowz_loww_hash_3);vec4 grad_results_highz_loww=inversesqrt(highz_loww_hash_0*highz_loww_hash_0+highz_loww_hash_1*highz_loww_hash_1+highz_loww_hash_2*highz_loww_hash_2+highz_loww_hash_3*highz_loww_hash_3);grad_results_highz_loww*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_loww_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_loww_hash_1+Pf_min1.zzzz*highz_loww_hash_2+Pf.wwww*highz_loww_hash_3);vec4 grad_results_lowz_highw=inversesqrt(lowz_highw_hash_0*lowz_highw_hash_0+lowz_highw_hash_1*lowz_highw_hash_1+lowz_highw_hash_2*lowz_highw_hash_2+lowz_highw_hash_3*lowz_highw_hash_3);grad_results_lowz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*lowz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*lowz_highw_hash_1+Pf.zzzz*lowz_highw_hash_2+Pf_min1.wwww*lowz_highw_hash_3);vec4 grad_results_highz_highw=inversesqrt(highz_highw_hash_0*highz_highw_hash_0+highz_highw_hash_1*highz_highw_hash_1+highz_highw_hash_2*highz_highw_hash_2+highz_highw_hash_3*highz_highw_hash_3);grad_results_highz_highw*=(vec2(Pf.x,Pf_min1.x).xyxy*highz_highw_hash_0+vec2(Pf.y,Pf_min1.y).xxyy*highz_highw_hash_1+Pf_min1.zzzz*highz_highw_hash_2+Pf_min1.wwww*highz_highw_hash_3);vec4 blend=Interpolation_C2(Pf);vec4 res0=grad_results_lowz_loww+(grad_results_lowz_highw-grad_results_lowz_loww)*blend.wwww;vec4 res1=grad_results_highz_loww+(grad_results_highz_highw-grad_results_highz_loww)*blend.wwww;res0=res0+(res1-res0)*blend.zzzz;blend.zw=vec2(1.0)-blend.xy;return dot(res0,blend.zxzx*blend.wwyy);}float ValuePerlin2D(vec2 P,float blend_val){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_value,hash_x,hash_y;FAST32_hash_2D(Pi,hash_value,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results*=1.4142135623730950488016887242097;grad_results=mix((hash_value*2.0-1.0),grad_results,blend_val);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));return dot(grad_results,blend2.zxzx*blend2.wwyy);}float ValuePerlin3D(vec3 P,float blend_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hash_value0,hashx0,hashy0,hashz0,hash_value1,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0*=1.1547005383792515290182975610039;grad_results_1*=1.1547005383792515290182975610039;grad_results_0=mix((hash_value0*2.0-1.0),grad_results_0,blend_val);grad_results_1=mix((hash_value1*2.0-1.0),grad_results_1,blend_val);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));return dot(res0,blend2.zxzx*blend2.wwyy);}float Cubist2D(vec2 P,vec2 range_clamp){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y,hash_value;FAST32_hash_2D(Pi,hash_x,hash_y,hash_value);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);grad_results=(hash_value-0.5)*(1.0/grad_results);vec2 blend=Interpolation_C2(Pf_Pfmin1.xy);vec4 blend2=vec4(blend,vec2(1.0-blend));float final=dot(grad_results,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}float Cubist3D(vec3 P,vec2 range_clamp){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hash_value0,hashx1,hashy1,hashz1,hash_value1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 grad_results_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0);vec4 grad_results_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1)*(vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1);grad_results_0=(hash_value0-0.5)*(1.0/grad_results_0);grad_results_1=(hash_value1-0.5)*(1.0/grad_results_1);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(grad_results_0,grad_results_1,blend.z);vec4 blend2=vec4(blend.xy,vec2(1.0-blend.xy));float final=dot(res0,blend2.zxzx*blend2.wwyy);return clamp((final-range_clamp.x)*range_clamp.y,0.0,1.0);}vec4 Cellular_weight_samples(vec4 samples){samples=samples*2.0-1.0;return(samples*samples*samples)-sign(samples);}float Cellular2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);
#if 1
const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x=hash_x*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y=hash_y*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;d.xy=min(d.xy,d.zw);return min(d.x,d.y)*(1.0/1.125);}float Cellular3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);
#if 1
const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);
#else
const float JITTER_WINDOW=0.4;hash_x0=hash_x0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y0=hash_y0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_x1=hash_x1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,1.0-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_y1=hash_y1*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);hash_z0=hash_z0*JITTER_WINDOW*2.0+vec4(-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW,-JITTER_WINDOW);hash_z1=hash_z1*JITTER_WINDOW*2.0+vec4(1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW,1.0-JITTER_WINDOW);
#endif
vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;d1=min(d1,d2);d1.xy=min(d1.xy,d1.wz);return min(d1.x,d1.y)*(9.0/12.0);}/*float SparseConvolution2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;const float RADIUS=1.0-JITTER_WINDOW;d*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d,vec4(1.0))),vec4(1.0));}float SparseConvolution3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;const float RADIUS=(1.0-JITTER_WINDOW);d1*=((1.0/RADIUS)*(1.0/RADIUS));d2*=((1.0/RADIUS)*(1.0/RADIUS));return dot(Falloff_Xsq_C2(min(d1,vec4(1.0)))+Falloff_Xsq_C2(min(d2,vec4(1.0))),vec4(1.0));}*/float PolkaDot2D(vec2 P,float radius_low,float radius_high){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.z*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xy*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float PolkaDot3D(vec3 P,float radius_low,float radius_high){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash=FAST32_hash_3D_Cell(Pi);float RADIUS=max(0.0,radius_low+hash.w*(radius_high-radius_low));float VALUE=RADIUS/max(radius_high,radius_low);RADIUS=2.0/RADIUS;Pf*=RADIUS;Pf-=(RADIUS-1.0);Pf+=hash.xyz*(RADIUS-2.0);return Falloff_Xsq_C2(min(dot(Pf,Pf),1.0))*VALUE;}float Stars2D(vec2 P,float probability_threshold,float max_dimness,float two_over_radius){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D_Cell(Pi);float VALUE=1.0-max_dimness*hash.z;Pf*=two_over_radius;Pf-=(two_over_radius-1.0);Pf+=hash.xy*(two_over_radius-2.0);return(hash.w<probability_threshold)?(Falloff_Xsq_C1(min(dot(Pf,Pf),1.0))*VALUE): 0.0;}float SimplexPerlin2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 grad_results=inversesqrt(grad_x*grad_x+grad_y*grad_y)*(grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw));const float FINAL_NORMALIZATION=99.204334582718712976990005025589;vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);m=m*m;return dot(m*m,grad_results)*FINAL_NORMALIZATION;}float SimplexPolkaDot2D(vec2 P,float radius,float max_dimness){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.4494897427831780981972840747059;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec2 v0=(Pi-dot(Pi,vec2(UNSKEWFACTOR))-P);vec4 v0123_x=vec4(0.0,SIMPLEX_POINTS.xyz)+v0.x;vec4 v0123_y=vec4(0.0,SIMPLEX_POINTS.yxz)+v0.y;vec4 hash=FAST32_hash_2D(Pi);radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v0123_x*=radius;v0123_y*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v0123_x*v0123_x+v0123_y*v0123_y));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float SimplexCellular2D(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const float INV_SIMPLEX_TRI_HEIGHT=1.4142135623730950488016887242097;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR)*INV_SIMPLEX_TRI_HEIGHT;P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=(0.10566243270259355887271280487451*INV_SIMPLEX_TRI_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;vec2 p0=((Pi-dot(Pi,vec2(UNSKEWFACTOR)))-P)*INV_SIMPLEX_TRI_HEIGHT;hash_x+=p0.xxxx;hash_y+=p0.yyyy;hash_x.yzw+=SIMPLEX_POINTS.xyz;hash_y.yzw+=SIMPLEX_POINTS.yxz;vec4 distsq=hash_x*hash_x+hash_y*hash_y;vec2 tmp=min(distsq.xy,distsq.zw);return min(tmp.x,tmp.y);}void Simplex3D_GetCornerVectors(vec3 P,out vec3 Pi,out vec3 Pi_1,out vec3 Pi_2,out vec4 v1234_x,out vec4 v1234_y,out vec4 v1234_z){const float SKEWFACTOR=1.0/3.0;const float UNSKEWFACTOR=1.0/6.0;const float SIMPLEX_CORNER_POS=0.5;const float SIMPLEX_PYRAMID_HEIGHT=0.70710678118654752440084436210485;P*=SIMPLEX_PYRAMID_HEIGHT;Pi=floor(P+dot(P,vec3(SKEWFACTOR)));vec3 x0=P-Pi+dot(Pi,vec3(UNSKEWFACTOR));vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;Pi_1=min(g.xyz,l.zxy);Pi_2=max(g.xyz,l.zxy);vec3 x1=x0-Pi_1+UNSKEWFACTOR;vec3 x2=x0-Pi_2+SKEWFACTOR;vec3 x3=x0-SIMPLEX_CORNER_POS;v1234_x=vec4(x0.x,x1.x,x2.x,x3.x);v1234_y=vec4(x0.y,x1.y,x2.y,x3.y);v1234_z=vec4(x0.z,x1.z,x2.z,x3.z);}vec4 Simplex3D_GetSurfletWeights(vec4 v1234_x,vec4 v1234_y,vec4 v1234_z){vec4 surflet_weights=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;surflet_weights=max(0.5-surflet_weights,0.0);return surflet_weights*surflet_weights*surflet_weights;}float SimplexPerlin3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 grad_results=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2)*(hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return dot(Simplex3D_GetSurfletWeights(v1234_x,v1234_y,v1234_z),grad_results)*FINAL_NORMALIZATION;}float SimplexCellular3D(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_x;vec4 hash_y;vec4 hash_z;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_x,hash_y,hash_z);const float INV_SIMPLEX_PYRAMID_HEIGHT=1.4142135623730950488016887242097;const float JITTER_WINDOW=(0.0597865779345250670558198111*INV_SIMPLEX_PYRAMID_HEIGHT);hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW;hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW;hash_z=Cellular_weight_samples(hash_z)*JITTER_WINDOW;v1234_x*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_y*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_z*=INV_SIMPLEX_PYRAMID_HEIGHT;v1234_x+=hash_x;v1234_y+=hash_y;v1234_z+=hash_z;vec4 distsq=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;return min(min(distsq.x,distsq.y),min(distsq.z,distsq.w));}float SimplexPolkaDot3D(vec3 P,float radius,float max_dimness){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash=FAST32_hash_3D(Pi,Pi_1,Pi_2);const float INV_SIMPLEX_TRI_HALF_EDGELEN=2.3094010767585030580365951220078;radius=INV_SIMPLEX_TRI_HALF_EDGELEN/radius;v1234_x*=radius;v1234_y*=radius;v1234_z*=radius;vec4 point_distance=max(vec4(0.0),1.0-(v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z));point_distance=point_distance*point_distance*point_distance;return dot(1.0-hash*max_dimness,point_distance);}float QuinticHermite(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,x,0.0));}vec4 QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 egrad0,vec4 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;}vec4 QuinticHermite(float x,vec2 igrad0,vec2 igrad1,vec2 egrad0,vec2 egrad1){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);return vec4(egrad1,igrad0)*vec4(h123.zz,1.0,1.0)+vec4(egrad0,h123.xx)*vec4(vec2(h123.y+x),(igrad1-igrad0));}void QuinticHermite(float x,vec4 ival0,vec4 ival1,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=ival0+(ival1-ival0)*h123.xxxx+egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}void QuinticHermite(float x,vec4 igrad_x0,vec4 igrad_x1,vec4 igrad_y0,vec4 igrad_y1,vec4 egrad0,vec4 egrad1,out vec4 out_ival,out vec4 out_igrad_x,out vec4 out_igrad_y){const vec3 C0=vec3(-15.0,8.0,7.0);const vec3 C1=vec3(6.0,-3.0,-3.0);const vec3 C2=vec3(10.0,-6.0,-4.0);vec3 h123=(((C0+C1*x)*x)+C2)*(x*x*x);out_ival=egrad0*vec4(h123.y+x)+egrad1*h123.zzzz;out_igrad_x=igrad_x0+(igrad_x1-igrad_x0)*h123.xxxx;out_igrad_y=igrad_y0+(igrad_y1-igrad_y0)*h123.xxxx;}float QuinticHermiteDeriv(float x,float ival0,float ival1,float egrad0,float egrad1){const vec3 C0=vec3(30.0,-15.0,-15.0);const vec3 C1=vec3(-60.0,32.0,28.0);const vec3 C2=vec3(30.0,-18.0,-12.0);vec3 h123=(((C1+C0*x)*x)+C2)*(x*x);return dot(vec3((ival1-ival0),egrad0,egrad1),h123.xyz+vec3(0.0,1.0,0.0));}float Hermite2D(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float Hermite3D(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*FINAL_NORM_VAL;}float ValueHermite2D(vec2 P,float value_scale,float gradient_scale,float normalization_val){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_value,hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_value,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999)*gradient_scale;hash_grady=(hash_grady-0.49999)*gradient_scale;hash_value=(hash_value-0.5)*value_scale;vec4 qh_results=QuinticHermite(Pf.y,vec4(hash_value.xy,hash_gradx.xy),vec4(hash_value.zw,hash_gradx.zw),vec4(hash_grady.xy,0.0,0.0),vec4(hash_grady.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}float ValueHermite3D(vec3 P,float value_scale,float gradient_scale,float normalization_val){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_value0,hash_gradx0,hash_grady0,hash_gradz0,hash_value1,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999)*gradient_scale;hash_grady0=(hash_grady0-0.49999)*gradient_scale;hash_gradz0=(hash_gradz0-0.49999)*gradient_scale;hash_gradx1=(hash_gradx1-0.49999)*gradient_scale;hash_grady1=(hash_grady1-0.49999)*gradient_scale;hash_gradz1=(hash_gradz1-0.49999)*gradient_scale;hash_value0=(hash_value0-0.5)*value_scale;hash_value1=(hash_value1-0.5)*value_scale;vec4 ival_results,igrad_results_x,igrad_results_y;QuinticHermite(Pf.z,hash_value0,hash_value1,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results,igrad_results_x,igrad_results_y);vec4 qh_results=QuinticHermite(Pf.y,vec4(ival_results.xy,igrad_results_x.xy),vec4(ival_results.zw,igrad_results_x.zw),vec4(igrad_results_y.xy,0.0,0.0),vec4(igrad_results_y.zw,0.0,0.0));return QuinticHermite(Pf.x,qh_results.x,qh_results.y,qh_results.z,qh_results.w)*normalization_val;}vec3 Value2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash=FAST32_hash_2D(Pi);vec4 blend=Interpolation_C2_InterpAndDeriv(Pf);vec4 res0=mix(hash.xyxz,hash.zwyw,blend.yyxx);return vec3(res0.x,0.0,0.0)+(res0.yyw-res0.xxz)*blend.xzw;}vec4 Value3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_lowz,hash_highz;FAST32_hash_3D(Pi,hash_lowz,hash_highz);vec3 blend=Interpolation_C2(Pf);vec4 res0=mix(hash_lowz,hash_highz,blend.z);vec4 res1=mix(res0.xyxz,res0.zwyw,blend.yyxx);vec4 res3=mix(vec4(hash_lowz.xy,hash_highz.xy),vec4(hash_lowz.zw,hash_highz.zw),blend.y);vec2 res4=mix(res3.xz,res3.yw,blend.x);return vec4(res1.x,0.0,0.0,0.0)+(vec4(res1.yyw,res4.y)-vec4(res1.xxz,res4.x))*vec4(blend.x,Interpolation_C2_Deriv(Pf));}vec3 Perlin2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 dotval=(grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww);vec3 dotval0_grad0=vec3(dotval.x,grad_x.x,grad_y.x);vec3 dotval1_grad1=vec3(dotval.y,grad_x.y,grad_y.y);vec3 dotval2_grad2=vec3(dotval.z,grad_x.z,grad_y.z);vec3 dotval3_grad3=vec3(dotval.w,grad_x.w,grad_y.w);vec3 k0_gk0=dotval1_grad1-dotval0_grad0;vec3 k1_gk1=dotval2_grad2-dotval0_grad0;vec3 k2_gk2=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 blend=Interpolation_C2_InterpAndDeriv(Pf_Pfmin1.xy);vec3 results=dotval0_grad0+blend.x*k0_gk0+blend.y*(k1_gk1+blend.x*k2_gk2);results.yz+=blend.zw*(vec2(k0_gk0.x,k1_gk1.x)+blend.yx*k2_gk2.xx);return results*1.4142135623730950488016887242097;}vec4 Perlin3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 dotval_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 dotval_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec4 dotval0_grad0=vec4(dotval_0.x,grad_x0.x,grad_y0.x,grad_z0.x);vec4 dotval1_grad1=vec4(dotval_0.y,grad_x0.y,grad_y0.y,grad_z0.y);vec4 dotval2_grad2=vec4(dotval_0.z,grad_x0.z,grad_y0.z,grad_z0.z);vec4 dotval3_grad3=vec4(dotval_0.w,grad_x0.w,grad_y0.w,grad_z0.w);vec4 dotval4_grad4=vec4(dotval_1.x,grad_x1.x,grad_y1.x,grad_z1.x);vec4 dotval5_grad5=vec4(dotval_1.y,grad_x1.y,grad_y1.y,grad_z1.y);vec4 dotval6_grad6=vec4(dotval_1.z,grad_x1.z,grad_y1.z,grad_z1.z);vec4 dotval7_grad7=vec4(dotval_1.w,grad_x1.w,grad_y1.w,grad_z1.w);vec4 k0_gk0=dotval1_grad1-dotval0_grad0;vec4 k1_gk1=dotval2_grad2-dotval0_grad0;vec4 k2_gk2=dotval4_grad4-dotval0_grad0;vec4 k3_gk3=dotval3_grad3-dotval2_grad2-k0_gk0;vec4 k4_gk4=dotval5_grad5-dotval4_grad4-k0_gk0;vec4 k5_gk5=dotval6_grad6-dotval4_grad4-k1_gk1;vec4 k6_gk6=(dotval7_grad7-dotval6_grad6)-(dotval5_grad5-dotval4_grad4)-k3_gk3;vec3 blend=Interpolation_C2(Pf);vec3 blendDeriv=Interpolation_C2_Deriv(Pf);float u=blend.x;float v=blend.y;float w=blend.z;vec4 result=dotval0_grad0+u*(k0_gk0+v*k3_gk3)+v*(k1_gk1+w*k5_gk5)+w*(k2_gk2+u*(k4_gk4+v*k6_gk6));result.y+=dot(vec4(k0_gk0.x,k3_gk3.x*v,vec2(k4_gk4.x,k6_gk6.x*v)*w),vec4(blendDeriv.x));result.z+=dot(vec4(k1_gk1.x,k3_gk3.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*w),vec4(blendDeriv.y));result.w+=dot(vec4(k2_gk2.x,k4_gk4.x*u,vec2(k5_gk5.x,k6_gk6.x*u)*v),vec4(blendDeriv.z));result*=1.1547005383792515290182975610039;return result;}vec3 PerlinSurflet2D_Deriv(vec2 P){vec2 Pi=floor(P);vec4 Pf_Pfmin1=P.xyxy-vec4(Pi,Pi+1.0);vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec4 grad_x=hash_x-0.49999;vec4 grad_y=hash_y-0.49999;vec4 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec4 grad_results=grad_x*Pf_Pfmin1.xzxz+grad_y*Pf_Pfmin1.yyww;vec4 m=Pf_Pfmin1*Pf_Pfmin1;m=m.xzxz+m.yyww;m=max(1.0-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,Pf_Pfmin1.xzxz)+dot(m3,grad_x);float yderiv=dot(temp,Pf_Pfmin1.yyww)+dot(m3,grad_y);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec3(dot(m3,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 PerlinSurflet3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec3 Pf_min1=Pf-1.0;vec4 hashx0,hashy0,hashz0,hashx1,hashy1,hashz1;FAST32_hash_3D(Pi,hashx0,hashy0,hashz0,hashx1,hashy1,hashz1);vec4 grad_x0=hashx0-0.49999;vec4 grad_y0=hashy0-0.49999;vec4 grad_z0=hashz0-0.49999;vec4 norm_0=inversesqrt(grad_x0*grad_x0+grad_y0*grad_y0+grad_z0*grad_z0);grad_x0*=norm_0;grad_y0*=norm_0;grad_z0*=norm_0;vec4 grad_x1=hashx1-0.49999;vec4 grad_y1=hashy1-0.49999;vec4 grad_z1=hashz1-0.49999;vec4 norm_1=inversesqrt(grad_x1*grad_x1+grad_y1*grad_y1+grad_z1*grad_z1);grad_x1*=norm_1;grad_y1*=norm_1;grad_z1*=norm_1;vec4 grad_results_0=vec2(Pf.x,Pf_min1.x).xyxy*grad_x0+vec2(Pf.y,Pf_min1.y).xxyy*grad_y0+Pf.zzzz*grad_z0;vec4 grad_results_1=vec2(Pf.x,Pf_min1.x).xyxy*grad_x1+vec2(Pf.y,Pf_min1.y).xxyy*grad_y1+Pf_min1.zzzz*grad_z1;vec3 Pf_sq=Pf*Pf;vec3 Pf_min1_sq=Pf_min1*Pf_min1;vec4 vecs_len_sq=vec2(Pf_sq.x,Pf_min1_sq.x).xyxy+vec2(Pf_sq.y,Pf_min1_sq.y).xxyy;vec4 m_0=vecs_len_sq+Pf_sq.zzzz;m_0=max(1.0-m_0,0.0);vec4 m2_0=m_0*m_0;vec4 m3_0=m_0*m2_0;vec4 m_1=vecs_len_sq+Pf_min1_sq.zzzz;m_1=max(1.0-m_1,0.0);vec4 m2_1=m_1*m_1;vec4 m3_1=m_1*m2_1;vec4 temp_0=-6.0*m2_0*grad_results_0;float xderiv_0=dot(temp_0,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_0,grad_x0);float yderiv_0=dot(temp_0,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_0,grad_y0);float zderiv_0=dot(temp_0,Pf.zzzz)+dot(m3_0,grad_z0);vec4 temp_1=-6.0*m2_1*grad_results_1;float xderiv_1=dot(temp_1,vec2(Pf.x,Pf_min1.x).xyxy)+dot(m3_1,grad_x1);float yderiv_1=dot(temp_1,vec2(Pf.y,Pf_min1.y).xxyy)+dot(m3_1,grad_y1);float zderiv_1=dot(temp_1,Pf_min1.zzzz)+dot(m3_1,grad_z1);const float FINAL_NORMALIZATION=2.3703703703703703703703703703704;return vec4(dot(m3_0,grad_results_0)+dot(m3_1,grad_results_1),vec3(xderiv_0,yderiv_0,zderiv_0)+vec3(xderiv_1,yderiv_1,zderiv_1))*FINAL_NORMALIZATION;}vec3 Cellular2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);const float JITTER_WINDOW=0.25;hash_x=Cellular_weight_samples(hash_x)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y=Cellular_weight_samples(hash_y)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);vec4 dx=Pf.xxxx-hash_x;vec4 dy=Pf.yyyy-hash_y;vec4 d=dx*dx+dy*dy;vec3 t1=d.x<d.y ? vec3(d.x,dx.x,dy.x): vec3(d.y,dx.y,dy.y);vec3 t2=d.z<d.w ? vec3(d.z,dx.z,dy.z): vec3(d.w,dx.w,dy.w);return(t1.x<t2.x ? t1 : t2)*vec3(1.0,2.0,2.0)*(1.0/1.125);}vec4 Cellular3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1;FAST32_hash_3D(Pi,hash_x0,hash_y0,hash_z0,hash_x1,hash_y1,hash_z1);const float JITTER_WINDOW=0.166666666;hash_x0=Cellular_weight_samples(hash_x0)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y0=Cellular_weight_samples(hash_y0)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_x1=Cellular_weight_samples(hash_x1)*JITTER_WINDOW+vec4(0.0,1.0,0.0,1.0);hash_y1=Cellular_weight_samples(hash_y1)*JITTER_WINDOW+vec4(0.0,0.0,1.0,1.0);hash_z0=Cellular_weight_samples(hash_z0)*JITTER_WINDOW+vec4(0.0,0.0,0.0,0.0);hash_z1=Cellular_weight_samples(hash_z1)*JITTER_WINDOW+vec4(1.0,1.0,1.0,1.0);vec4 dx1=Pf.xxxx-hash_x0;vec4 dy1=Pf.yyyy-hash_y0;vec4 dz1=Pf.zzzz-hash_z0;vec4 dx2=Pf.xxxx-hash_x1;vec4 dy2=Pf.yyyy-hash_y1;vec4 dz2=Pf.zzzz-hash_z1;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;vec4 r1=d1.x<d1.y ? vec4(d1.x,dx1.x,dy1.x,dz1.x): vec4(d1.y,dx1.y,dy1.y,dz1.y);vec4 r2=d1.z<d1.w ? vec4(d1.z,dx1.z,dy1.z,dz1.z): vec4(d1.w,dx1.w,dy1.w,dz1.w);vec4 r3=d2.x<d2.y ? vec4(d2.x,dx2.x,dy2.x,dz2.x): vec4(d2.y,dx2.y,dy2.y,dz2.y);vec4 r4=d2.z<d2.w ? vec4(d2.z,dx2.z,dy2.z,dz2.z): vec4(d2.w,dx2.w,dy2.w,dz2.w);vec4 t1=r1.x<r2.x ? r1 : r2;vec4 t2=r3.x<r4.x ? r3 : r4;return(t1.x<t2.x ? t1 : t2)*vec4(1.0,vec3(2.0))*(9.0/12.0);}vec3 SimplexPerlin2D_Deriv(vec2 P){const float SKEWFACTOR=0.36602540378443864676372317075294;const float UNSKEWFACTOR=0.21132486540518711774542560974902;const float SIMPLEX_TRI_HEIGHT=0.70710678118654752440084436210485;const vec3 SIMPLEX_POINTS=vec3(1.0-UNSKEWFACTOR,-UNSKEWFACTOR,1.0-2.0*UNSKEWFACTOR);P*=SIMPLEX_TRI_HEIGHT;vec2 Pi=floor(P+dot(P,vec2(SKEWFACTOR)));vec4 hash_x,hash_y;FAST32_hash_2D(Pi,hash_x,hash_y);vec2 v0=Pi-dot(Pi,vec2(UNSKEWFACTOR))-P;vec4 v1pos_v1hash=(v0.x<v0.y)? vec4(SIMPLEX_POINTS.xy,hash_x.y,hash_y.y): vec4(SIMPLEX_POINTS.yx,hash_x.z,hash_y.z);vec4 v12=vec4(v1pos_v1hash.xy,SIMPLEX_POINTS.zz)+v0.xyxy;vec3 grad_x=vec3(hash_x.x,v1pos_v1hash.z,hash_x.w)-0.49999;vec3 grad_y=vec3(hash_y.x,v1pos_v1hash.w,hash_y.w)-0.49999;vec3 norm=inversesqrt(grad_x*grad_x+grad_y*grad_y);grad_x*=norm;grad_y*=norm;vec3 grad_results=grad_x*vec3(v0.x,v12.xz)+grad_y*vec3(v0.y,v12.yw);vec3 m=vec3(v0.x,v12.xz)*vec3(v0.x,v12.xz)+vec3(v0.y,v12.yw)*vec3(v0.y,v12.yw);m=max(0.5-m,0.0);vec3 m2=m*m;vec3 m4=m2*m2;vec3 temp=8.0*m2*m*grad_results;float xderiv=dot(temp,vec3(v0.x,v12.xz))-dot(m4,grad_x);float yderiv=dot(temp,vec3(v0.y,v12.yw))-dot(m4,grad_y);const float FINAL_NORMALIZATION=99.204334582718712976990005025589;return vec3(dot(m4,grad_results),xderiv,yderiv)*FINAL_NORMALIZATION;}vec4 SimplexPerlin3D_Deriv(vec3 P){vec3 Pi;vec3 Pi_1;vec3 Pi_2;vec4 v1234_x;vec4 v1234_y;vec4 v1234_z;Simplex3D_GetCornerVectors(P,Pi,Pi_1,Pi_2,v1234_x,v1234_y,v1234_z);vec4 hash_0;vec4 hash_1;vec4 hash_2;FAST32_hash_3D(Pi,Pi_1,Pi_2,hash_0,hash_1,hash_2);hash_0-=0.49999;hash_1-=0.49999;hash_2-=0.49999;vec4 norm=inversesqrt(hash_0*hash_0+hash_1*hash_1+hash_2*hash_2);hash_0*=norm;hash_1*=norm;hash_2*=norm;vec4 grad_results=hash_0*v1234_x+hash_1*v1234_y+hash_2*v1234_z;vec4 m=v1234_x*v1234_x+v1234_y*v1234_y+v1234_z*v1234_z;m=max(0.5-m,0.0);vec4 m2=m*m;vec4 m3=m*m2;vec4 temp=-6.0*m2*grad_results;float xderiv=dot(temp,v1234_x)+dot(m3,hash_0);float yderiv=dot(temp,v1234_y)+dot(m3,hash_1);float zderiv=dot(temp,v1234_z)+dot(m3,hash_2);const float FINAL_NORMALIZATION=37.837227241611314102871574478976;return vec4(dot(m3,grad_results),xderiv,yderiv,zderiv)*FINAL_NORMALIZATION;}vec3 Hermite2D_Deriv(vec2 P){vec2 Pi=floor(P);vec2 Pf=P-Pi;vec4 hash_gradx,hash_grady;FAST32_hash_2D(Pi,hash_gradx,hash_grady);hash_gradx=(hash_gradx-0.49999);hash_grady=(hash_grady-0.49999);
#if 1
vec4 norm=inversesqrt(hash_gradx*hash_gradx+hash_grady*hash_grady);hash_gradx*=norm;hash_grady*=norm;const float FINAL_NORM_VAL=2.2627416997969520780827019587355;
#else
const float FINAL_NORM_VAL=3.2;
#endif
vec4 qh_results_x=QuinticHermite(Pf.y,hash_gradx.xy,hash_gradx.zw,hash_grady.xy,hash_grady.zw);vec4 qh_results_y=QuinticHermite(Pf.x,hash_grady.xz,hash_grady.yw,hash_gradx.xz,hash_gradx.yw);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);return vec3(finalpos,deriv_x,deriv_y)*FINAL_NORM_VAL;}vec4 Hermite3D_Deriv(vec3 P){vec3 Pi=floor(P);vec3 Pf=P-Pi;vec4 hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1;FAST32_hash_3D(Pi,hash_gradx0,hash_grady0,hash_gradz0,hash_gradx1,hash_grady1,hash_gradz1);hash_gradx0=(hash_gradx0-0.49999);hash_grady0=(hash_grady0-0.49999);hash_gradz0=(hash_gradz0-0.49999);hash_gradx1=(hash_gradx1-0.49999);hash_grady1=(hash_grady1-0.49999);hash_gradz1=(hash_gradz1-0.49999);
#if 1
vec4 norm0=inversesqrt(hash_gradx0*hash_gradx0+hash_grady0*hash_grady0+hash_gradz0*hash_gradz0);hash_gradx0*=norm0;hash_grady0*=norm0;hash_gradz0*=norm0;vec4 norm1=inversesqrt(hash_gradx1*hash_gradx1+hash_grady1*hash_grady1+hash_gradz1*hash_gradz1);hash_gradx1*=norm1;hash_grady1*=norm1;hash_gradz1*=norm1;const float FINAL_NORM_VAL=1.8475208614068024464292760976063;
#else
const float FINAL_NORM_VAL=(1.0/0.46875);
#endif
vec4 ival_results_z,igrad_results_x_z,igrad_results_y_z;QuinticHermite(Pf.z,hash_gradx0,hash_gradx1,hash_grady0,hash_grady1,hash_gradz0,hash_gradz1,ival_results_z,igrad_results_x_z,igrad_results_y_z);vec4 ival_results_y,igrad_results_x_y,igrad_results_z_y;QuinticHermite(Pf.y,vec4(hash_gradx0.xy,hash_gradx1.xy),vec4(hash_gradx0.zw,hash_gradx1.zw),vec4(hash_gradz0.xy,hash_gradz1.xy),vec4(hash_gradz0.zw,hash_gradz1.zw),vec4(hash_grady0.xy,hash_grady1.xy),vec4(hash_grady0.zw,hash_grady1.zw),ival_results_y,igrad_results_x_y,igrad_results_z_y);vec4 qh_results_x=QuinticHermite(Pf.y,vec4(ival_results_z.xy,igrad_results_x_z.xy),vec4(ival_results_z.zw,igrad_results_x_z.zw),vec4(igrad_results_y_z.xy,0.0,0.0),vec4(igrad_results_y_z.zw,0.0,0.0));vec4 qh_results_y=QuinticHermite(Pf.x,vec4(ival_results_z.xz,igrad_results_y_z.xz),vec4(ival_results_z.yw,igrad_results_y_z.yw),vec4(igrad_results_x_z.xz,0.0,0.0),vec4(igrad_results_x_z.yw,0.0,0.0));vec4 qh_results_z=QuinticHermite(Pf.x,vec4(ival_results_y.xz,igrad_results_z_y.xz),vec4(ival_results_y.yw,igrad_results_z_y.yw),vec4(igrad_results_x_y.xz,0.0,0.0),vec4(igrad_results_x_y.yw,0.0,0.0));float deriv_x=QuinticHermiteDeriv(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);float deriv_y=QuinticHermiteDeriv(Pf.y,qh_results_y.x,qh_results_y.y,qh_results_y.z,qh_results_y.w);float deriv_z=QuinticHermiteDeriv(Pf.z,qh_results_z.x,qh_results_z.y,qh_results_z.z,qh_results_z.w);float finalpos=QuinticHermite(Pf.x,qh_results_x.x,qh_results_x.y,qh_results_x.z,qh_results_x.w);return vec4(finalpos,deriv_x,deriv_y,deriv_z)*FINAL_NORM_VAL;}float BubblesNoise_fade(float t){return t*t*t*(t*(t*6.0-15.0)+10.0);}uint BubblesNoise_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void BubblesNoise_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=BubblesNoise_jenkins_rot(b,14u);a ^=c;a-=BubblesNoise_jenkins_rot(c,11u);b ^=a;b-=BubblesNoise_jenkins_rot(a,25u);c ^=b;c-=BubblesNoise_jenkins_rot(b,16u);a ^=c;a-=BubblesNoise_jenkins_rot(c,4u);b ^=a;b-=BubblesNoise_jenkins_rot(a,14u);c ^=b;c-=BubblesNoise_jenkins_rot(b,24u);}uint BubblesNoise_hash_uint(uint kx){uint a,b,c;a=b=c=0xdeadbeefu+(1u<<2u)+13u;a+=kx;BubblesNoise_jenkins_final(a,b,c);return c;}int BubblesNoise_ihash_int(int kx){return int(BubblesNoise_hash_uint(uint(kx)));}float BubblesNoise_negateIf(float value,float condition){return value*(1.0-2.0*step(0.5,abs(condition)));}float BubblesNoise_noiseGrad1(int hash,float x){int h=hash&15;float g=1.0+float(h&7);return BubblesNoise_negateIf(g,float(h&8))*x;}void BubblesNoise_floor_frac(float x,out int x_int,out float x_fract){float x_floor=floor(x);x_int=int(x_floor);x_fract=x-x_floor;}float BubblesNoise_noise_grad3(int hash,float x,float y,float z){int h=hash&15;float u=mix(y,x,step(float(h),7.5));float vt=mix(z,x,step(11.5,float(h))*step(float(h),14.5));float v=mix(vt,y,step(float(h),3.5));return BubblesNoise_negateIf(u,float(h&1))+BubblesNoise_negateIf(v,float(h&2));}uint BubblesNoise_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;BubblesNoise_jenkins_final(a,b,c);return c;}int BubblesNoise_ihash_int3(int kx,int ky,int kz){return int(BubblesNoise_hash_uint3(uint(kx),uint(ky),uint(kz)));}float BubblesNoise_tri_mix(float v0,float v1,float v2,float v3,float v4,float v5,float v6,float v7,float x,float y,float z){float x1=1.0-x;float y1=1.0-y;float z1=1.0-z;return z1*(y1*(v0*x1+v1*x)+y*(v2*x1+v3*x))+z*(y1*(v4*x1+v5*x)+y*(v6*x1+v7*x));}float BubblesNoise_noise_perlin(vec3 vec){int X,Y,Z;float fx,fy,fz;BubblesNoise_floor_frac(vec.x,X,fx);BubblesNoise_floor_frac(vec.y,Y,fy);BubblesNoise_floor_frac(vec.z,Z,fz);float u=BubblesNoise_fade(fx);float v=BubblesNoise_fade(fy);float w=BubblesNoise_fade(fz);float r=BubblesNoise_tri_mix(BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y,Z),fx,fy,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y,Z),fx-1.0,fy,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y+1,Z),fx,fy-1.0,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y+1,Z),fx-1.0,fy-1.0,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y,Z+1),fx,fy,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y,Z+1),fx-1.0,fy,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y+1,Z+1),fx,fy-1.0,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y+1,Z+1),fx-1.0,fy-1.0,fz-1.0),u,v,w);return r;}float BubblesNoise_snoise(vec3 p){vec3 precision_correction=0.5*vec3(float(abs(p.x)>=1000000.0),float(abs(p.y)>=1000000.0),float(abs(p.z)>=1000000.0));p=mod(p,100000.0)+precision_correction;return BubblesNoise_noise_perlin(p)*0.9820;}/***Optimized FBM tailored to waterfall various effects(most important one being bubbles at the top)*/float BubblesNoise(vec2 uv,float time){vec3 position=vec3(uv.x*20.0-time*0.1,uv.y*20.0-time*0.1,0.0-time*0.1)*2.0;return 0.5*BubblesNoise_snoise(position)+0.5;}float FoamNoise(vec2 uv,float time){vec3 position=vec3(uv.x*2.0,uv.y*3.0,0.0+time*0.01)*62.5;return 0.5*BubblesNoise_snoise(position)+0.5;}float VerticalStripesNoise(vec3 position,vec2 uv,float time){position=vec3(uv.x*2.6,position.y*0.7+time*0.2,position.z+time*0.05)*12.0;return 0.5*BubblesNoise_snoise(position)+0.5;}float BaseVoronoi(vec2 uv,float time){vec3 position=vec3(uv.x*2.0,uv.y*1.25+0.399,uv.y*0.25-time*0.05);vec3 pos=position*25.0;vec3 cell=floor(pos);float minDist=8.0;for(int i=-1;i<=1;i++){for(int j=-1;j<=1;j++){for(int k=-1;k<=1;k++){vec3 neighbor=cell+vec3(float(i),float(j),float(k));vec3 hashInput=vec3(dot(neighbor,vec3(127.1,311.7,74.7)),dot(neighbor,vec3(269.5,183.3,246.1)),dot(neighbor,vec3(113.5,271.9,124.6)));vec3 r=-1.0+2.0*fract(sin(hashInput)*43758.5453123);vec3 point=neighbor+0.5+0.5*1.5*r;float dist=length(pos-point);minDist=min(minDist,dist);}}}return minDist;}uint BubblesVoronoi_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void BubblesVoronoi_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=BubblesVoronoi_jenkins_rot(b,14u);a ^=c;a-=BubblesVoronoi_jenkins_rot(c,11u);b ^=a;b-=BubblesVoronoi_jenkins_rot(a,25u);c ^=b;c-=BubblesVoronoi_jenkins_rot(b,16u);a ^=c;a-=BubblesVoronoi_jenkins_rot(c,4u);b ^=a;b-=BubblesVoronoi_jenkins_rot(a,14u);c ^=b;c-=BubblesVoronoi_jenkins_rot(b,24u);}uint BubblesVoronoi_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;BubblesVoronoi_jenkins_final(a,b,c);return c;}float BubblesVoronoi_hash_uint3_to_float(uint kx,uint ky,uint kz){return float(BubblesVoronoi_hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float BubblesVoronoi_hash_vec3_to_float(vec3 k){return BubblesVoronoi_hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}void BubblesVoronoi_jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=BubblesVoronoi_jenkins_rot(c,4u);c+=b;b-=a;b ^=BubblesVoronoi_jenkins_rot(a,6u);a+=c;c-=b;c ^=BubblesVoronoi_jenkins_rot(b,8u);b+=a;a-=c;a ^=BubblesVoronoi_jenkins_rot(c,16u);c+=b;b-=a;b ^=BubblesVoronoi_jenkins_rot(a,19u);a+=c;c-=b;c ^=BubblesVoronoi_jenkins_rot(b,4u);b+=a;}uint BubblesVoronoi_hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;BubblesVoronoi_jenkins_mix(a,b,c);a+=kw;BubblesVoronoi_jenkins_final(a,b,c);return c;}float BubblesVoronoi_hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(BubblesVoronoi_hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float BubblesVoronoi_hash_vec4_to_float(vec4 k){return BubblesVoronoi_hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec3 BubblesVoronoi_hash_vec3_to_vec3(vec3 k){return vec3(BubblesVoronoi_hash_vec3_to_float(k),BubblesVoronoi_hash_vec4_to_float(vec4(k,1.0)),BubblesVoronoi_hash_vec4_to_float(vec4(k,2.0)));}float BubblesVoronoi_octave(vec3 coord,float randomness){vec3 cellPosition_f=floor(coord);vec3 localPosition=coord-cellPosition_f;float minDistance=1e10;vec3 targetOffset=vec3(0.0);vec3 targetPosition=vec3(0.0);for(int k=-1;k<=1;k++){for(int j=-1;j<=1;j++){for(int i=-1;i<=1;i++){vec3 cellOffset=vec3(float(i),float(j),float(k));vec3 pointPosition=cellOffset+BubblesVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset)*randomness;float distanceToPoint=distance(pointPosition,localPosition);float mask=float(distanceToPoint<minDistance);targetOffset=mix(targetOffset,cellOffset,mask);minDistance=min(minDistance,distanceToPoint);targetPosition=mix(targetPosition,pointPosition,mask);}}}return minDistance;}float BubblesVoronoi(vec2 uv,float time){vec3 coord=vec3(uv.x*6.0,uv.y*12.0,5.0+time);float randomness=1.0;return BubblesVoronoi_octave(coord,randomness);}float FoamVoronoi(vec3 coord){coord*=130.0;float randomness=1.0;return BubblesVoronoi_octave(coord,randomness);}uint SmoothFoamVoronoi_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void SmoothFoamVoronoi_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,14u);a ^=c;a-=SmoothFoamVoronoi_jenkins_rot(c,11u);b ^=a;b-=SmoothFoamVoronoi_jenkins_rot(a,25u);c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,16u);a ^=c;a-=SmoothFoamVoronoi_jenkins_rot(c,4u);b ^=a;b-=SmoothFoamVoronoi_jenkins_rot(a,14u);c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,24u);}uint SmoothFoamVoronoi_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;SmoothFoamVoronoi_jenkins_final(a,b,c);return c;}float SmoothFoamVoronoi_hash_uint3_to_float(uint kx,uint ky,uint kz){return float(SmoothFoamVoronoi_hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float SmoothFoamVoronoi_hash_vec3_to_float(vec3 k){return SmoothFoamVoronoi_hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}void SmoothFoamVoronoi_jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=SmoothFoamVoronoi_jenkins_rot(c,4u);c+=b;b-=a;b ^=SmoothFoamVoronoi_jenkins_rot(a,6u);a+=c;c-=b;c ^=SmoothFoamVoronoi_jenkins_rot(b,8u);b+=a;a-=c;a ^=SmoothFoamVoronoi_jenkins_rot(c,16u);c+=b;b-=a;b ^=SmoothFoamVoronoi_jenkins_rot(a,19u);a+=c;c-=b;c ^=SmoothFoamVoronoi_jenkins_rot(b,4u);b+=a;}uint SmoothFoamVoronoi_hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;SmoothFoamVoronoi_jenkins_mix(a,b,c);a+=kw;SmoothFoamVoronoi_jenkins_final(a,b,c);return c;}float SmoothFoamVoronoi_hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(SmoothFoamVoronoi_hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float SmoothFoamVoronoi_hash_vec4_to_float(vec4 k){return SmoothFoamVoronoi_hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec3 SmoothFoamVoronoi_hash_vec3_to_vec3(vec3 k){return vec3(SmoothFoamVoronoi_hash_vec3_to_float(k),SmoothFoamVoronoi_hash_vec4_to_float(vec4(k,1.0)),SmoothFoamVoronoi_hash_vec4_to_float(vec4(k,2.0)));}float SmoothFoamVoronoi_voronoi_smooth_f1_3d_full(vec3 coord,float smoothness,float randomness){vec3 cellPosition_f=floor(coord);vec3 localPosition=coord-cellPosition_f;float smoothDistance=0.0;float h=-1.0;vec3 targetOffset=vec3(0.0);float weightSum=0.0;vec3 weightedColor=vec3(0.0);for(int k=-2;k<=2;k++){for(int j=-2;j<=2;j++){for(int i=-2;i<=2;i++){vec3 cellOffset=vec3(float(i),float(j),float(k));vec3 pointPosition=cellOffset+SmoothFoamVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset)*randomness;float distanceToPoint=distance(pointPosition,localPosition);float mask=float(h==-1.0);h=mix(smoothstep(0.0,1.0,0.5+0.5*(smoothDistance-distanceToPoint)/smoothness),1.0,mask);float correctionFactor=smoothness*h*(1.0-h);smoothDistance=mix(smoothDistance,distanceToPoint,h)-correctionFactor;float weight=1.0-smoothstep(0.0,smoothness,distanceToPoint);vec3 cellColor=SmoothFoamVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset);weightedColor+=cellColor*weight;weightSum+=weight;}}}return smoothDistance;}float SmoothFoamVoronoi(vec3 coord){float amplitude=1.0;float max_amplitude=0.0;float scale=130.0;float randomness=1.0;float smoothness=1.0;float output_distance=0.0;vec3 output_color=vec3(0.0);vec4 output_position=vec4(0.0);return SmoothFoamVoronoi_voronoi_smooth_f1_3d_full(coord*scale,smoothness,randomness);}
#include <fog_pars_vertex>
uniform float uTime;attribute vec4 tangent;varying vec2 vUv;varying vec3 vPosition;varying float vBubblesNoise;varying float vFoamNoise;varying float vBaseVoronoi;varying vec3 vLight;vec3 getDisplacement(vec3 position,vec3 normal,float uTime,float noise){vec3 newPosition=position;float repeat=0.6;vec2 correctedUv=fract(uv*repeat);float left=1.0-smoothstep(0.015,0.03,correctedUv.x);vec2 uvRot=vec2(correctedUv.x*cos(-3.14/6.0)-correctedUv.y*sin(-3.14/6.0),correctedUv.x*sin(-3.14/6.0)+correctedUv.y*cos(-3.14/6.0));float right=smoothstep(0.65,0.66,uvRot.x);float bottom=smoothstep(0.41,0.43,correctedUv.y);float affectedPositionMask=1.0-(left+right+bottom);return normal*noise*0.03*correctedUv.y*affectedPositionMask;}void main(){vBubblesNoise=BubblesNoise(uv,uTime);float foamNoise=FoamNoise(uv,uTime);vec3 mixed=mix(vec3(uv.x*1.4,uv.y*0.8-uTime*0.015,2.0-uTime*0.015),vec3(foamNoise*0.05),0.06);float foamVoronoi=FoamVoronoi(mixed);float smoothFoamVoronoi=SmoothFoamVoronoi(mixed);vFoamNoise=foamVoronoi-smoothFoamVoronoi;vec2 distortion=mix(uv,vec2(vBubblesNoise),0.03);vBaseVoronoi=BaseVoronoi(distortion,uTime);float noise=SimplexCellular3D(position*20.0+uTime);vec3 displacement=getDisplacement(position,normal,uTime,noise);vec3 newPosition=position+displacement;vec3 normalizedTangent=normalize(tangent.xyz);vec3 biTangent=normalize(cross(normal,normalizedTangent.xyz));float shift=0.2;vec3 positionA=newPosition+normalizedTangent.xyz*shift;vec3 positionB=newPosition+biTangent*shift;positionA+=getDisplacement(positionA,normal,uTime,noise);positionB+=getDisplacement(positionB,normal,uTime,noise);vec3 toA=normalize(positionA-newPosition);vec3 toB=normalize(positionB-newPosition);vec3 newNormal=cross(toA,toB);gl_Position=vec4(position,1.0);vUv=uv;vPosition=position;
#include <fog_vertex>
}`,qM="uniform sampler2D colorTexture0;varying vec2 vUv;void main(){gl_FragColor=texture2D(colorTexture0,vUv);}";class HM{resources;engine;group;tweaksValue;water;topWater;material;constructor({engine:e,group:t,resources:i,initialTweaks:a}){this.engine=e,this.group=t,this.resources=i,this.tweaksValue=a,this.init(),this.configureTweaks(),this.engine.on("global:config:changed",r=>{const n=r?.detail?.config;n&&this.configChanged(n)})}configChanged(e){e.islands.waterfalls&&(this.updateMidColor(e.islands.water.midColor),this.updateTopColor(e.islands.water.topColor),this.updateBaseColor(e.islands.water.baseColor))}configureTweaks(){this.engine.tweaks.configure(this.tweaksValue,{folder:"Islands.Water (Main)",topColor:{onChange:this.updateTopColor.bind(this)},midColor:{onChange:this.updateMidColor.bind(this)},baseColor:{onChange:this.updateBaseColor.bind(this)}})}updateTopColor(e){this.material.uniforms.uTopColor&&(this.material.uniforms.uTopColor.value=new X(e))}updateMidColor(e){this.material.uniforms.uMidColor&&(this.material.uniforms.uMidColor.value=new X(e))}updateBaseColor(e){this.material.uniforms.uBaseColor&&(this.material.uniforms.uBaseColor.value=new X(e))}init(){this.extractMesh(),this.createMaterial(),this.applyMaterialToMesh(),this.engine.monitor.on("decline",e=>{const t=e?.detail?.declineLevel;t&&t===4&&(console.warn("Water: Low fps detected. Baking shaders..."),this.bakeShaders())})}bakeShaders(){const e=new np(GM,2048,this.engine,this.resources,this.water,[{uTime:30},{uTime:1}],qM);try{const t=e.bake();this.water.material=t,this.material=t,this.topWater.material=t,console.log("Water: Shaders successfully baked for performance optimization")}catch(t){console.error("Water: Failed to bake shaders:",t)}}extractMesh(){this.group.traverse(e=>{e.name==="main-water"&&(this.water=e,this.water.geometry.computeTangents())})}createMaterial(){this.material=new Le({vertexShader:BM,fragmentShader:WM,transparent:!1,fog:!0,uniforms:{uTime:new O(0),uBaseColor:new O(new X(this.tweaksValue.baseColor)),uTopColor:new O(new X(this.tweaksValue.topColor)),uMidColor:new O(new X(this.tweaksValue.midColor)),envMapIntensity:new O(1),...ie.fog}})}applyMaterialToMesh(){this.water.material=this.material,this.group.traverse(e=>{e instanceof Ne&&e.name==="top-water"&&(e.material=this.material,e.receiveShadow=!0,e.geometry.computeTangents(),this.topWater=e)})}update(){this.material&&(this.material.transparent=this.engine.camera.isCloseEnough(22),this.material.uniforms.uTime&&(this.material.uniforms.uTime.value=this.engine.time.elapsedSeconds),this.material.uniforms.mixFactor&&(this.material.uniforms.mixFactor.value=this.engine.time.elapsedSeconds))}destroy(){this.water.geometry.dispose(),this.material.dispose()}}class XM{engine;group;resources;barkMaterial;trees;constructor({group:e,engine:t,resources:i}){this.trees=[],this.group=e,this.engine=t,this.resources=i,this.init()}init(){this.resources.onceAll(["loaded:barkColor","loaded:barkArm","loaded:barkNormal"],()=>{this.initBarkMaterial(),this.initTrees()})}initBarkMaterial(){this.barkMaterial=new _a,this.barkMaterial.map=this.resources.items.barkColor,this.barkMaterial.normalMap=this.resources.items.barkNormal,this.barkMaterial.aoMap=this.resources.items.barkArm,this.barkMaterial.aoMapIntensity=1,this.barkMaterial.roughnessMap=this.resources.items.barkArm,this.engine.monitor.on("decline",e=>{e?.detail?.declineLevel===2&&this.flipStandardForShaderMaterial()})}flipStandardForShaderMaterial(){console.warn("Trees: Low fps detected. Switching to light material"),this.barkMaterial.dispose(),this.barkMaterial=rp(this.resources.items.barkColor,this.resources.items.environmentMap,new X("#bfb9b6")),this.trees.forEach(e=>e.material=this.barkMaterial)}initTrees(){this.group.traverse(e=>{e instanceof Ne&&e.name.startsWith("tree-trunk")&&(e.material=this.barkMaterial,this.trees.push(e))})}update(){}destroy(){this.barkMaterial?.dispose(),this.trees.forEach(e=>e.geometry.dispose())}}var jM="uniform sampler2D alphaMap;uniform vec3 lightColor;uniform vec3 ambientColor;varying vec3 vInstanceColor;varying vec2 vUv;varying float vLightIntensity;varying float vAmbientOcclusion;varying vec3 vWorldPos;varying vec3 vChannelMask;void main(){vec4 texColor=texture2D(alphaMap,vUv);float alpha=dot(texColor.xyz,vChannelMask);if(alpha<0.1){discard;}float finalLighting=vLightIntensity*vAmbientOcclusion;finalLighting=max(finalLighting,0.15);vec3 litColor=vInstanceColor*mix(ambientColor,lightColor,finalLighting);gl_FragColor=vec4(litColor,1.0);}",ZM="attribute float textureRotation;attribute float scaleVariation;attribute vec3 bushCenter;attribute float leafPhase;attribute float bushPhase;attribute float baseLighting;attribute vec3 channelMask;uniform float time;uniform float windStrength;uniform vec3 lightDirection;uniform float aoStrength;varying vec3 vInstanceColor;varying vec2 vUv;varying float vLightIntensity;varying float vAmbientOcclusion;varying vec3 vWorldPos;varying vec3 vChannelMask;float calculateAmbientOcclusion(vec3 leafPos,vec3 bushCenter,float bushRadius){float distanceFromCenter=length(leafPos-bushCenter)/bushRadius;float heightFactor=clamp((leafPos.y-bushCenter.y)/bushRadius*0.5+0.5,0.0,1.0);float depthFactor=clamp(distanceFromCenter,0.0,1.0);float ao=mix(0.2,1.0,depthFactor*0.6+heightFactor*0.4);return mix(1.0,ao,aoStrength);}void main(){vInstanceColor=instanceColor;vChannelMask=channelMask;vec2 centeredUv=uv-0.5;float cosRot=cos(textureRotation);float sinRot=sin(textureRotation);mat2 rotationMatrix=mat2(cosRot,-sinRot,sinRot,cosRot);vec2 rotatedUv=rotationMatrix*centeredUv+0.5;vUv=rotatedUv;vec3 originalPos=(instanceMatrix*vec4(0.0,0.0,0.0,1.0)).xyz;vec3 instancePos=originalPos;float leafWindTime=time*3.0+leafPhase;float bushWindTime=time*1.5+bushPhase;float windWave1=sin(time*0.8+bushPhase*0.5)*0.5+0.5;float windWave2=sin(time*1.5+leafPhase*0.3)*0.5+0.5;float windWave3=sin(time*2.2+bushPhase*0.8)*0.5+0.5;float windIntensity=windWave1*windWave2*windWave3;windIntensity=0.3+windIntensity*0.7;float spatialWind=sin(originalPos.x*0.1+originalPos.z*0.1+time*0.8)*0.2+0.8;windIntensity*=spatialWind;float heightFromGround=originalPos.y-bushCenter.y;float maxBushHeight=5.0;float normalizedHeight=clamp(heightFromGround/maxBushHeight,0.0,1.0);float heightMultiplier=0.2+normalizedHeight*0.8;windIntensity*=heightMultiplier;windIntensity*=windStrength;vec3 originalToBushEdge=normalize(originalPos-bushCenter);float lightAlignment=dot(originalToBushEdge,-lightDirection);float directionalLight=clamp(lightAlignment*0.5+0.5,0.1,1.0);vLightIntensity=directionalLight*baseLighting;vAmbientOcclusion=calculateAmbientOcclusion(instancePos,bushCenter,3.5);vWorldPos=instancePos;vec3 cameraRight=vec3(modelViewMatrix[0][0],modelViewMatrix[1][0],modelViewMatrix[2][0]);vec3 cameraUp=vec3(modelViewMatrix[0][1],modelViewMatrix[1][1],modelViewMatrix[2][1]);float leafRotationAngle=sin(leafWindTime)*cos(leafWindTime*1.3)*0.2*windIntensity;float leafCos=cos(leafRotationAngle);float leafSin=sin(leafRotationAngle);vec3 rotatedRight=cameraRight*leafCos+cameraUp*leafSin;vec3 rotatedUp=-cameraRight*leafSin+cameraUp*leafCos;float finalScale=0.4*scaleVariation;vec3 billboardPos=instancePos+position.x*rotatedRight*finalScale+position.y*rotatedUp*finalScale;gl_Position=projectionMatrix*modelViewMatrix*vec4(billboardPos,1.0);}";const JM={MAIN_TREE:new S(0,1,0),TREE:new S(1,0,0),BUSH:new S(0,0,1)},Qv={"tree-foliage-main":"MAIN_TREE","tree-foliage":"TREE","bush-foliage":"BUSH"},KM=10;function YM(s){return s.replace(/_([a-z])/g,(e,t)=>t.toUpperCase())}class QM{markers;group;tweakValues;scale;mesh;constructor(e,t){this.markers=[],this.group=e,this.tweakValues=t,this.scale=.15,this.collect()}collect(){this.group.traverse(e=>{if(!(e instanceof Ne)&&!(e.children.length>0)&&this.isFoliageMarker(e)){const t=this.getFoliageType(e),i=Math.abs(e.scale.x*this.scale);this.markers.push({radius:i,position:e.position,channelMask:JM[t],foliageHeight:this.getFoliageHeight(t)*i,foliageWidth:this.getFoliageWidth(t)*i,leavesCount:this.getFoliageLeavesCount(e.scale.x,this.tweakValues.density),colors:{light:this.getFoliageLightColor(t),dark:this.getFoliageDarkColor(t)}})}})}getFoliageLightColor(e){return new X(this.getFoliageDimension(e,"LightColor"))}getFoliageDarkColor(e){return new X(this.getFoliageDimension(e,"DarkColor"))}getFoliageLeavesCount(e,t){return Math.abs(Math.round(e*t*KM))}isFoliageMarker(e){return!!Object.keys(Qv).find(t=>e.name.startsWith(t))}getFoliageType(e){const t=Object.entries(Qv).find(([i])=>e.name.startsWith(i))?.[1];if(!t)throw console.error(e),new Error(`Unable to convert foliage marker name '${e.name}' into a foliage type.`);return t}getFoliageHeight(e){return this.getFoliageDimension(e,"Height")}getFoliageWidth(e){return this.getFoliageDimension(e,"Width")}getFoliageDimension(e,t){const i=`${YM(e.toLowerCase())}${t}`;if(!(i in this.tweakValues))throw new Error(`Property ${i} not found in tweakValues !`);const a=this.tweakValues[i];return typeof a=="number"?Math.abs(a):e==="BUSH"&&t==="LightColor"?St.inArray(this.tweakValues.bushLightColors):a}get(){return this.markers}createOcclusionGeometry(){const e=[];this.markers.forEach(({position:i,radius:a})=>{const r=new xn(a*1.1/this.scale);r.translate(i.x,i.y,i.z),e.push(r)});const t=xu(e);return e.forEach(i=>i.dispose()),t}enableOcclusion(){const e=new _a;e.colorWrite=!1,e.depthWrite=!1,this.mesh=new Ne(this.createOcclusionGeometry(),e),this.mesh.name="foliage-occlusion",this.mesh.receiveShadow=!0,this.mesh.castShadow=!0,this.group.add(this.mesh)}destroy(){this.group.remove(this.mesh),this.mesh.material.dispose(),this.mesh.geometry.dispose()}}class $M{group;engine;resources;tweakValues;material;depthMaterial;mesh;geometry;foliageMarkers;constructor({group:e,engine:t,resources:i,initialTweaks:a}){this.group=e,this.engine=t,this.resources=i,this.tweakValues=a,this.init(),this.configureTweaks(),this.engine.on("global:config:changed",r=>{const n=r?.detail?.config;n&&this.configChanged(n)})}configChanged(e){e.islands.foliage.treeLightColor&&this.updateTreeLightColor(e.islands.foliage.treeLightColor,!1),e.islands.foliage.mainTreeLightColor&&this.updateMainTreeLightColor(e.islands.foliage.mainTreeLightColor,!1),e.islands.foliage.bushLightColors&&(this.tweakValues.bushLightColors=e.islands.foliage.bushLightColors),this.rebuild()}init(){this.resources.onceAll(["loaded:foliage"],()=>{this.createMaterial(),this.createGeometry(),this.createInstancedFoliage()})}createMaterial(){const e={vertexShader:ZM,fragmentShader:jM,uniforms:{time:new O(0),windStrength:new O(5),aoStrength:new O(.5),alphaMap:new O(this.resources.items.foliage),lightDirection:new O(new S(.5,-.2,.2)),lightColor:new O(new X(16777215)),ambientColor:new O(new X(4210816))}};this.material=new Le(e),this.depthMaterial=new Le(e)}createGeometry(){this.geometry=new Vs(.02,.02)}createInstancedFoliage(){this.foliageMarkers=new QM(this.group,this.tweakValues),this.foliageMarkers.enableOcclusion();const e=this.foliageMarkers.get(),t=e.reduce((i,a)=>i+a.leavesCount,0);this.mesh=new f_(this.geometry,this.material,t),this.mesh.customDepthMaterial=this.depthMaterial,this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.generateFoliage(e),this.group.add(this.mesh)}generateFoliage(e){const t=this.mesh.count,i=new ut,a=new Float32Array(t),r=new Float32Array(t),n=new Float32Array(t),o=new Float32Array(t*3),l=new Float32Array(t),h=new Float32Array(t),c=new Float32Array(t*3);let d=0;e.forEach(_=>{const{position:u,leavesCount:x,foliageHeight:g,foliageWidth:v,channelMask:f,colors:{light:y,dark:w}}=_,p=St.colorBetween(y,w,.1),b=Math.random()*Math.PI*2;for(let M=0;M<x;M++){let E,A,m,P;do E=(Math.random()-.5)*2,A=(Math.random()-.5)*2,m=(Math.random()-.5)*2,P=Math.sqrt(E*E+A*A+m*m);while(P>1);const U=Math.pow(P,.6)/P;E*=U,A*=U,m*=U;const N=new S(u.x+E*v,u.y+A*g,u.z+m*v),F=u.clone();i.position.copy(N),i.rotation.set(0,0,0),i.updateMatrix(),this.mesh.setMatrixAt(d,i.matrix);const W=this.createColorVariation(p,w,.4);this.mesh.setColorAt(d,W),r[d]=Math.random()*Math.PI*2,n[d]=.7+Math.random()*.6,o[d*3]=u.x,o[d*3+1]=u.y,o[d*3+2]=u.z,c[d*3]=f.x,c[d*3+1]=f.y,c[d*3+2]=f.z,l[d]=Math.random()*Math.PI*2,h[d]=b+(Math.random()-.5)*.5,a[d]=this.calculateBaseLighting(N,F,v),d++}}),this.mesh.geometry.setAttribute("textureRotation",new xs(r,1)),this.mesh.geometry.setAttribute("scaleVariation",new xs(n,1)),this.mesh.geometry.setAttribute("bushCenter",new xs(o,3)),this.mesh.geometry.setAttribute("leafPhase",new xs(l,1)),this.mesh.geometry.setAttribute("bushPhase",new xs(h,1)),this.mesh.geometry.setAttribute("baseLighting",new xs(a,1)),this.mesh.geometry.setAttribute("channelMask",new xs(c,3)),this.mesh.instanceMatrix.needsUpdate=!0,this.mesh.frustumCulled=!0}createColorVariation(e,t,i){const a={h:0,s:0,l:0};e.getHSL(a);const r=(Math.random()-.5)*i*this.tweakValues.colorVariation,n=new X;return n.setHSL(a.h,a.s,Math.max(0,a.l+r)),n.lerp(t,r)}calculateBaseLighting(e,t,i){const a=e.distanceTo(t)/i,r=Math.max(0,(e.y-t.y)/i+.5);return this.tweakValues.lightOffset+a*this.tweakValues.lightContrast+r*this.tweakValues.lightContrast*.5}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:"Islands.Foliage",density:{onChange:e=>{this.tweakValues.density=e,this.rebuild()}},treeLightColor:{onChange:this.updateTreeLightColor.bind(this)},treeDarkColor:{onChange:e=>{this.tweakValues.treeDarkColor=e,this.rebuild()}},mainTreeLightColor:{onChange:this.updateMainTreeLightColor.bind(this)},mainTreeDarkColor:{onChange:e=>{this.tweakValues.mainTreeDarkColor=e,this.rebuild()}},lightContrast:{params:{min:0,max:1,step:.01},onChange:e=>{this.tweakValues.lightContrast=e,this.rebuild()}},lightOffset:{params:{min:0,max:1,step:.01},onChange:e=>{this.tweakValues.lightContrast=e,this.rebuild()}},colorVariation:{params:{min:0,max:1,step:.01},onChange:e=>{this.tweakValues.colorVariation=e,this.rebuild()}}})}updateTreeLightColor(e,t=!0){this.tweakValues.treeLightColor=e,t&&this.rebuild()}updateMainTreeLightColor(e,t=!0){this.tweakValues.mainTreeLightColor=e,t&&this.rebuild()}rebuild(){this.destroy(),this.init()}update(){this.material&&(this.material.uniforms.time.value=this.engine.time.elapsedSeconds,this.depthMaterial.uniforms.time.value=this.engine.time.elapsedSeconds)}destroy(){this.foliageMarkers.destroy(),this.group.remove(this.mesh),this.material.dispose(),this.geometry.dispose(),this.mesh.geometry.dispose()}}class eI{engine;islands;landscapeColumns;floatingRocks;initialFloatingRocksPositions;tweakValues;material;floatingRocksSpeed;constructor({engine:e,islands:t,initialTweaks:i}){this.engine=e,this.islands=t,this.tweakValues=i,this.floatingRocksSpeed=i.floatingRocks.speed,this.landscapeColumns=[],this.floatingRocks=[],this.initialFloatingRocksPositions=[],this.init()}init(){this.initMaterial(),this.extractMeshes()}extractMeshes(){this.islands.traverse(e=>{e instanceof Ne&&e.name.startsWith("basalt-")&&(e.name.startsWith("basalt-floating-rock")?(this.floatingRocks.push(e),this.initialFloatingRocksPositions.push(e.position.clone())):this.landscapeColumns.push(e),e.material=this.material)})}initMaterial(){this.material=new _a({color:new X("#101722").multiplyScalar(2.5),flatShading:!0,roughness:.6,metalness:0}),this.engine.monitor.on("decline",e=>{e?.detail?.declineLevel===2&&this.flipStandardForPhongMaterial()})}flipStandardForPhongMaterial(){console.warn("BasaltRocks: Low fps detected. Switching to Phong material."),this.material.dispose(),this.material=new V0({color:"#8f7a52",flatShading:!0,reflectivity:.05}),this.floatingRocks.forEach(e=>{e.material=this.material}),this.landscapeColumns.forEach(e=>{e.material=this.material})}throwFloatingRocksAway(){this.floatingRocks.forEach((e,t)=>{const i=new S;e.getWorldPosition(i);const a=new ki().setFromObject(e),r=new S;a.getCenter(r);const h=r.clone().sub(i).clone().normalize().multiplyScalar(.2);let c=h;if(e.parent){const u=e.parent.matrixWorld.clone(),g=new De().extractRotation(u).invert();c=h.applyMatrix4(g)}const _=e.position.clone().clone().add(c);ka.to(e.position,{duration:.1,delay:.15,ease:"power2.out",x:_.x,y:_.y,z:_.z,onComplete:()=>{ka.to(e.position,{duration:2,delay:.5,ease:"power2.inOut",x:this.initialFloatingRocksPositions[t].x,y:this.initialFloatingRocksPositions[t].y,z:this.initialFloatingRocksPositions[t].z})}})})}changeFloatingRocksSpeed(e){this.floatingRocksSpeed=sa.lerp(this.tweakValues.floatingRocks.minSpeed,this.tweakValues.floatingRocks.maxSpeed,e)}update(){const e=this.engine.time.deltaSeconds;this.floatingRocks.forEach(t=>{t.rotation.y+=e*this.floatingRocksSpeed})}destroy(){this.material.dispose(),this.landscapeColumns.forEach(e=>e.geometry.dispose()),this.floatingRocks.forEach(e=>e.geometry.dispose())}}var tI="varying vec2 vUvs;void main(){vUvs=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",iI="precision highp float;precision highp sampler2D;varying vec2 vUvs;uniform sampler2D uDataTexture;void main(){vec4 packedCoordinates=texture(uDataTexture,vUvs);gl_FragColor=packedCoordinates;}",sI="varying vec2 vUvs;void main(){vUvs=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",aI="precision highp float;precision highp sampler2D;struct ParticlesInfos{vec3 currentPosition;vec3 previousPosition;vec3 deltaPosition;float deltaTime;};ParticlesInfos getParticlesInfos(vec2 uvs,sampler2D currentBuffer,sampler2D previousBuffer,float timeElapsed){vec3 currentPosition=texture(currentBuffer,uvs).xyz;vec3 previousPosition=texture(previousBuffer,uvs).xyz;vec3 deltaPosition=currentPosition-previousPosition;float deltaTime=1.0/75.0;ParticlesInfos infos=ParticlesInfos(currentPosition,previousPosition,deltaPosition=currentPosition-previousPosition,deltaTime);return infos;}varying vec2 vUvs;uniform sampler2D uDataTexture;uniform sampler2D currentBuffer;uniform sampler2D previousBuffer;uniform float timeElapsed;uniform float time;uniform float uExplosivness;uvec3 murmurHash34(uvec4 src){const uint M=0x5bd1e995u;uvec3 h=uvec3(1190494759u,2147483647u,3559788179u);src*=M;src ^=src>>24u;src*=M;h*=M;h ^=src.x;h*=M;h ^=src.y;h*=M;h ^=src.z;h*=M;h ^=src.w;h ^=h>>13u;h*=M;h ^=h>>15u;return h;}vec3 hash34(vec4 src){uvec3 h=murmurHash34(floatBitsToUint(src));vec3 v=uintBitsToFloat(h&0x007fffffu|0x3f800000u)-1.0;return v*2.0-1.0;}vec3 noise34(vec4 x){vec4 i=floor(x);vec4 f=fract(x);vec3 v1=mix(mix(mix(hash34(i+vec4(0.0,0.0,0.0,0.0)),hash34(i+vec4(1.0,0.0,0.0,0.0)),f.x),mix(hash34(i+vec4(0.0,1.0,0.0,0.0)),hash34(i+vec4(1.0,1.0,0.0,0.0)),f.x),f.y),mix(mix(hash34(i+vec4(0.0,0.0,1.0,0.0)),hash34(i+vec4(1.0,0.0,1.0,0.0)),f.x),mix(hash34(i+vec4(0.0,1.0,1.0,0.0)),hash34(i+vec4(1.0,1.0,1.0,0.0)),f.x),f.y),f.z);vec3 v2=mix(mix(mix(hash34(i+vec4(0.0,0.0,0.0,1.0)),hash34(i+vec4(1.0,0.0,0.0,1.0)),f.x),mix(hash34(i+vec4(0.0,1.0,0.0,1.0)),hash34(i+vec4(1.0,1.0,0.0,1.0)),f.x),f.y),mix(mix(hash34(i+vec4(0.0,0.0,1.0,1.0)),hash34(i+vec4(1.0,0.0,1.0,1.0)),f.x),mix(hash34(i+vec4(0.0,1.0,1.0,1.0)),hash34(i+vec4(1.0,1.0,1.0,1.0)),f.x),f.y),f.z);return mix(v1,v2,f.w);}vec3 curlNoise(vec4 p){const float e=0.1;vec4 dx=vec4(e,0.0,0.0,0.0);vec4 dy=vec4(0.0,e,0.0,0.0);vec4 dz=vec4(0.0,0.0,e,0.0);vec3 dx0=noise34(p-dx);vec3 dx1=noise34(p+dx);vec3 dy0=noise34(p-dy);vec3 dy1=noise34(p+dy);vec3 dz0=noise34(p-dz);vec3 dz1=noise34(p+dz);float x=dy1.z-dy0.z-dz1.y+dz0.y;float y=dz1.x-dz0.x-dx1.z+dx0.z;float z=dx1.y-dx0.y-dy1.x+dy0.x;return normalize(vec3(x,y,z)/(2.0*e));}void main(){ParticlesInfos infos=getParticlesInfos(vUvs,currentBuffer,previousBuffer,timeElapsed);vec3 forces=vec3(0.0,0.0,0.0);float drag=0.85;vec3 currentPosition=infos.currentPosition;vec3 deltaPosition=infos.deltaPosition;float deltaTime=infos.deltaTime;vec3 attractor=texture(uDataTexture,vUvs).xyz;float distToAttractor=distance(currentPosition,attractor);if(distToAttractor>0.01){float attractorRadius=1.0;float distOverRadius=distToAttractor/attractorRadius;float decay=1.0;float attractorIntensity=uExplosivness;float attractorForce=attractorIntensity*(1.0-exp(-distOverRadius*decay));vec3 dirToAttractor=normalize(attractor-currentPosition);forces+=dirToAttractor*attractorForce;}float noiseIntensity=50.0;forces+=curlNoise(vec4(currentPosition*1.2,time*0.25))*noiseIntensity;vec3 newPosition=currentPosition+deltaPosition*drag+(forces*deltaTime*deltaTime);gl_FragColor=vec4(newPosition,1.0);}",rI="uniform sampler2D uDataTexture;uniform sampler2D uNormalsTexture;uniform sampler2D uCurrentBuffer;uniform sampler2D uPreviousBuffer;uniform float uTime;uniform vec2 uResolution;uniform vec2 uScreenResolution;uniform float uSize;attribute float aIndex;attribute float aSize;varying vec2 vUvs;varying vec3 vNormal;vec2 unpackUV(float aIndex,vec2 resolution){int index=int(aIndex);ivec2 pixelIndex=ivec2(index % int(resolution.x),index/int(resolution.x));return vec2(pixelIndex)/resolution+0.5/resolution;}void main(){vec2 uv=unpackUV(aIndex,uResolution);vUvs=uv;vec3 localPosition=texture(uDataTexture,uv).xyz;vec3 objectNormal=texture(uNormalsTexture,uv).xyz;vNormal=normalize(normalMatrix*objectNormal);vec3 mvPosition=(modelViewMatrix*vec4(localPosition,1.0)).xyz;gl_Position=projectionMatrix*modelViewMatrix*vec4(localPosition,1.0);gl_PointSize=(uSize*aSize*uScreenResolution.y)/-mvPosition.z;}",nI=`#include <common>
#include <lights_pars_begin>
struct ParticlesInfos{vec3 currentPosition;vec3 previousPosition;vec3 deltaPosition;float deltaTime;};ParticlesInfos getParticlesInfos(vec2 uvs,sampler2D currentBuffer,sampler2D previousBuffer,float timeElapsed){vec3 currentPosition=texture(currentBuffer,uvs).xyz;vec3 previousPosition=texture(previousBuffer,uvs).xyz;vec3 deltaPosition=currentPosition-previousPosition;float deltaTime=1.0/75.0;ParticlesInfos infos=ParticlesInfos(currentPosition,previousPosition,deltaPosition=currentPosition-previousPosition,deltaTime);return infos;}uniform sampler2D uCurrentBuffer;uniform sampler2D uPreviousBuffer;uniform float uTime;uniform vec3 uVelocityColor;uniform vec3 uBaseColor;uniform vec3 uLightDirection;uniform vec3 uLightColor;varying vec2 vUvs;varying vec3 vNormal;void main(){vec2 coord=gl_PointCoord-0.5;float distance=length(coord);float circle=1.0-smoothstep(0.4,0.5,distance);float alpha=circle;if(alpha<0.8){discard;}ParticlesInfos infos=getParticlesInfos(vUvs,uCurrentBuffer,uPreviousBuffer,uTime);float velocity=length(infos.deltaPosition)/infos.deltaTime;velocity=smoothstep(3.0,8.0,velocity);vec3 initialColor=uBaseColor;vec3 velocityColor=uVelocityColor;velocityColor=mix(initialColor,velocityColor,velocity);vec3 finalColor=velocityColor+uVelocityColor*velocity*500.0;vec3 lightNormal=normalize(vNormal);vec3 totalLight=vec3(0.0);
#if NUM_DIR_LIGHTS > 0
for(int i=0;i<NUM_DIR_LIGHTS;i++){vec3 L=normalize(directionalLights[i].direction);float NdotL=max(dot(lightNormal,L),0.0);float diffuseScale=4.5;totalLight+=(finalColor/PI)*directionalLights[i].color*NdotL*diffuseScale;}
#endif
finalColor+=totalLight;gl_FragColor=vec4(finalColor,alpha);}`;const $v=5;var Ua=(s=>(s.INTRO_STARTED="cameraSpot:intro-started",s.INTRO_PLAYED="cameraSpot:intro-played",s.TRAVEL_STARTED="cameraSpot:travel:started",s.TRAVEL_ENDED="cameraSpot:travel:ended",s))(Ua||{});function oI(s,e,t){let i=Math.min(Math.max((t-s)/(e-s),0),1);return i*i*(3-2*i)}class lI extends ui{engine;intro={start:{position:new S(51.38,14.71,7.37),direction:new S(-.97,-.2,-.13)},end:{position:new S(5.75,1.34,5.27),direction:new S(-.76,-.05,-.65)},easing:"power1.inOut",time:6};points={start:this.intro.end,contact:{position:new S(-6.26,5.04,4.45),direction:new S(.17,.1,-.98)},campfire:{position:new S(4.7,.49,.01),direction:new S(-.96,.24,.16)},swarmViewFromTree:{position:new S(1.72,5.8,2.13),direction:new S(-.99,-.07,-.13)},farOverview:{position:new S(10.08,.46,7.58),direction:new S(-.83,.17,-.52)},westWaterfall:{position:new S(-3.2,1.97,5.12),direction:new S(.5,.01,-.87)},eastWaterfall:{position:new S(-2.85,.87,-6.86),direction:new S(.38,.19,.9)},south:{position:new S(4.59,1.3,-7.15),direction:new S(-.67,.09,.74)},behindWaterfall:{position:new S(-3.62,1.31,-.63),direction:new S(.5,-.1,-.86)},topNorth:{position:new S(-7.92,5.53,-4.97),direction:new S(.4,-.03,.91)},contactIntermediatePoint:{invisible:!0,position:new S(1.29,5.29,-1.08),direction:new S(-.77,-.09,.64)}};constructor({engine:e}){super(),this.engine=e,this.init()}init(){const{position:e,direction:t}=this.intro.start;this.engine.camera.instance.position.copy(e);const i=new S().copy(e).add(t.clone().normalize());this.engine.camera.instance.lookAt(i),this.engine.camera.controls&&(this.engine.camera.controls.target.copy(i),this.engine.camera.controls.update()),this.engine.camera.instance.updateMatrixWorld(!0),this.engine.camera.instance.matrixWorldInverse.copy(this.engine.camera.instance.matrixWorld).invert(),this.engine.camera.instance.updateProjectionMatrix(),this.engine.camera.updateFrustum()}playIntro(){this.emit("cameraSpot:intro-started"),this.moveFromTo({position:{from:this.intro.start.position,to:this.intro.end.position},direction:{from:this.intro.start.direction,to:this.intro.end.direction}},{duration:this.intro.time,ease:this.intro.easing,onComplete:()=>{this.emit("cameraSpot:intro-played")}})}moveFromTo({position:{from:e,to:t},direction:{from:i,to:a}},{duration:r=$v,ease:n="power2.inOut",onComplete:o,intermediatePoints:l=[]}){this.emit("cameraSpot:travel:started");const h=[{position:e,direction:i},...l,{position:t,direction:a}],c=l.length>0,d=r/(h.length-1),_=x=>c?x===0?n.replace(/\.inOut$/,".in"):x===h.length-2?n.replace(/\.inOut$/,".out"):n:n,u=x=>{if(x>=h.length-1){this.emit("cameraSpot:travel:ended"),o?.();return}const g=h[x],v=h[x+1],f={value:0},y=new S,w=new S;ka.to(f,{duration:d,ease:_(x),value:1,onUpdate:()=>{const p=f.value;this.engine.camera.instance.position.lerpVectors(g.position,v.position,p),y.lerpVectors(g.direction.clone().normalize(),v.direction.clone().normalize(),oI(.7,1,p)).normalize(),w.copy(this.engine.camera.instance.position).add(y),this.engine.camera.instance.lookAt(w),this.engine.camera.controls.target.copy(w),this.engine.camera.controls.update()},onComplete:()=>u(x+1)})};u(0)}goTo(e,t={}){const{position:i,direction:a}=this.points[e],r=this.engine.camera.instance.getWorldPosition(new S),n=this.engine.camera.instance.getWorldDirection(new S);if(r.equals(i)){t?.onComplete?.();return}const o=[];e==="contact"&&r.y<5&&o.push(this.points.contactIntermediatePoint),this.moveFromTo({position:{from:r,to:i},direction:{from:n,to:a}},{duration:$v,ease:"power2.inOut",intermediatePoints:o,...t})}}var Zl=(s=>(s.NIGHT="night",s.DAY="day",s))(Zl||{});const hI={scene:{light:{sunColor:"#0093ff",sunIntensity:5.4,lensflare:{enabled:!1}},environment:{intensity:.65,backgroundIntensity:.7,map:"nightEnvironmentMap"},godrays:{enabled:!0,color:"#9bc2ff",density:.003}},clouds:{shadowColor:"#222e42",lightIntensity:.4},islands:{foliage:{lightContrast:.4,lightOffset:.4,colorVariation:.2,treeLightColor:"#4f949b",treeDarkColor:"#033e03",mainTreeLightColor:"#7640a1",mainTreeDarkColor:"#033e03",bushLightColor:"#673312",bushDarkColor:"#622e0c",bushLightColors:["#62490e","#666666"]},waterfalls:{baseColor:"#2f5f6f",topColor:"#3e7894",midColor:"#1f4c5b"},water:{baseColor:"#2f5f6f",topColor:"#3e7894",midColor:"#1f4c5b"},foam:{color:"#7197a9",shadow:"#36606d"}},grassField:{bending:{color:"#0f2b0f",colorIntensity:.5},flowers:{configs:[{color1:"#ffab3d",color2:"#ffe4a1",glowIntensity:30},{color1:"#ff90fb",color2:"#f0d1ff",glowIntensity:30}]},pampa:{lightColor:"#fff0cf",darkColor:"#e4dec7"},grass:{lightColor:"#436a80",darkColor:"#294469",misc:{shadowColor:"#0a200f"}}}};function cI(){const s=new Date,e=s.getHours(),t=s.getMonth(),i=[{sunrise:7,sunset:17},{sunrise:6,sunset:19},{sunrise:5,sunset:21},{sunrise:6,sunset:18}],a=Math.floor(t/3),{sunrise:r,sunset:n}=i[a];return e>=r&&e<n}class dI{experience;initialConf;switchElement;mode;shouldCrossfade;constructor(e,t=nt){this.mode="night",this.shouldCrossfade=!1,this.experience=e,this.initialConf=JSON.parse(JSON.stringify(t)),this.switchElement=document.getElementById("dayNightSwitch"),this.init()}init(){this.switchElement.addEventListener("pointerdown",()=>{this.experience.engine.audio.items.button.stop(),this.experience.engine.audio.items.button.play(),this.toggleMode()}),this.experience.cameraSpots.on(Ua.INTRO_STARTED,()=>{this.shouldCrossfade=!0}),this.experience.on("ready",()=>{cI()||this.toggleMode()})}isNight(){return this.mode==="night"}getNextMode(){return this.isNight()?"day":"night"}toggleMode(){this.mode=this.getNextMode(),this.isNight()?(this.switchElement.classList.remove("active"),this.switchToDay()):(this.switchElement.classList.add("active"),this.switchToNight())}applyConfig(e){this.experience.engine.emit("global:config:changed",new CustomEvent("global:config:changed",{detail:{config:e,mode:this.mode==="night"?"day":"night"}}))}switchToDay(){this.applyConfig(this.initialConf),this.shouldCrossfade&&(this.experience.engine.audio.crossfade(this.experience.engine.audio.items.ambientNightAudio,this.experience.engine.audio.items.ambientAudio),this.experience.engine.audio.crossfade(this.experience.engine.audio.items.ambientNightMusic,this.experience.engine.audio.items.ambientMusic))}switchToNight(){this.applyConfig(hI),this.shouldCrossfade&&(this.experience.engine.audio.crossfade(this.experience.engine.audio.items.ambientAudio,this.experience.engine.audio.items.ambientNightAudio),this.experience.engine.audio.crossfade(this.experience.engine.audio.items.ambientMusic,this.experience.engine.audio.items.ambientNightMusic))}isDay(){return this.getNextMode()==="day"}}var vh=(s=>(s.EXPLODE="swarm:explode",s.EXPLODED="swarm:exploded",s.EXPLOSIVENESS_CHANGE="swarm:explosivness:change",s.MORPHING="swarm:morphing",s))(vh||{});function _I(s,e=2,t=.5){if(s<1){const i=Math.min(Math.abs(s)/100,1);return 60*(1-Math.pow(i,e))}else{const i=Math.min(s/800,1);return 60*(1-Math.pow(i,t))}}let e0=!1;class Sa extends ui{engine;light;group;tweakValues;resources;static MIN_VALUE=-1e3;static MAX_VALUE=800;static RANGE=Sa.MAX_VALUE-Sa.MIN_VALUE;socialMediaTextures;initialized=!1;positionsDataTexture;normalsDataTexture;particleBuffers;particleBufferIndex;fullscreenCamera;fullscreenScene;fullscreenQuad;initMaterial;updateMaterial;drawMaterial;mesh;raycasterSimplifiedMesh;baseGeometry;pointLight;displaysDefaultSwarm;pendingExplosion;mysteriousAmbience;shape;currentDayTime;constructor({light:e,engine:t,islands:i,resources:a,initialTweaks:r}){super(),this.light=e,this.engine=t,this.group=i,this.shape="default",this.resources=a,this.tweakValues=r,this.displaysDefaultSwarm=!0,this.pendingExplosion=!1,this.currentDayTime=Zl.DAY,this.socialMediaTextures={},this.init(),this.configureTweaks(),this.engine.on("global:config:changed",n=>{this.currentDayTime=n?.detail?.mode??Zl.DAY})}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:"Islands.Swarm",buttons:{default:this.displayDefault.bind(this),x:this.displayX.bind(this),linkedIn:this.displayLinkedIn.bind(this),youtube:this.displayYoutube.bind(this)},lightColor:{onChange:e=>{this.setColor(e)}},baseColor:{onChange:e=>{this.setBaseColor(e)}},explosivness:{params:{min:-800,max:800,step:5},onChange:e=>{this.setExplosivness(e)}}})}morphed(e){if(this.shape!==e){const t=new CustomEvent("swarm:morphing",{detail:{from:this.shape,to:e}});this.emit("swarm:morphing",t),this.engine.eventBus.dispatch("window","swarm:morphing",t),this.shape=e}}displayDefault(){this.morphed("default"),this.updateMaterial.uniforms.uDataTexture.value=this.positionsDataTexture,this.drawMaterial.uniforms.uNormalsTexture.value=this.normalsDataTexture,this.setExplosivness(this.tweakValues.explosivness),this.setBaseColor(this.tweakValues.baseColor),this.displaysDefaultSwarm=!0,this.engine.audio.items.swap.stop(),this.engine.audio.items.swap.play()}displayX(){this.morphed("x"),this.updateMaterial.uniforms.uDataTexture.value=this.socialMediaTextures.x.positions,this.drawMaterial.uniforms.uNormalsTexture.value=this.socialMediaTextures.x.normals,this.setExplosivness(1e3),this.setBaseColor("#323232"),this.displaysDefaultSwarm=!1,this.engine.audio.items.swap.stop(),this.engine.audio.items.swap.play()}displayLinkedIn(){this.morphed("linkedin"),this.updateMaterial.uniforms.uDataTexture.value=this.socialMediaTextures.linkedin.positions,this.drawMaterial.uniforms.uNormalsTexture.value=this.socialMediaTextures.linkedin.normals,this.setExplosivness(1e3),this.setBaseColor("#29438f"),this.displaysDefaultSwarm=!1,this.engine.audio.items.swap.stop(),this.engine.audio.items.swap.play()}displayYoutube(){this.morphed("youtube"),this.updateMaterial.uniforms.uDataTexture.value=this.socialMediaTextures.youtube.positions,this.drawMaterial.uniforms.uNormalsTexture.value=this.socialMediaTextures.youtube.normals,this.setExplosivness(1e3),this.setBaseColor("#b11515"),this.displaysDefaultSwarm=!1,this.engine.audio.items.swap.stop(),this.engine.audio.items.swap.play()}normalizeExplosiveness(e){const t=Math.min(Math.max(e,Sa.MIN_VALUE),Sa.MAX_VALUE);return(Sa.MAX_VALUE-t)/Sa.RANGE}get normalizedExplosiveness(){return this.normalizeExplosiveness(this.tweakValues.explosivness)}setExplosivness(e,{updateLight:t=!0}={}){const i=this.updateMaterial.uniforms.uExplosivness.value;if(this.updateMaterial.uniforms.uExplosivness.value=e,t&&(this.pointLight.intensity=_I(e)),e===i)return;const a=this.normalizeExplosiveness(e);this.emit("swarm:explosivness:change",new CustomEvent("swarm:explosivness:change",{detail:{swarm:this,value:e,normalized:a}}))}setColor(e){this.drawMaterial.uniforms.uVelocityColor.value=new X(e),this.pointLight.color=new X(e)}setBaseColor(e){this.drawMaterial.uniforms.uBaseColor.value=new X(e)}init(){this.initGeometry(),this.initFullscreenRenderer();const{positions:e,dataPositions:t,dataNormals:i}=this.sample();this.initDataTexture(t,i),this.initSocialDataTextures(),this.initParticleBuffers(),this.initUpdateMaterial(),this.initDrawMaterial(),this.initParticles(e),this.resources.once("loaded:soundMysteriousAmbience",()=>{this.mysteriousAmbience=this.engine.audio.createPositionalAudio("mysteriousMusic",this.resources.items.soundMysteriousAmbience,{volume:.5,loop:!0}),this.mysteriousAmbience.position.copy(this.mesh.position),this.mysteriousAmbience.setRefDistance(2.5),this.mysteriousAmbience.setMaxDistance(4),this.mysteriousAmbience.setRolloffFactor(3),this.mysteriousAmbience.play(),this.group.add(this.mysteriousAmbience)}),this.resources.once("loaded:soundExplosion",()=>{this.engine.audio.createAmbientAudio("explosion",this.resources.items.soundExplosion,{volume:.5,loop:!1})}),this.resources.once("loaded:soundSwap",()=>{this.engine.audio.createAmbientAudio("swap",this.resources.items.soundSwap,{volume:.5,loop:!1})})}initSocialDataTextures(){const e=[],t=this.tweakValues.count;this.group.traverse(r=>{r.name.startsWith("social-media")&&r instanceof Ne&&(e.push(r),e0||r.geometry.scale(11,11,11))}),e0=!0;const i=new S,a=new S;e.forEach(r=>{const n=new No(r).build(),o=new Float32Array(t*t*4),l=new Float32Array(t*t*4);for(let d=0;d<t*t;d++){n.sample(i,a);const _=d*4;o[_+0]=i.x,o[_+1]=i.y,o[_+2]=i.z,o[_+3]=1,l[_+0]=a.x,l[_+1]=a.y,l[_+2]=a.z,l[_+3]=1}const h=new ws(o,t,t);h.format=At,h.type=Et,h.needsUpdate=!0;const c=new ws(l,t,t);c.format=At,c.type=Et,c.needsUpdate=!0,this.socialMediaTextures[r.name.replace("social-media-","")]={positions:h,normals:c}})}initGeometry(){const e=[];let r=.4;for(let n=0;n<8;n++){const o=new xn(r,16,16);r+=-.1,e.push(o)}this.baseGeometry=xu(e,!1),e.forEach(n=>n.dispose()),this.raycasterSimplifiedMesh=new Ne(new xn(.4*2,4,4),new Mi({color:16777215,transparent:!0,opacity:0,depthWrite:!1,depthTest:!1,colorWrite:!1})),this.group.add(this.raycasterSimplifiedMesh)}sample(){const e=this.tweakValues.count,t=new Float32Array(e*e*3),i=new Float32Array(e*e*4),a=new Float32Array(e*e*4),r=new Ne(this.baseGeometry),n=new No(r).build(),o=new S,l=new S;for(let h=0;h<e*e;h++){n.sample(o,l);const c=h*3;t[c+0]=o.x,t[c+1]=o.y,t[c+2]=o.z;const d=h*4;i[d+0]=o.x,i[d+1]=o.y,i[d+2]=o.z,i[d+3]=1,a[d+0]=l.x,a[d+1]=l.y,a[d+2]=l.z,a[d+3]=1}return{positions:t,dataPositions:i,dataNormals:a}}initDataTexture(e,t){const i=this.tweakValues.count,a=new ws(e,i,i);a.format=At,a.type=Et,a.needsUpdate=!0,this.positionsDataTexture=a;const r=new ws(t,i,i);r.format=At,r.type=Et,r.needsUpdate=!0,this.normalsDataTexture=r}initParticles(e){this.mesh=this.createParticles(e),this.group.add(this.mesh),this.mysteriousAmbience&&this.mysteriousAmbience.position.copy(this.mesh.position)}initFullscreenRenderer(){this.initFullscreenCamera(),this.initFullscreenScene(),this.initFullscreenQuad()}initFullscreenCamera(){this.fullscreenCamera=new wr(-1,1,1,-1,0,1)}initFullscreenScene(){this.fullscreenScene=new gn}initFullscreenQuad(){const e=new Vs(2,2),t=new Mi;this.fullscreenQuad=new Ne(e,t),this.fullscreenScene.add(this.fullscreenQuad)}renderBuffer(e){this.engine.renderer.instance.setRenderTarget(e),this.engine.renderer.instance.render(this.fullscreenScene,this.fullscreenCamera),this.engine.renderer.instance.setRenderTarget(null)}initParticleBuffers(){const e=this.tweakValues.count,t={minFilter:it,magFilter:it,format:At,type:Et};this.particleBuffers=[new gt(e,e,t),new gt(e,e,t),new gt(e,e,t)],this.initMaterial=new Le({uniforms:{uDataTexture:new O(this.positionsDataTexture)},vertexShader:tI,fragmentShader:iI,depthWrite:!1,depthTest:!1}),this.fullscreenQuad.material=this.initMaterial,this.particleBufferIndex=0,this.particleBuffers.forEach((i,a)=>{this.renderBuffer(i)})}initUpdateMaterial(){this.updateMaterial=new Le({uniforms:{uDataTexture:new O(this.positionsDataTexture),currentBuffer:new O(null),previousBuffer:new O(null),timeElapsed:new O(0),time:new O(0),uExplosivness:new O(this.tweakValues.explosivness)},fragmentShader:aI,vertexShader:sI,depthWrite:!1,depthTest:!1}),this.fullscreenQuad.material=this.updateMaterial,this.initialized=!0}initDrawMaterial(){const e=this.tweakValues.count;this.drawMaterial=new Le({lights:!0,uniforms:{uDataTexture:new O(this.particleBuffers[0].texture),uNormalsTexture:new O(this.normalsDataTexture),uLightColor:new O(this.light.mainLightColor),uResolution:new O(new $(e,e)),uCurrentBuffer:new O(null),uPreviousBuffer:new O(null),uVelocityColor:new O(new X(this.tweakValues.lightColor)),uBaseColor:new O(new X(this.tweakValues.baseColor)),uTime:new O(0),uSize:new O(this.tweakValues.particlesSize),uScreenResolution:new O(new $(...this.engine.sizes.resolution)),...ie.lights},vertexShader:rI,fragmentShader:nI,transparent:!0})}createParticles(e){const t=this.tweakValues.count,i=new Wt,a=[],r=[];for(let o=0;o<t*t;o++)a.push(o),r.push(St.between(.1,1));i.setAttribute("aIndex",new Bt(a,1)),i.setAttribute("aSize",new Bt(r,1)),i.setAttribute("position",new Bt(e,3));const n=new Dn(i,this.drawMaterial);return n.boundingSphere=new _s(new S,1),n.boundingBox=null,n.scale.set(.1,.1,.1),this.group.traverse(o=>{if(o.name==="explosive-particles"){n.position.copy(o.position),n.scale.setScalar((o.scale.x+o.scale.y+o.scale.z)/3);const l=new zn("#58e0ff",10,5);l.position.copy(o.position),this.group.add(l),this.pointLight=l,this.setExplosivness(this.tweakValues.explosivness)}}),this.raycasterSimplifiedMesh.position.copy(n.position),this.raycasterSimplifiedMesh.scale.copy(n.scale),this.raycasterSimplifiedMesh.scale.multiplyScalar(1.2),this.engine.raycaster.on(on.POINTER_IN,this.raycasterSimplifiedMesh,()=>{this.engine.changeCursor("pointer")}),this.engine.raycaster.on(on.POINTER_OUT,this.raycasterSimplifiedMesh,()=>{this.engine.changeCursor("default")}),this.engine.raycaster.on(on.POINTER_DOWN,this.raycasterSimplifiedMesh,()=>{this.explode()}),n.geometry.computeBoundingBox(),n}explode(){if(this.pendingExplosion)return;this.pendingExplosion=!0;const e=this.tweakValues.explosivness,t=ka.timeline({onComplete:()=>{setTimeout(()=>{this.pendingExplosion=!1},2e3)}}),i={value:e},a=new CustomEvent("swarm:explode",{detail:{shape:this.shape}}),r=new CustomEvent("swarm:exploded",{detail:{shape:this.shape}});t.to(i,{value:-500,duration:.01,ease:"expo.out",onUpdate:()=>{this.setExplosivness(i.value)}}),this.displaysDefaultSwarm?t.to(i,{value:e,duration:.3,delay:.15,ease:"expo.in",onUpdate:()=>{this.setExplosivness(i.value)},onStart:()=>{this.engine.audio.items.explosion.stop(),this.engine.audio.items.explosion.play(),this.engine.camera.shake()},onComplete:()=>{this.emit("swarm:exploded",r),this.engine.eventBus.dispatch("window","swarm:exploded",r)}}):t.to(i,{value:1e3,duration:1,delay:.15,ease:"expo.in",onUpdate:()=>{this.setExplosivness(i.value,{updateLight:!1})},onStart:()=>{this.engine.audio.items.explosion.stop(),this.engine.audio.items.explosion.play(),this.engine.camera.shake()},onComplete:()=>{this.emit("swarm:exploded",r),this.engine.eventBus.dispatch("window","swarm:exploded",r)}}),this.emit("swarm:explode",a),this.engine.eventBus.dispatch("window","swarm:explode",a)}frustum=new Cn;projectScreenMatrix=new De;boundingBox=new ki;isFarFromCamera(e=6){return this.engine.camera.instance.getWorldPosition(new S).distanceTo(this.mesh.getWorldPosition(new S))>e}isInView(){return this.projectScreenMatrix.multiplyMatrices(this.engine.camera.instance.projectionMatrix,this.engine.camera.instance.matrixWorldInverse),this.frustum.setFromProjectionMatrix(this.projectScreenMatrix),this.boundingBox.copy(this.mesh.geometry.boundingBox).applyMatrix4(this.mesh.matrixWorld),this.frustum.intersectsBox(this.boundingBox)}isCameraHighEnough(){return this.engine.camera.instance.position.y>4.5}shouldUpdate(){const e=this.isCameraHighEnough();if(!e||this.isFarFromCamera(10)||!this.isInView())return!1;const a=this.isFarFromCamera();return a&&e?!0:!a}update(){if(!this.initialized||(this.syncAmbientMusic(),!this.shouldUpdate()))return;const e=this.engine.time.deltaSeconds,t=this.engine.time.elapsedSeconds,i=this.particleBufferIndex,a=(this.particleBufferIndex+2)%3,r=(this.particleBufferIndex+1)%3,n=this.particleBuffers[i],o=this.particleBuffers[a];this.particleBufferIndex=r,this.updateMaterial.uniforms.currentBuffer.value=n.texture,this.updateMaterial.uniforms.previousBuffer.value=o.texture,this.updateMaterial.uniforms.timeElapsed.value=e,this.updateMaterial.uniforms.time.value=t,this.updateMaterial.needsUpdate=!0,this.drawMaterial.uniforms.uCurrentBuffer.value=n.texture,this.drawMaterial.uniforms.uPreviousBuffer.value=o.texture,this.drawMaterial.uniforms.uTime.value=t,this.drawMaterial.needsUpdate=!0,this.renderBuffer(this.particleBuffers[this.particleBufferIndex]),this.drawMaterial.uniforms.uDataTexture.value=this.particleBuffers[this.particleBufferIndex].texture,this.mesh.rotation.y+=.01}getCurrentAmbientMusic(){return this.currentDayTime===Zl.NIGHT?this.engine.audio.items.ambientNightMusic:this.engine.audio.items.ambientMusic}syncAmbientMusic(){if(!this.engine.audio.items.ambientMusic)return;const e=this.getCurrentAmbientMusic(),t=e.userData;t.initialVolume===void 0&&(t.initialVolume=e.getVolume());const i=new S;this.engine.audio.listener.getWorldPosition(i);const a=i.distanceTo(this.mesh.getWorldPosition(new S));let r;a<=4?r=0:a>=8?r=1:r=(a-4)/4,t.spatialFactor=r}destroy(){this.baseGeometry.dispose(),this.pointLight.dispose(),this.mesh.geometry.dispose(),this.initMaterial.dispose(),this.updateMaterial.dispose(),this.drawMaterial.dispose(),this.positionsDataTexture.dispose(),this.normalsDataTexture.dispose(),this.particleBuffers.forEach(e=>{e.dispose()}),this.fullscreenQuad.geometry.dispose(),this.raycasterSimplifiedMesh.geometry.dispose(),this.raycasterSimplifiedMesh.material.dispose(),this.group.remove(this.raycasterSimplifiedMesh),this.group.remove(this.mesh),this.engine.raycaster.remove(this.raycasterSimplifiedMesh)}}var uI="uniform float uTime;varying vec2 vUv;varying float vNoise;varying float vVoronoi1;varying float vVoronoi2;void main(){vec3 baseColor=vec3(1.0,0.0,0.0)*250.0;vec3 firstColor=vec3(1.0,1.0,0.0)*1.0;vec3 secondColor=vec3(1.1,0.6,0.05)*1.0;vec2 wavedUV=vUv;vec2 uv=vUv*0.15;float time=uTime*3.0;float t1=-time*1.5;float t2=-time*2.3;float t3=-time*3.1;float flicker1=sin(wavedUV.y*8.0+t1)*cos(wavedUV.x*6.0+t2);float flicker2=sin(wavedUV.y*12.0+t2)*cos(wavedUV.x*10.0+t3);float flicker3=sin(wavedUV.y*16.0+t3)*cos(wavedUV.x*14.0+t1);float heightFactor=smoothstep(0.0,1.0,vUv.y);float fireIntensity=pow(heightFactor,3.0);float fireDistortion=(flicker1*0.5+flicker2*0.3+flicker3*0.2)*fireIntensity;wavedUV.x-=fireDistortion*0.2;wavedUV.y+=fireDistortion*0.2;float fire=(vVoronoi1-vVoronoi2);float yGradient=smoothstep(0.0,1.0,vUv.y);float secondGradient=1.0-smoothstep(0.0,0.5,vUv.y+sin(vUv.x*12.0+4.9)*0.2+0.15);secondGradient-=max(vVoronoi2*12.0*vUv.y,0.0);secondGradient=smoothstep(0.0,1.0,secondGradient);fire*=1.0-yGradient;fire+=secondGradient;float circle=distance(vec2(0.5,0.18),vec2(wavedUV.x+vNoise*0.075,wavedUV.y*0.7));circle=pow(circle,1.8);circle=1.0-smoothstep(0.0,0.05,circle);circle*=secondGradient;float outerCircle=step(0.1,circle);float innerCircle1=step(0.30,circle);float outerFireShape=step(0.4,fire);float fireShape=step(0.41,fire);float innerFireShape=smoothstep(0.50,1.0,fire);float innerFireShape2=smoothstep(0.95,1.3,fire);float glowingOutline=outerFireShape*outerCircle-fireShape*outerCircle;float finalShape=fireShape*innerCircle1;vec3 color=baseColor*(outerFireShape-innerFireShape);color+=firstColor*(innerFireShape-innerFireShape2);color+=secondColor*(innerFireShape2);float alpha=outerFireShape*outerCircle;alpha-=smoothstep(0.0,1.0,vVoronoi2)*innerFireShape2;gl_FragColor=vec4(vec3(color),clamp(alpha,0.0,1.0));}",fI="float BaseVoronoi(vec2 uv,float time){vec3 position=vec3(uv.x*2.0,uv.y*1.25+0.399,uv.y*0.25-time*0.05);vec3 pos=position*25.0;vec3 cell=floor(pos);float minDist=8.0;for(int i=-1;i<=1;i++){for(int j=-1;j<=1;j++){for(int k=-1;k<=1;k++){vec3 neighbor=cell+vec3(float(i),float(j),float(k));vec3 hashInput=vec3(dot(neighbor,vec3(127.1,311.7,74.7)),dot(neighbor,vec3(269.5,183.3,246.1)),dot(neighbor,vec3(113.5,271.9,124.6)));vec3 r=-1.0+2.0*fract(sin(hashInput)*43758.5453123);vec3 point=neighbor+0.5+0.5*1.5*r;float dist=length(pos-point);minDist=min(minDist,dist);}}}return minDist;}float BubblesNoise_fade(float t){return t*t*t*(t*(t*6.0-15.0)+10.0);}uint BubblesNoise_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void BubblesNoise_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=BubblesNoise_jenkins_rot(b,14u);a ^=c;a-=BubblesNoise_jenkins_rot(c,11u);b ^=a;b-=BubblesNoise_jenkins_rot(a,25u);c ^=b;c-=BubblesNoise_jenkins_rot(b,16u);a ^=c;a-=BubblesNoise_jenkins_rot(c,4u);b ^=a;b-=BubblesNoise_jenkins_rot(a,14u);c ^=b;c-=BubblesNoise_jenkins_rot(b,24u);}uint BubblesNoise_hash_uint(uint kx){uint a,b,c;a=b=c=0xdeadbeefu+(1u<<2u)+13u;a+=kx;BubblesNoise_jenkins_final(a,b,c);return c;}int BubblesNoise_ihash_int(int kx){return int(BubblesNoise_hash_uint(uint(kx)));}float BubblesNoise_negateIf(float value,float condition){return value*(1.0-2.0*step(0.5,abs(condition)));}float BubblesNoise_noiseGrad1(int hash,float x){int h=hash&15;float g=1.0+float(h&7);return BubblesNoise_negateIf(g,float(h&8))*x;}void BubblesNoise_floor_frac(float x,out int x_int,out float x_fract){float x_floor=floor(x);x_int=int(x_floor);x_fract=x-x_floor;}float BubblesNoise_noise_grad3(int hash,float x,float y,float z){int h=hash&15;float u=mix(y,x,step(float(h),7.5));float vt=mix(z,x,step(11.5,float(h))*step(float(h),14.5));float v=mix(vt,y,step(float(h),3.5));return BubblesNoise_negateIf(u,float(h&1))+BubblesNoise_negateIf(v,float(h&2));}uint BubblesNoise_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;BubblesNoise_jenkins_final(a,b,c);return c;}int BubblesNoise_ihash_int3(int kx,int ky,int kz){return int(BubblesNoise_hash_uint3(uint(kx),uint(ky),uint(kz)));}float BubblesNoise_tri_mix(float v0,float v1,float v2,float v3,float v4,float v5,float v6,float v7,float x,float y,float z){float x1=1.0-x;float y1=1.0-y;float z1=1.0-z;return z1*(y1*(v0*x1+v1*x)+y*(v2*x1+v3*x))+z*(y1*(v4*x1+v5*x)+y*(v6*x1+v7*x));}float BubblesNoise_noise_perlin(vec3 vec){int X,Y,Z;float fx,fy,fz;BubblesNoise_floor_frac(vec.x,X,fx);BubblesNoise_floor_frac(vec.y,Y,fy);BubblesNoise_floor_frac(vec.z,Z,fz);float u=BubblesNoise_fade(fx);float v=BubblesNoise_fade(fy);float w=BubblesNoise_fade(fz);float r=BubblesNoise_tri_mix(BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y,Z),fx,fy,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y,Z),fx-1.0,fy,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y+1,Z),fx,fy-1.0,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y+1,Z),fx-1.0,fy-1.0,fz),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y,Z+1),fx,fy,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y,Z+1),fx-1.0,fy,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X,Y+1,Z+1),fx,fy-1.0,fz-1.0),BubblesNoise_noise_grad3(BubblesNoise_ihash_int3(X+1,Y+1,Z+1),fx-1.0,fy-1.0,fz-1.0),u,v,w);return r;}float BubblesNoise_snoise(vec3 p){vec3 precision_correction=0.5*vec3(float(abs(p.x)>=1000000.0),float(abs(p.y)>=1000000.0),float(abs(p.z)>=1000000.0));p=mod(p,100000.0)+precision_correction;return BubblesNoise_noise_perlin(p)*0.9820;}float BubblesNoise(vec2 uv,float time){vec3 position=vec3(uv.x*20.0+time*1.0,uv.y*20.0-time*1.0,0.0+time*1.0);return 0.5*BubblesNoise_snoise(position)+0.5;}float FoamNoise(vec2 uv,float time){vec3 position=vec3(uv.x*40.0,uv.y*3.0,0.0+time*1.15)*2.5;return 0.5*BubblesNoise_snoise(position)+0.5;}float VerticalStripesNoise(vec3 position,vec2 uv,float time){position=vec3(uv.x*2.6,position.y*0.7+time*0.2,position.z+time*0.05)*12.0;return 0.5*BubblesNoise_snoise(position)+0.5;}uint BubblesVoronoi_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void BubblesVoronoi_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=BubblesVoronoi_jenkins_rot(b,14u);a ^=c;a-=BubblesVoronoi_jenkins_rot(c,11u);b ^=a;b-=BubblesVoronoi_jenkins_rot(a,25u);c ^=b;c-=BubblesVoronoi_jenkins_rot(b,16u);a ^=c;a-=BubblesVoronoi_jenkins_rot(c,4u);b ^=a;b-=BubblesVoronoi_jenkins_rot(a,14u);c ^=b;c-=BubblesVoronoi_jenkins_rot(b,24u);}uint BubblesVoronoi_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;BubblesVoronoi_jenkins_final(a,b,c);return c;}float BubblesVoronoi_hash_uint3_to_float(uint kx,uint ky,uint kz){return float(BubblesVoronoi_hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float BubblesVoronoi_hash_vec3_to_float(vec3 k){return BubblesVoronoi_hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}void BubblesVoronoi_jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=BubblesVoronoi_jenkins_rot(c,4u);c+=b;b-=a;b ^=BubblesVoronoi_jenkins_rot(a,6u);a+=c;c-=b;c ^=BubblesVoronoi_jenkins_rot(b,8u);b+=a;a-=c;a ^=BubblesVoronoi_jenkins_rot(c,16u);c+=b;b-=a;b ^=BubblesVoronoi_jenkins_rot(a,19u);a+=c;c-=b;c ^=BubblesVoronoi_jenkins_rot(b,4u);b+=a;}uint BubblesVoronoi_hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;BubblesVoronoi_jenkins_mix(a,b,c);a+=kw;BubblesVoronoi_jenkins_final(a,b,c);return c;}float BubblesVoronoi_hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(BubblesVoronoi_hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float BubblesVoronoi_hash_vec4_to_float(vec4 k){return BubblesVoronoi_hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec3 BubblesVoronoi_hash_vec3_to_vec3(vec3 k){return vec3(BubblesVoronoi_hash_vec3_to_float(k),BubblesVoronoi_hash_vec4_to_float(vec4(k,1.0)),BubblesVoronoi_hash_vec4_to_float(vec4(k,2.0)));}float BubblesVoronoi_octave(vec3 coord,float randomness){vec3 cellPosition_f=floor(coord);vec3 localPosition=coord-cellPosition_f;float minDistance=1e10;vec3 targetOffset=vec3(0.0);vec3 targetPosition=vec3(0.0);for(int k=-1;k<=1;k++){for(int j=-1;j<=1;j++){for(int i=-1;i<=1;i++){vec3 cellOffset=vec3(float(i),float(j),float(k));vec3 pointPosition=cellOffset+BubblesVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset)*randomness;float distanceToPoint=distance(pointPosition,localPosition);float mask=float(distanceToPoint<minDistance);targetOffset=mix(targetOffset,cellOffset,mask);minDistance=min(minDistance,distanceToPoint);targetPosition=mix(targetPosition,pointPosition,mask);}}}return minDistance;}float BubblesVoronoi(vec2 uv,float time){vec3 coord=vec3(uv.x*6.0,uv.y*12.0,5.0+time);float randomness=1.0;return BubblesVoronoi_octave(coord,randomness);}float FoamVoronoi(vec3 coord){coord*=40.0;float randomness=1.0;return BubblesVoronoi_octave(coord,randomness);}uint SmoothFoamVoronoi_jenkins_rot(uint x,uint k){return((x<<k)|(x>>(32u-k)));}void SmoothFoamVoronoi_jenkins_final(inout uint a,inout uint b,inout uint c){c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,14u);a ^=c;a-=SmoothFoamVoronoi_jenkins_rot(c,11u);b ^=a;b-=SmoothFoamVoronoi_jenkins_rot(a,25u);c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,16u);a ^=c;a-=SmoothFoamVoronoi_jenkins_rot(c,4u);b ^=a;b-=SmoothFoamVoronoi_jenkins_rot(a,14u);c ^=b;c-=SmoothFoamVoronoi_jenkins_rot(b,24u);}uint SmoothFoamVoronoi_hash_uint3(uint kx,uint ky,uint kz){uint a,b,c;a=b=c=0xdeadbeefu+(3u<<2u)+13u;c+=kz;b+=ky;a+=kx;SmoothFoamVoronoi_jenkins_final(a,b,c);return c;}float SmoothFoamVoronoi_hash_uint3_to_float(uint kx,uint ky,uint kz){return float(SmoothFoamVoronoi_hash_uint3(kx,ky,kz))/float(0xFFFFFFFFu);}float SmoothFoamVoronoi_hash_vec3_to_float(vec3 k){return SmoothFoamVoronoi_hash_uint3_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z));}void SmoothFoamVoronoi_jenkins_mix(inout uint a,inout uint b,inout uint c){a-=c;a ^=SmoothFoamVoronoi_jenkins_rot(c,4u);c+=b;b-=a;b ^=SmoothFoamVoronoi_jenkins_rot(a,6u);a+=c;c-=b;c ^=SmoothFoamVoronoi_jenkins_rot(b,8u);b+=a;a-=c;a ^=SmoothFoamVoronoi_jenkins_rot(c,16u);c+=b;b-=a;b ^=SmoothFoamVoronoi_jenkins_rot(a,19u);a+=c;c-=b;c ^=SmoothFoamVoronoi_jenkins_rot(b,4u);b+=a;}uint SmoothFoamVoronoi_hash_uint4(uint kx,uint ky,uint kz,uint kw){uint a,b,c;a=b=c=0xdeadbeefu+(4u<<2u)+13u;a+=kx;b+=ky;c+=kz;SmoothFoamVoronoi_jenkins_mix(a,b,c);a+=kw;SmoothFoamVoronoi_jenkins_final(a,b,c);return c;}float SmoothFoamVoronoi_hash_uint4_to_float(uint kx,uint ky,uint kz,uint kw){return float(SmoothFoamVoronoi_hash_uint4(kx,ky,kz,kw))/float(0xFFFFFFFFu);}float SmoothFoamVoronoi_hash_vec4_to_float(vec4 k){return SmoothFoamVoronoi_hash_uint4_to_float(floatBitsToUint(k.x),floatBitsToUint(k.y),floatBitsToUint(k.z),floatBitsToUint(k.w));}vec3 SmoothFoamVoronoi_hash_vec3_to_vec3(vec3 k){return vec3(SmoothFoamVoronoi_hash_vec3_to_float(k),SmoothFoamVoronoi_hash_vec4_to_float(vec4(k,1.0)),SmoothFoamVoronoi_hash_vec4_to_float(vec4(k,2.0)));}float SmoothFoamVoronoi_voronoi_smooth_f1_3d_full(vec3 coord,float smoothness,float randomness){vec3 cellPosition_f=floor(coord);vec3 localPosition=coord-cellPosition_f;float smoothDistance=0.0;float h=-1.0;vec3 targetOffset=vec3(0.0);float weightSum=0.0;vec3 weightedColor=vec3(0.0);for(int k=-2;k<=2;k++){for(int j=-2;j<=2;j++){for(int i=-2;i<=2;i++){vec3 cellOffset=vec3(float(i),float(j),float(k));vec3 pointPosition=cellOffset+SmoothFoamVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset)*randomness;float distanceToPoint=distance(pointPosition,localPosition);float mask=float(h==-1.0);h=mix(smoothstep(0.0,1.0,0.5+0.5*(smoothDistance-distanceToPoint)/smoothness),1.0,mask);float correctionFactor=smoothness*h*(1.0-h);smoothDistance=mix(smoothDistance,distanceToPoint,h)-correctionFactor;float weight=1.0-smoothstep(0.0,smoothness,distanceToPoint);vec3 cellColor=SmoothFoamVoronoi_hash_vec3_to_vec3(cellPosition_f+cellOffset);weightedColor+=cellColor*weight;weightSum+=weight;}}}return smoothDistance;}float SmoothFoamVoronoi(vec3 coord){float amplitude=1.0;float max_amplitude=0.0;float scale=40.0;float randomness=1.0;float smoothness=1.0;float output_distance=0.0;vec3 output_color=vec3(0.0);vec4 output_position=vec4(0.0);return SmoothFoamVoronoi_voronoi_smooth_f1_3d_full(coord*scale,smoothness,randomness);}uniform float uTime;varying vec2 vUv;varying float vNoise;varying float vVoronoi1;varying float vVoronoi2;void main(){vec3 newPosition=position;vUv=uv;vec3 worldCenter=(modelMatrix*vec4(0.0,0.0,0.0,1.0)).xyz;vec3 cameraForward=normalize(cameraPosition-worldCenter);float offset=0.05;vec3 cameraRight=vec3(modelViewMatrix[0][0],modelViewMatrix[1][0],modelViewMatrix[2][0]);vec3 cameraUp=vec3(modelViewMatrix[0][1],modelViewMatrix[1][1],modelViewMatrix[2][1]);vec3 billboardPos=worldCenter+cameraRight*position.x+cameraUp*position.y+cameraForward*offset;gl_Position=projectionMatrix*viewMatrix*vec4(billboardPos,1.0);vec2 scaledUv=vUv*0.35;scaledUv.y*=1.0;float time=uTime*1.5;float noise=BubblesNoise(scaledUv,time);vec3 mixed=mix(vec3(scaledUv.x*1.4,scaledUv.y*0.8-time*0.1,2.0-time*0.05),vec3(noise*0.1),0.1);vNoise=noise;vVoronoi1=FoamVoronoi(mixed);vVoronoi2=SmoothFoamVoronoi(mixed);}";class vI{engine;islands;position;material;mesh;constructor({engine:e,islands:t,position:i}){this.engine=e,this.islands=t,this.position=i,this.init()}init(){this.initMaterial(),this.initMesh(),this.engine.monitor.on("decline",e=>{const t=e?.detail?.declineLevel;if(t)switch(t){case 1:this.mesh.geometry.dispose(),this.mesh.geometry=this.createGeometry(75);break;case 2:this.mesh.geometry.dispose(),this.mesh.geometry=this.createGeometry(50);break;case 5:this.mesh.geometry.dispose(),this.mesh.geometry=this.createGeometry(25);break}})}createGeometry(e=100){const t=new Vs(1,1,e,e);return t.translate(0,.5,0),t}initMaterial(){this.material=new Le({fragmentShader:uI,vertexShader:fI,uniforms:{uTime:new O(0)},depthWrite:!1,transparent:!0})}initMesh(){this.mesh=new Ne(this.createGeometry(100),this.material),this.mesh.position.copy(this.position),this.mesh.position.y-=.005;const e=.1*1.05,t=.15*1.05,i=e;this.mesh.scale.set(e,t,i),this.islands.add(this.mesh)}update(){this.material&&(this.material.uniforms.uTime.value=this.engine.time.elapsedSeconds)}destroy(){this.material.dispose(),this.mesh.geometry.dispose(),this.mesh.removeFromParent()}}var gI="uniform vec3 uColor;varying float vAlpha;varying float vRand;float polygonShape(vec2 uv,float sides){uv=uv*2.0-1.0;float a=atan(uv.x,uv.y)+3.14159;float r=length(uv);float angle=6.28318/sides;return cos(floor(0.5+a/angle)*angle-a)*r;}void main(){vec2 uv=gl_PointCoord;float sides=3.0+floor(mod(vRand*13.0,5.0));float scaleX=0.6+fract(sin(vRand*123.45)*43758.5453)*0.8;float scaleY=0.6+fract(sin(vRand*543.21)*78901.2345)*0.8;uv=(uv-0.5)*vec2(scaleX,scaleY)+0.5;float d=polygonShape(uv,sides);if(d>0.5)discard;float alpha=(1.0-d*2.0)*vAlpha;gl_FragColor=vec4(uColor*50.0,alpha);}",xI="uniform float uTime;uniform vec2 uScreenResolution;attribute float aSize;attribute float aLifetime;attribute vec3 aSpeed;varying float vAlpha;varying float vRand;float hash(float n){return fract(sin(n)*43758.5453);}float noise(float x){float i=floor(x);float f=fract(x);return mix(hash(i),hash(i+1.0),smoothstep(0.0,1.0,f));}void main(){vec3 newPosition=position;float phaseDuration=3.5;float visibleTime=2.0;float tAll=mod(uTime+aLifetime*10.0,phaseDuration);if(tAll>visibleTime){vAlpha=0.0;gl_Position=vec4(0.0,0.0,0.0,0.0);gl_PointSize=0.0;return;}float t=tAll;float rise=aSpeed.y*(1.0-exp(-t*2.0));newPosition.y+=rise;newPosition.x+=aSpeed.x*t*0.1;newPosition.z+=aSpeed.z*t*0.1;float chaos=(noise(aLifetime*7.0+t)-0.5);newPosition.x+=chaos*0.02;newPosition.z+=chaos*0.02;vAlpha=1.0-t/visibleTime;vRand=aLifetime;vec3 mvPosition=(modelViewMatrix*vec4(newPosition,1.0)).xyz;gl_Position=projectionMatrix*vec4(mvPosition,1.0);gl_PointSize=(0.15*aSize*uScreenResolution.y)/-mvPosition.z;}";class pI{engine;position;islands;material;mesh;constructor({engine:e,islands:t,position:i}){this.engine=e,this.islands=t,this.position=i,this.init()}initMaterial(){this.material=new Le({vertexShader:xI,fragmentShader:gI,uniforms:{uTime:new O(0),uColor:new O(new X("#ff0000")),uScale:{value:1},uScreenResolution:new O(new $(...this.engine.sizes.resolution))},transparent:!0,depthWrite:!1,blending:Jl})}init(){this.initMaterial(),this.initMesh()}initMesh(){const t=new Float32Array(150),i=new Float32Array(150),a=new Float32Array(50),r=new Float32Array(50);for(let o=0;o<50;o++)t[o*3]=(Math.random()-.5)*.025,t[o*3+1]=.02,t[o*3+2]=(Math.random()-.5)*.025,i[o*3]=(Math.random()-.5)*.5,i[o*3+1]=.02+Math.random()*.11,i[o*3+2]=(Math.random()-.5)*.5,a[o]=Math.random()*1,r[o]=Math.min(Math.random()*.5,.1);const n=new Wt;n.setAttribute("position",new Be(t,3)),n.setAttribute("aSpeed",new Be(i,3)),n.setAttribute("aLifetime",new Be(a,1)),n.setAttribute("aSize",new Be(r,1)),this.mesh=new Dn(n,this.material),this.mesh.position.copy(this.position),this.islands.add(this.mesh)}update(){this.material&&(this.material.uniforms.uTime.value=this.engine.time.elapsedSeconds)}destroy(){this.material.dispose(),this.mesh.geometry.dispose(),this.mesh.removeFromParent()}}class mI{resources;engine;islands;woodMeshes;fire;sparks;woodMaterial;constructor({engine:e,islands:t,resources:i}){this.engine=e,this.islands=t,this.woodMeshes=[],this.resources=i,this.init()}init(){this.woodMaterial=new _a({color:new X("#241e13"),roughness:1,metalness:0});const e=new ki;this.islands.traverse(i=>{i instanceof Ne&&i.name.startsWith("campfire-wood")&&(this.woodMeshes.push(i),i.material=this.woodMaterial,i.castShadow=!0,e.expandByObject(i))});const t=e.getCenter(new S);this.fire=new vI({engine:this.engine,islands:this.islands,position:t.clone()}),this.sparks=new pI({engine:this.engine,islands:this.islands,position:t.clone()}),this.resources.once("loaded:soundCampfire",()=>{const i=this.engine.audio.createPositionalAudio("campfire",this.resources.items.soundCampfire,{volume:7.5,loop:!0});i.position.copy(t),i.setRefDistance(1),i.setRolloffFactor(4),i.setMaxDistance(2),i.play(),this.islands.add(i)})}update(){this.fire?.update(),this.sparks?.update()}destroy(){this.fire?.destroy(),this.sparks?.destroy()}}var yI="varying vec2 vUvs;void main(){vUvs=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",wI="uniform sampler2D uDataTexture;varying vec2 vUvs;void main(){gl_FragColor=texture2D(uDataTexture,vUvs);}",zI="uniform sampler2D currentBuffer;uniform sampler2D uPositionsTexture;uniform int uStage;uniform int uOffset;uniform int uStepNo;uniform vec3 uCameraPosition;ivec2 unpack2D(int index,ivec2 dims){return ivec2(index % dims.x,index/dims.x);}int pack2D(ivec2 index,ivec2 dims){return index.x+index.y*dims.x;}void main(){ivec2 dataTextureDims=textureSize(currentBuffer,0);ivec2 pixelIndex=ivec2(gl_FragCoord.xy-0.5);int pixelIndex1D=pack2D(pixelIndex,dataTextureDims);int csign=(pixelIndex1D % uStage<uOffset)? 1 :-1;int cdir=((pixelIndex1D/uStepNo)% 2==0)? 1 :-1;vec4 val0=texelFetch(currentBuffer,pixelIndex,0);int cmpPixelIndex=pixelIndex1D+csign*uOffset;ivec2 cmpPixelCoord=unpack2D(cmpPixelIndex,dataTextureDims);vec4 val1=texelFetch(currentBuffer,cmpPixelCoord,0);ivec2 posDims=textureSize(uPositionsTexture,0);ivec2 posCoord0=unpack2D(int(val0.x),posDims);ivec2 posCoord1=unpack2D(int(val1.x),posDims);vec3 pos0=texelFetch(uPositionsTexture,posCoord0,0).xyz;vec3 pos1=texelFetch(uPositionsTexture,posCoord1,0).xyz;float cmpValue0=distance(pos0,uCameraPosition);float cmpValue1=distance(pos1,uCameraPosition);vec4 cmin=(cmpValue0<cmpValue1)? val0 : val1;vec4 cmax=(cmpValue0<=cmpValue1)? val1 : val0;gl_FragColor=(csign==cdir)? cmax : cmin;}",PI="void main(){gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",bI="uniform sampler2D uPositionsTexture;uniform sampler2D uNormalsTexture;uniform sampler2D uCurrentBuffer;uniform vec2 uScreenResolution;varying vec2 vUvs;varying vec3 vNormal;varying float vOpacity;varying float vRotation;ivec2 unpack2D(int index,ivec2 dims){return ivec2(index % dims.x,index/dims.x);}void main(){ivec2 bufferDims=textureSize(uCurrentBuffer,0);ivec2 pixelIndex=unpack2D(gl_VertexID,bufferDims);vec4 sortedData=texelFetch(uCurrentBuffer,pixelIndex,0);int particleIndex=int(sortedData.x);vOpacity=sortedData.y;vRotation=sortedData.z;float size=sortedData.w;ivec2 posDims=textureSize(uPositionsTexture,0);ivec2 posCoord=unpack2D(particleIndex,posDims);vec3 localPosition=texelFetch(uPositionsTexture,posCoord,0).xyz;ivec2 normDims=textureSize(uNormalsTexture,0);ivec2 normCoord=unpack2D(particleIndex,normDims);vec3 objectNormal=texelFetch(uNormalsTexture,normCoord,0).xyz;vNormal=normalize(normalMatrix*objectNormal);vec3 mvPosition=(modelViewMatrix*vec4(localPosition,1.0)).xyz;gl_Position=projectionMatrix*vec4(mvPosition,1.0);gl_PointSize=(12.0*size*uScreenResolution.y)/-mvPosition.z;vUvs=vec2(pixelIndex)/vec2(bufferDims);}",TI=`#include <common>
#include <lights_pars_begin>
struct ParticlesInfos{vec3 currentPosition;};ParticlesInfos getParticlesInfos(vec2 uvs,sampler2D currentBuffer,float timeElapsed){vec3 currentPosition=texture(currentBuffer,uvs).xyz;ParticlesInfos infos=ParticlesInfos(currentPosition);return infos;}uniform sampler2D uCloudTexture;uniform sampler2D uPositionsTexture;uniform sampler2D uCurrentBuffer;uniform float uTime;uniform vec3 uShadowColor;uniform float uLightIntensity;varying vec2 vUvs;varying vec3 vNormal;varying float vOpacity;varying float vRotation;vec2 rotateUV(vec2 uv,float rotation){vec2 centered=uv-0.5;float cosAngle=cos(rotation);float sinAngle=sin(rotation);vec2 rotated=vec2(centered.x*cosAngle-centered.y*sinAngle,centered.x*sinAngle+centered.y*cosAngle);return rotated+0.5;}ivec2 unpack2D(int index,ivec2 dims){return ivec2(index % dims.x,index/dims.x);}void main(){ivec2 bufferDims=textureSize(uCurrentBuffer,0);ivec2 pixelCoord=ivec2(gl_FragCoord.xy-0.5);vec4 particleData=texelFetch(uCurrentBuffer,pixelCoord,0);int particleIndex=int(particleData.x);float particleRotation=vRotation;float particleOpacity=vOpacity;ivec2 posDims=textureSize(uPositionsTexture,0);ivec2 posCoord=unpack2D(particleIndex,posDims);vec3 particlePos=texelFetch(uPositionsTexture,posCoord,0).xyz;vec2 uv=gl_PointCoord;vec2 rotatedUV=rotateUV(uv,particleRotation);vec4 sampled=texture2D(uCloudTexture,rotatedUV);vec3 color=sampled.rgb;float alpha=sampled.a*particleOpacity;float fogNear=0.1;float fogFar=1000.0;vec3 fogColor=vec3(1.0);float depth=gl_FragCoord.z/gl_FragCoord.w;float fogFactor=smoothstep(fogNear,fogFar,depth);vec4 fragColor=vec4(color,alpha);vec3 finalColor=fragColor.xyz;vec3 lightNormal=normalize(vNormal);vec3 shadowColor=uShadowColor;vec3 totalLight=vec3(0.0);for(int i=0;i<NUM_DIR_LIGHTS;i++){vec3 L=normalize(directionalLights[i].direction);float NdotL=max(dot(lightNormal,L),0.0);totalLight+=mix(shadowColor,directionalLights[i].color*uLightIntensity,NdotL);}gl_FragColor=vec4(totalLight,alpha);}`;const dt=32;class SI{engine;islands;resources;lastCameraPosition;lastCameraDirection;tweakValues;sorting;initialized;sortEnabled;indicesDataTexture;positionsDataTexture;normalsDataTexture;particleBuffers;particleBufferIndex;fullscreenCamera;fullscreenScene;fullscreenQuad;initMaterial;updateMaterial;drawMaterial;baseGeometry;mesh;constructor({engine:e,resources:t,islands:i,initialTweaks:a}){this.engine=e,this.islands=i,this.resources=t,this.tweakValues=a,this.sorting=!1,this.initialized=!1,this.sortEnabled=!0,this.lastCameraPosition=new S,this.lastCameraDirection=new S,this.init(),this.configureTweaks(),this.engine.on("global:config:changed",r=>{const n=r?.detail?.config;n&&this.configChanged(n)})}configChanged(e){e.clouds.shadowColor&&this.updateShadowColor(e.clouds.shadowColor),e.clouds.lightIntensity&&this.updateLightIntensity(e.clouds.lightIntensity)}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:"Clouds",shadowColor:{params:{type:"color"},onChange:this.updateShadowColor.bind(this)},lightIntensity:{params:{type:"number",min:0,max:1,step:.01},onChange:this.updateLightIntensity.bind(this)}})}updateShadowColor(e){this.drawMaterial.uniforms.uShadowColor.value.set(e),this.drawMaterial.needsUpdate=!0}updateLightIntensity(e){this.drawMaterial.uniforms.uLightIntensity.value=e}init(){this.resources.onceAll(["loaded:cloud"],()=>{this.initGeometry(),this.initFullscreenRenderer(),this.initIndicesTexture();const{positions:e,dataPositions:t,dataNormals:i}=this.sample();this.initDataTexture(t,i),this.initParticleBuffers(),this.initUpdateMaterial(),this.initDrawMaterial(),this.initParticles(e)})}initGeometry(){const e=[];this.islands.traverse(t=>{if(!t.name.startsWith("cloud")||t.children.length>0)return;const i=new xn(1,10,10);i.applyMatrix4(t.matrixWorld),e.push(i)}),this.baseGeometry=xu(e,!1),this.baseGeometry.computeBoundingSphere()}initFullscreenRenderer(){this.initFullscreenCamera(),this.initFullscreenScene(),this.initFullscreenQuad()}initFullscreenCamera(){this.fullscreenCamera=new wr(-1,1,1,-1,0,1)}initFullscreenScene(){this.fullscreenScene=new gn}initFullscreenQuad(){const e=new Vs(2,2),t=new Mi;this.fullscreenQuad=new Ne(e,t),this.fullscreenScene.add(this.fullscreenQuad)}renderBuffer(e){this.engine.renderer.instance.setRenderTarget(e),this.engine.renderer.instance.render(this.fullscreenScene,this.fullscreenCamera),this.engine.renderer.instance.setRenderTarget(null)}initIndicesTexture(){const e=new Float32Array(dt*dt*4);for(let i=0;i<dt*dt;i++){const a=i*4;e[a+0]=i,e[a+1]=St.between(.2,.8),e[a+2]=Math.PI*Math.random(),e[a+3]=St.between(.7,1.2)}const t=new ws(e,dt,dt);t.format=At,t.type=Et,t.needsUpdate=!0,this.indicesDataTexture=t}sample(){const e=new Float32Array(dt*dt*3),t=new Float32Array(dt*dt*4),i=new Float32Array(dt*dt*4),a=new Ne(this.baseGeometry),r=new No(a).build(),n=new S,o=new S;for(let l=0;l<dt*dt;l++){r.sample(n,o);const h=l*3;e[h+0]=n.x,e[h+1]=n.y,e[h+2]=n.z;const c=l*4;t[c+0]=n.x,t[c+1]=n.y,t[c+2]=n.z,t[c+3]=1,i[c+0]=o.x,i[c+1]=o.y,i[c+2]=o.z,i[c+3]=1}return{positions:e,dataPositions:t,dataNormals:i}}initDataTexture(e,t){const i=new ws(e,dt,dt);i.format=At,i.type=Et,i.needsUpdate=!0,this.positionsDataTexture=i;const a=new ws(t,dt,dt);a.format=At,a.type=Et,a.needsUpdate=!0,this.normalsDataTexture=a}initParticleBuffers(){const e={minFilter:it,magFilter:it,format:At,type:Et};this.particleBuffers=[new gt(dt,dt,e),new gt(dt,dt,e),new gt(dt,dt,e)],this.initMaterial=new Le({uniforms:{uDataTexture:new O(this.indicesDataTexture)},vertexShader:yI,fragmentShader:wI,depthWrite:!1,depthTest:!1}),this.fullscreenQuad.material=this.initMaterial,this.particleBufferIndex=0,this.particleBuffers.forEach((t,i)=>{this.renderBuffer(t)})}initUpdateMaterial(){this.updateMaterial=new Le({uniforms:{uPositionsTexture:new O(this.positionsDataTexture),currentBuffer:new O(null),timeElapsed:new O(0),time:new O(0),uStage:new O(0),uOffset:new O(0),uStepNo:new O(0),uCameraPosition:new O(new S)},fragmentShader:zI,vertexShader:PI,depthWrite:!1,depthTest:!1}),this.fullscreenQuad.material=this.updateMaterial,this.initialized=!0}initDrawMaterial(){this.drawMaterial=new Le({lights:!0,uniforms:{uCloudTexture:new O(this.resources.items.cloud),uCurrentBuffer:new O(this.particleBuffers[0].texture),uPositionsTexture:new O(this.positionsDataTexture),uNormalsTexture:new O(this.normalsDataTexture),uShadowColor:new O(new X(this.tweakValues.shadowColor)),uResolution:new O(new $(dt,dt)),uTime:new O(0),uScreenResolution:new O(new $(...this.engine.sizes.resolution)),uLightIntensity:new O(nt.clouds.lightIntensity),...ie.lights},vertexShader:bI,fragmentShader:TI,depthWrite:!1,transparent:!0}),this.engine.sizes.on("resize",()=>{this.drawMaterial.uniforms.uScreenResolution.value.set(...this.engine.sizes.resolution)})}initParticles(e){this.mesh=this.createParticles(e),this.islands.add(this.mesh)}createParticles(e){const t=new Wt,i=[],a=[];for(let n=0;n<dt*dt;n++)i.push(n),a.push(St.between(.1,1));t.setAttribute("aIndex",new Bt(i,1)),t.setAttribute("aSize",new Bt(a,1)),t.setAttribute("position",new Bt(e,3));const r=new Dn(t,this.drawMaterial);return r.boundingSphere=new _s(new S,1),r.boundingBox=null,r.frustumCulled=!1,r}shouldSortClouds(e=15){if(this.sorting||!this.sortEnabled)return!1;const t=new S;this.engine.camera.instance.getWorldDirection(t),t.normalize();let i=this.lastCameraDirection.dot(t);return i=Math.min(1,Math.max(-1,i)),Math.acos(i)*(180/Math.PI)>=e?(this.lastCameraDirection.copy(t),!0):!1}sort({force:e=!1}={}){if(!this.shouldSortClouds()&&!e||e&&this.sorting)return!1;this.sorting=!0;const t=this.engine.camera.instance.position,i=this.engine.camera.instance.getWorldDirection(new S);for(let a=0;a<1e3;++a){let r=a,n;for(n=0;n<r;++n)r-=n+1;let o=1<<n+1,l=1<<n-r,h=2*l;if(n>=Math.log2(dt*dt))break;const c=this.particleBufferIndex,d=(this.particleBufferIndex+1)%2,_=this.particleBuffers[c];this.updateMaterial.uniforms.currentBuffer.value=_.texture,this.updateMaterial.uniforms.uStage.value=h,this.updateMaterial.uniforms.uOffset.value=l,this.updateMaterial.uniforms.uStepNo.value=o,this.updateMaterial.uniforms.uCameraPosition.value.copy(t),this.updateMaterial.needsUpdate=!0,this.particleBufferIndex=d,this.renderBuffer(this.particleBuffers[this.particleBufferIndex])}return this.lastCameraPosition.copy(t),this.lastCameraDirection.copy(i),this.sorting=!1,!0}enableSorting(){this.sortEnabled=!0}disableSorting(){this.sortEnabled=!1}update(){if(!this.initialized||this.sorting)return;const e=this.engine.time.elapsedSeconds;this.sort();const t=this.particleBufferIndex,i=this.particleBuffers[t];this.drawMaterial.uniforms.uCurrentBuffer.value=i.texture,this.drawMaterial.uniforms.uTime.value=e,this.drawMaterial.needsUpdate=!0}destroy(){this.indicesDataTexture.dispose(),this.positionsDataTexture.dispose(),this.normalsDataTexture.dispose(),this.drawMaterial.dispose(),this.initMaterial.dispose(),this.updateMaterial.dispose(),this.fullscreenQuad.geometry.dispose(),this.particleBuffers.forEach(e=>{e.dispose()}),this.mesh.geometry.dispose()}}class EI{engine;group;resources;tweakValues;environment;light;islands;grassFieldGeometry;grassField;cliffs;waterfalls;mainWater;trees;foliage;basalt;campfire;clouds;swarm;simplifiedScene;constructor({group:e,light:t,engine:i,resources:a,environment:r,initialTweaks:n}){this.light=t,this.group=e,this.engine=i,this.resources=a,this.environment=r,this.tweakValues=n,this.init(),this.configureTweaks()}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:"Islands",scale:{onChange:()=>{console.warn("Scale change not implemented yet")}}})}init(){this.resources.onceAll(["loaded:testIsland","loaded:cliffsColor","loaded:cliffsAo","loaded:cliffsNormal"],()=>{this.islands=this.resources.items.testIsland.scene.children[0].children[0],this.islands.scale.set(this.tweakValues.scale,this.tweakValues.scale,this.tweakValues.scale),this.initClouds(),this.initCliffs(),this.initBasaltRocks(),this.initWaterfalls(),this.initMainWater(),this.initTrees(),this.initFoliage(),this.initCampfire(),this.initSwarm(),this.initGrassField(),this.group.add(this.islands),this.islands.traverse(e=>{e instanceof Ne&&e.name.startsWith("godrays-occluder")?(e.position.z=.8,e.castShadow=!0,e.material.side=ai,e.material.depthWrite=!1,e.material.colorWrite=!1):e.name==="simplified-scene-occluder"&&(this.simplifiedScene=e)}),this.engine.monitor.on("decline",e=>{const t=e?.detail?.declineLevel;if(t)switch(t){case 4:this.recreateSwarm();break}})})}recreateSwarm(){console.warn("Islands: Low fps detected. Recreating Swarm with fewer particles."),this.swarm.destroy(),this.initSwarm({...nt.islands.swarm,count:160,particlesSize:nt.islands.swarm.particlesSize*3})}initClouds(){this.clouds=new SI({engine:this.engine,resources:this.resources,islands:this.islands,initialTweaks:nt.clouds})}initFoliage(){this.foliage=new $M({group:this.islands,engine:this.engine,resources:this.resources,initialTweaks:nt.islands.foliage})}initTrees(){this.trees=new XM({engine:this.engine,resources:this.resources,group:this.islands})}initGrassField(){this.extractGrassFieldGeometry(),this.grassField=new TM({group:this.group,engine:this.engine,resources:this.resources,geometry:this.grassFieldGeometry,islands:this.islands,initialTweaks:this.tweakValues})}initWaterfalls(){this.waterfalls=new UM({group:this.islands,engine:this.engine,resources:this.resources,initialTweaks:nt.islands.waterfalls})}initMainWater(){this.mainWater=new HM({group:this.islands,engine:this.engine,resources:this.resources,initialTweaks:nt.islands.water})}extractGrassFieldGeometry(){let e;this.islands.traverse(t=>{t.name==="main-island-grass-surface"&&(this.grassFieldGeometry=t.geometry,e=t)}),this.grassFieldGeometry.scale(this.tweakValues.scale,this.tweakValues.scale,this.tweakValues.scale),e.removeFromParent()}initCliffs(){this.cliffs=new AM({engine:this.engine,resources:this.resources,environment:this.environment,group:this.islands})}initBasaltRocks(){this.basalt=new eI({engine:this.engine,islands:this.islands,initialTweaks:nt.islands.basalRocks})}initSwarm(e){this.swarm=new Sa({engine:this.engine,islands:this.islands,resources:this.resources,light:this.light,initialTweaks:e??nt.islands.swarm}),this.swarm.on(vh.EXPLODE,()=>{this.basalt?.throwFloatingRocksAway()}),this.swarm.on(vh.EXPLOSIVENESS_CHANGE,t=>{this.basalt?.changeFloatingRocksSpeed(t?.detail?.normalized)}),this.basalt?.changeFloatingRocksSpeed(this.swarm.normalizedExplosiveness)}initCampfire(){this.campfire=new mI({engine:this.engine,islands:this.islands,resources:this.resources})}update(){this.grassField?.update(),this.waterfalls?.update(),this.mainWater?.update(),this.trees?.update(),this.foliage?.update(),this.basalt?.update(),this.swarm?.update(),this.campfire?.update(),this.clouds?.update()}destroy(){this.grassField?.destroy(),this.grassFieldGeometry?.dispose(),this.cliffs?.destroy(),this.waterfalls?.destroy(),this.mainWater?.destroy(),this.trees?.destroy(),this.foliage?.destroy(),this.basalt?.destroy(),this.swarm?.destroy(),this.campfire?.destroy(),this.clouds?.destroy()}}class AI{group;light;engine;environment;resources;islands;constructor({light:e,group:t,engine:i,resources:a,environment:r}){this.light=e,this.group=t,this.engine=i,this.environment=r,this.resources=a,this.init()}init(){this.resources.onceAll(["loaded:testIsland"],()=>{this.islands=new EI({group:this.group,light:this.light,engine:this.engine,resources:this.resources,environment:this.environment,initialTweaks:nt.islands.main}),this.environment.updateMaterials()}),this.resources.onceAll(["loaded:soundMain","loaded:soundNightMain","loaded:soundWind","loaded:soundAmbience","loaded:soundNightAmbience"],()=>{this.configureAmbientMusic(),this.configureAmbientAudio(),this.configureAmbientNightMusic(),this.configureAmbientNightAudio(),this.configureWindSound()})}configureAmbientAudio(){this.engine.audio.createAmbientAudio("ambientAudio",this.resources.items.soundAmbience,{volume:.4,loop:!0})}configureAmbientMusic(){this.engine.audio.createAmbientAudio("ambientMusic",this.resources.items.soundMain,{volume:.5,loop:!0})}configureAmbientNightAudio(){this.engine.audio.createAmbientAudio("ambientNightAudio",this.resources.items.soundNightAmbience,{volume:.4,loop:!0})}configureAmbientNightMusic(){this.engine.audio.createAmbientAudio("ambientNightMusic",this.resources.items.soundNightMain,{volume:.7,loop:!0})}configureWindSound(){this.engine.audio.createAmbientAudio("wind",this.resources.items.soundWind,{volume:.1,loop:!0})}update(){this.islands?.update()}destroy(){this.islands?.destroy()}}/**
 * postprocessing v6.37.7 build Mon Aug 04 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var Uc=1/1e3,MI=1e3,II=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(s){typeof document<"u"&&document.hidden!==void 0&&(s?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=s)}get delta(){return this._delta*Uc}get fixedDelta(){return this._fixedDelta*Uc}set fixedDelta(s){this._fixedDelta=s*MI}get elapsed(){return this._elapsed*Uc}update(s){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(s!==void 0?s:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(s){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},CI=(()=>{const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new Wt;return t.setAttribute("position",new Be(s,3)),t.setAttribute("uv",new Be(e,2)),t})(),fi=class e_{static get fullscreenGeometry(){return CI}constructor(e="Pass",t=new gn,i=new __){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Ne(e_.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new gn),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=da){}render(e,t,i,a,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof gt||t instanceof Ci||t instanceof Ct||t instanceof e_)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},DI=class extends fi{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(s,e,t,i,a){const r=s.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},RI=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,mu="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",op=class extends Le{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new O(null),opacity:new O(1)},blending:di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:RI,vertexShader:mu})}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}getOpacity(s){return this.uniforms.opacity.value}setOpacity(s){this.uniforms.opacity.value=s}},yu=class extends fi{constructor(s,e=!0){super("CopyPass"),this.fullscreenMaterial=new op,this.needsSwap=!1,this.renderTarget=s,s===void 0&&(this.renderTarget=new gt(1,1,{minFilter:yt,magFilter:yt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(s){this.autoResize=s}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(s){this.autoResize=s}render(s,e,t,i,a){this.fullscreenMaterial.inputBuffer=e.texture,s.setRenderTarget(this.renderToScreen?null:this.renderTarget),s.render(this.scene,this.camera)}setSize(s,e){this.autoResize&&this.renderTarget.setSize(s,e)}initialize(s,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==$t?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":s!==null&&s.outputColorSpace===Ge&&(this.renderTarget.texture.colorSpace=Ge))}},t0=new X,wu=class extends fi{constructor(s=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=s,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(s,e,t){this.color=s,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(s){this.overrideClearColor=s}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(s){this.overrideClearAlpha=s}render(s,e,t,i,a){const r=this.overrideClearColor,n=this.overrideClearAlpha,o=s.getClearAlpha(),l=r!==null,h=n>=0;l?(s.getClearColor(t0),s.setClearColor(r,h?n:o)):h&&s.setClearAlpha(n),s.setRenderTarget(this.renderToScreen?null:e),s.clear(this.color,this.depth,this.stencil),l?s.setClearColor(t0,o):h&&s.setClearAlpha(o)}},OI=class extends fi{constructor(s,e){super("MaskPass",s,e),this.needsSwap=!1,this.clearPass=new wu(!1,!1,!0),this.inverse=!1}set mainScene(s){this.scene=s}set mainCamera(s){this.camera=s}get inverted(){return this.inverse}set inverted(s){this.inverse=s}get clear(){return this.clearPass.enabled}set clear(s){this.clearPass.enabled=s}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(s){this.inverted=s}render(s,e,t,i,a){const r=s.getContext(),n=s.state.buffers,o=this.scene,l=this.camera,h=this.clearPass,c=this.inverted?0:1,d=1-c;n.color.setMask(!1),n.depth.setMask(!1),n.color.setLocked(!0),n.depth.setLocked(!0),n.stencil.setTest(!0),n.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),n.stencil.setFunc(r.ALWAYS,c,4294967295),n.stencil.setClear(d),n.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?h.render(s,null):(h.render(s,e),h.render(s,t))),this.renderToScreen?(s.setRenderTarget(null),s.render(o,l)):(s.setRenderTarget(e),s.render(o,l),s.setRenderTarget(t),s.render(o,l)),n.color.setLocked(!1),n.depth.setLocked(!1),n.stencil.setLocked(!1),n.stencil.setFunc(r.EQUAL,1,4294967295),n.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),n.stencil.setLocked(!0)}},NI=class{constructor(s=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:i=0,frameBufferType:a}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,a,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new yu,this.depthTexture=null,this.passes=[],this.timer=new II,this.autoRenderToScreen=!0,this.setRenderer(s)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(s){const e=this.inputBuffer,t=this.multisampling;t>0&&s>0?(this.inputBuffer.samples=s,this.outputBuffer.samples=s,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==s&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,s),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(s){if(this.renderer=s,s!==null){const e=s.getSize(new $),t=s.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===$t&&s.outputColorSpace===Ge&&(this.inputBuffer.texture.colorSpace=Ge,this.outputBuffer.texture.colorSpace=Ge,this.inputBuffer.dispose(),this.outputBuffer.dispose()),s.autoClear=!1,this.setSize(e.width,e.height);for(const a of this.passes)a.initialize(s,t,i)}}replaceRenderer(s,e=!0){const t=this.renderer,i=t.domElement.parentNode;return this.setRenderer(s),e&&i!==null&&(i.removeChild(t.domElement),i.appendChild(s.domElement)),t}createDepthTexture(){const s=this.depthTexture=new x_;return this.inputBuffer.depthTexture=s,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(s.format=un,s.type=_n):s.type=Na,s}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const s of this.passes)s.setDepthTexture(null)}}createBuffer(s,e,t,i){const a=this.renderer,r=a===null?new $:a.getDrawingBufferSize(new $),n={minFilter:yt,magFilter:yt,stencilBuffer:e,depthBuffer:s,type:t},o=new gt(r.width,r.height,n);return i>0&&(o.ignoreDepthForMultisampleCopy=!1,o.samples=i),t===$t&&a!==null&&a.outputColorSpace===Ge&&(o.texture.colorSpace=Ge),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}setMainScene(s){for(const e of this.passes)e.mainScene=s}setMainCamera(s){for(const e of this.passes)e.mainCamera=s}addPass(s,e){const t=this.passes,i=this.renderer,a=i.getDrawingBufferSize(new $),r=i.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;if(s.setRenderer(i),s.setSize(a.width,a.height),s.initialize(i,r,n),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),s.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,s):t.push(s),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),s.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const o=this.createDepthTexture();for(s of t)s.setDepthTexture(o)}else s.setDepthTexture(this.depthTexture)}removePass(s){const e=this.passes,t=e.indexOf(s);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const r=(o,l)=>o||l.needsDepthTexture;e.reduce(r,!1)||(s.getDepthTexture()===this.depthTexture&&s.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(s.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const s=this.passes;this.deleteDepthTexture(),s.length>0&&(this.autoRenderToScreen&&(s[s.length-1].renderToScreen=!1),this.passes=[])}render(s){const e=this.renderer,t=this.copyPass;let i=this.inputBuffer,a=this.outputBuffer,r=!1,n,o,l;s===void 0&&(this.timer.update(),s=this.timer.getDelta());for(const h of this.passes)h.enabled&&(h.render(e,i,a,s,r),h.needsSwap&&(r&&(t.renderToScreen=h.renderToScreen,n=e.getContext(),o=e.state.buffers.stencil,o.setFunc(n.NOTEQUAL,1,4294967295),t.render(e,i,a,s,r),o.setFunc(n.EQUAL,1,4294967295)),l=i,i=a,a=l),h instanceof OI?r=!0:h instanceof DI&&(r=!1))}setSize(s,e,t){const i=this.renderer,a=i.getSize(new $);(s===void 0||e===void 0)&&(s=a.width,e=a.height),(a.width!==s||a.height!==e)&&i.setSize(s,e,t);const r=i.getDrawingBufferSize(new $);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const n of this.passes)n.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const s of this.passes)s.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),fi.fullscreenGeometry.dispose()}},na={NONE:0,DEPTH:1,CONVOLUTION:2},ot={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},LI=class{constructor(){this.shaderParts=new Map([[ot.FRAGMENT_HEAD,null],[ot.FRAGMENT_MAIN_UV,null],[ot.FRAGMENT_MAIN_IMAGE,null],[ot.VERTEX_HEAD,null],[ot.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=na.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Ot}},Bc=!1,i0=class{constructor(s=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(s),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case si:t=this.materialsFlatShadedDoubleSide;break;case ai:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case si:t=this.materialsDoubleSide;break;case ai:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(s){if(!(s instanceof Le))return s.clone();const e=s.uniforms,t=new Map;for(const a in e){const r=e[a].value;r.isRenderTargetTexture&&(e[a].value=null,t.set(a,r))}const i=s.clone();for(const a of t)e[a[0]].value=a[1],i.uniforms[a[0]].value=a[1];return i}setMaterial(s){if(this.disposeMaterials(),this.material=s,s!==null){const e=this.materials=[this.cloneMaterial(s),this.cloneMaterial(s),this.cloneMaterial(s)];for(const t of e)t.uniforms=Object.assign({},s.uniforms),t.side=ds;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},s.uniforms),i.side=ai,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},s.uniforms),i.side=si,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},s.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},s.uniforms),i.flatShading=!0,i.side=ai,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},s.uniforms),i.flatShading=!0,i.side=si,i})}}render(s,e,t){const i=s.shadowMap.enabled;if(s.shadowMap.enabled=!1,Bc){const a=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),s.render(e,t);for(const r of a)r[0].material=r[1];this.meshCount!==a.size&&a.clear()}else{const a=e.overrideMaterial;e.overrideMaterial=this.material,s.render(e,t),e.overrideMaterial=a}s.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const s=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of s)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Bc}static set workaroundEnabled(s){Bc=s}},Ta=-1,Os=class extends ks{constructor(s,e=Ta,t=Ta,i=1){super(),this.resizable=s,this.baseSize=new $(1,1),this.preferredSize=new $(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new $,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const s=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==Ta?t.width=e.width:e.height!==Ta?t.width=Math.round(e.height*(s.width/Math.max(s.height,1))):t.width=Math.round(s.width*i),e.height!==Ta?t.height=e.height:e.width!==Ta?t.height=Math.round(e.width/Math.max(s.width/Math.max(s.height,1),1)):t.height=Math.round(s.height*i)}get width(){return this.effectiveSize.width}set width(s){this.preferredWidth=s}get height(){return this.effectiveSize.height}set height(s){this.preferredHeight=s}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(s){this.s!==s&&(this.s=s,this.preferredSize.setScalar(Ta),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(s){this.scale=s}get baseWidth(){return this.baseSize.width}set baseWidth(s){this.baseSize.width!==s&&(this.baseSize.width=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(s){this.baseWidth=s}get baseHeight(){return this.baseSize.height}set baseHeight(s){this.baseSize.height!==s&&(this.baseSize.height=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(s){this.baseHeight=s}setBaseSize(s,e){(this.baseSize.width!==s||this.baseSize.height!==e)&&(this.baseSize.set(s,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(s){this.preferredSize.width!==s&&(this.preferredSize.width=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(s){this.preferredWidth=s}get preferredHeight(){return this.preferredSize.height}set preferredHeight(s){this.preferredSize.height!==s&&(this.preferredSize.height=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(s){this.preferredHeight=s}setPreferredSize(s,e){(this.preferredSize.width!==s||this.preferredSize.height!==e)&&(this.preferredSize.set(s,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(s){this.s=s.scale,this.baseSize.set(s.baseWidth,s.baseHeight),this.preferredSize.set(s.preferredWidth,s.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Ta}},je={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},FI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),opacity);}",kI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}",VI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),opacity);}",UI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),opacity);}",BI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),opacity);}",WI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),opacity);}",GI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),opacity);}",qI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),opacity);}",HI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),opacity);}",XI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),opacity);}",jI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),opacity);}",ZI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),opacity);}",JI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),opacity);}",KI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),opacity);}",YI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),opacity);}",QI="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),opacity);}",$I="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}",eC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),opacity);}",tC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),opacity);}",iC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),opacity);}",sC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),opacity);}",aC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),opacity);}",rC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",nC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),opacity);}",oC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),opacity);}",lC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),opacity);}",hC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),opacity);}",cC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),opacity);}",dC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),opacity);}",_C="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",uC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),opacity);}",fC="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),opacity);}",vC=new Map([[je.ADD,FI],[je.ALPHA,kI],[je.AVERAGE,VI],[je.COLOR,UI],[je.COLOR_BURN,BI],[je.COLOR_DODGE,WI],[je.DARKEN,GI],[je.DIFFERENCE,qI],[je.DIVIDE,HI],[je.DST,null],[je.EXCLUSION,XI],[je.HARD_LIGHT,jI],[je.HARD_MIX,ZI],[je.HUE,JI],[je.INVERT,KI],[je.INVERT_RGB,YI],[je.LIGHTEN,QI],[je.LINEAR_BURN,$I],[je.LINEAR_DODGE,eC],[je.LINEAR_LIGHT,tC],[je.LUMINOSITY,iC],[je.MULTIPLY,sC],[je.NEGATION,aC],[je.NORMAL,rC],[je.OVERLAY,nC],[je.PIN_LIGHT,oC],[je.REFLECT,lC],[je.SATURATION,hC],[je.SCREEN,cC],[je.SOFT_LIGHT,dC],[je.SRC,_C],[je.SUBTRACT,uC],[je.VIVID_LIGHT,fC]]),gC=class extends ks{constructor(s,e=1){super(),this._blendFunction=s,this.opacity=new O(e)}getOpacity(){return this.opacity.value}setOpacity(s){this.opacity.value=s}get blendFunction(){return this._blendFunction}set blendFunction(s){this._blendFunction=s,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(s){this.blendFunction=s}getShaderCode(){return vC.get(this.blendFunction)}},Ah=class extends ks{constructor(s,e,{attributes:t=na.NONE,blendFunction:i=je.NORMAL,defines:a=new Map,uniforms:r=new Map,extensions:n=null,vertexShader:o=null}={}){super(),this.name=s,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=o,this.defines=a,this.uniforms=r,this.extensions=n,this.blendMode=new gC(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Ot,this._outputColorSpace=Ms}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(s){this._inputColorSpace=s,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(s){this._outputColorSpace=s,this.setChanged()}set mainScene(s){}set mainCamera(s){}getName(){return this.name}setRenderer(s){this.renderer=s}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(s){this.attributes=s,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(s){this.fragmentShader=s,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(s){this.vertexShader=s,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(s,e=da){}update(s,e,t){}setSize(s,e){}initialize(s,e,t){}dispose(){for(const s of Object.keys(this)){const e=this[s];(e instanceof gt||e instanceof Ci||e instanceof Ct||e instanceof fi)&&this[s].dispose()}}},Qo={SMALL:1,MEDIUM:2,LARGE:3},xC=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,pC="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",mC=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],yC=class extends Le{constructor(s=new et){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new O(null),texelSize:new O(new et),scale:new O(1),kernel:new O(0)},blending:di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:xC,vertexShader:pC}),this.setTexelSize(s.x,s.y),this.kernelSize=Qo.MEDIUM}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.inputBuffer=s}get kernelSequence(){return mC[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(s){this.uniforms.scale.value=s}getScale(){return this.uniforms.scale.value}setScale(s){this.uniforms.scale.value=s}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(s){this.uniforms.kernel.value=s}setKernel(s){this.kernel=s}setTexelSize(s,e){this.uniforms.texelSize.value.set(s,e,s*.5,e*.5)}setSize(s,e){const t=1/s,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},wC=class extends fi{constructor({kernelSize:s=Qo.MEDIUM,resolutionScale:e=.5,width:t=Os.AUTO_SIZE,height:i=Os.AUTO_SIZE,resolutionX:a=t,resolutionY:r=i}={}){super("KawaseBlurPass"),this.renderTargetA=new gt(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const n=this.resolution=new Os(this,a,r,e);n.addEventListener("change",o=>this.setSize(n.baseWidth,n.baseHeight)),this._blurMaterial=new yC,this._blurMaterial.kernelSize=s,this.copyMaterial=new op}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(s){this._blurMaterial=s}get dithering(){return this.copyMaterial.dithering}set dithering(s){this.copyMaterial.dithering=s}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(s){this.blurMaterial.kernelSize=s}get width(){return this.resolution.width}set width(s){this.resolution.preferredWidth=s}get height(){return this.resolution.height}set height(s){this.resolution.preferredHeight=s}get scale(){return this.blurMaterial.scale}set scale(s){this.blurMaterial.scale=s}getScale(){return this.blurMaterial.scale}setScale(s){this.blurMaterial.scale=s}getKernelSize(){return this.kernelSize}setKernelSize(s){this.kernelSize=s}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}render(s,e,t,i,a){const r=this.scene,n=this.camera,o=this.renderTargetA,l=this.renderTargetB,h=this.blurMaterial,c=h.kernelSequence;let d=e;this.fullscreenMaterial=h;for(let _=0,u=c.length;_<u;++_){const x=(_&1)===0?o:l;h.kernel=c[_],h.inputBuffer=d.texture,s.setRenderTarget(x),s.render(r,n),d=x}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=d.texture,s.setRenderTarget(this.renderToScreen?null:t),s.render(r,n)}setSize(s,e){const t=this.resolution;t.setBaseSize(s,e);const i=t.width,a=t.height;this.renderTargetA.setSize(i,a),this.renderTargetB.setSize(i,a),this.blurMaterial.setSize(s,e)}initialize(s,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==$t?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):s!==null&&s.outputColorSpace===Ge&&(this.renderTargetA.texture.colorSpace=Ge,this.renderTargetB.texture.colorSpace=Ge))}static get AUTO_SIZE(){return Os.AUTO_SIZE}},zC=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);mask=low*high;
#elif defined(THRESHOLD)
mask=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=texel*mask;
#else
gl_FragColor=vec4(l*mask);
#endif
}`,PC=class extends Le{constructor(s=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:yr.replace(/\D+/g,"")},uniforms:{inputBuffer:new O(null),threshold:new O(0),smoothing:new O(1),range:new O(null)},blending:di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:zC,vertexShader:mu}),this.colorOutput=s,this.luminanceRange=e}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}get threshold(){return this.uniforms.threshold.value}set threshold(s){this.smoothing>0||s>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=s}getThreshold(){return this.threshold}setThreshold(s){this.threshold=s}get smoothing(){return this.uniforms.smoothing.value}set smoothing(s){this.threshold>0||s>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=s}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(s){this.smoothing=s}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(s){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(s){s?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(s){return this.colorOutput}setColorOutputEnabled(s){this.colorOutput=s}get useRange(){return this.luminanceRange!==null}set useRange(s){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(s){s!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=s,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(s){this.luminanceRange=s}},lp=class extends fi{constructor({renderTarget:s,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:a=Os.AUTO_SIZE,height:r=Os.AUTO_SIZE,resolutionX:n=a,resolutionY:o=r}={}){super("LuminancePass"),this.fullscreenMaterial=new PC(t,e),this.needsSwap=!1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new gt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Os(this,n,o,i);l.addEventListener("change",h=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(s,e,t,i,a){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,s.setRenderTarget(this.renderToScreen?null:this.renderTarget),s.render(this.scene,this.camera)}setSize(s,e){const t=this.resolution;t.setBaseSize(s,e),this.renderTarget.setSize(t.width,t.height)}initialize(s,e,t){t!==void 0&&t!==$t&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},bC=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,TC="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",SC=class extends Le{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new O(null),texelSize:new O(new $)},blending:di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:bC,vertexShader:TC})}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setSize(s,e){this.uniforms.texelSize.value.set(1/s,1/e)}},EC=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,AC="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",MC=class extends Le{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new O(null),supportBuffer:new O(null),texelSize:new O(new $),radius:new O(.85)},blending:di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:EC,vertexShader:AC})}set inputBuffer(s){this.uniforms.inputBuffer.value=s}set supportBuffer(s){this.uniforms.supportBuffer.value=s}get radius(){return this.uniforms.radius.value}set radius(s){this.uniforms.radius.value=s}setSize(s,e){this.uniforms.texelSize.value.set(1/s,1/e)}},IC=class extends fi{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new gt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new SC,this.upsamplingMaterial=new MC,this.resolution=new $}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(s){if(this.levels!==s){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<s;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=s-1;t<i;++t){const a=e.clone();a.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(a)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(s){this.upsamplingMaterial.radius=s}render(s,e,t,i,a){const{scene:r,camera:n}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:h,upsamplingMipmaps:c}=this;let d=e;this.fullscreenMaterial=o;for(let _=0,u=h.length;_<u;++_){const x=h[_];o.setSize(d.width,d.height),o.inputBuffer=d.texture,s.setRenderTarget(x),s.render(r,n),d=x}this.fullscreenMaterial=l;for(let _=c.length-1;_>=0;--_){const u=c[_];l.setSize(d.width,d.height),l.inputBuffer=d.texture,l.supportBuffer=h[_].texture,s.setRenderTarget(u),s.render(r,n),d=u}}setSize(s,e){const t=this.resolution;t.set(s,e);let i=t.width,a=t.height;for(let r=0,n=this.downsamplingMipmaps.length;r<n;++r)i=Math.round(i*.5),a=Math.round(a*.5),this.downsamplingMipmaps[r].setSize(i,a),r<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[r].setSize(i,a)}initialize(s,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const a of i)a.texture.type=t;if(t!==$t)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(s!==null&&s.outputColorSpace===Ge)for(const a of i)a.texture.colorSpace=Ge}}dispose(){super.dispose();for(const s of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))s.dispose()}},CC=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}`,DC=class extends Ah{constructor({blendFunction:s=je.SCREEN,luminanceThreshold:e=1,luminanceSmoothing:t=.03,mipmapBlur:i=!0,intensity:a=1,radius:r=.85,levels:n=8,kernelSize:o=Qo.LARGE,resolutionScale:l=.5,width:h=Os.AUTO_SIZE,height:c=Os.AUTO_SIZE,resolutionX:d=h,resolutionY:_=c}={}){super("BloomEffect",CC,{blendFunction:s,uniforms:new Map([["map",new O(null)],["intensity",new O(a)]])}),this.renderTarget=new gt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new wC({kernelSize:o}),this.luminancePass=new lp({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new IC,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=r,this.mipmapBlurPass.levels=n,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const u=this.resolution=new Os(this,d,_,l);u.addEventListener("change",x=>this.setSize(u.baseWidth,u.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(s){this.resolution.preferredWidth=s}get height(){return this.resolution.height}set height(s){this.resolution.preferredHeight=s}get dithering(){return this.blurPass.dithering}set dithering(s){this.blurPass.dithering=s}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(s){this.blurPass.kernelSize=s}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(s){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(s){this.uniforms.get("intensity").value=s}getIntensity(){return this.intensity}setIntensity(s){this.intensity=s}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}update(s,e,t){const i=this.renderTarget,a=this.luminancePass;a.enabled?(a.render(s,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(s,a.renderTarget):this.blurPass.render(s,a.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(s,e):this.blurPass.render(s,e,i)}setSize(s,e){const t=this.resolution;t.setBaseSize(s,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(s,e),this.mipmapBlurPass.setSize(s,e)}initialize(s,e,t){this.blurPass.initialize(s,e,t),this.luminancePass.initialize(s,e,t),this.mipmapBlurPass.initialize(s,e,t),t!==void 0&&(this.renderTarget.texture.type=t,s!==null&&s.outputColorSpace===Ge&&(this.renderTarget.texture.colorSpace=Ge))}},s0=class extends fi{constructor(s,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=s,this.input=e}setInput(s){this.input=s}render(s,e,t,i,a){const r=this.fullscreenMaterial.uniforms;e!==null&&r!==void 0&&r[this.input]!==void 0&&(r[this.input].value=e.texture),s.setRenderTarget(this.renderToScreen?null:t),s.render(this.scene,this.camera)}initialize(s,e,t){t!==void 0&&t!==$t&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},RC=class extends fi{constructor(s,e,t=null){super("RenderPass",s,e),this.needsSwap=!1,this.clearPass=new wu,this.overrideMaterialManager=t===null?null:new i0(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(s){this.scene=s}set mainCamera(s){this.camera=s}get renderToScreen(){return super.renderToScreen}set renderToScreen(s){super.renderToScreen=s,this.clearPass.renderToScreen=s}get overrideMaterial(){const s=this.overrideMaterialManager;return s!==null?s.material:null}set overrideMaterial(s){const e=this.overrideMaterialManager;s!==null?e!==null?e.setMaterial(s):this.overrideMaterialManager=new i0(s):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(s){this.overrideMaterial=s}get clear(){return this.clearPass.enabled}set clear(s){this.clearPass.enabled=s}getSelection(){return this.selection}setSelection(s){this.selection=s}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(s){this.ignoreBackground=s}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(s){this.skipShadowMapUpdate=s}getClearPass(){return this.clearPass}render(s,e,t,i,a){const r=this.scene,n=this.camera,o=this.selection,l=n.layers.mask,h=r.background,c=s.shadowMap.autoUpdate,d=this.renderToScreen?null:e;o!==null&&n.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(s.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(s,e),s.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(s,r,n):s.render(r,n),n.layers.mask=l,r.background=h,s.shadowMap.autoUpdate=c}},hp={COLOR:2},OC={DISABLED:0},io={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},Ai={LINEAR:0,REINHARD:1,REINHARD2:2,REINHARD2_ADAPTIVE:3,OPTIMIZED_CINEON:5,CINEON:5,ACES_FILMIC:6,AGX:7,NEUTRAL:8},Hr={DEFAULT:0,ESKIL:1},NC=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,LC=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,FC=class extends Le{constructor(s=new $,e=hp.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:yr.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),predicationBuffer:new O(null),texelSize:new O(s)},blending:di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:NC,vertexShader:LC}),this.edgeDetectionMode=e}set depthBuffer(s){this.uniforms.depthBuffer.value=s}set depthPacking(s){this.defines.DEPTH_PACKING=s.toFixed(0),this.needsUpdate=!0}setDepthBuffer(s,e=da){this.depthBuffer=s,this.depthPacking=e}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(s){this.defines.EDGE_DETECTION_MODE=s.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(s){this.edgeDetectionMode=s}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(s){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=s.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(s){this.localContrastAdaptationFactor=s}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(s){this.defines.EDGE_THRESHOLD=s.toFixed("6"),this.defines.DEPTH_THRESHOLD=(s*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(s){this.edgeDetectionThreshold=s}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(s){this.defines.PREDICATION_MODE=s.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(s){this.predicationMode=s}set predicationBuffer(s){this.uniforms.predicationBuffer.value=s}setPredicationBuffer(s){this.uniforms.predicationBuffer.value=s}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(s){this.defines.PREDICATION_THRESHOLD=s.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(s){this.predicationThreshold=s}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(s){this.defines.PREDICATION_SCALE=s.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(s){this.predicationScale=s}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(s){this.defines.PREDICATION_STRENGTH=s.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(s){this.predicationStrength=s}setSize(s,e){this.uniforms.texelSize.value.set(1/s,1/e)}},kC=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,VC="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",UC=class extends Le{constructor(s=new $,e=new $){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new O(null),searchTexture:new O(null),areaTexture:new O(null),resolution:new O(e),texelSize:new O(s)},blending:di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:kC,vertexShader:VC})}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(s){this.uniforms.searchTexture.value=s}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(s){this.uniforms.areaTexture.value=s}setLookupTextures(s,e){this.searchTexture=s,this.areaTexture=e}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(s){const e=Math.min(Math.max(s,0),112);this.defines.MAX_SEARCH_STEPS_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(s){this.orthogonalSearchSteps=s}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(s){const e=Math.min(Math.max(s,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(s){this.diagonalSearchSteps=s}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(s){s?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(s){this.diagonalDetection=s}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(s){const e=Math.min(Math.max(s,0),100);this.defines.CORNER_ROUNDING=e.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(e/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(s){this.cornerRounding=s}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(s){s?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(s){this.cornerDetection=s}setSize(s,e){const t=this.uniforms;t.texelSize.value.set(1/s,1/e),t.resolution.value.set(s,e)}},a0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",r0="data:image/png;base64,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",BC="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",WC="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",GC=class extends Ah{constructor({blendFunction:s=je.SRC,preset:e=io.MEDIUM,edgeDetectionMode:t=hp.COLOR,predicationMode:i=OC.DISABLED}={}){super("SMAAEffect",BC,{vertexShader:WC,blendFunction:s,attributes:na.CONVOLUTION|na.DEPTH,uniforms:new Map([["weightMap",new O(null)]])});let a,r;arguments.length>1&&(a=arguments[0],r=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new gt(1,1,{depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new wu(!0,!1,!1),this.clearPass.overrideClearColor=new X(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new s0(new FC),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=i,this.weightsPass=new s0(new UC);const n=new W0;n.onLoad=()=>{const o=new Ct(a);o.name="SMAA.Search",o.magFilter=it,o.minFilter=it,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!0,this.weightsMaterial.searchTexture=o;const l=new Ct(r);l.name="SMAA.Area",l.magFilter=yt,l.minFilter=yt,l.generateMipmaps=!1,l.needsUpdate=!0,l.flipY=!1,this.weightsMaterial.areaTexture=l,this.dispatchEvent({type:"load"})},n.itemStart("search"),n.itemStart("area"),a!==void 0&&r!==void 0?(n.itemEnd("search"),n.itemEnd("area")):typeof Image<"u"&&(a=new Image,r=new Image,a.addEventListener("load",()=>n.itemEnd("search")),r.addEventListener("load",()=>n.itemEnd("area")),a.src=a0,r.src=r0),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(s){this.edgeDetectionMaterial.edgeDetectionThreshold=s}setOrthogonalSearchSteps(s){this.weightsMaterial.orthogonalSearchSteps=s}applyPreset(s){const e=this.edgeDetectionMaterial,t=this.weightsMaterial;switch(s){case io.LOW:e.edgeDetectionThreshold=.15,t.orthogonalSearchSteps=4,t.diagonalDetection=!1,t.cornerDetection=!1;break;case io.MEDIUM:e.edgeDetectionThreshold=.1,t.orthogonalSearchSteps=8,t.diagonalDetection=!1,t.cornerDetection=!1;break;case io.HIGH:e.edgeDetectionThreshold=.1,t.orthogonalSearchSteps=16,t.diagonalSearchSteps=8,t.cornerRounding=25,t.diagonalDetection=!0,t.cornerDetection=!0;break;case io.ULTRA:e.edgeDetectionThreshold=.05,t.orthogonalSearchSteps=32,t.diagonalSearchSteps=16,t.cornerRounding=25,t.diagonalDetection=!0,t.cornerDetection=!0;break}}setDepthTexture(s,e=da){this.edgeDetectionMaterial.depthBuffer=s,this.edgeDetectionMaterial.depthPacking=e}update(s,e,t){this.clearPass.render(s,this.renderTargetEdges),this.edgeDetectionPass.render(s,e,this.renderTargetEdges),this.weightsPass.render(s,this.renderTargetEdges,this.renderTargetWeights)}setSize(s,e){this.edgeDetectionMaterial.setSize(s,e),this.weightsMaterial.setSize(s,e),this.renderTargetEdges.setSize(s,e),this.renderTargetWeights.setSize(s,e)}dispose(){const{searchTexture:s,areaTexture:e}=this.weightsMaterial;s!==null&&e!==null&&(s.dispose(),e.dispose()),super.dispose()}static get searchImageDataURL(){return a0}static get areaImageDataURL(){return r0}},qC=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,HC=class extends Le{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new O(null),luminanceBuffer1:new O(null),minLuminance:new O(.01),deltaTime:new O(0),tau:new O(1)},extensions:{shaderTextureLOD:!0},blending:di,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:qC,vertexShader:mu})}set luminanceBuffer0(s){this.uniforms.luminanceBuffer0.value=s}setLuminanceBuffer0(s){this.uniforms.luminanceBuffer0.value=s}set luminanceBuffer1(s){this.uniforms.luminanceBuffer1.value=s}setLuminanceBuffer1(s){this.uniforms.luminanceBuffer1.value=s}set mipLevel1x1(s){this.defines.MIP_LEVEL_1X1=s.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(s){this.mipLevel1x1=s}set deltaTime(s){this.uniforms.deltaTime.value=s}setDeltaTime(s){this.uniforms.deltaTime.value=s}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(s){this.uniforms.minLuminance.value=s}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(s){this.uniforms.minLuminance.value=s}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(s){this.uniforms.tau.value=s}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(s){this.uniforms.tau.value=s}},XC=class extends fi{constructor(s,{minLuminance:e=.01,adaptationRate:t=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new HC,this.needsSwap=!1,this.renderTargetPrevious=new gt(1,1,{minFilter:it,magFilter:it,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const i=this.fullscreenMaterial;i.luminanceBuffer0=this.renderTargetPrevious.texture,i.luminanceBuffer1=s,i.minLuminance=e,i.adaptationRate=t,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new yu(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(s){this.fullscreenMaterial.mipLevel1x1=s}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(s){this.fullscreenMaterial.adaptationRate=s}render(s,e,t,i,a){this.fullscreenMaterial.deltaTime=i,s.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),s.render(this.scene,this.camera),this.copyPass.render(s,this.renderTargetAdapted)}},jC=`#include <tonemapping_pars_fragment>
uniform float whitePoint;
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
uniform float middleGrey;
#if TONE_MAPPING_MODE == 3
uniform lowp sampler2D luminanceBuffer;
#else
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 3
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}
#elif TONE_MAPPING_MODE == 4
#define A 0.15
#define B 0.50
#define C 0.10
#define D 0.20
#define E 0.02
#define F 0.30
vec3 Uncharted2Helper(const in vec3 x){return((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}vec3 Uncharted2ToneMapping(vec3 color){color*=toneMappingExposure;return clamp(Uncharted2Helper(color)/Uncharted2Helper(vec3(whitePoint)),0.0,1.0);}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#elif TONE_MAPPING_MODE == 4
outputColor=vec4(Uncharted2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,ZC=class extends Ah{constructor({blendFunction:s=je.SRC,adaptive:e=!1,mode:t=e?Ai.REINHARD2_ADAPTIVE:Ai.AGX,resolution:i=256,maxLuminance:a=4,whitePoint:r=a,middleGrey:n=.6,minLuminance:o=.01,averageLuminance:l=1,adaptationRate:h=1}={}){super("ToneMappingEffect",jC,{blendFunction:s,uniforms:new Map([["luminanceBuffer",new O(null)],["maxLuminance",new O(a)],["whitePoint",new O(r)],["middleGrey",new O(n)],["averageLuminance",new O(l)]])}),this.renderTargetLuminance=new gt(1,1,{minFilter:ms,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new lp({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new XC(this.luminancePass.texture,{minLuminance:o,adaptationRate:h}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=i,this.mode=t}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(s){if(this.mode===s)return;const t=yr.replace(/\D+/g,"")>=168?"CineonToneMapping(texel)":"OptimizedCineonToneMapping(texel)";switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",s.toFixed(0)),s){case Ai.LINEAR:this.defines.set("toneMapping(texel)","LinearToneMapping(texel)");break;case Ai.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case Ai.CINEON:case Ai.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)",t);break;case Ai.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;case Ai.AGX:this.defines.set("toneMapping(texel)","AgXToneMapping(texel)");break;case Ai.NEUTRAL:this.defines.set("toneMapping(texel)","NeutralToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=s===Ai.REINHARD2_ADAPTIVE,this.setChanged()}getMode(){return this.mode}setMode(s){this.mode=s}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(s){this.uniforms.get("whitePoint").value=s}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(s){this.uniforms.get("middleGrey").value=s}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(s){this.uniforms.get("averageLuminance").value=s}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(s){const e=Math.max(0,Math.ceil(Math.log2(s))),t=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(t,t),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(s){this.resolution=s}get adaptive(){return this.mode===Ai.REINHARD2_ADAPTIVE}set adaptive(s){this.mode=s?Ai.REINHARD2_ADAPTIVE:Ai.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(s){this.adaptiveLuminanceMaterial.adaptationRate=s}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(s){console.warn(this.name,"distinction was removed.")}update(s,e,t){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(s,e),this.adaptiveLuminancePass.render(s,null,null,t))}initialize(s,e,t){this.adaptiveLuminancePass.initialize(s,e,t)}},JC=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,KC=class extends Ah{constructor({blendFunction:s,eskil:e=!1,technique:t=e?Hr.ESKIL:Hr.DEFAULT,offset:i=.5,darkness:a=.5}={}){super("VignetteEffect",JC,{blendFunction:s,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new O(i)],["darkness",new O(a)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(s){this.technique!==s&&(this.defines.set("VIGNETTE_TECHNIQUE",s.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Hr.ESKIL}set eskil(s){this.technique=s?Hr.ESKIL:Hr.DEFAULT}getTechnique(){return this.technique}setTechnique(s){this.technique=s}get offset(){return this.uniforms.get("offset").value}set offset(s){this.uniforms.get("offset").value=s}getOffset(){return this.offset}setOffset(s){this.offset=s}get darkness(){return this.uniforms.get("darkness").value}set darkness(s){this.uniforms.get("darkness").value=s}getDarkness(){return this.darkness}setDarkness(s){this.darkness=s}},YC=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,QC="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",$C=class extends Le{constructor(s,e,t,i,a=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:yr.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new O(null),depthBuffer:new O(null),resolution:new O(new $),texelSize:new O(new $),cameraNear:new O(.3),cameraFar:new O(1e3),aspect:new O(1),time:new O(0)},blending:di,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:a}),s&&this.setShaderParts(s),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(s){this.uniforms.depthBuffer.value=s}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(s){this.defines.DEPTH_PACKING=s.toFixed(0),this.needsUpdate=!0}setDepthBuffer(s,e=da){this.depthBuffer=s,this.depthPacking=e}setShaderData(s){this.setShaderParts(s.shaderParts),this.setDefines(s.defines),this.setUniforms(s.uniforms),this.setExtensions(s.extensions)}setShaderParts(s){return this.fragmentShader=YC.replace(ot.FRAGMENT_HEAD,s.get(ot.FRAGMENT_HEAD)||"").replace(ot.FRAGMENT_MAIN_UV,s.get(ot.FRAGMENT_MAIN_UV)||"").replace(ot.FRAGMENT_MAIN_IMAGE,s.get(ot.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=QC.replace(ot.VERTEX_HEAD,s.get(ot.VERTEX_HEAD)||"").replace(ot.VERTEX_MAIN_SUPPORT,s.get(ot.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(s){for(const e of s.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(s){for(const e of s.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(s){this.extensions={};for(const e of s)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(s){this.encodeOutput!==s&&(s?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(s){return this.encodeOutput}setOutputEncodingEnabled(s){this.encodeOutput=s}get time(){return this.uniforms.time.value}set time(s){this.uniforms.time.value=s}setDeltaTime(s){this.uniforms.time.value+=s}adoptCameraSettings(s){this.copyCameraSettings(s)}copyCameraSettings(s){s&&(this.uniforms.cameraNear.value=s.near,this.uniforms.cameraFar.value=s.far,s instanceof xi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(s,e){const t=this.uniforms;t.resolution.value.set(s,e),t.texelSize.value.set(1/s,1/e),t.aspect.value=s/e}static get Section(){return ot}};function n0(s,e,t){for(const i of e){const a="$1"+s+i.charAt(0).toUpperCase()+i.slice(1),r=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const n of t.entries())n[1]!==null&&t.set(n[0],n[1].replace(r,a))}}function eD(s,e,t){let i=e.getFragmentShader(),a=e.getVertexShader();const r=i!==void 0&&/mainImage/.test(i),n=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(n&&(t.attributes&na.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!r&&!n)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let h=l.get(ot.FRAGMENT_HEAD)||"",c=l.get(ot.FRAGMENT_MAIN_UV)||"",d=l.get(ot.FRAGMENT_MAIN_IMAGE)||"",_=l.get(ot.VERTEX_HEAD)||"",u=l.get(ot.VERTEX_MAIN_SUPPORT)||"";const x=new Set,g=new Set;if(n&&(c+=`	${s}MainUv(UV);
`,t.uvTransformation=!0),a!==null&&/mainSupport/.test(a)){const y=/mainSupport *\([\w\s]*?uv\s*?\)/.test(a);u+=`	${s}MainSupport(`,u+=y?`vUv);
`:`);
`;for(const w of a.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const p of w[1].split(/\s*,\s*/))t.varyings.add(p),x.add(p),g.add(p);for(const w of a.matchAll(o))g.add(w[1])}for(const y of i.matchAll(o))g.add(y[1]);for(const y of e.defines.keys())g.add(y.replace(/\([\w\s,]*\)/g,""));for(const y of e.uniforms.keys())g.add(y);g.delete("while"),g.delete("for"),g.delete("if"),e.uniforms.forEach((y,w)=>t.uniforms.set(s+w.charAt(0).toUpperCase()+w.slice(1),y)),e.defines.forEach((y,w)=>t.defines.set(s+w.charAt(0).toUpperCase()+w.slice(1),y));const v=new Map([["fragment",i],["vertex",a]]);n0(s,g,t.defines),n0(s,g,v),i=v.get("fragment"),a=v.get("vertex");const f=e.blendMode;if(t.blendModes.set(f.blendFunction,f),r){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(d+=e.inputColorSpace===Ge?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==Ms?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const y=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+=`${s}MainImage(color0, UV, `,(t.attributes&na.DEPTH)!==0&&y.test(i)&&(d+="depth, ",t.readDepth=!0),d+=`color1);
	`;const w=s+"BlendOpacity";t.uniforms.set(w,f.opacity),d+=`color0 = blend${f.blendFunction}(color0, color1, ${w});

	`,h+=`uniform float ${w};

`}if(h+=i+`
`,a!==null&&(_+=a+`
`),l.set(ot.FRAGMENT_HEAD,h),l.set(ot.FRAGMENT_MAIN_UV,c),l.set(ot.FRAGMENT_MAIN_IMAGE,d),l.set(ot.VERTEX_HEAD,_),l.set(ot.VERTEX_MAIN_SUPPORT,u),e.extensions!==null)for(const y of e.extensions)t.extensions.add(y)}}var o0=class extends fi{constructor(s,...e){super("EffectPass"),this.fullscreenMaterial=new $C(null,null,null,s),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(s){for(const e of this.effects)e.mainScene=s}set mainCamera(s){this.fullscreenMaterial.copyCameraSettings(s);for(const e of this.effects)e.mainCamera=s}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(s){this.fullscreenMaterial.encodeOutput=s}get dithering(){return this.fullscreenMaterial.dithering}set dithering(s){const e=this.fullscreenMaterial;e.dithering=s,e.needsUpdate=!0}setEffects(s){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=s.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const s=new LI;let e=0;for(const n of this.effects)if(n.blendMode.blendFunction===je.DST)s.attributes|=n.getAttributes()&na.DEPTH;else{if((s.attributes&n.getAttributes()&na.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${n.name})`);eD("e"+e++,n,s)}let t=s.shaderParts.get(ot.FRAGMENT_HEAD),i=s.shaderParts.get(ot.FRAGMENT_MAIN_IMAGE),a=s.shaderParts.get(ot.FRAGMENT_MAIN_UV);const r=/\bblend\b/g;for(const n of s.blendModes.values())t+=n.getShaderCode().replace(r,`blend${n.blendFunction}`)+`
`;(s.attributes&na.DEPTH)!==0?(s.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,s.colorSpace===Ge&&(i+=`color0 = sRGBToLinear(color0);
	`),s.uvTransformation?(a=`vec2 transformedUv = vUv;
`+a,s.defines.set("UV","transformedUv")):s.defines.set("UV","vUv"),s.shaderParts.set(ot.FRAGMENT_HEAD,t),s.shaderParts.set(ot.FRAGMENT_MAIN_IMAGE,i),s.shaderParts.set(ot.FRAGMENT_MAIN_UV,a);for(const[n,o]of s.shaderParts)o!==null&&s.shaderParts.set(n,o.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(s)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(s,e=da){this.fullscreenMaterial.depthBuffer=s,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(s,e)}render(s,e,t,i,a){for(const r of this.effects)r.update(s,e,i);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,r.time+=i*this.timeScale,s.setRenderTarget(this.renderToScreen?null:t),s.render(this.scene,this.camera)}}setSize(s,e){this.fullscreenMaterial.setSize(s,e);for(const t of this.effects)t.setSize(s,e)}initialize(s,e,t){this.renderer=s;for(const i of this.effects)i.initialize(s,e,t);this.updateMaterial(),t!==void 0&&t!==$t&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const s of this.effects)s.removeEventListener("change",this.listener),s.dispose()}handleEvent(s){switch(s.type){case"change":this.recompile();break}}};let tD=class{sizes;#e;effectComposer;advisedEffectPasses;constructor({renderer:e,scene:t,camera:i,sizes:a}){this.sizes=a,this.#e=e,this.advisedEffectPasses=[],this.effectComposer=new NI(e.instance,{frameBufferType:ns,multisampling:0}),e.disableAutoRenderOnResize(),this.effectComposer.addPass(new RC(t,i.instance)),a.pixelRatio===1&&this.advisedEffectPasses.push(new GC)}get renderer(){return this.effectComposer.getRenderer()}resize(){this.effectComposer.setSize(this.sizes.width,this.sizes.height),this.#e.isExecutedInWorker()&&this.update()}update(){this.effectComposer.render()}destroy(){this.effectComposer.dispose()}};var iD=`uniform sampler2D tInput;uniform vec2 resolution;uniform float bSigma;varying vec2 vUv;
#if (KSIZE_ENUM == 0)
#define KSIZE 2
#define MSIZE 5
const float kernel[MSIZE]=float[MSIZE](0.,0.24196934138575799,0.39894,0.24196934138575799,0.);
#elif (KSIZE_ENUM == 1)
#define KSIZE 3
#define MSIZE 7
const float kernel[MSIZE]=float[MSIZE](0.,0.39104045872899694,0.3969502784491287,0.39894,0.3969502784491287,0.39104045872899694,0.);
#elif (KSIZE_ENUM == 2)
#define KSIZE 4
#define MSIZE 9
const float kernel[MSIZE]=float[MSIZE](0.,0.3813856354024969,0.39104045872899694,0.3969502784491287,0.39894,0.3969502784491287,0.39104045872899694,0.3813856354024969,0.);
#elif (KSIZE_ENUM == 3)
#define KSIZE 5
#define MSIZE 11
const float kernel[MSIZE]=float[MSIZE](0.,0.03682680352274845,0.03813856354024969,0.039104045872899694,0.03969502784491287,0.039894,0.03969502784491287,0.039104045872899694,0.03813856354024969,0.03682680352274845,0.);
#elif (KSIZE_ENUM == 4)
#define KSIZE 6
#define MSIZE 13
const float kernel[MSIZE]=float[MSIZE](0.,0.035206331431709856,0.03682680352274845,0.03813856354024969,0.039104045872899694,0.03969502784491287,0.039894,0.03969502784491287,0.039104045872899694,0.03813856354024969,0.03682680352274845,0.035206331431709856,0.);
#elif (KSIZE_ENUM == 5)
#define KSIZE 7
#define MSIZE 15
const float kernel[MSIZE]=float[MSIZE](0.031225216,0.033322271,0.035206333,0.036826804,0.038138565,0.039104044,0.039695028,0.039894000,0.039695028,0.039104044,0.038138565,0.036826804,0.035206333,0.033322271,0.031225216);
#endif
float normpdf(in float x,in float sigma){return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;}float normpdf3(in vec3 v,in float sigma){return 0.39894*exp(-0.5*dot(v,v)/(sigma*sigma))/sigma;}void main(){vec3 c=texture(tInput,vUv).rgb;ivec2 fragCoord=ivec2(vUv*resolution);vec3 finalColor=vec3(0.);float bZ=1.0/normpdf(0.0,bSigma);float totalFactor=0.;for(int i=-KSIZE;i<=KSIZE;++i){for(int j=-KSIZE;j<=KSIZE;++j){vec3 cc=texelFetch(tInput,fragCoord+ivec2(i,j),0).rgb;float factor=normpdf3(cc-c,bSigma)*bZ*kernel[KSIZE+j]*kernel[KSIZE+i];totalFactor+=factor;finalColor+=factor*cc;}}gl_FragColor=vec4(finalColor/totalFactor,1.);}`,cp="varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}";const Kr=1;class sD extends Le{constructor(e){super({uniforms:{tInput:{value:e},resolution:{value:new $(e.image.width*Kr,e.image.height*Kr)},bSigma:{value:0}},defines:{KSIZE_ENUM:Qo.SMALL},vertexShader:cp,fragmentShader:iD})}}class aD extends fi{material;constructor(e){super("BilateralFilterPass"),this.needsSwap=!1,this.material=new sD(e),this.fullscreenMaterial=this.material}setSize(e,t){this.material.uniforms.resolution.value.set(e,t)}render(e,t,i,a,r){e.setRenderTarget(i),e.render(this.scene,this.camera)}updateUniforms(e){this.material.uniforms.bSigma.value=e.variance,this.material.defines.KSIZE_ENUM=e.kernelSize}dispose(){this.material.dispose(),super.dispose()}}var rD=`#include <common>
uniform sampler2D godrays;uniform sampler2D sceneDiffuse;uniform sampler2D sceneDepth;uniform float edgeStrength;uniform float edgeRadius;uniform vec2 resolution;uniform float near;uniform float far;uniform vec3 color;uniform bool gammaCorrection;varying vec2 vUv;
#define DITHERING
#include <dithering_pars_fragment>
float linearize_depth(float depth,float zNear,float zFar){
#if defined( USE_LOGDEPTHBUF )
float d=pow(2.0,depth*log2(far+1.0))-1.0;float a=far/(far-near);float b=far*near/(near-far);depth=a+b/d;
#endif
return zNear*zFar/(zFar+depth*(zNear-zFar));}vec4 LinearTosRGB_(in vec4 value){return vec4(mix(pow(value.rgb,vec3(0.41666))*1.055-vec3(0.055),value.rgb*12.92,vec3(lessThanEqual(value.rgb,vec3(0.0031308)))),value.a);}void main(){float rawDepth=texture2D(sceneDepth,vUv).x;float correctDepth=linearize_depth(rawDepth,near,far);vec2 pushDir=vec2(0.0);float count=0.0;for(float x=-edgeRadius;x<=edgeRadius;x++){for(float y=-edgeRadius;y<=edgeRadius;y++){vec2 sampleUv=(vUv*resolution+vec2(x,y))/resolution;float sampleDepth=texelFetch(sceneDepth,ivec2(sampleUv*resolution),0).x;sampleDepth=linearize_depth(sampleDepth,near,far);if(abs(sampleDepth-correctDepth)<0.05*correctDepth){pushDir+=vec2(x,y);count+=1.0;}}}if(count==0.0){count=1.0;}pushDir/=count;pushDir=normalize(pushDir);vec2 sampleUv=length(pushDir)>0.0 ? vUv+edgeStrength*(pushDir/resolution): vUv;float bestChoice=texture2D(godrays,sampleUv).x;vec3 diffuse=texture2D(sceneDiffuse,vUv).rgb;gl_FragColor=vec4(mix(diffuse,color,bestChoice),1.0);
#include <dithering_fragment>
if(gammaCorrection){gl_FragColor=LinearTosRGB_(gl_FragColor);}}`;class nD extends Le{constructor({godrays:e,edgeStrength:t,edgeRadius:i,color:a,camera:r,gammaCorrection:n}){const o={godrays:{value:e},sceneDiffuse:{value:null},sceneDepth:{value:null},edgeStrength:{value:t},edgeRadius:{value:i},near:{value:.1},far:{value:1e3},color:{value:a},resolution:{value:new $(1,1)},gammaCorrection:{value:1}};super({name:"GodraysCompositorMaterial",uniforms:o,depthWrite:!1,depthTest:!1,fragmentShader:rD,vertexShader:cp}),this.updateUniforms(t,i,a,n,r.near,r.far)}updateUniforms(e,t,i,a,r,n){this.uniforms.edgeStrength.value=e,this.uniforms.edgeRadius.value=t,this.uniforms.color.value=i,this.uniforms.near.value=r,this.uniforms.far.value=n,this.uniforms.gammaCorrection.value=a?1:0}setSize(e,t){this.uniforms.resolution.value.set(e,t)}}class oD extends fi{sceneCamera;depthCopyRenderTexture=null;depthTextureCopyPass=null;constructor(e){super("GodraysCompositorPass"),this.fullscreenMaterial=new nD(e),this.sceneCamera=e.camera}updateUniforms(e){this.fullscreenMaterial.updateUniforms(e.edgeStrength,e.edgeRadius,e.color,e.gammaCorrection,this.sceneCamera.near,this.sceneCamera.far)}render(e,t,i,a,r){this.fullscreenMaterial.uniforms.sceneDiffuse.value=t.texture;const n=this.fullscreenMaterial.uniforms.sceneDepth.value;n&&i&&i.depthTexture&&n===i.depthTexture&&(this.depthCopyRenderTexture||(this.depthCopyRenderTexture=new gt(i.depthTexture.image.width,i.depthTexture.image.height,{minFilter:i.depthTexture.minFilter,magFilter:i.depthTexture.magFilter,format:i.depthTexture.format,generateMipmaps:i.depthTexture.generateMipmaps})),this.depthTextureCopyPass||(this.depthTextureCopyPass=new yu),this.depthTextureCopyPass.render(e,this.fullscreenMaterial.uniforms.sceneDepth.value,this.depthCopyRenderTexture),this.fullscreenMaterial.uniforms.sceneDepth.value=this.depthCopyRenderTexture.texture),e.setRenderTarget(i),e.render(this.scene,this.camera),this.fullscreenMaterial.uniforms.sceneDepth.value=n}setDepthTexture(e,t){if(t&&t!==da)throw new Error("Only BasicDepthPacking is supported");this.fullscreenMaterial.uniforms.sceneDepth.value=e}setSize(e,t){this.fullscreenMaterial.setSize(e,t)}}const lD="data:image/png;base64,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";async function hD(){const s=new w_,e=await new Promise((a,r)=>{s.load(lD,a,void 0,r)}),t=self.OffscreenCanvas?new OffscreenCanvas(e.width,e.height):self.document.createElement("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");if(!i)throw new Error("Failed to get canvas context");return i.drawImage(e,0,0),new F0(t)}const cD=async()=>{const s=await hD();return s.wrapS=rt,s.wrapT=rt,s.magFilter=it,s.minFilter=it,s.generateMipmaps=!1,s.needsUpdate=!0,s};var dD=`varying vec2 vUv;uniform sampler2D sceneDepth;uniform sampler2D blueNoise;uniform vec3 lightPos;uniform vec3 cameraPos;uniform vec3 lightDir;uniform vec3 cameraDir;uniform vec2 resolution;uniform mat4 cameraProjectionMatrixInv;uniform mat4 cameraMatrixWorld;uniform sampler2D shadowMap;uniform vec2 noiseResolution;uniform float texelSizeY;uniform float lightCameraNear;uniform float lightCameraFar;uniform float near;uniform float far;uniform float density;uniform float maxDensity;uniform float distanceAttenuation;uniform vec3[6]fNormals;uniform float[6]fConstants;uniform float raymarchSteps;uniform mat4 premultipliedLightCameraMatrix;uniform vec3 intensityFalloffCenter;uniform float intensityFalloffDistance;uniform float intensityFalloffPower;uniform float rayRadius;uniform float edgePower;uniform float densityMultiplier;uniform float scatteringStrength;
#include <packing>
vec3 WorldPosFromDepth(float depth,vec2 coord){
#if defined( USE_LOGDEPTHBUF )
float d=pow(2.0,depth*log2(far+1.0))-1.0;float a=far/(far-near);float b=far*near/(near-far);depth=a+b/d;
#endif
float z=depth*2.0-1.0;vec4 clipSpacePosition=vec4(coord*2.0-1.0,z,1.0);vec4 viewSpacePosition=cameraProjectionMatrixInv*clipSpacePosition;viewSpacePosition/=viewSpacePosition.w;vec4 worldSpacePosition=cameraMatrixWorld*viewSpacePosition;return worldSpacePosition.xyz;}vec2 cubeToUV(vec3 v){vec3 absV=abs(v);float scaleToCube=1.0/max(absV.x,max(absV.y,absV.z));absV*=scaleToCube;v*=scaleToCube*(1.0-2.0*texelSizeY);vec2 planar=v.xy;float almostATexel=1.5*texelSizeY;float almostOne=1.0-almostATexel;if(absV.z>=almostOne){if(v.z>0.0)planar.x=4.0-v.x;}else if(absV.x>=almostOne){float signX=sign(v.x);planar.x=v.z*signX+2.0*signX;}else if(absV.y>=almostOne){float signY=sign(v.y);planar.x=v.x+2.0*signY+2.0;planar.y=v.z*signY-2.0;}return vec2(0.125,0.25)*planar+vec2(0.375,0.75);}/***Projects \`worldPos\` onto the shadow map of a directional light and returns*that position in UV space.*/vec3 projectToShadowMap(vec3 worldPos){vec4 lightSpacePos=premultipliedLightCameraMatrix*vec4(worldPos,1.0);lightSpacePos/=lightSpacePos.w;lightSpacePos=lightSpacePos*0.5+0.5;return lightSpacePos.xyz;}vec2 inShadow(vec3 worldPos){
#if defined(IS_POINT_LIGHT)
vec2 shadowMapUV=cubeToUV(normalize(worldPos-lightPos));
#elif defined(IS_DIRECTIONAL_LIGHT)
vec3 shadowMapUV=projectToShadowMap(worldPos);bool isOutsideShadowMap=shadowMapUV.x<0.0||shadowMapUV.x>1.0||shadowMapUV.y<0.0||shadowMapUV.y>1.0||shadowMapUV.z<0.0||shadowMapUV.z>1.0;if(isOutsideShadowMap){return vec2(1.0,0.0);}
#endif
vec4 packedDepth=texture2D(shadowMap,shadowMapUV.xy);float depth=unpackRGBAToDepth(packedDepth);depth=lightCameraNear+(lightCameraFar-lightCameraNear)*depth;
#if defined(IS_POINT_LIGHT)
float lightDist=distance(worldPos,lightPos);
#elif defined(IS_DIRECTIONAL_LIGHT)
float lightDist=(lightCameraNear+(lightCameraFar-lightCameraNear)*shadowMapUV.z);
#endif
float difference=lightDist-depth;return vec2(float(difference>0.0),lightDist);}/***Calculates the signed distance from point \`p\` to a plane defined by*normal \`n\` and distance \`h\` from the origin.**\`n\` must be normalized.*/float sdPlane(vec3 p,vec3 n,float h){return dot(p,n)+h;}/***Calculates the intersection of a ray defined by \`rayOrigin\` and \`rayDirection\`*with a plane defined by normal \`planeNormal\` and distance \`planeDistance\`**Returns the distance from the ray origin to the intersection point.**The return value will be negative if the ray does not intersect the plane.*/float intersectRayPlane(vec3 rayOrigin,vec3 rayDirection,vec3 planeNormal,float planeDistance){float denom=dot(planeNormal,rayDirection);return-(sdPlane(rayOrigin,planeNormal,planeDistance)/denom);}/***Calculate intensity falloff based on camera distance to a specific world point*/float calculateIntensityFalloff(){float cameraDistance=distance(cameraPos,intensityFalloffCenter);if(cameraDistance<=intensityFalloffDistance){return 1.0;}float normalizedDistance=(cameraDistance-intensityFalloffDistance)/intensityFalloffDistance;return 1.0/(1.0+pow(normalizedDistance,intensityFalloffPower));}/***Calculate edge enhancement for cone-like ray appearance*/float calculateRayEdgeIntensity(vec3 samplePos,vec3 rayStart,vec3 rayEnd){vec3 rayDir=normalize(rayEnd-rayStart);vec3 toSample=samplePos-rayStart;float projLength=dot(toSample,rayDir);vec3 closestPoint=rayStart+projLength*rayDir;float distanceFromRay=distance(samplePos,closestPoint);float edgeIntensity=1.0-smoothstep(0.0,rayRadius,distanceFromRay);edgeIntensity=pow(edgeIntensity,edgePower);return edgeIntensity;}/***Calculate scattering factor based on light type*/float calculateScattering(vec3 samplePos){float scatteringFactor=1.0;
#if defined(IS_POINT_LIGHT)
float lightDist=distance(samplePos,lightPos);scatteringFactor=1.0/(1.0+lightDist*scatteringStrength);
#elif defined(IS_DIRECTIONAL_LIGHT)
vec3 toCamera=normalize(cameraPos-samplePos);float scatterDot=dot(normalize(lightDir),toCamera);scatteringFactor=0.5+0.5*pow(max(scatterDot,0.0),2.0);
#endif
return scatteringFactor;}void main(){float depth=texture2D(sceneDepth,vUv).x;vec3 worldPos=WorldPosFromDepth(depth,vUv);float inBoxDist=-10000.0;for(int i=0;i<6;i++){inBoxDist=max(inBoxDist,sdPlane(cameraPos,fNormals[i],fConstants[i]));}bool cameraIsInBox=inBoxDist<0.0;vec3 startPos=cameraPos;if(cameraIsInBox){for(int i=0;i<6;i++){if(sdPlane(worldPos,fNormals[i],fConstants[i])>0.0){vec3 direction=normalize(worldPos-cameraPos);float t=intersectRayPlane(cameraPos,direction,fNormals[i],fConstants[i]);worldPos=cameraPos+t*direction;}}}else{vec3 direction=normalize(worldPos-cameraPos);float minT=10000.0;for(int i=0;i<6;i++){float t=intersectRayPlane(cameraPos,direction,fNormals[i],fConstants[i]);if(t<minT&&t>0.0){minT=t;}}if(minT==10000.0){gl_FragColor=vec4(0.0,0.0,0.0,1.0);return;}startPos=cameraPos+(minT+0.001)*direction;float endInBoxDist=-10000.0;for(int i=0;i<6;i++){endInBoxDist=max(endInBoxDist,sdPlane(worldPos,fNormals[i],fConstants[i]));}bool endInBox=false;if(endInBoxDist<0.0){endInBox=true;}if(!endInBox){float minT=10000.0;for(int i=0;i<6;i++){if(sdPlane(worldPos,fNormals[i],fConstants[i])>0.0){float t=intersectRayPlane(startPos,direction,fNormals[i],fConstants[i]);if(t<minT&&t>0.0){minT=t;}}}if(minT<distance(worldPos,startPos)){worldPos=startPos+minT*direction;}}}float illum=0.0;vec4 blueNoiseSample=texture2D(blueNoise,vUv*(resolution/noiseResolution));float samplesFloat=round(raymarchSteps+((raymarchSteps/8.)+2.)*blueNoiseSample.x);int samples=int(samplesFloat);for(int i=0;i<samples;i++){vec3 samplePos=mix(startPos,worldPos,float(i)/samplesFloat);vec2 shadowInfo=inShadow(samplePos);float shadowAmount=1.0-shadowInfo.x;float accumulation=shadowAmount*4.0;accumulation*=distance(startPos,worldPos)*density*densityMultiplier;accumulation*=pow(1.0-shadowInfo.y/lightCameraFar,distanceAttenuation);float edgeBoost=calculateRayEdgeIntensity(samplePos,startPos,worldPos);accumulation*=(0.3+edgeBoost);/*float scatteringFactor=calculateScattering(samplePos);accumulation*=scatteringFactor;*/illum+=accumulation;}illum/=samplesFloat;float distanceFalloff=calculateIntensityFalloff();float finalIllum=clamp(1.0-exp(-illum*2.0),0.0,maxDensity);finalIllum*=max(distanceFalloff,0.2);gl_FragColor=vec4(vec3(finalIllum),depth);}`,_D="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}";const Ea=1/2;class uD extends Le{constructor(e){const t={density:{value:.0078125},maxDensity:{value:.5},distanceAttenuation:{value:2},sceneDepth:{value:null},lightPos:{value:new S(0,0,0)},lightDir:{value:new S(0,0,0)},cameraPos:{value:new S(0,0,0)},cameraDir:{value:new S(0,0,0)},resolution:{value:new $(1,1)},premultipliedLightCameraMatrix:{value:new De},cameraProjectionMatrixInv:{value:new De},cameraMatrixWorld:{value:new De},shadowMap:{value:null},texelSizeY:{value:1},lightCameraNear:{value:.1},lightCameraFar:{value:1e3},near:{value:.1},far:{value:1e3},blueNoise:{value:null},noiseResolution:{value:new $(1,1)},fNormals:{value:Fo.map(()=>new S)},fConstants:{value:Fo.map(()=>0)},raymarchSteps:{value:60},intensityFalloffCenter:{value:new S(0,0,0)},intensityFalloffDistance:{value:10},intensityFalloffPower:{value:2},rayRadius:{value:.5},edgePower:{value:2},densityMultiplier:{value:1},scatteringStrength:{value:0}},i={};e instanceof zn||e.isPointLight?i.IS_POINT_LIGHT="":(e instanceof wo||e.isDirectionalLight)&&(i.IS_DIRECTIONAL_LIGHT=""),super({name:"GodraysMaterial",uniforms:t,fragmentShader:dD,vertexShader:_D,defines:i}),cD().then(a=>{t.blueNoise.value=a,t.noiseResolution.value.set(a.image.width,a.image.height)})}}const Fo=[new S(1,0,0),new S(-1,0,0),new S(0,1,0),new S(0,-1,0),new S(0,0,1),new S(0,0,-1)],fD=Fo.map(()=>new Ys),Wc=new S,l0=new Cn,h0=new De;class vD extends fi{material;shadowMapSet=!1;props;lastParams;lightWorldPos=new S;constructor(e,t){super("GodraysPass"),this.props=e,this.lastParams=t,this.material=new uD(e.light),this.updateUniforms(e,t),this.fullscreenMaterial=this.material}setSize(e,t){this.material.uniforms.resolution.value.set(Math.ceil(e*Ea),Math.ceil(t*Ea)),this.material.uniforms.near.value=this.props.camera.near,this.material.uniforms.far.value=this.props.camera.far}render(e,t,i,a,r){!this.shadowMapSet&&this.props.light.shadow.map?.texture&&(this.updateUniforms(this.props,this.lastParams),this.shadowMapSet=!0),this.updateLightParams(this.props),e.setRenderTarget(i),e.render(this.scene,this.camera)}setDepthTexture(e,t){if(this.material.uniforms.sceneDepth.value=e,t&&t!==da)throw new Error("Only BasicDepthPacking is supported")}updateLightParams({light:e,camera:t}){e.getWorldPosition(this.lightWorldPos);const i=this.material.uniforms;i.premultipliedLightCameraMatrix.value.multiplyMatrices(e.shadow.camera.projectionMatrix,e.shadow.camera.matrixWorldInverse);const a=new S;if(e instanceof zn||e.isPointLight){for(let r=0;r<Fo.length;r+=1){const n=Fo[r],o=fD[r];Wc.copy(e.position),Wc.addScaledVector(n,i.lightCameraFar.value),o.setFromNormalAndCoplanarPoint(n,Wc),i.fNormals.value[r].copy(o.normal),i.fConstants.value[r]=o.constant}t.getWorldPosition(a),a.sub(this.lightWorldPos).normalize(),i.lightDir.value.copy(a)}else if(e instanceof wo||e.isDirectionalLight){h0.multiplyMatrices(e.shadow.camera.projectionMatrix,e.shadow.camera.matrixWorldInverse),l0.setFromProjectionMatrix(h0);for(let r=0;r<6;r+=1){const n=l0.planes[r];i.fNormals.value[r].copy(n.normal).multiplyScalar(-1),i.fConstants.value[r]=n.constant*-1}e.target.getWorldPosition(a),a.sub(this.lightWorldPos).normalize(),i.lightDir.value.copy(a)}t.getWorldDirection(i.cameraDir.value)}updateUniforms({light:e,camera:t},i){const a=e.shadow;if(!a)throw new Error("Light used for godrays must have shadow");const r=a.map?.texture??null,n=a.map?.height??1,o=this.material.uniforms;o.density.value=i.density,o.maxDensity.value=i.maxDensity,o.lightPos.value=this.lightWorldPos,o.cameraPos.value=t.position,o.cameraProjectionMatrixInv.value=t.projectionMatrixInverse,o.cameraMatrixWorld.value=t.matrixWorld,o.shadowMap.value=r,o.texelSizeY.value=1/(n*2),o.lightCameraNear.value=a?.camera.near??.1,o.lightCameraFar.value=a?.camera.far??1e3,o.near.value=t.near,o.far.value=t.far,o.density.value=i.density,o.maxDensity.value=i.maxDensity,o.distanceAttenuation.value=i.distanceAttenuation,o.raymarchSteps.value=i.raymarchSteps,t.getWorldDirection(o.cameraDir.value),e instanceof wo||e.isDirectionalLight?o.lightDir.value.copy(e.target.position).sub(e.position).normalize():(e instanceof zn||e.isPointLight)&&o.lightDir.value.copy(t.position).sub(e.position).normalize()}}const c0={density:1/128,maxDensity:.5,edgeStrength:2,edgeRadius:2,distanceAttenuation:2,color:new X(16777215),raymarchSteps:60,blur:!0,gammaCorrection:!0,rayIntensity:3,shadowEdgeBoost:3,scatteringPower:2,mobileLOD:.5,maxRayDistance:50,useSimplifiedShadows:!0},d0=s=>({...c0,...s,color:new X(s.color??c0.color)}),_0={variance:.1,kernelSize:Qo.SMALL},u0=s=>typeof s=="boolean"?{..._0}:{..._0,...s};class gD extends fi{props;depthTexture=null;depthPacking=null;lastParams;godraysRenderTarget=new gt(1,1,{minFilter:yt,magFilter:yt,format:At,type:ns,generateMipmaps:!1});illumPass;enableBlurPass=!0;blurPass=null;blurRenderTarget=null;compositorPass;constructor(e,t,i={}){super("GodraysPass"),this.props={light:e,camera:t};const a=d0(i);this.lastParams=a,this.illumPass=new vD(this.props,a),this.illumPass.needsDepthTexture=!0,this.compositorPass=new oD({godrays:this.godraysRenderTarget.texture,edgeStrength:a.edgeStrength,edgeRadius:a.edgeRadius,color:a.color,camera:t,gammaCorrection:a.gammaCorrection}),this.compositorPass.needsDepthTexture=!0,this.needsDepthTexture=!0,this.setParams(a)}setParams(e){const t=d0(e);if(this.lastParams=t,this.illumPass.updateUniforms(this.props,t),this.compositorPass.updateUniforms(t),this.enableBlurPass=!!t.blur,t.blur&&this.blurPass){const i=u0(t.blur);this.blurPass.material.defines.KSIZE_ENUM!==i.kernelSize&&(this.blurPass.dispose(),this.maybeInitBlur(this.godraysRenderTarget.texture)),this.blurPass.updateUniforms(i)}}maybeInitBlur(e){if(!this.blurPass){this.blurPass=new aD(e);const t=u0(this.lastParams.blur);this.blurPass.updateUniforms(t),this.depthTexture&&this.blurPass.setDepthTexture(this.depthTexture,this.depthPacking??void 0)}this.blurRenderTarget||(this.blurRenderTarget=new gt(Math.ceil(this.godraysRenderTarget.width*Kr),Math.ceil(this.godraysRenderTarget.height*Kr),{minFilter:yt,magFilter:yt,format:At,type:ns,generateMipmaps:!1}))}render(e,t,i,a,r){this.illumPass.render(e,t,this.godraysRenderTarget),this.enableBlurPass?(this.maybeInitBlur(this.godraysRenderTarget.texture),this.blurPass.render(e,this.godraysRenderTarget,this.blurRenderTarget),this.compositorPass.fullscreenMaterial.uniforms.godrays.value=this.blurRenderTarget.texture):this.compositorPass.fullscreenMaterial.uniforms.godrays.value=this.godraysRenderTarget.texture,this.compositorPass.render(e,t,this.renderToScreen?null:i)}setDepthTexture(e,t){this.illumPass.setDepthTexture(e,t),this.compositorPass.setDepthTexture(e,t),this.depthTexture=e,this.depthPacking=t}setSize(e,t){this.godraysRenderTarget.setSize(Math.ceil(e*Ea),Math.ceil(t*Ea)),this.illumPass.setSize(e,t),this.compositorPass.setSize(e,t),this.blurPass?.setSize(Math.ceil(e*Ea),Math.ceil(t*Ea)),this.blurRenderTarget?.setSize(Math.ceil(e*Ea*Kr),Math.ceil(t*Ea*Kr))}dispose(){this.godraysRenderTarget.dispose(),this.illumPass.dispose(),this.compositorPass.dispose(),this.blurPass?.dispose,super.dispose()}}class xD extends tD{engine;light;tweakValues;godraysPass;bloomEffect;vignetteEffect;mainPass;toneMappingEffect;constructor({light:e,engine:t}){super({scene:t.scene,camera:t.camera,sizes:t.sizes,renderer:t.renderer}),this.light=e,this.engine=t,this.tweakValues={bloomIntensity:.1,godrays:!0},this.init(),this.configureTweaks()}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:"Scene.PostProcessing",godrays:{onChange:e=>{e?this.enableGodrays():this.disableGodrays()}},bloomIntensity:{params:{min:0,max:1,step:.01},onChange:e=>{this.bloomEffect.intensity=e}}})}enableGodrays(){this.godraysPass.enabled=!0}disableGodrays(){this.godraysPass.enabled=!1}init(){this.light.once("ready",()=>{this.bloomEffect=new DC({intensity:this.tweakValues.bloomIntensity,luminanceThreshold:1,mipmapBlur:!0,blendFunction:je.ADD});const e={density:nt.scene.godrays.density,maxDensity:.12,edgeStrength:5,edgeRadius:1,distanceAttenuation:0,color:new X(nt.scene.godrays.color),raymarchSteps:25,blur:!0,gammaCorrection:!1};this.godraysPass=new gD(this.light.light,this.engine.camera.instance,e),this.engine.on("global:config:changed",t=>{const i=t?.detail?.config;i&&(i.scene.godrays.color&&(e.color=new X(i.scene.godrays.color)),i.scene.godrays.density&&(e.density=i.scene.godrays.density),this.godraysPass.setParams(e),"enabled"in i.scene.godrays&&(this.godraysPass.enabled=i.scene.godrays.enabled))}),this.vignetteEffect=new KC({offset:.4,technique:Hr.DEFAULT,darkness:.6}),this.toneMappingEffect=new ZC({mode:Ai.ACES_FILMIC,resolution:this.engine.sizes.resolutionAsNumber}),this.mainPass=new o0(this.engine.camera.instance,this.bloomEffect,this.vignetteEffect,...this.advisedEffectPasses,this.toneMappingEffect),this.effectComposer.addPass(this.godraysPass),this.effectComposer.addPass(this.mainPass),this.engine.monitor.on("decline",t=>{const i=t?.detail?.declineLevel;if(i)switch(i){case 1:this.disableGodRays();break;case 5:this.useMinimalEffects();break}})})}disableGodRays(){console.warn("Postprocessing: Low fps detected. Godrays disabled."),this.effectComposer.removePass(this.godraysPass)}useMinimalEffects(){console.warn("Postprocessing: Low fps detected. Disabling antialiasing and vignette."),this.effectComposer.removePass(this.mainPass),this.effectComposer.addPass(new o0(this.engine.camera.instance,this.bloomEffect,this.toneMappingEffect))}}class ko extends Ne{constructor(){super(ko.Geometry,new Mi({opacity:0,transparent:!0})),this.isLensflare=!0,this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;const e=new S,t=new S,i=new gf(16,16),a=new gf(16,16);let r=$t;const n=ko.Geometry,o=new nc({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;

				void main() {

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				void main() {

					gl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );

				}`,depthTest:!0,depthWrite:!1,transparent:!1}),l=new nc({uniforms:{map:{value:i},scale:{value:null},screenPosition:{value:null}},vertexShader:`

				precision highp float;

				uniform vec3 screenPosition;
				uniform vec2 scale;

				attribute vec3 position;
				attribute vec2 uv;

				varying vec2 vUV;

				void main() {

					vUV = uv;

					gl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );

				}`,fragmentShader:`

				precision highp float;

				uniform sampler2D map;

				varying vec2 vUV;

				void main() {

					gl_FragColor = texture2D( map, vUV );

				}`,depthTest:!1,depthWrite:!1,transparent:!1}),h=new Ne(n,o),c=[],d=hr.Shader,_=new nc({name:d.name,uniforms:{map:{value:null},occlusionMap:{value:a},color:{value:new X(16777215)},scale:{value:new $},screenPosition:{value:new S}},vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:Jl,transparent:!0,depthWrite:!1}),u=new Ne(n,_);this.addElement=function(y){c.push(y)};const x=new $,g=new $,v=new J1,f=new et;this.onBeforeRender=function(y,w,p){y.getCurrentViewport(f);const b=y.getRenderTarget(),M=b!==null?b.texture.type:$t;r!==M&&(i.dispose(),a.dispose(),i.type=a.type=M,r=M);const E=f.w/f.z,A=f.z/2,m=f.w/2;let P=16/f.w;if(x.set(P*E,P),v.min.set(f.x,f.y),v.max.set(f.x+(f.z-16),f.y+(f.w-16)),t.setFromMatrixPosition(this.matrixWorld),t.applyMatrix4(p.matrixWorldInverse),!(t.z>0)&&(e.copy(t).applyMatrix4(p.projectionMatrix),g.x=f.x+e.x*A+A-8,g.y=f.y+e.y*m+m-8,v.containsPoint(g))){y.copyFramebufferToTexture(i,g);let I=o.uniforms;I.scale.value=x,I.screenPosition.value=e,y.renderBufferDirect(p,null,n,o,h,null),y.copyFramebufferToTexture(a,g),I=l.uniforms,I.scale.value=x,I.screenPosition.value=e,y.renderBufferDirect(p,null,n,l,h,null);const U=-e.x*2,N=-e.y*2;for(let F=0,W=c.length;F<W;F++){const V=c[F],j=_.uniforms;j.color.value.copy(V.color),j.map.value=V.texture,j.screenPosition.value.x=e.x+U*V.distance,j.screenPosition.value.y=e.y+N*V.distance,P=V.size/f.w;const G=f.w/f.z;j.scale.value.set(P*G,P),_.uniformsNeedUpdate=!0,y.renderBufferDirect(p,null,n,_,u,null)}}},this.dispose=function(){o.dispose(),l.dispose(),_.dispose(),i.dispose(),a.dispose();for(let y=0,w=c.length;y<w;y++)c[y].texture.dispose()}}}class hr{constructor(e,t=1,i=0,a=new X(16777215)){this.texture=e,this.size=t,this.distance=i,this.color=a}}hr.Shader={name:"LensflareElementShader",uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:`

		precision highp float;

		uniform vec3 screenPosition;
		uniform vec2 scale;

		uniform sampler2D occlusionMap;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vUV = uv;

			vec2 pos = position.xy;

			vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );
			visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );
			visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );

			vVisibility =        visibility.r / 9.0;
			vVisibility *= 1.0 - visibility.g / 9.0;
			vVisibility *=       visibility.b / 9.0;

			gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );

		}`,fragmentShader:`

		precision highp float;

		uniform sampler2D map;
		uniform vec3 color;

		varying vec2 vUV;
		varying float vVisibility;

		void main() {

			vec4 texture = texture2D( map, vUV );
			texture.a *= vVisibility;
			gl_FragColor = texture;
			gl_FragColor.rgb *= color;

		}`};ko.Geometry=(function(){const s=new Wt,e=new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),t=new R0(e,5);return s.setIndex([0,1,2,0,2,3]),s.setAttribute("position",new yo(t,3,0,!1)),s.setAttribute("uv",new yo(t,2,3,!1)),s})();function dp(s){const e=St.between(10,20),t=St.between(.1,.25);ka.to(s,{intensity:e,duration:t,ease:"power1.inOut",onComplete:()=>dp(s)})}class pD extends ui{engine;tweakValues;resources;mainLight;lensflare;sunAnchor;constructor({engine:e,resources:t,initialTweaks:i}){super(),this.tweakValues=i,this.engine=e,this.resources=t,this.init(),this.configureTweaks(),this.engine.on("global:config:changed",a=>this.configChanged(a?.detail?.config))}configChanged(e){e&&(e.scene.light.sunColor&&this.changeSunColor(e.scene.light.sunColor),e.scene.light.lensflare&&(this.lensflare.visible=e.scene.light.lensflare.enabled))}changeSunColor(e){this.mainLight&&(this.mainLight.color=new X(e))}changeSunIntensity(e){this.mainLight&&(this.mainLight.intensity=e)}configureTweaks(){this.engine.tweaks.configure(this.tweakValues,{folder:"Scene.Light",sunColor:{params:{type:"color"},onChange:this.changeSunColor.bind(this)},sunIntensity:{params:{type:"number",min:0,max:10,step:.1},onChange:this.changeSunIntensity.bind(this)}})}get light(){return this.mainLight}init(){this.resources.onceAll(["loaded:lensFlare0","loaded:lensFlare1"],()=>{this.initLights(),this.emit("ready")})}initLights(){const e=new S(-47,40,0);this.mainLight=new wo(this.tweakValues.sunColor,this.tweakValues.sunIntensity),this.mainLight.position.copy(e),this.mainLight.target.position.set(0,0,0),this.mainLight.castShadow=!0;const t=50;this.mainLight.shadow.mapSize.set(2048,2048),this.mainLight.shadow.camera.left=-t,this.mainLight.shadow.camera.right=t+5.5,this.mainLight.shadow.camera.top=t-4,this.mainLight.shadow.camera.bottom=-t+3,this.mainLight.shadow.camera.near=0,this.mainLight.shadow.camera.far=100,this.mainLight.shadow.autoUpdate=!1;let i=new zn("#ff6a00",20,3,4);i.position.set(3.1,.35,-.4),dp(i),this.engine.scene.add(i),this.initLensFlare(),this.engine.scene.add(this.mainLight),this.engine.scene.add(this.mainLight.target)}get mainLightDirection(){return this.mainLight.position.clone().sub(this.mainLight.target.position).normalize()}get mainLightColor(){return this.mainLight.color}initLensFlare(){this.sunAnchor=new ut,this.sunAnchor.position.copy(this.mainLight.position);const e=this.resources.items.lensFlare0,t=this.resources.items.lensFlare1;this.lensflare=new ko,this.lensflare.layers.enable(1),this.lensflare.addElement(new hr(e,700,0,this.mainLight.color)),this.lensflare.addElement(new hr(t,60,.6)),this.lensflare.addElement(new hr(t,70,.7)),this.lensflare.addElement(new hr(t,120,.9)),this.lensflare.addElement(new hr(t,70,1)),this.sunAnchor.add(this.lensflare),this.sunAnchor.frustumCulled=!1,this.engine.scene.add(this.sunAnchor)}updateShadows(){this.mainLight&&(this.mainLight.shadow.needsUpdate=!0)}update(){if(!this.sunAnchor)return;const e=this.engine.camera.instance,t=this.mainLight.position.clone().normalize();this.sunAnchor.position.copy(e.position).add(t.multiplyScalar(30))}destroy(){this.mainLight?.dispose(),this.lensflare?.dispose()}}class mD extends ui{group;engine;resources;environment;world;light;eventBus;cameraSpots;tweakValues;introPlayed;reachedLowEndPerfProfile;constructor({canvas:e,initialSizes:t,eventBus:i}){super(),this.introPlayed=!1,this.reachedLowEndPerfProfile=!1,this.tweakValues={bgColor:"#142424",enablePan:!1,enableZoom:!1},this.eventBus=i,this.engine=new QE({canvas:e,initialSizes:t,eventBus:i}),this.engine.scene.background=new X(this.tweakValues.bgColor),this.engine.camera.controls.enableZoom=this.tweakValues.enableZoom,this.engine.camera.controls.enablePan=this.tweakValues.enablePan,this.engine.camera.controls.enableRotate=!1,this.resources=new UA(BA),this.light=new pD({engine:this.engine,resources:this.resources,initialTweaks:{sunColor:nt.scene.light.sunColor,sunIntensity:nt.scene.light.sunIntensity}}),this.engine.usePostProcessing(new xD({engine:this.engine,light:this.light})),this.group=new ys,this.engine.scene.add(this.group),this.engine.renderer.instance.shadowMap.enabled=!0,this.environment=new $E({group:this.group,engine:this.engine,resources:this.resources}),this.world=new AI({light:this.light,group:this.group,engine:this.engine,resources:this.resources,environment:this.environment}),this.configureTweaks(),this.engine.on("update",()=>{this.update()}),this.resources.on("ready",()=>{this.emit("ready"),this.light.updateShadows(),setTimeout(()=>this.engine.monitor.start(),1e3)}),this.cameraSpots=new lI({engine:this.engine}),this.cameraSpots.on(Ua.INTRO_PLAYED,()=>{this.engine.camera.controls.enableRotate=!0,this.introPlayed=!0,this.deleteCloudsForLowEndDevices()}),this.engine.monitor.on("decline",a=>{const r=a?.detail?.declineLevel;if(r)switch(r){case 5:this.reachedLowEndPerfProfile=!0,this.deleteCloudsForLowEndDevices();break}})}deleteCloudsForLowEndDevices(){this.reachedLowEndPerfProfile&&this.introPlayed&&this.world.islands.clouds.destroy()}get tweaks(){return this.engine.tweaks}configureTweaks(){this.tweaks.configure(this.tweakValues,{folder:"Scene",bgColor:{onChange:e=>{this.engine.scene.background=new X(e)}},enableZoom:{onChange:e=>{this.engine.camera.controls.enableZoom=e}},enablePan:{onChange:e=>{this.engine.camera.controls.enablePan=e}}})}update(){this.world?.update(),this.environment.update(),this.light.update()}resetCanva(){const e=this.engine.canvas.getContext("webgl2");e&&(e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT))}destroy(){this.engine.scene.remove(this.group),this.light.destroy(),this.world?.destroy(),this.environment.destroy(),this.engine.destroy(),this.resetCanva(),this.resources.destroy()}}class yD{eventTargets=new Map;listenerMap=new Map;constructor(){this.registerTarget("window",window),this.registerTarget("document",document)}registerTarget(e,t){this.eventTargets.set(e,t)}dispatch(e,t,i){const a=this.eventTargets.get(e);if(!a){console.warn(`EventBus: No target registered for namespace "${e}"`);return}const r=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0});a.dispatchEvent(r)}subscribe(e,t,i,{options:a}={}){const r=this.eventTargets.get(e);if(!r){console.warn(`EventBus: No target registered for namespace "${e}"`);return}const n=l=>{l instanceof CustomEvent?i(l.detail,l):i(l)},o=this.getListenerKey(e,t,i);this.listenerMap.set(o,n),r.addEventListener(t,n,a)}unsubscribe(e,t,i){const a=this.eventTargets.get(e);if(!a){console.warn(`EventBus: No target registered for namespace "${e}"`);return}const r=this.getListenerKey(e,t,i),n=this.listenerMap.get(r);n&&(a.removeEventListener(t,n),this.listenerMap.delete(r))}getListenerKey(e,t,i){return`${e}:${t}:${i.toString()}`}dispose(){this.listenerMap.forEach((e,t)=>{const[i,a]=t.split(":"),r=this.eventTargets.get(i);r&&r.removeEventListener(a,e)}),this.listenerMap.clear(),this.eventTargets.clear()}}var _p=(s=>(s.START_BUTTON_CLICKED="ui.loading:startButtonClicked",s))(_p||{});class wD extends ui{experience;dayTimeSwitch;constructor(e,t){super(),this.dayTimeSwitch=t,this.experience=e,this.init()}init(){const e=document.querySelector(".loading"),t=document.querySelector(".progress-percentage"),i=document.querySelector(".loading-text"),a=document.querySelector(".loading button");this.experience.cameraSpots.on(Ua.INTRO_PLAYED,()=>e.classList.add("hidden")),a.addEventListener("click",()=>{this.emit("ui.loading:startButtonClicked"),this.experience.engine.audio.items.button?.play(),this.dayTimeSwitch.isDay()?(this.experience.engine.audio.items.ambientAudio?.play(),this.experience.engine.audio.items.ambientMusic?.play()):(this.experience.engine.audio.items.ambientNightAudio?.play(),this.experience.engine.audio.items.ambientNightMusic?.play()),this.experience.engine.audio.items.wind?.play(),this.experience.engine.audio.items["waterfall-0"]?.play(),this.experience.engine.audio.items["waterfall-1"]?.play(),this.experience.engine.audio.items["waterfall-2"]?.play(),this.experience.engine.audio.items["waterfall-3"]?.play(),e.classList.add("loaded"),i.classList.add("hidden"),a.classList.add("hidden"),t.classList.add("hidden"),setTimeout(()=>{this.experience.cameraSpots.playIntro()},50)}),this.experience.resources.on("loaded",({detail:{total:r,loaded:n}}={})=>{const o=Math.round(n/r*100),l=t.querySelector(".circle span");l.innerHTML=`${o}%`,r===n&&(a.classList.remove("hidden"),e.classList.add("ready"),l.classList.add("hidden"))})}}class zD{experience;loading;constructor(e,t){this.experience=e,this.loading=t,this.init()}init(){let e;this.experience.resources.once("loaded:soundButton",()=>{e=this.experience.engine.audio.createAmbientAudio("button",this.experience.resources.items.soundButton,{loop:!1,volume:.5})});const t=document.querySelector(".sound-icon");this.loading.on(_p.START_BUTTON_CLICKED,()=>{t.classList.remove("hidden")}),t.addEventListener("click",()=>{e?.stop(),e?.play(),t.getAttribute("data-sound")==="on"?(t.setAttribute("data-sound","off"),this.experience.engine.audio.disable()):(t.setAttribute("data-sound","on"),this.experience.engine.audio.enable())}),document.addEventListener("visibilitychange",()=>{t.getAttribute("data-sound")==="on"&&(document.visibilityState==="visible"?this.experience.engine.audio.enable():this.experience.engine.audio.disable())}),document.visibilityState!=="visible"&&this.experience.engine.audio.disable()}}var up=(s=>(s.CHOOSED_CONTACT="CHOOSE_CONTACT",s))(up||{});class PD extends ui{experience;navHome;navAbout;navContact;homeSection;aboutSection;contactSection;closeAboutSection;lastDisplayedSection;currentlyDisplayedSection;constructor(e){super(),this.experience=e,this.navHome=document.querySelector('nav a[href="#home"]'),this.navAbout=document.querySelector('nav a[href="#about"]'),this.navContact=document.querySelector('nav a[href="#contact"]'),this.homeSection=document.querySelector("#home"),this.aboutSection=document.querySelector("#about"),this.contactSection=document.querySelector("#contact"),this.closeAboutSection=document.querySelector("#about .close"),this.lastDisplayedSection="home",this.currentlyDisplayedSection="home",this.init()}updateBodyAttribute(e){window.document.body.setAttribute("data-section",e)}display(e){let t=!this.isSectionActive(e);switch(e){case"about":this.displayAbout();break;case"contact":this.displayContact();break;case"home":this.displayHome();break;default:throw new Error(`Unsupported Navigation item ${e} supplied`)}t&&(this.lastDisplayedSection=this.currentlyDisplayedSection,this.currentlyDisplayedSection=e)}displayHome(){this.isSectionActive("home")||(this.experience.engine.camera.enableControls(),this.experience.engine.audio.items.button.stop(),this.experience.engine.audio.items.button.play(),[this.aboutSection,this.contactSection].forEach(e=>{e.classList.add("hidden")}),[this.navAbout,this.navContact].forEach(e=>{e.classList.remove("active")}),this.navHome.classList.add("active"),this.homeSection.classList.remove("hidden"),this.updateBodyAttribute("home"))}isSectionActive(e){switch(e){case"about":return this.navAbout.classList.contains("active");case"contact":return this.navContact.classList.contains("active");case"home":return this.navHome.classList.contains("active");default:throw new Error(`Unsupported Navigation item ${e}`)}}displayAbout(){if(this.isSectionActive("about")){if(this.lastDisplayedSection==="about")return;this.display(this.lastDisplayedSection);return}this.experience.engine.camera.enableControls(),this.experience.engine.audio.items.button.stop(),this.experience.engine.audio.items.button.play(),[this.homeSection,this.contactSection].forEach(e=>{e.classList.add("hidden")}),[this.navHome,this.navContact].forEach(e=>{e.classList.remove("active")}),this.navAbout.classList.add("active"),this.aboutSection.classList.remove("hidden"),this.updateBodyAttribute("about")}displayContact(){this.isSectionActive("contact")||(this.isSectionActive("about")&&this.displayHome(),this.experience.engine.audio.items.button.stop(),this.experience.engine.audio.items.button.play(),this.emit("CHOOSE_CONTACT"),this.experience.cameraSpots.goTo("contact",{ease:"power1.inOut",onComplete:()=>{this.showContactUi()}}))}showContactUi(){this.experience.engine.camera.disableControls(),[this.homeSection,this.aboutSection].forEach(e=>{e.classList.add("hidden")}),[this.navHome,this.navAbout].forEach(e=>{e.classList.remove("active")}),this.navContact.classList.add("active"),this.contactSection.classList.remove("hidden"),this.updateBodyAttribute("contact")}init(){const e=document.querySelector("nav");this.experience.cameraSpots.on(Ua.INTRO_PLAYED,()=>{e.classList.remove("hidden")}),this.navHome.addEventListener("click",()=>this.display("home")),this.navAbout.addEventListener("click",()=>this.display("about")),this.navContact.addEventListener("click",()=>this.display("contact")),this.closeAboutSection.addEventListener("click",()=>this.display("about"))}}class bD{experience;constructor(e){this.experience=e,this.init()}init(){const e=this.experience,t=document.querySelector(".swarm-switch .left"),i=document.querySelector(".social-media .left-arrow"),a=document.querySelector(".swarm-switch .right"),r=document.querySelector(".social-media .right-arrow");function n(){return document.querySelector(".social-media ul li.active a")}function o(){return document.querySelectorAll(".social-media ul li a")}function l(){const u=n(),x=o(),g=Array.from(x).indexOf(u);return g===x.length-1?x[0]:x[g+1]}function h(){const u=n(),x=o(),g=Array.from(x).indexOf(u);return g===0?x[x.length-1]:x[g-1]}function c(u){n().parentNode?.classList.remove("active"),u.parentNode?.classList.add("active")}function d(){const u=l();switch(u.getAttribute("data-social-media")){case"youtube":e.world.islands.swarm.displayYoutube();break;case"x":e.world.islands.swarm.displayX();break;case"linkedin":e.world.islands.swarm.displayLinkedIn();break;default:e.world.islands.swarm.displayDefault();break}c(u)}function _(){const u=h();switch(u.getAttribute("data-social-media")){case"youtube":e.world.islands.swarm.displayYoutube();break;case"x":e.world.islands.swarm.displayX();break;case"linkedin":e.world.islands.swarm.displayLinkedIn();break;default:e.world.islands.swarm.displayDefault();break}c(u)}t.addEventListener("click",_),i.addEventListener("click",_),a.addEventListener("click",d),r.addEventListener("click",d),window.addEventListener(vh.EXPLODED,d)}}var fp=(s=>(s.LOOK_AROUND_HINT_HIDDEN="LOOK_AROUND_HINT_HIDDEN",s))(fp||{});class TD extends ui{experience;constructor(e){super(),this.experience=e,this.init()}init(){const e=document.querySelector(".look-around-hint");this.experience.cameraSpots.on(Ua.INTRO_PLAYED,()=>{document.addEventListener("pointerdown",()=>{e.classList.remove("show"),this.emit("LOOK_AROUND_HINT_HIDDEN")},{once:!0}),e.classList.add("show")})}}var vp=(s=>(s.REACHED="ViewPoints:reached",s))(vp||{});class SD extends ui{experience;pointTemplate;points;position;raycaster;homeSection;mainMenu;viewPointsProgress;viewPointsProgressText;occluder;hintContainer;hasSelectedPoint=!1;hintTarget=new $;hintCurrent=new $;hintLerpFactor=.2;hintCanBeShown=!1;visitedCount=1;constructor(e,t,i){super(),this.homeSection=t,this.experience=e,this.mainMenu=i,this.pointTemplate=document.getElementById("point-template"),this.points={},this.position=new S,this.raycaster=new H0,this.viewPointsProgress=document.querySelector(".viewpoints-progress"),this.viewPointsProgressText=document.querySelector(".viewpoints-progress span"),this.hintContainer=document.querySelector(".explore-hint"),this.init()}updateVisitedCount(){this.viewPointsProgressText.innerText=`${this.visitedCount}/${Object.values(this.points).length}`}createPoints(){const e=document.getElementById("home");Object.entries(this.experience.cameraSpots.points).forEach(([t,i],a)=>{if(i.invisible)return;const r=this.pointTemplate.content.cloneNode(!0),n=r.querySelector(".circle-container");a===0&&n.classList.add("current","visited"),this.points[t]=n,e.appendChild(r),n.addEventListener("click",o=>{o.stopPropagation(),this.hasSelectedPoint=!0,n.classList.contains("visited")||(this.visitedCount++,this.updateVisitedCount()),n.classList.add("visited"),Object.values(this.points).forEach(l=>{l.classList.remove("current")}),this.experience.cameraSpots.goTo(t,{onComplete:()=>{this.emit("ViewPoints:reached",new CustomEvent("ViewPoints:reached",{detail:{point:t}})),this.points[t].classList.add("current"),this.hintContainer.classList.add("hidden")}})})}),this.updateVisitedCount()}isPointOccluded(e){const t=this.experience.engine.camera.instance.position,i=new S().subVectors(e,t).normalize(),a=t.distanceTo(e);return this.raycaster.set(t,i),this.raycaster.far=a-.1,this.raycaster.intersectObjects([this.occluder]).length>0}init(){this.createPoints(),this.mainMenu.on(up.CHOOSED_CONTACT,()=>{Object.values(this.points)[1].classList.contains("visited")||(Object.values(this.points)[1].classList.add("visited"),this.visitedCount++,this.updateVisitedCount(),this.hasSelectedPoint=!0,this.hintContainer.classList.remove("show"))}),this.homeSection.on(fp.LOOK_AROUND_HINT_HIDDEN,()=>{setTimeout(()=>{this.hintContainer.classList.add("show"),this.hintCanBeShown=!0,this.viewPointsProgress.classList.remove("hidden")},1e3)}),this.experience.cameraSpots.on(Ua.TRAVEL_STARTED,()=>{this.experience.world.islands.clouds?.disableSorting()}),this.experience.cameraSpots.on(Ua.TRAVEL_ENDED,()=>{this.experience.world.islands.clouds?.enableSorting(),this.experience.world.islands.clouds?.sort()}),this.experience.resources.once("loaded:testIsland",()=>{this.occluder=this.experience.world.islands.simplifiedScene,this.experience.engine.time.on("tick",()=>{let e=null;Object.entries(this.points).forEach(([t,i])=>{if(i.classList.contains("current"))return;const{position:a}=this.experience.cameraSpots.points[t],r=this.experience.engine.camera.instance.position.distanceTo(a);if(r>20){i.classList.add("too-far");return}const n=this.isPointOccluded(a);if(this.position.copy(a),this.position.project(this.experience.engine.camera.instance),!(this.position.z>0&&this.position.z<1&&this.position.x>=-1&&this.position.x<=1&&this.position.y>=-1&&this.position.y<=1)||n){i.classList.add("occluded");return}i.classList.remove("occluded"),i.classList.remove("too-far");const l=(this.position.x*.5+.5)*this.experience.engine.sizes.width,h=(-this.position.y*.5+.5)*this.experience.engine.sizes.height,x=sa.clamp(1*(10/r),.1,2);i.style.transform=`translate(${l}px, ${h}px) scale(${x})`;const g=this.position.x,v=this.position.y,f=Math.sqrt(g*g+v*v);(!e||f<e.dist)&&(e={x:l,y:h,dist:f})}),!this.hasSelectedPoint&&e?(this.hintCanBeShown&&this.hintContainer.classList.add("show"),this.hintTarget.set(e.x+20,e.y),this.hintCurrent.lerp(this.hintTarget,this.hintLerpFactor),this.hintContainer.style.transform=`translate(${this.hintCurrent.x}px, ${this.hintCurrent.y}px)`):this.hintContainer.classList.remove("show")})})}}class ED{experience;constructor(e){this.experience=e,this.init()}init(){const e=new dI(this.experience),t=new wD(this.experience,e);new zD(this.experience,t),new bD(this.experience);const i=new TD(this.experience),a=new PD(this.experience);new SD(this.experience,i,a).on(vp.REACHED,({detail:{point:o}})=>{o==="contact"&&a.display("contact")}),document.getElementById("about").addEventListener("touchmove",o=>{o.stopPropagation()},{passive:!1});const n=!!navigator.serviceWorker.controller;navigator.serviceWorker.addEventListener("controllerchange",()=>{if(!n)return;const o=document.querySelector(".update"),l=o.querySelector(".countdown");o.classList.remove("hidden"),o.querySelector("button")?.addEventListener("pointerdown",()=>{window.location.reload()});let h=30;const c=setInterval(()=>{h--,l.textContent=String(h),h<=0&&(clearInterval(c),window.location.reload())},1e3)})}}const gp=document.querySelector("canvas.webgl"),AD={width:window.innerWidth,height:window.innerHeight,devicePixelRatio:window.devicePixelRatio},xp=new yD;xp.registerTarget("canvas",gp);const MD=new mD({canvas:gp,initialSizes:AD,eventBus:xp});new ED(MD);
//# sourceMappingURL=index-BqsIJDOm.js.map
